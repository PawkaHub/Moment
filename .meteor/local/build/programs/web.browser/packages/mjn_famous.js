//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
//                                                                      //
// If you are using Chrome, open the Developer Tools and click the gear //
// icon in its lower right corner. In the General Settings panel, turn  //
// on 'Enable source maps'.                                             //
//                                                                      //
// If you are using Firefox 23, go to `about:config` and set the        //
// `devtools.debugger.source-maps-enabled` preference to true.          //
// (The preference should be on by default in Firefox 24; versions      //
// older than 23 do not support source maps.)                           //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;

/* Package-scope variables */
var famous;

(function () {

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                   //
// packages/mjn:famous/famous.js                                                                                     //
//                                                                                                                   //
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                     //
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports = function (css, customDocument) {                                                                    // 2
  var doc = customDocument || document;                                                                              // 3
  if (doc.createStyleSheet) {                                                                                        // 4
    doc.createStyleSheet().cssText = css;                                                                            // 5
  } else {                                                                                                           // 6
    var head = doc.getElementsByTagName('head')[0],                                                                  // 7
        style = doc.createElement('style');                                                                          // 8
                                                                                                                     // 9
    style.type = 'text/css';                                                                                         // 10
                                                                                                                     // 11
    if (style.styleSheet) {                                                                                          // 12
      style.styleSheet.cssText = css;                                                                                // 13
    } else {                                                                                                         // 14
      style.appendChild(doc.createTextNode(css));                                                                    // 15
    }                                                                                                                // 16
                                                                                                                     // 17
    head.appendChild(style);                                                                                         // 18
  }                                                                                                                  // 19
};                                                                                                                   // 20
                                                                                                                     // 21
module.exports.byUrl = function(url) {                                                                               // 22
  if (document.createStyleSheet) {                                                                                   // 23
    document.createStyleSheet(url);                                                                                  // 24
  } else {                                                                                                           // 25
    var head = document.getElementsByTagName('head')[0],                                                             // 26
        link = document.createElement('link');                                                                       // 27
                                                                                                                     // 28
    link.rel = 'stylesheet';                                                                                         // 29
    link.href = url;                                                                                                 // 30
                                                                                                                     // 31
    head.appendChild(link);                                                                                          // 32
  }                                                                                                                  // 33
};                                                                                                                   // 34
                                                                                                                     // 35
},{}],2:[function(require,module,exports){                                                                           // 36
                                                                                                                     // 37
/*                                                                                                                   // 38
 * classList.js: Cross-browser full element.classList implementation.                                                // 39
 * 2011-06-15                                                                                                        // 40
 *                                                                                                                   // 41
 * By Eli Grey, http://eligrey.com                                                                                   // 42
 * Public Domain.                                                                                                    // 43
 * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.                                                           // 44
 */                                                                                                                  // 45
                                                                                                                     // 46
/*global self, document, DOMException */                                                                             // 47
                                                                                                                     // 48
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/                                   // 49
                                                                                                                     // 50
if (typeof document !== "undefined" && !("classList" in document.createElement("a"))) {                              // 51
                                                                                                                     // 52
(function (view) {                                                                                                   // 53
                                                                                                                     // 54
"use strict";                                                                                                        // 55
                                                                                                                     // 56
var                                                                                                                  // 57
      classListProp = "classList"                                                                                    // 58
    , protoProp = "prototype"                                                                                        // 59
    , elemCtrProto = (view.HTMLElement || view.Element)[protoProp]                                                   // 60
    , objCtr = Object                                                                                                // 61
    , strTrim = String[protoProp].trim || function () {                                                              // 62
        return this.replace(/^\s+|\s+$/g, "");                                                                       // 63
    }                                                                                                                // 64
    , arrIndexOf = Array[protoProp].indexOf || function (item) {                                                     // 65
        var                                                                                                          // 66
              i = 0                                                                                                  // 67
            , len = this.length                                                                                      // 68
        ;                                                                                                            // 69
        for (; i < len; i++) {                                                                                       // 70
            if (i in this && this[i] === item) {                                                                     // 71
                return i;                                                                                            // 72
            }                                                                                                        // 73
        }                                                                                                            // 74
        return -1;                                                                                                   // 75
    }                                                                                                                // 76
    // Vendors: please allow content code to instantiate DOMExceptions                                               // 77
    , DOMEx = function (type, message) {                                                                             // 78
        this.name = type;                                                                                            // 79
        this.code = DOMException[type];                                                                              // 80
        this.message = message;                                                                                      // 81
    }                                                                                                                // 82
    , checkTokenAndGetIndex = function (classList, token) {                                                          // 83
        if (token === "") {                                                                                          // 84
            throw new DOMEx(                                                                                         // 85
                  "SYNTAX_ERR"                                                                                       // 86
                , "An invalid or illegal string was specified"                                                       // 87
            );                                                                                                       // 88
        }                                                                                                            // 89
        if (/\s/.test(token)) {                                                                                      // 90
            throw new DOMEx(                                                                                         // 91
                  "INVALID_CHARACTER_ERR"                                                                            // 92
                , "String contains an invalid character"                                                             // 93
            );                                                                                                       // 94
        }                                                                                                            // 95
        return arrIndexOf.call(classList, token);                                                                    // 96
    }                                                                                                                // 97
    , ClassList = function (elem) {                                                                                  // 98
        var                                                                                                          // 99
              trimmedClasses = strTrim.call(elem.className)                                                          // 100
            , classes = trimmedClasses ? trimmedClasses.split(/\s+/) : []                                            // 101
            , i = 0                                                                                                  // 102
            , len = classes.length                                                                                   // 103
        ;                                                                                                            // 104
        for (; i < len; i++) {                                                                                       // 105
            this.push(classes[i]);                                                                                   // 106
        }                                                                                                            // 107
        this._updateClassName = function () {                                                                        // 108
            elem.className = this.toString();                                                                        // 109
        };                                                                                                           // 110
    }                                                                                                                // 111
    , classListProto = ClassList[protoProp] = []                                                                     // 112
    , classListGetter = function () {                                                                                // 113
        return new ClassList(this);                                                                                  // 114
    }                                                                                                                // 115
;                                                                                                                    // 116
// Most DOMException implementations don't allow calling DOMException's toString()                                   // 117
// on non-DOMExceptions. Error's toString() is sufficient here.                                                      // 118
DOMEx[protoProp] = Error[protoProp];                                                                                 // 119
classListProto.item = function (i) {                                                                                 // 120
    return this[i] || null;                                                                                          // 121
};                                                                                                                   // 122
classListProto.contains = function (token) {                                                                         // 123
    token += "";                                                                                                     // 124
    return checkTokenAndGetIndex(this, token) !== -1;                                                                // 125
};                                                                                                                   // 126
classListProto.add = function (token) {                                                                              // 127
    token += "";                                                                                                     // 128
    if (checkTokenAndGetIndex(this, token) === -1) {                                                                 // 129
        this.push(token);                                                                                            // 130
        this._updateClassName();                                                                                     // 131
    }                                                                                                                // 132
};                                                                                                                   // 133
classListProto.remove = function (token) {                                                                           // 134
    token += "";                                                                                                     // 135
    var index = checkTokenAndGetIndex(this, token);                                                                  // 136
    if (index !== -1) {                                                                                              // 137
        this.splice(index, 1);                                                                                       // 138
        this._updateClassName();                                                                                     // 139
    }                                                                                                                // 140
};                                                                                                                   // 141
classListProto.toggle = function (token) {                                                                           // 142
    token += "";                                                                                                     // 143
    if (checkTokenAndGetIndex(this, token) === -1) {                                                                 // 144
        this.add(token);                                                                                             // 145
    } else {                                                                                                         // 146
        this.remove(token);                                                                                          // 147
    }                                                                                                                // 148
};                                                                                                                   // 149
classListProto.toString = function () {                                                                              // 150
    return this.join(" ");                                                                                           // 151
};                                                                                                                   // 152
                                                                                                                     // 153
if (objCtr.defineProperty) {                                                                                         // 154
    var classListPropDesc = {                                                                                        // 155
          get: classListGetter                                                                                       // 156
        , enumerable: true                                                                                           // 157
        , configurable: true                                                                                         // 158
    };                                                                                                               // 159
    try {                                                                                                            // 160
        objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);                                       // 161
    } catch (ex) { // IE 8 doesn't support enumerable:true                                                           // 162
        if (ex.number === -0x7FF5EC54) {                                                                             // 163
            classListPropDesc.enumerable = false;                                                                    // 164
            objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);                                   // 165
        }                                                                                                            // 166
    }                                                                                                                // 167
} else if (objCtr[protoProp].__defineGetter__) {                                                                     // 168
    elemCtrProto.__defineGetter__(classListProp, classListGetter);                                                   // 169
}                                                                                                                    // 170
                                                                                                                     // 171
}(self));                                                                                                            // 172
                                                                                                                     // 173
}                                                                                                                    // 174
                                                                                                                     // 175
},{}],3:[function(require,module,exports){                                                                           // 176
if (!Function.prototype.bind) {                                                                                      // 177
    Function.prototype.bind = function (oThis) {                                                                     // 178
        if (typeof this !== "function") {                                                                            // 179
            // closest thing possible to the ECMAScript 5 internal IsCallable function                               // 180
            throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");             // 181
        }                                                                                                            // 182
                                                                                                                     // 183
        var aArgs = Array.prototype.slice.call(arguments, 1),                                                        // 184
        fToBind = this,                                                                                              // 185
        fNOP = function () {},                                                                                       // 186
        fBound = function () {                                                                                       // 187
            return fToBind.apply(this instanceof fNOP && oThis                                                       // 188
                ? this                                                                                               // 189
                : oThis,                                                                                             // 190
                aArgs.concat(Array.prototype.slice.call(arguments)));                                                // 191
        };                                                                                                           // 192
                                                                                                                     // 193
        fNOP.prototype = this.prototype;                                                                             // 194
        fBound.prototype = new fNOP();                                                                               // 195
                                                                                                                     // 196
        return fBound;                                                                                               // 197
    };                                                                                                               // 198
}                                                                                                                    // 199
                                                                                                                     // 200
},{}],4:[function(require,module,exports){                                                                           // 201
require('./classList.js');                                                                                           // 202
require('./functionPrototypeBind.js');                                                                               // 203
require('./requestAnimationFrame.js');                                                                               // 204
},{"./classList.js":2,"./functionPrototypeBind.js":3,"./requestAnimationFrame.js":5}],5:[function(require,module,exports){
// adds requestAnimationFrame functionality                                                                          // 206
// Source: http://strd6.com/2011/05/better-window-requestanimationframe-shim/                                        // 207
                                                                                                                     // 208
window.requestAnimationFrame || (window.requestAnimationFrame =                                                      // 209
  window.webkitRequestAnimationFrame ||                                                                              // 210
  window.mozRequestAnimationFrame    ||                                                                              // 211
  window.oRequestAnimationFrame      ||                                                                              // 212
  window.msRequestAnimationFrame     ||                                                                              // 213
  function(callback, element) {                                                                                      // 214
    return window.setTimeout(function() {                                                                            // 215
      callback(+new Date());                                                                                         // 216
  }, 1000 / 60);                                                                                                     // 217
});                                                                                                                  // 218
                                                                                                                     // 219
},{}],6:[function(require,module,exports){                                                                           // 220
var RenderNode = require('./RenderNode');                                                                            // 221
var EventHandler = require('./EventHandler');                                                                        // 222
var ElementAllocator = require('./ElementAllocator');                                                                // 223
var Transform = require('./Transform');                                                                              // 224
var Transitionable = require('famous/transitions/Transitionable');                                                   // 225
var _zeroZero = [                                                                                                    // 226
        0,                                                                                                           // 227
        0                                                                                                            // 228
    ];                                                                                                               // 229
var usePrefix = !('perspective' in document.documentElement.style);                                                  // 230
function _getElementSize(element) {                                                                                  // 231
    return [                                                                                                         // 232
        element.clientWidth,                                                                                         // 233
        element.clientHeight                                                                                         // 234
    ];                                                                                                               // 235
}                                                                                                                    // 236
var _setPerspective = usePrefix ? function (element, perspective) {                                                  // 237
        element.style.webkitPerspective = perspective ? perspective.toFixed() + 'px' : '';                           // 238
    } : function (element, perspective) {                                                                            // 239
        element.style.perspective = perspective ? perspective.toFixed() + 'px' : '';                                 // 240
    };                                                                                                               // 241
function Context(container) {                                                                                        // 242
    this.container = container;                                                                                      // 243
    this._allocator = new ElementAllocator(container);                                                               // 244
    this._node = new RenderNode();                                                                                   // 245
    this._eventOutput = new EventHandler();                                                                          // 246
    this._size = _getElementSize(this.container);                                                                    // 247
    this._perspectiveState = new Transitionable(0);                                                                  // 248
    this._perspective = undefined;                                                                                   // 249
    this._nodeContext = {                                                                                            // 250
        allocator: this._allocator,                                                                                  // 251
        transform: Transform.identity,                                                                               // 252
        opacity: 1,                                                                                                  // 253
        origin: _zeroZero,                                                                                           // 254
        align: _zeroZero,                                                                                            // 255
        size: this._size                                                                                             // 256
    };                                                                                                               // 257
    this._eventOutput.on('resize', function () {                                                                     // 258
        this.setSize(_getElementSize(this.container));                                                               // 259
    }.bind(this));                                                                                                   // 260
}                                                                                                                    // 261
Context.prototype.getAllocator = function getAllocator() {                                                           // 262
    return this._allocator;                                                                                          // 263
};                                                                                                                   // 264
Context.prototype.add = function add(obj) {                                                                          // 265
    return this._node.add(obj);                                                                                      // 266
};                                                                                                                   // 267
Context.prototype.migrate = function migrate(container) {                                                            // 268
    if (container === this.container)                                                                                // 269
        return;                                                                                                      // 270
    this.container = container;                                                                                      // 271
    this._allocator.migrate(container);                                                                              // 272
};                                                                                                                   // 273
Context.prototype.getSize = function getSize() {                                                                     // 274
    return this._size;                                                                                               // 275
};                                                                                                                   // 276
Context.prototype.setSize = function setSize(size) {                                                                 // 277
    if (!size)                                                                                                       // 278
        size = _getElementSize(this.container);                                                                      // 279
    this._size[0] = size[0];                                                                                         // 280
    this._size[1] = size[1];                                                                                         // 281
};                                                                                                                   // 282
Context.prototype.update = function update(contextParameters) {                                                      // 283
    if (contextParameters) {                                                                                         // 284
        if (contextParameters.transform)                                                                             // 285
            this._nodeContext.transform = contextParameters.transform;                                               // 286
        if (contextParameters.opacity)                                                                               // 287
            this._nodeContext.opacity = contextParameters.opacity;                                                   // 288
        if (contextParameters.origin)                                                                                // 289
            this._nodeContext.origin = contextParameters.origin;                                                     // 290
        if (contextParameters.align)                                                                                 // 291
            this._nodeContext.align = contextParameters.align;                                                       // 292
        if (contextParameters.size)                                                                                  // 293
            this._nodeContext.size = contextParameters.size;                                                         // 294
    }                                                                                                                // 295
    var perspective = this._perspectiveState.get();                                                                  // 296
    if (perspective !== this._perspective) {                                                                         // 297
        _setPerspective(this.container, perspective);                                                                // 298
        this._perspective = perspective;                                                                             // 299
    }                                                                                                                // 300
    this._node.commit(this._nodeContext);                                                                            // 301
};                                                                                                                   // 302
Context.prototype.getPerspective = function getPerspective() {                                                       // 303
    return this._perspectiveState.get();                                                                             // 304
};                                                                                                                   // 305
Context.prototype.setPerspective = function setPerspective(perspective, transition, callback) {                      // 306
    return this._perspectiveState.set(perspective, transition, callback);                                            // 307
};                                                                                                                   // 308
Context.prototype.emit = function emit(type, event) {                                                                // 309
    return this._eventOutput.emit(type, event);                                                                      // 310
};                                                                                                                   // 311
Context.prototype.on = function on(type, handler) {                                                                  // 312
    return this._eventOutput.on(type, handler);                                                                      // 313
};                                                                                                                   // 314
Context.prototype.removeListener = function removeListener(type, handler) {                                          // 315
    return this._eventOutput.removeListener(type, handler);                                                          // 316
};                                                                                                                   // 317
Context.prototype.pipe = function pipe(target) {                                                                     // 318
    return this._eventOutput.pipe(target);                                                                           // 319
};                                                                                                                   // 320
Context.prototype.unpipe = function unpipe(target) {                                                                 // 321
    return this._eventOutput.unpipe(target);                                                                         // 322
};                                                                                                                   // 323
module.exports = Context;                                                                                            // 324
},{"./ElementAllocator":7,"./EventHandler":12,"./RenderNode":16,"./Transform":20,"famous/transitions/Transitionable":80}],7:[function(require,module,exports){
function ElementAllocator(container) {                                                                               // 326
    if (!container)                                                                                                  // 327
        container = document.createDocumentFragment();                                                               // 328
    this.container = container;                                                                                      // 329
    this.detachedNodes = {};                                                                                         // 330
    this.nodeCount = 0;                                                                                              // 331
}                                                                                                                    // 332
ElementAllocator.prototype.migrate = function migrate(container) {                                                   // 333
    var oldContainer = this.container;                                                                               // 334
    if (container === oldContainer)                                                                                  // 335
        return;                                                                                                      // 336
    if (oldContainer instanceof DocumentFragment) {                                                                  // 337
        container.appendChild(oldContainer);                                                                         // 338
    } else {                                                                                                         // 339
        while (oldContainer.hasChildNodes()) {                                                                       // 340
            container.appendChild(oldContainer.removeChild(oldContainer.firstChild));                                // 341
        }                                                                                                            // 342
    }                                                                                                                // 343
    this.container = container;                                                                                      // 344
};                                                                                                                   // 345
ElementAllocator.prototype.allocate = function allocate(type) {                                                      // 346
    type = type.toLowerCase();                                                                                       // 347
    if (!(type in this.detachedNodes))                                                                               // 348
        this.detachedNodes[type] = [];                                                                               // 349
    var nodeStore = this.detachedNodes[type];                                                                        // 350
    var result;                                                                                                      // 351
    if (nodeStore.length > 0) {                                                                                      // 352
        result = nodeStore.pop();                                                                                    // 353
    } else {                                                                                                         // 354
        result = document.createElement(type);                                                                       // 355
        this.container.appendChild(result);                                                                          // 356
    }                                                                                                                // 357
    this.nodeCount++;                                                                                                // 358
    return result;                                                                                                   // 359
};                                                                                                                   // 360
ElementAllocator.prototype.deallocate = function deallocate(element) {                                               // 361
    var nodeType = element.nodeName.toLowerCase();                                                                   // 362
    var nodeStore = this.detachedNodes[nodeType];                                                                    // 363
    nodeStore.push(element);                                                                                         // 364
    this.nodeCount--;                                                                                                // 365
};                                                                                                                   // 366
ElementAllocator.prototype.getNodeCount = function getNodeCount() {                                                  // 367
    return this.nodeCount;                                                                                           // 368
};                                                                                                                   // 369
module.exports = ElementAllocator;                                                                                   // 370
},{}],8:[function(require,module,exports){                                                                           // 371
var Entity = require('./Entity');                                                                                    // 372
var EventHandler = require('./EventHandler');                                                                        // 373
var Transform = require('./Transform');                                                                              // 374
var usePrefix = !('transform' in document.documentElement.style);                                                    // 375
var devicePixelRatio = window.devicePixelRatio || 1;                                                                 // 376
function ElementOutput(element) {                                                                                    // 377
    this._matrix = null;                                                                                             // 378
    this._opacity = 1;                                                                                               // 379
    this._origin = null;                                                                                             // 380
    this._size = null;                                                                                               // 381
    this._eventOutput = new EventHandler();                                                                          // 382
    this._eventOutput.bindThis(this);                                                                                // 383
    this.eventForwarder = function eventForwarder(event) {                                                           // 384
        this._eventOutput.emit(event.type, event);                                                                   // 385
    }.bind(this);                                                                                                    // 386
    this.id = Entity.register(this);                                                                                 // 387
    this._element = null;                                                                                            // 388
    this._sizeDirty = false;                                                                                         // 389
    this._originDirty = false;                                                                                       // 390
    this._transformDirty = false;                                                                                    // 391
    this._invisible = false;                                                                                         // 392
    if (element)                                                                                                     // 393
        this.attach(element);                                                                                        // 394
}                                                                                                                    // 395
ElementOutput.prototype.on = function on(type, fn) {                                                                 // 396
    if (this._element)                                                                                               // 397
        this._element.addEventListener(type, this.eventForwarder);                                                   // 398
    this._eventOutput.on(type, fn);                                                                                  // 399
};                                                                                                                   // 400
ElementOutput.prototype.removeListener = function removeListener(type, fn) {                                         // 401
    this._eventOutput.removeListener(type, fn);                                                                      // 402
};                                                                                                                   // 403
ElementOutput.prototype.emit = function emit(type, event) {                                                          // 404
    if (event && !event.origin)                                                                                      // 405
        event.origin = this;                                                                                         // 406
    var handled = this._eventOutput.emit(type, event);                                                               // 407
    if (handled && event && event.stopPropagation)                                                                   // 408
        event.stopPropagation();                                                                                     // 409
    return handled;                                                                                                  // 410
};                                                                                                                   // 411
ElementOutput.prototype.pipe = function pipe(target) {                                                               // 412
    return this._eventOutput.pipe(target);                                                                           // 413
};                                                                                                                   // 414
ElementOutput.prototype.unpipe = function unpipe(target) {                                                           // 415
    return this._eventOutput.unpipe(target);                                                                         // 416
};                                                                                                                   // 417
ElementOutput.prototype.render = function render() {                                                                 // 418
    return this.id;                                                                                                  // 419
};                                                                                                                   // 420
function _addEventListeners(target) {                                                                                // 421
    for (var i in this._eventOutput.listeners) {                                                                     // 422
        target.addEventListener(i, this.eventForwarder);                                                             // 423
    }                                                                                                                // 424
}                                                                                                                    // 425
function _removeEventListeners(target) {                                                                             // 426
    for (var i in this._eventOutput.listeners) {                                                                     // 427
        target.removeEventListener(i, this.eventForwarder);                                                          // 428
    }                                                                                                                // 429
}                                                                                                                    // 430
function _formatCSSTransform(m) {                                                                                    // 431
    m[12] = Math.round(m[12] * devicePixelRatio) / devicePixelRatio;                                                 // 432
    m[13] = Math.round(m[13] * devicePixelRatio) / devicePixelRatio;                                                 // 433
    var result = 'matrix3d(';                                                                                        // 434
    for (var i = 0; i < 15; i++) {                                                                                   // 435
        result += m[i] < 0.000001 && m[i] > -0.000001 ? '0,' : m[i] + ',';                                           // 436
    }                                                                                                                // 437
    result += m[15] + ')';                                                                                           // 438
    return result;                                                                                                   // 439
}                                                                                                                    // 440
var _setMatrix;                                                                                                      // 441
if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {                                                     // 442
    _setMatrix = function (element, matrix) {                                                                        // 443
        element.style.zIndex = matrix[14] * 1000000 | 0;                                                             // 444
        element.style.transform = _formatCSSTransform(matrix);                                                       // 445
    };                                                                                                               // 446
} else if (usePrefix) {                                                                                              // 447
    _setMatrix = function (element, matrix) {                                                                        // 448
        element.style.webkitTransform = _formatCSSTransform(matrix);                                                 // 449
    };                                                                                                               // 450
} else {                                                                                                             // 451
    _setMatrix = function (element, matrix) {                                                                        // 452
        element.style.transform = _formatCSSTransform(matrix);                                                       // 453
    };                                                                                                               // 454
}                                                                                                                    // 455
function _formatCSSOrigin(origin) {                                                                                  // 456
    return 100 * origin[0] + '% ' + 100 * origin[1] + '%';                                                           // 457
}                                                                                                                    // 458
var _setOrigin = usePrefix ? function (element, origin) {                                                            // 459
        element.style.webkitTransformOrigin = _formatCSSOrigin(origin);                                              // 460
    } : function (element, origin) {                                                                                 // 461
        element.style.transformOrigin = _formatCSSOrigin(origin);                                                    // 462
    };                                                                                                               // 463
var _setInvisible = usePrefix ? function (element) {                                                                 // 464
        element.style.webkitTransform = 'scale3d(0.0001,0.0001,0.0001)';                                             // 465
        element.style.opacity = 0;                                                                                   // 466
    } : function (element) {                                                                                         // 467
        element.style.transform = 'scale3d(0.0001,0.0001,0.0001)';                                                   // 468
        element.style.opacity = 0;                                                                                   // 469
    };                                                                                                               // 470
function _xyNotEquals(a, b) {                                                                                        // 471
    return a && b ? a[0] !== b[0] || a[1] !== b[1] : a !== b;                                                        // 472
}                                                                                                                    // 473
ElementOutput.prototype.commit = function commit(context) {                                                          // 474
    var target = this._element;                                                                                      // 475
    if (!target)                                                                                                     // 476
        return;                                                                                                      // 477
    var matrix = context.transform;                                                                                  // 478
    var opacity = context.opacity;                                                                                   // 479
    var origin = context.origin;                                                                                     // 480
    var size = context.size;                                                                                         // 481
    if (!matrix && this._matrix) {                                                                                   // 482
        this._matrix = null;                                                                                         // 483
        this._opacity = 0;                                                                                           // 484
        _setInvisible(target);                                                                                       // 485
        return;                                                                                                      // 486
    }                                                                                                                // 487
    if (_xyNotEquals(this._origin, origin))                                                                          // 488
        this._originDirty = true;                                                                                    // 489
    if (Transform.notEquals(this._matrix, matrix))                                                                   // 490
        this._transformDirty = true;                                                                                 // 491
    if (this._invisible) {                                                                                           // 492
        this._invisible = false;                                                                                     // 493
        this._element.style.display = '';                                                                            // 494
    }                                                                                                                // 495
    if (this._opacity !== opacity) {                                                                                 // 496
        this._opacity = opacity;                                                                                     // 497
        target.style.opacity = opacity >= 1 ? '0.999999' : opacity;                                                  // 498
    }                                                                                                                // 499
    if (this._transformDirty || this._originDirty || this._sizeDirty) {                                              // 500
        if (this._sizeDirty) {                                                                                       // 501
            if (!this._size)                                                                                         // 502
                this._size = [                                                                                       // 503
                    0,                                                                                               // 504
                    0                                                                                                // 505
                ];                                                                                                   // 506
            this._size[0] = size[0];                                                                                 // 507
            this._size[1] = size[1];                                                                                 // 508
            this._sizeDirty = false;                                                                                 // 509
        }                                                                                                            // 510
        if (this._originDirty) {                                                                                     // 511
            if (origin) {                                                                                            // 512
                if (!this._origin)                                                                                   // 513
                    this._origin = [                                                                                 // 514
                        0,                                                                                           // 515
                        0                                                                                            // 516
                    ];                                                                                               // 517
                this._origin[0] = origin[0];                                                                         // 518
                this._origin[1] = origin[1];                                                                         // 519
            } else                                                                                                   // 520
                this._origin = null;                                                                                 // 521
            _setOrigin(target, this._origin);                                                                        // 522
            this._originDirty = false;                                                                               // 523
        }                                                                                                            // 524
        if (!matrix)                                                                                                 // 525
            matrix = Transform.identity;                                                                             // 526
        this._matrix = matrix;                                                                                       // 527
        var aaMatrix = this._size ? Transform.thenMove(matrix, [                                                     // 528
                -this._size[0] * origin[0],                                                                          // 529
                -this._size[1] * origin[1],                                                                          // 530
                0                                                                                                    // 531
            ]) : matrix;                                                                                             // 532
        _setMatrix(target, aaMatrix);                                                                                // 533
        this._transformDirty = false;                                                                                // 534
    }                                                                                                                // 535
};                                                                                                                   // 536
ElementOutput.prototype.cleanup = function cleanup() {                                                               // 537
    if (this._element) {                                                                                             // 538
        this._invisible = true;                                                                                      // 539
        this._element.style.display = 'none';                                                                        // 540
    }                                                                                                                // 541
};                                                                                                                   // 542
ElementOutput.prototype.attach = function attach(target) {                                                           // 543
    this._element = target;                                                                                          // 544
    _addEventListeners.call(this, target);                                                                           // 545
};                                                                                                                   // 546
ElementOutput.prototype.detach = function detach() {                                                                 // 547
    var target = this._element;                                                                                      // 548
    if (target) {                                                                                                    // 549
        _removeEventListeners.call(this, target);                                                                    // 550
        if (this._invisible) {                                                                                       // 551
            this._invisible = false;                                                                                 // 552
            this._element.style.display = '';                                                                        // 553
        }                                                                                                            // 554
    }                                                                                                                // 555
    this._element = null;                                                                                            // 556
    return target;                                                                                                   // 557
};                                                                                                                   // 558
module.exports = ElementOutput;                                                                                      // 559
},{"./Entity":10,"./EventHandler":12,"./Transform":20}],9:[function(require,module,exports){                         // 560
var Context = require('./Context');                                                                                  // 561
var EventHandler = require('./EventHandler');                                                                        // 562
var OptionsManager = require('./OptionsManager');                                                                    // 563
var Engine = {};                                                                                                     // 564
var contexts = [];                                                                                                   // 565
var nextTickQueue = [];                                                                                              // 566
var deferQueue = [];                                                                                                 // 567
var lastTime = Date.now();                                                                                           // 568
var frameTime;                                                                                                       // 569
var frameTimeLimit;                                                                                                  // 570
var loopEnabled = true;                                                                                              // 571
var eventForwarders = {};                                                                                            // 572
var eventHandler = new EventHandler();                                                                               // 573
var options = {                                                                                                      // 574
        containerType: 'div',                                                                                        // 575
        containerClass: 'famous-container',                                                                          // 576
        fpsCap: undefined,                                                                                           // 577
        runLoop: true,                                                                                               // 578
        appMode: true                                                                                                // 579
    };                                                                                                               // 580
var optionsManager = new OptionsManager(options);                                                                    // 581
var MAX_DEFER_FRAME_TIME = 10;                                                                                       // 582
Engine.step = function step() {                                                                                      // 583
    var currentTime = Date.now();                                                                                    // 584
    if (frameTimeLimit && currentTime - lastTime < frameTimeLimit)                                                   // 585
        return;                                                                                                      // 586
    var i = 0;                                                                                                       // 587
    frameTime = currentTime - lastTime;                                                                              // 588
    lastTime = currentTime;                                                                                          // 589
    eventHandler.emit('prerender');                                                                                  // 590
    for (i = 0; i < nextTickQueue.length; i++)                                                                       // 591
        nextTickQueue[i].call(this);                                                                                 // 592
    nextTickQueue.splice(0);                                                                                         // 593
    while (deferQueue.length && Date.now() - currentTime < MAX_DEFER_FRAME_TIME) {                                   // 594
        deferQueue.shift().call(this);                                                                               // 595
    }                                                                                                                // 596
    for (i = 0; i < contexts.length; i++)                                                                            // 597
        contexts[i].update();                                                                                        // 598
    eventHandler.emit('postrender');                                                                                 // 599
};                                                                                                                   // 600
function loop() {                                                                                                    // 601
    if (options.runLoop) {                                                                                           // 602
        Engine.step();                                                                                               // 603
        window.requestAnimationFrame(loop);                                                                          // 604
    } else                                                                                                           // 605
        loopEnabled = false;                                                                                         // 606
}                                                                                                                    // 607
window.requestAnimationFrame(loop);                                                                                  // 608
function handleResize(event) {                                                                                       // 609
    for (var i = 0; i < contexts.length; i++) {                                                                      // 610
        contexts[i].emit('resize');                                                                                  // 611
    }                                                                                                                // 612
    eventHandler.emit('resize');                                                                                     // 613
}                                                                                                                    // 614
window.addEventListener('resize', handleResize, false);                                                              // 615
handleResize();                                                                                                      // 616
function initialize() {                                                                                              // 617
    window.addEventListener('touchmove', function (event) {                                                          // 618
        event.preventDefault();                                                                                      // 619
    }, true);                                                                                                        // 620
    document.body.classList.add('famous-root');                                                                      // 621
    document.documentElement.classList.add('famous-root');                                                           // 622
}                                                                                                                    // 623
var initialized = false;                                                                                             // 624
Engine.pipe = function pipe(target) {                                                                                // 625
    if (target.subscribe instanceof Function)                                                                        // 626
        return target.subscribe(Engine);                                                                             // 627
    else                                                                                                             // 628
        return eventHandler.pipe(target);                                                                            // 629
};                                                                                                                   // 630
Engine.unpipe = function unpipe(target) {                                                                            // 631
    if (target.unsubscribe instanceof Function)                                                                      // 632
        return target.unsubscribe(Engine);                                                                           // 633
    else                                                                                                             // 634
        return eventHandler.unpipe(target);                                                                          // 635
};                                                                                                                   // 636
Engine.on = function on(type, handler) {                                                                             // 637
    if (!(type in eventForwarders)) {                                                                                // 638
        eventForwarders[type] = eventHandler.emit.bind(eventHandler, type);                                          // 639
        if (document.body) {                                                                                         // 640
            document.body.addEventListener(type, eventForwarders[type]);                                             // 641
        } else {                                                                                                     // 642
            Engine.nextTick(function (type, forwarder) {                                                             // 643
                document.body.addEventListener(type, forwarder);                                                     // 644
            }.bind(this, type, eventForwarders[type]));                                                              // 645
        }                                                                                                            // 646
    }                                                                                                                // 647
    return eventHandler.on(type, handler);                                                                           // 648
};                                                                                                                   // 649
Engine.emit = function emit(type, event) {                                                                           // 650
    return eventHandler.emit(type, event);                                                                           // 651
};                                                                                                                   // 652
Engine.removeListener = function removeListener(type, handler) {                                                     // 653
    return eventHandler.removeListener(type, handler);                                                               // 654
};                                                                                                                   // 655
Engine.getFPS = function getFPS() {                                                                                  // 656
    return 1000 / frameTime;                                                                                         // 657
};                                                                                                                   // 658
Engine.setFPSCap = function setFPSCap(fps) {                                                                         // 659
    frameTimeLimit = Math.floor(1000 / fps);                                                                         // 660
};                                                                                                                   // 661
Engine.getOptions = function getOptions(key) {                                                                       // 662
    return optionsManager.getOptions(key);                                                                           // 663
};                                                                                                                   // 664
Engine.setOptions = function setOptions(options) {                                                                   // 665
    return optionsManager.setOptions.apply(optionsManager, arguments);                                               // 666
};                                                                                                                   // 667
Engine.createContext = function createContext(el) {                                                                  // 668
    if (!initialized && options.appMode)                                                                             // 669
        Engine.nextTick(initialize);                                                                                 // 670
    var needMountContainer = false;                                                                                  // 671
    if (!el) {                                                                                                       // 672
        el = document.createElement(options.containerType);                                                          // 673
        el.classList.add(options.containerClass);                                                                    // 674
        needMountContainer = true;                                                                                   // 675
    }                                                                                                                // 676
    var context = new Context(el);                                                                                   // 677
    Engine.registerContext(context);                                                                                 // 678
    if (needMountContainer) {                                                                                        // 679
        Engine.nextTick(function (context, el) {                                                                     // 680
            document.body.appendChild(el);                                                                           // 681
            context.emit('resize');                                                                                  // 682
        }.bind(this, context, el));                                                                                  // 683
    }                                                                                                                // 684
    return context;                                                                                                  // 685
};                                                                                                                   // 686
Engine.registerContext = function registerContext(context) {                                                         // 687
    contexts.push(context);                                                                                          // 688
    return context;                                                                                                  // 689
};                                                                                                                   // 690
Engine.getContexts = function getContexts() {                                                                        // 691
    return contexts;                                                                                                 // 692
};                                                                                                                   // 693
Engine.deregisterContext = function deregisterContext(context) {                                                     // 694
    var i = contexts.indexOf(context);                                                                               // 695
    if (i >= 0)                                                                                                      // 696
        contexts.splice(i, 1);                                                                                       // 697
};                                                                                                                   // 698
Engine.nextTick = function nextTick(fn) {                                                                            // 699
    nextTickQueue.push(fn);                                                                                          // 700
};                                                                                                                   // 701
Engine.defer = function defer(fn) {                                                                                  // 702
    deferQueue.push(fn);                                                                                             // 703
};                                                                                                                   // 704
optionsManager.on('change', function (data) {                                                                        // 705
    if (data.id === 'fpsCap')                                                                                        // 706
        Engine.setFPSCap(data.value);                                                                                // 707
    else if (data.id === 'runLoop') {                                                                                // 708
        if (!loopEnabled && data.value) {                                                                            // 709
            loopEnabled = true;                                                                                      // 710
            window.requestAnimationFrame(loop);                                                                      // 711
        }                                                                                                            // 712
    }                                                                                                                // 713
});                                                                                                                  // 714
module.exports = Engine;                                                                                             // 715
},{"./Context":6,"./EventHandler":12,"./OptionsManager":15}],10:[function(require,module,exports){                   // 716
var entities = [];                                                                                                   // 717
function get(id) {                                                                                                   // 718
    return entities[id];                                                                                             // 719
}                                                                                                                    // 720
function set(id, entity) {                                                                                           // 721
    entities[id] = entity;                                                                                           // 722
}                                                                                                                    // 723
function register(entity) {                                                                                          // 724
    var id = entities.length;                                                                                        // 725
    set(id, entity);                                                                                                 // 726
    return id;                                                                                                       // 727
}                                                                                                                    // 728
function unregister(id) {                                                                                            // 729
    set(id, null);                                                                                                   // 730
}                                                                                                                    // 731
module.exports = {                                                                                                   // 732
    register: register,                                                                                              // 733
    unregister: unregister,                                                                                          // 734
    get: get,                                                                                                        // 735
    set: set                                                                                                         // 736
};                                                                                                                   // 737
},{}],11:[function(require,module,exports){                                                                          // 738
function EventEmitter() {                                                                                            // 739
    this.listeners = {};                                                                                             // 740
    this._owner = this;                                                                                              // 741
}                                                                                                                    // 742
EventEmitter.prototype.emit = function emit(type, event) {                                                           // 743
    var handlers = this.listeners[type];                                                                             // 744
    if (handlers) {                                                                                                  // 745
        for (var i = 0; i < handlers.length; i++) {                                                                  // 746
            handlers[i].call(this._owner, event);                                                                    // 747
        }                                                                                                            // 748
    }                                                                                                                // 749
    return this;                                                                                                     // 750
};                                                                                                                   // 751
EventEmitter.prototype.on = function on(type, handler) {                                                             // 752
    if (!(type in this.listeners))                                                                                   // 753
        this.listeners[type] = [];                                                                                   // 754
    var index = this.listeners[type].indexOf(handler);                                                               // 755
    if (index < 0)                                                                                                   // 756
        this.listeners[type].push(handler);                                                                          // 757
    return this;                                                                                                     // 758
};                                                                                                                   // 759
EventEmitter.prototype.addListener = EventEmitter.prototype.on;                                                      // 760
EventEmitter.prototype.removeListener = function removeListener(type, handler) {                                     // 761
    var listener = this.listeners[type];                                                                             // 762
    if (listener !== undefined) {                                                                                    // 763
        var index = listener.indexOf(handler);                                                                       // 764
        if (index >= 0)                                                                                              // 765
            listener.splice(index, 1);                                                                               // 766
    }                                                                                                                // 767
    return this;                                                                                                     // 768
};                                                                                                                   // 769
EventEmitter.prototype.bindThis = function bindThis(owner) {                                                         // 770
    this._owner = owner;                                                                                             // 771
};                                                                                                                   // 772
module.exports = EventEmitter;                                                                                       // 773
},{}],12:[function(require,module,exports){                                                                          // 774
var EventEmitter = require('./EventEmitter');                                                                        // 775
function EventHandler() {                                                                                            // 776
    EventEmitter.apply(this, arguments);                                                                             // 777
    this.downstream = [];                                                                                            // 778
    this.downstreamFn = [];                                                                                          // 779
    this.upstream = [];                                                                                              // 780
    this.upstreamListeners = {};                                                                                     // 781
}                                                                                                                    // 782
EventHandler.prototype = Object.create(EventEmitter.prototype);                                                      // 783
EventHandler.prototype.constructor = EventHandler;                                                                   // 784
EventHandler.setInputHandler = function setInputHandler(object, handler) {                                           // 785
    object.trigger = handler.trigger.bind(handler);                                                                  // 786
    if (handler.subscribe && handler.unsubscribe) {                                                                  // 787
        object.subscribe = handler.subscribe.bind(handler);                                                          // 788
        object.unsubscribe = handler.unsubscribe.bind(handler);                                                      // 789
    }                                                                                                                // 790
};                                                                                                                   // 791
EventHandler.setOutputHandler = function setOutputHandler(object, handler) {                                         // 792
    if (handler instanceof EventHandler)                                                                             // 793
        handler.bindThis(object);                                                                                    // 794
    object.pipe = handler.pipe.bind(handler);                                                                        // 795
    object.unpipe = handler.unpipe.bind(handler);                                                                    // 796
    object.on = handler.on.bind(handler);                                                                            // 797
    object.addListener = object.on;                                                                                  // 798
    object.removeListener = handler.removeListener.bind(handler);                                                    // 799
};                                                                                                                   // 800
EventHandler.prototype.emit = function emit(type, event) {                                                           // 801
    EventEmitter.prototype.emit.apply(this, arguments);                                                              // 802
    var i = 0;                                                                                                       // 803
    for (i = 0; i < this.downstream.length; i++) {                                                                   // 804
        if (this.downstream[i].trigger)                                                                              // 805
            this.downstream[i].trigger(type, event);                                                                 // 806
    }                                                                                                                // 807
    for (i = 0; i < this.downstreamFn.length; i++) {                                                                 // 808
        this.downstreamFn[i](type, event);                                                                           // 809
    }                                                                                                                // 810
    return this;                                                                                                     // 811
};                                                                                                                   // 812
EventHandler.prototype.trigger = EventHandler.prototype.emit;                                                        // 813
EventHandler.prototype.pipe = function pipe(target) {                                                                // 814
    if (target.subscribe instanceof Function)                                                                        // 815
        return target.subscribe(this);                                                                               // 816
    var downstreamCtx = target instanceof Function ? this.downstreamFn : this.downstream;                            // 817
    var index = downstreamCtx.indexOf(target);                                                                       // 818
    if (index < 0)                                                                                                   // 819
        downstreamCtx.push(target);                                                                                  // 820
    if (target instanceof Function)                                                                                  // 821
        target('pipe', null);                                                                                        // 822
    else if (target.trigger)                                                                                         // 823
        target.trigger('pipe', null);                                                                                // 824
    return target;                                                                                                   // 825
};                                                                                                                   // 826
EventHandler.prototype.unpipe = function unpipe(target) {                                                            // 827
    if (target.unsubscribe instanceof Function)                                                                      // 828
        return target.unsubscribe(this);                                                                             // 829
    var downstreamCtx = target instanceof Function ? this.downstreamFn : this.downstream;                            // 830
    var index = downstreamCtx.indexOf(target);                                                                       // 831
    if (index >= 0) {                                                                                                // 832
        downstreamCtx.splice(index, 1);                                                                              // 833
        if (target instanceof Function)                                                                              // 834
            target('unpipe', null);                                                                                  // 835
        else if (target.trigger)                                                                                     // 836
            target.trigger('unpipe', null);                                                                          // 837
        return target;                                                                                               // 838
    } else                                                                                                           // 839
        return false;                                                                                                // 840
};                                                                                                                   // 841
EventHandler.prototype.on = function on(type, handler) {                                                             // 842
    EventEmitter.prototype.on.apply(this, arguments);                                                                // 843
    if (!(type in this.upstreamListeners)) {                                                                         // 844
        var upstreamListener = this.trigger.bind(this, type);                                                        // 845
        this.upstreamListeners[type] = upstreamListener;                                                             // 846
        for (var i = 0; i < this.upstream.length; i++) {                                                             // 847
            this.upstream[i].on(type, upstreamListener);                                                             // 848
        }                                                                                                            // 849
    }                                                                                                                // 850
    return this;                                                                                                     // 851
};                                                                                                                   // 852
EventHandler.prototype.addListener = EventHandler.prototype.on;                                                      // 853
EventHandler.prototype.subscribe = function subscribe(source) {                                                      // 854
    var index = this.upstream.indexOf(source);                                                                       // 855
    if (index < 0) {                                                                                                 // 856
        this.upstream.push(source);                                                                                  // 857
        for (var type in this.upstreamListeners) {                                                                   // 858
            source.on(type, this.upstreamListeners[type]);                                                           // 859
        }                                                                                                            // 860
    }                                                                                                                // 861
    return this;                                                                                                     // 862
};                                                                                                                   // 863
EventHandler.prototype.unsubscribe = function unsubscribe(source) {                                                  // 864
    var index = this.upstream.indexOf(source);                                                                       // 865
    if (index >= 0) {                                                                                                // 866
        this.upstream.splice(index, 1);                                                                              // 867
        for (var type in this.upstreamListeners) {                                                                   // 868
            source.removeListener(type, this.upstreamListeners[type]);                                               // 869
        }                                                                                                            // 870
    }                                                                                                                // 871
    return this;                                                                                                     // 872
};                                                                                                                   // 873
module.exports = EventHandler;                                                                                       // 874
},{"./EventEmitter":11}],13:[function(require,module,exports){                                                       // 875
var Context = require('./Context');                                                                                  // 876
var Transform = require('./Transform');                                                                              // 877
var Surface = require('./Surface');                                                                                  // 878
function Group(options) {                                                                                            // 879
    Surface.call(this, options);                                                                                     // 880
    this._shouldRecalculateSize = false;                                                                             // 881
    this._container = document.createDocumentFragment();                                                             // 882
    this.context = new Context(this._container);                                                                     // 883
    this.setContent(this._container);                                                                                // 884
    this._groupSize = [                                                                                              // 885
        undefined,                                                                                                   // 886
        undefined                                                                                                    // 887
    ];                                                                                                               // 888
}                                                                                                                    // 889
Group.SIZE_ZERO = [                                                                                                  // 890
    0,                                                                                                               // 891
    0                                                                                                                // 892
];                                                                                                                   // 893
Group.prototype = Object.create(Surface.prototype);                                                                  // 894
Group.prototype.elementType = 'div';                                                                                 // 895
Group.prototype.elementClass = 'famous-group';                                                                       // 896
Group.prototype.add = function add() {                                                                               // 897
    return this.context.add.apply(this.context, arguments);                                                          // 898
};                                                                                                                   // 899
Group.prototype.render = function render() {                                                                         // 900
    return Surface.prototype.render.call(this);                                                                      // 901
};                                                                                                                   // 902
Group.prototype.deploy = function deploy(target) {                                                                   // 903
    this.context.migrate(target);                                                                                    // 904
};                                                                                                                   // 905
Group.prototype.recall = function recall(target) {                                                                   // 906
    this._container = document.createDocumentFragment();                                                             // 907
    this.context.migrate(this._container);                                                                           // 908
};                                                                                                                   // 909
Group.prototype.commit = function commit(context) {                                                                  // 910
    var transform = context.transform;                                                                               // 911
    var origin = context.origin;                                                                                     // 912
    var opacity = context.opacity;                                                                                   // 913
    var size = context.size;                                                                                         // 914
    var result = Surface.prototype.commit.call(this, {                                                               // 915
            allocator: context.allocator,                                                                            // 916
            transform: Transform.thenMove(transform, [                                                               // 917
                -origin[0] * size[0],                                                                                // 918
                -origin[1] * size[1],                                                                                // 919
                0                                                                                                    // 920
            ]),                                                                                                      // 921
            opacity: opacity,                                                                                        // 922
            origin: origin,                                                                                          // 923
            size: Group.SIZE_ZERO                                                                                    // 924
        });                                                                                                          // 925
    if (size[0] !== this._groupSize[0] || size[1] !== this._groupSize[1]) {                                          // 926
        this._groupSize[0] = size[0];                                                                                // 927
        this._groupSize[1] = size[1];                                                                                // 928
        this.context.setSize(size);                                                                                  // 929
    }                                                                                                                // 930
    this.context.update({                                                                                            // 931
        transform: Transform.translate(-origin[0] * size[0], -origin[1] * size[1], 0),                               // 932
        origin: origin,                                                                                              // 933
        size: size                                                                                                   // 934
    });                                                                                                              // 935
    return result;                                                                                                   // 936
};                                                                                                                   // 937
module.exports = Group;                                                                                              // 938
},{"./Context":6,"./Surface":19,"./Transform":20}],14:[function(require,module,exports){                             // 939
var Transform = require('./Transform');                                                                              // 940
var Transitionable = require('famous/transitions/Transitionable');                                                   // 941
var TransitionableTransform = require('famous/transitions/TransitionableTransform');                                 // 942
function Modifier(options) {                                                                                         // 943
    this._transformGetter = null;                                                                                    // 944
    this._opacityGetter = null;                                                                                      // 945
    this._originGetter = null;                                                                                       // 946
    this._alignGetter = null;                                                                                        // 947
    this._sizeGetter = null;                                                                                         // 948
    this._proportionGetter = null;                                                                                   // 949
    this._legacyStates = {};                                                                                         // 950
    this._output = {                                                                                                 // 951
        transform: Transform.identity,                                                                               // 952
        opacity: 1,                                                                                                  // 953
        origin: null,                                                                                                // 954
        align: null,                                                                                                 // 955
        size: null,                                                                                                  // 956
        proportions: null,                                                                                           // 957
        target: null                                                                                                 // 958
    };                                                                                                               // 959
    if (options) {                                                                                                   // 960
        if (options.transform)                                                                                       // 961
            this.transformFrom(options.transform);                                                                   // 962
        if (options.opacity !== undefined)                                                                           // 963
            this.opacityFrom(options.opacity);                                                                       // 964
        if (options.origin)                                                                                          // 965
            this.originFrom(options.origin);                                                                         // 966
        if (options.align)                                                                                           // 967
            this.alignFrom(options.align);                                                                           // 968
        if (options.size)                                                                                            // 969
            this.sizeFrom(options.size);                                                                             // 970
        if (options.proportions)                                                                                     // 971
            this.proportionsFrom(options.proportions);                                                               // 972
    }                                                                                                                // 973
}                                                                                                                    // 974
Modifier.prototype.transformFrom = function transformFrom(transform) {                                               // 975
    if (transform instanceof Function)                                                                               // 976
        this._transformGetter = transform;                                                                           // 977
    else if (transform instanceof Object && transform.get)                                                           // 978
        this._transformGetter = transform.get.bind(transform);                                                       // 979
    else {                                                                                                           // 980
        this._transformGetter = null;                                                                                // 981
        this._output.transform = transform;                                                                          // 982
    }                                                                                                                // 983
    return this;                                                                                                     // 984
};                                                                                                                   // 985
Modifier.prototype.opacityFrom = function opacityFrom(opacity) {                                                     // 986
    if (opacity instanceof Function)                                                                                 // 987
        this._opacityGetter = opacity;                                                                               // 988
    else if (opacity instanceof Object && opacity.get)                                                               // 989
        this._opacityGetter = opacity.get.bind(opacity);                                                             // 990
    else {                                                                                                           // 991
        this._opacityGetter = null;                                                                                  // 992
        this._output.opacity = opacity;                                                                              // 993
    }                                                                                                                // 994
    return this;                                                                                                     // 995
};                                                                                                                   // 996
Modifier.prototype.originFrom = function originFrom(origin) {                                                        // 997
    if (origin instanceof Function)                                                                                  // 998
        this._originGetter = origin;                                                                                 // 999
    else if (origin instanceof Object && origin.get)                                                                 // 1000
        this._originGetter = origin.get.bind(origin);                                                                // 1001
    else {                                                                                                           // 1002
        this._originGetter = null;                                                                                   // 1003
        this._output.origin = origin;                                                                                // 1004
    }                                                                                                                // 1005
    return this;                                                                                                     // 1006
};                                                                                                                   // 1007
Modifier.prototype.alignFrom = function alignFrom(align) {                                                           // 1008
    if (align instanceof Function)                                                                                   // 1009
        this._alignGetter = align;                                                                                   // 1010
    else if (align instanceof Object && align.get)                                                                   // 1011
        this._alignGetter = align.get.bind(align);                                                                   // 1012
    else {                                                                                                           // 1013
        this._alignGetter = null;                                                                                    // 1014
        this._output.align = align;                                                                                  // 1015
    }                                                                                                                // 1016
    return this;                                                                                                     // 1017
};                                                                                                                   // 1018
Modifier.prototype.sizeFrom = function sizeFrom(size) {                                                              // 1019
    if (size instanceof Function)                                                                                    // 1020
        this._sizeGetter = size;                                                                                     // 1021
    else if (size instanceof Object && size.get)                                                                     // 1022
        this._sizeGetter = size.get.bind(size);                                                                      // 1023
    else {                                                                                                           // 1024
        this._sizeGetter = null;                                                                                     // 1025
        this._output.size = size;                                                                                    // 1026
    }                                                                                                                // 1027
    return this;                                                                                                     // 1028
};                                                                                                                   // 1029
Modifier.prototype.proportionsFrom = function proportionsFrom(proportions) {                                         // 1030
    if (proportions instanceof Function)                                                                             // 1031
        this._proportionGetter = proportions;                                                                        // 1032
    else if (proportions instanceof Object && proportions.get)                                                       // 1033
        this._proportionGetter = proportions.get.bind(proportions);                                                  // 1034
    else {                                                                                                           // 1035
        this._proportionGetter = null;                                                                               // 1036
        this._output.proportions = proportions;                                                                      // 1037
    }                                                                                                                // 1038
    return this;                                                                                                     // 1039
};                                                                                                                   // 1040
Modifier.prototype.setTransform = function setTransform(transform, transition, callback) {                           // 1041
    if (transition || this._legacyStates.transform) {                                                                // 1042
        if (!this._legacyStates.transform) {                                                                         // 1043
            this._legacyStates.transform = new TransitionableTransform(this._output.transform);                      // 1044
        }                                                                                                            // 1045
        if (!this._transformGetter)                                                                                  // 1046
            this.transformFrom(this._legacyStates.transform);                                                        // 1047
        this._legacyStates.transform.set(transform, transition, callback);                                           // 1048
        return this;                                                                                                 // 1049
    } else                                                                                                           // 1050
        return this.transformFrom(transform);                                                                        // 1051
};                                                                                                                   // 1052
Modifier.prototype.setOpacity = function setOpacity(opacity, transition, callback) {                                 // 1053
    if (transition || this._legacyStates.opacity) {                                                                  // 1054
        if (!this._legacyStates.opacity) {                                                                           // 1055
            this._legacyStates.opacity = new Transitionable(this._output.opacity);                                   // 1056
        }                                                                                                            // 1057
        if (!this._opacityGetter)                                                                                    // 1058
            this.opacityFrom(this._legacyStates.opacity);                                                            // 1059
        return this._legacyStates.opacity.set(opacity, transition, callback);                                        // 1060
    } else                                                                                                           // 1061
        return this.opacityFrom(opacity);                                                                            // 1062
};                                                                                                                   // 1063
Modifier.prototype.setOrigin = function setOrigin(origin, transition, callback) {                                    // 1064
    if (transition || this._legacyStates.origin) {                                                                   // 1065
        if (!this._legacyStates.origin) {                                                                            // 1066
            this._legacyStates.origin = new Transitionable(this._output.origin || [                                  // 1067
                0,                                                                                                   // 1068
                0                                                                                                    // 1069
            ]);                                                                                                      // 1070
        }                                                                                                            // 1071
        if (!this._originGetter)                                                                                     // 1072
            this.originFrom(this._legacyStates.origin);                                                              // 1073
        this._legacyStates.origin.set(origin, transition, callback);                                                 // 1074
        return this;                                                                                                 // 1075
    } else                                                                                                           // 1076
        return this.originFrom(origin);                                                                              // 1077
};                                                                                                                   // 1078
Modifier.prototype.setAlign = function setAlign(align, transition, callback) {                                       // 1079
    if (transition || this._legacyStates.align) {                                                                    // 1080
        if (!this._legacyStates.align) {                                                                             // 1081
            this._legacyStates.align = new Transitionable(this._output.align || [                                    // 1082
                0,                                                                                                   // 1083
                0                                                                                                    // 1084
            ]);                                                                                                      // 1085
        }                                                                                                            // 1086
        if (!this._alignGetter)                                                                                      // 1087
            this.alignFrom(this._legacyStates.align);                                                                // 1088
        this._legacyStates.align.set(align, transition, callback);                                                   // 1089
        return this;                                                                                                 // 1090
    } else                                                                                                           // 1091
        return this.alignFrom(align);                                                                                // 1092
};                                                                                                                   // 1093
Modifier.prototype.setSize = function setSize(size, transition, callback) {                                          // 1094
    if (size && (transition || this._legacyStates.size)) {                                                           // 1095
        if (!this._legacyStates.size) {                                                                              // 1096
            this._legacyStates.size = new Transitionable(this._output.size || [                                      // 1097
                0,                                                                                                   // 1098
                0                                                                                                    // 1099
            ]);                                                                                                      // 1100
        }                                                                                                            // 1101
        if (!this._sizeGetter)                                                                                       // 1102
            this.sizeFrom(this._legacyStates.size);                                                                  // 1103
        this._legacyStates.size.set(size, transition, callback);                                                     // 1104
        return this;                                                                                                 // 1105
    } else                                                                                                           // 1106
        return this.sizeFrom(size);                                                                                  // 1107
};                                                                                                                   // 1108
Modifier.prototype.setProportions = function setProportions(proportions, transition, callback) {                     // 1109
    if (proportions && (transition || this._legacyStates.proportions)) {                                             // 1110
        if (!this._legacyStates.proportions) {                                                                       // 1111
            this._legacyStates.proportions = new Transitionable(this._output.proportions || [                        // 1112
                0,                                                                                                   // 1113
                0                                                                                                    // 1114
            ]);                                                                                                      // 1115
        }                                                                                                            // 1116
        if (!this._proportionGetter)                                                                                 // 1117
            this.proportionsFrom(this._legacyStates.proportions);                                                    // 1118
        this._legacyStates.proportions.set(proportions, transition, callback);                                       // 1119
        return this;                                                                                                 // 1120
    } else                                                                                                           // 1121
        return this.proportionsFrom(proportions);                                                                    // 1122
};                                                                                                                   // 1123
Modifier.prototype.halt = function halt() {                                                                          // 1124
    if (this._legacyStates.transform)                                                                                // 1125
        this._legacyStates.transform.halt();                                                                         // 1126
    if (this._legacyStates.opacity)                                                                                  // 1127
        this._legacyStates.opacity.halt();                                                                           // 1128
    if (this._legacyStates.origin)                                                                                   // 1129
        this._legacyStates.origin.halt();                                                                            // 1130
    if (this._legacyStates.align)                                                                                    // 1131
        this._legacyStates.align.halt();                                                                             // 1132
    if (this._legacyStates.size)                                                                                     // 1133
        this._legacyStates.size.halt();                                                                              // 1134
    if (this._legacyStates.proportions)                                                                              // 1135
        this._legacyStates.proportions.halt();                                                                       // 1136
    this._transformGetter = null;                                                                                    // 1137
    this._opacityGetter = null;                                                                                      // 1138
    this._originGetter = null;                                                                                       // 1139
    this._alignGetter = null;                                                                                        // 1140
    this._sizeGetter = null;                                                                                         // 1141
    this._proportionGetter = null;                                                                                   // 1142
};                                                                                                                   // 1143
Modifier.prototype.getTransform = function getTransform() {                                                          // 1144
    return this._transformGetter();                                                                                  // 1145
};                                                                                                                   // 1146
Modifier.prototype.getFinalTransform = function getFinalTransform() {                                                // 1147
    return this._legacyStates.transform ? this._legacyStates.transform.getFinal() : this._output.transform;          // 1148
};                                                                                                                   // 1149
Modifier.prototype.getOpacity = function getOpacity() {                                                              // 1150
    return this._opacityGetter();                                                                                    // 1151
};                                                                                                                   // 1152
Modifier.prototype.getOrigin = function getOrigin() {                                                                // 1153
    return this._originGetter();                                                                                     // 1154
};                                                                                                                   // 1155
Modifier.prototype.getAlign = function getAlign() {                                                                  // 1156
    return this._alignGetter();                                                                                      // 1157
};                                                                                                                   // 1158
Modifier.prototype.getSize = function getSize() {                                                                    // 1159
    return this._sizeGetter ? this._sizeGetter() : this._output.size;                                                // 1160
};                                                                                                                   // 1161
Modifier.prototype.getProportions = function getProportions() {                                                      // 1162
    return this._proportionGetter ? this._proportionGetter() : this._output.proportions;                             // 1163
};                                                                                                                   // 1164
function _update() {                                                                                                 // 1165
    if (this._transformGetter)                                                                                       // 1166
        this._output.transform = this._transformGetter();                                                            // 1167
    if (this._opacityGetter)                                                                                         // 1168
        this._output.opacity = this._opacityGetter();                                                                // 1169
    if (this._originGetter)                                                                                          // 1170
        this._output.origin = this._originGetter();                                                                  // 1171
    if (this._alignGetter)                                                                                           // 1172
        this._output.align = this._alignGetter();                                                                    // 1173
    if (this._sizeGetter)                                                                                            // 1174
        this._output.size = this._sizeGetter();                                                                      // 1175
    if (this._proportionGetter)                                                                                      // 1176
        this._output.proportions = this._proportionGetter();                                                         // 1177
}                                                                                                                    // 1178
Modifier.prototype.modify = function modify(target) {                                                                // 1179
    _update.call(this);                                                                                              // 1180
    this._output.target = target;                                                                                    // 1181
    return this._output;                                                                                             // 1182
};                                                                                                                   // 1183
module.exports = Modifier;                                                                                           // 1184
},{"./Transform":20,"famous/transitions/Transitionable":80,"famous/transitions/TransitionableTransform":81}],15:[function(require,module,exports){
var EventHandler = require('./EventHandler');                                                                        // 1186
function OptionsManager(value) {                                                                                     // 1187
    this._value = value;                                                                                             // 1188
    this.eventOutput = null;                                                                                         // 1189
}                                                                                                                    // 1190
OptionsManager.patch = function patchObject(source, data) {                                                          // 1191
    var manager = new OptionsManager(source);                                                                        // 1192
    for (var i = 1; i < arguments.length; i++)                                                                       // 1193
        manager.patch(arguments[i]);                                                                                 // 1194
    return source;                                                                                                   // 1195
};                                                                                                                   // 1196
function _createEventOutput() {                                                                                      // 1197
    this.eventOutput = new EventHandler();                                                                           // 1198
    this.eventOutput.bindThis(this);                                                                                 // 1199
    EventHandler.setOutputHandler(this, this.eventOutput);                                                           // 1200
}                                                                                                                    // 1201
OptionsManager.prototype.patch = function patch() {                                                                  // 1202
    var myState = this._value;                                                                                       // 1203
    for (var i = 0; i < arguments.length; i++) {                                                                     // 1204
        var data = arguments[i];                                                                                     // 1205
        for (var k in data) {                                                                                        // 1206
            if (k in myState && (data[k] && data[k].constructor === Object) && (myState[k] && myState[k].constructor === Object)) {
                if (!myState.hasOwnProperty(k))                                                                      // 1208
                    myState[k] = Object.create(myState[k]);                                                          // 1209
                this.key(k).patch(data[k]);                                                                          // 1210
                if (this.eventOutput)                                                                                // 1211
                    this.eventOutput.emit('change', {                                                                // 1212
                        id: k,                                                                                       // 1213
                        value: this.key(k).value()                                                                   // 1214
                    });                                                                                              // 1215
            } else                                                                                                   // 1216
                this.set(k, data[k]);                                                                                // 1217
        }                                                                                                            // 1218
    }                                                                                                                // 1219
    return this;                                                                                                     // 1220
};                                                                                                                   // 1221
OptionsManager.prototype.setOptions = OptionsManager.prototype.patch;                                                // 1222
OptionsManager.prototype.key = function key(identifier) {                                                            // 1223
    var result = new OptionsManager(this._value[identifier]);                                                        // 1224
    if (!(result._value instanceof Object) || result._value instanceof Array)                                        // 1225
        result._value = {};                                                                                          // 1226
    return result;                                                                                                   // 1227
};                                                                                                                   // 1228
OptionsManager.prototype.get = function get(key) {                                                                   // 1229
    return key ? this._value[key] : this._value;                                                                     // 1230
};                                                                                                                   // 1231
OptionsManager.prototype.getOptions = OptionsManager.prototype.get;                                                  // 1232
OptionsManager.prototype.set = function set(key, value) {                                                            // 1233
    var originalValue = this.get(key);                                                                               // 1234
    this._value[key] = value;                                                                                        // 1235
    if (this.eventOutput && value !== originalValue)                                                                 // 1236
        this.eventOutput.emit('change', {                                                                            // 1237
            id: key,                                                                                                 // 1238
            value: value                                                                                             // 1239
        });                                                                                                          // 1240
    return this;                                                                                                     // 1241
};                                                                                                                   // 1242
OptionsManager.prototype.on = function on() {                                                                        // 1243
    _createEventOutput.call(this);                                                                                   // 1244
    return this.on.apply(this, arguments);                                                                           // 1245
};                                                                                                                   // 1246
OptionsManager.prototype.removeListener = function removeListener() {                                                // 1247
    _createEventOutput.call(this);                                                                                   // 1248
    return this.removeListener.apply(this, arguments);                                                               // 1249
};                                                                                                                   // 1250
OptionsManager.prototype.pipe = function pipe() {                                                                    // 1251
    _createEventOutput.call(this);                                                                                   // 1252
    return this.pipe.apply(this, arguments);                                                                         // 1253
};                                                                                                                   // 1254
OptionsManager.prototype.unpipe = function unpipe() {                                                                // 1255
    _createEventOutput.call(this);                                                                                   // 1256
    return this.unpipe.apply(this, arguments);                                                                       // 1257
};                                                                                                                   // 1258
module.exports = OptionsManager;                                                                                     // 1259
},{"./EventHandler":12}],16:[function(require,module,exports){                                                       // 1260
var Entity = require('./Entity');                                                                                    // 1261
var SpecParser = require('./SpecParser');                                                                            // 1262
function RenderNode(object) {                                                                                        // 1263
    this._object = null;                                                                                             // 1264
    this._child = null;                                                                                              // 1265
    this._hasMultipleChildren = false;                                                                               // 1266
    this._isRenderable = false;                                                                                      // 1267
    this._isModifier = false;                                                                                        // 1268
    this._resultCache = {};                                                                                          // 1269
    this._prevResults = {};                                                                                          // 1270
    this._childResult = null;                                                                                        // 1271
    if (object)                                                                                                      // 1272
        this.set(object);                                                                                            // 1273
}                                                                                                                    // 1274
RenderNode.prototype.add = function add(child) {                                                                     // 1275
    var childNode = child instanceof RenderNode ? child : new RenderNode(child);                                     // 1276
    if (this._child instanceof Array)                                                                                // 1277
        this._child.push(childNode);                                                                                 // 1278
    else if (this._child) {                                                                                          // 1279
        this._child = [                                                                                              // 1280
            this._child,                                                                                             // 1281
            childNode                                                                                                // 1282
        ];                                                                                                           // 1283
        this._hasMultipleChildren = true;                                                                            // 1284
        this._childResult = [];                                                                                      // 1285
    } else                                                                                                           // 1286
        this._child = childNode;                                                                                     // 1287
    return childNode;                                                                                                // 1288
};                                                                                                                   // 1289
RenderNode.prototype.get = function get() {                                                                          // 1290
    return this._object || (this._hasMultipleChildren ? null : this._child ? this._child.get() : null);              // 1291
};                                                                                                                   // 1292
RenderNode.prototype.set = function set(child) {                                                                     // 1293
    this._childResult = null;                                                                                        // 1294
    this._hasMultipleChildren = false;                                                                               // 1295
    this._isRenderable = child.render ? true : false;                                                                // 1296
    this._isModifier = child.modify ? true : false;                                                                  // 1297
    this._object = child;                                                                                            // 1298
    this._child = null;                                                                                              // 1299
    if (child instanceof RenderNode)                                                                                 // 1300
        return child;                                                                                                // 1301
    else                                                                                                             // 1302
        return this;                                                                                                 // 1303
};                                                                                                                   // 1304
RenderNode.prototype.getSize = function getSize() {                                                                  // 1305
    var result = null;                                                                                               // 1306
    var target = this.get();                                                                                         // 1307
    if (target && target.getSize)                                                                                    // 1308
        result = target.getSize();                                                                                   // 1309
    if (!result && this._child && this._child.getSize)                                                               // 1310
        result = this._child.getSize();                                                                              // 1311
    return result;                                                                                                   // 1312
};                                                                                                                   // 1313
function _applyCommit(spec, context, cacheStorage) {                                                                 // 1314
    var result = SpecParser.parse(spec, context);                                                                    // 1315
    var keys = Object.keys(result);                                                                                  // 1316
    for (var i = 0; i < keys.length; i++) {                                                                          // 1317
        var id = keys[i];                                                                                            // 1318
        var childNode = Entity.get(id);                                                                              // 1319
        var commitParams = result[id];                                                                               // 1320
        commitParams.allocator = context.allocator;                                                                  // 1321
        var commitResult = childNode.commit(commitParams);                                                           // 1322
        if (commitResult)                                                                                            // 1323
            _applyCommit(commitResult, context, cacheStorage);                                                       // 1324
        else                                                                                                         // 1325
            cacheStorage[id] = commitParams;                                                                         // 1326
    }                                                                                                                // 1327
}                                                                                                                    // 1328
RenderNode.prototype.commit = function commit(context) {                                                             // 1329
    var prevKeys = Object.keys(this._prevResults);                                                                   // 1330
    for (var i = 0; i < prevKeys.length; i++) {                                                                      // 1331
        var id = prevKeys[i];                                                                                        // 1332
        if (this._resultCache[id] === undefined) {                                                                   // 1333
            var object = Entity.get(id);                                                                             // 1334
            if (object.cleanup)                                                                                      // 1335
                object.cleanup(context.allocator);                                                                   // 1336
        }                                                                                                            // 1337
    }                                                                                                                // 1338
    this._prevResults = this._resultCache;                                                                           // 1339
    this._resultCache = {};                                                                                          // 1340
    _applyCommit(this.render(), context, this._resultCache);                                                         // 1341
};                                                                                                                   // 1342
RenderNode.prototype.render = function render() {                                                                    // 1343
    if (this._isRenderable)                                                                                          // 1344
        return this._object.render();                                                                                // 1345
    var result = null;                                                                                               // 1346
    if (this._hasMultipleChildren) {                                                                                 // 1347
        result = this._childResult;                                                                                  // 1348
        var children = this._child;                                                                                  // 1349
        for (var i = 0; i < children.length; i++) {                                                                  // 1350
            result[i] = children[i].render();                                                                        // 1351
        }                                                                                                            // 1352
    } else if (this._child)                                                                                          // 1353
        result = this._child.render();                                                                               // 1354
    return this._isModifier ? this._object.modify(result) : result;                                                  // 1355
};                                                                                                                   // 1356
module.exports = RenderNode;                                                                                         // 1357
},{"./Entity":10,"./SpecParser":18}],17:[function(require,module,exports){                                           // 1358
var Transform = require('./Transform');                                                                              // 1359
var Modifier = require('./Modifier');                                                                                // 1360
var RenderNode = require('./RenderNode');                                                                            // 1361
function Scene(definition) {                                                                                         // 1362
    this.id = null;                                                                                                  // 1363
    this._objects = null;                                                                                            // 1364
    this.node = new RenderNode();                                                                                    // 1365
    this._definition = null;                                                                                         // 1366
    if (definition)                                                                                                  // 1367
        this.load(definition);                                                                                       // 1368
}                                                                                                                    // 1369
var _MATRIX_GENERATORS = {                                                                                           // 1370
        'translate': Transform.translate,                                                                            // 1371
        'rotate': Transform.rotate,                                                                                  // 1372
        'rotateX': Transform.rotateX,                                                                                // 1373
        'rotateY': Transform.rotateY,                                                                                // 1374
        'rotateZ': Transform.rotateZ,                                                                                // 1375
        'rotateAxis': Transform.rotateAxis,                                                                          // 1376
        'scale': Transform.scale,                                                                                    // 1377
        'skew': Transform.skew,                                                                                      // 1378
        'matrix3d': function () {                                                                                    // 1379
            return arguments;                                                                                        // 1380
        }                                                                                                            // 1381
    };                                                                                                               // 1382
Scene.prototype.create = function create() {                                                                         // 1383
    return new Scene(this._definition);                                                                              // 1384
};                                                                                                                   // 1385
function _resolveTransformMatrix(matrixDefinition) {                                                                 // 1386
    for (var type in _MATRIX_GENERATORS) {                                                                           // 1387
        if (type in matrixDefinition) {                                                                              // 1388
            var args = matrixDefinition[type];                                                                       // 1389
            if (!(args instanceof Array))                                                                            // 1390
                args = [args];                                                                                       // 1391
            return _MATRIX_GENERATORS[type].apply(this, args);                                                       // 1392
        }                                                                                                            // 1393
    }                                                                                                                // 1394
}                                                                                                                    // 1395
function _parseTransform(definition) {                                                                               // 1396
    var transformDefinition = definition.transform;                                                                  // 1397
    var opacity = definition.opacity;                                                                                // 1398
    var origin = definition.origin;                                                                                  // 1399
    var align = definition.align;                                                                                    // 1400
    var size = definition.size;                                                                                      // 1401
    var transform = Transform.identity;                                                                              // 1402
    if (transformDefinition instanceof Array) {                                                                      // 1403
        if (transformDefinition.length === 16 && typeof transformDefinition[0] === 'number') {                       // 1404
            transform = transformDefinition;                                                                         // 1405
        } else {                                                                                                     // 1406
            for (var i = 0; i < transformDefinition.length; i++) {                                                   // 1407
                transform = Transform.multiply(transform, _resolveTransformMatrix(transformDefinition[i]));          // 1408
            }                                                                                                        // 1409
        }                                                                                                            // 1410
    } else if (transformDefinition instanceof Function) {                                                            // 1411
        transform = transformDefinition;                                                                             // 1412
    } else if (transformDefinition instanceof Object) {                                                              // 1413
        transform = _resolveTransformMatrix(transformDefinition);                                                    // 1414
    }                                                                                                                // 1415
    var result = new Modifier({                                                                                      // 1416
            transform: transform,                                                                                    // 1417
            opacity: opacity,                                                                                        // 1418
            origin: origin,                                                                                          // 1419
            align: align,                                                                                            // 1420
            size: size                                                                                               // 1421
        });                                                                                                          // 1422
    return result;                                                                                                   // 1423
}                                                                                                                    // 1424
function _parseArray(definition) {                                                                                   // 1425
    var result = new RenderNode();                                                                                   // 1426
    for (var i = 0; i < definition.length; i++) {                                                                    // 1427
        var obj = _parse.call(this, definition[i]);                                                                  // 1428
        if (obj)                                                                                                     // 1429
            result.add(obj);                                                                                         // 1430
    }                                                                                                                // 1431
    return result;                                                                                                   // 1432
}                                                                                                                    // 1433
function _parse(definition) {                                                                                        // 1434
    var result;                                                                                                      // 1435
    var id;                                                                                                          // 1436
    if (definition instanceof Array) {                                                                               // 1437
        result = _parseArray.call(this, definition);                                                                 // 1438
    } else {                                                                                                         // 1439
        id = this._objects.length;                                                                                   // 1440
        if (definition.render && definition.render instanceof Function) {                                            // 1441
            result = definition;                                                                                     // 1442
        } else if (definition.target) {                                                                              // 1443
            var targetObj = _parse.call(this, definition.target);                                                    // 1444
            var obj = _parseTransform.call(this, definition);                                                        // 1445
            result = new RenderNode(obj);                                                                            // 1446
            result.add(targetObj);                                                                                   // 1447
            if (definition.id)                                                                                       // 1448
                this.id[definition.id] = obj;                                                                        // 1449
        } else if (definition.id) {                                                                                  // 1450
            result = new RenderNode();                                                                               // 1451
            this.id[definition.id] = result;                                                                         // 1452
        }                                                                                                            // 1453
    }                                                                                                                // 1454
    this._objects[id] = result;                                                                                      // 1455
    return result;                                                                                                   // 1456
}                                                                                                                    // 1457
Scene.prototype.load = function load(definition) {                                                                   // 1458
    this._definition = definition;                                                                                   // 1459
    this.id = {};                                                                                                    // 1460
    this._objects = [];                                                                                              // 1461
    this.node.set(_parse.call(this, definition));                                                                    // 1462
};                                                                                                                   // 1463
Scene.prototype.add = function add() {                                                                               // 1464
    return this.node.add.apply(this.node, arguments);                                                                // 1465
};                                                                                                                   // 1466
Scene.prototype.render = function render() {                                                                         // 1467
    return this.node.render.apply(this.node, arguments);                                                             // 1468
};                                                                                                                   // 1469
module.exports = Scene;                                                                                              // 1470
},{"./Modifier":14,"./RenderNode":16,"./Transform":20}],18:[function(require,module,exports){                        // 1471
var Transform = require('./Transform');                                                                              // 1472
function SpecParser() {                                                                                              // 1473
    this.result = {};                                                                                                // 1474
}                                                                                                                    // 1475
SpecParser._instance = new SpecParser();                                                                             // 1476
SpecParser.parse = function parse(spec, context) {                                                                   // 1477
    return SpecParser._instance.parse(spec, context);                                                                // 1478
};                                                                                                                   // 1479
SpecParser.prototype.parse = function parse(spec, context) {                                                         // 1480
    this.reset();                                                                                                    // 1481
    this._parseSpec(spec, context, Transform.identity);                                                              // 1482
    return this.result;                                                                                              // 1483
};                                                                                                                   // 1484
SpecParser.prototype.reset = function reset() {                                                                      // 1485
    this.result = {};                                                                                                // 1486
};                                                                                                                   // 1487
function _vecInContext(v, m) {                                                                                       // 1488
    return [                                                                                                         // 1489
        v[0] * m[0] + v[1] * m[4] + v[2] * m[8],                                                                     // 1490
        v[0] * m[1] + v[1] * m[5] + v[2] * m[9],                                                                     // 1491
        v[0] * m[2] + v[1] * m[6] + v[2] * m[10]                                                                     // 1492
    ];                                                                                                               // 1493
}                                                                                                                    // 1494
var _zeroZero = [                                                                                                    // 1495
        0,                                                                                                           // 1496
        0                                                                                                            // 1497
    ];                                                                                                               // 1498
SpecParser.prototype._parseSpec = function _parseSpec(spec, parentContext, sizeContext) {                            // 1499
    var id;                                                                                                          // 1500
    var target;                                                                                                      // 1501
    var transform;                                                                                                   // 1502
    var opacity;                                                                                                     // 1503
    var origin;                                                                                                      // 1504
    var align;                                                                                                       // 1505
    var size;                                                                                                        // 1506
    if (typeof spec === 'number') {                                                                                  // 1507
        id = spec;                                                                                                   // 1508
        transform = parentContext.transform;                                                                         // 1509
        align = parentContext.align || _zeroZero;                                                                    // 1510
        if (parentContext.size && align && (align[0] || align[1])) {                                                 // 1511
            var alignAdjust = [                                                                                      // 1512
                    align[0] * parentContext.size[0],                                                                // 1513
                    align[1] * parentContext.size[1],                                                                // 1514
                    0                                                                                                // 1515
                ];                                                                                                   // 1516
            transform = Transform.thenMove(transform, _vecInContext(alignAdjust, sizeContext));                      // 1517
        }                                                                                                            // 1518
        this.result[id] = {                                                                                          // 1519
            transform: transform,                                                                                    // 1520
            opacity: parentContext.opacity,                                                                          // 1521
            origin: parentContext.origin || _zeroZero,                                                               // 1522
            align: parentContext.align || _zeroZero,                                                                 // 1523
            size: parentContext.size                                                                                 // 1524
        };                                                                                                           // 1525
    } else if (!spec) {                                                                                              // 1526
        return;                                                                                                      // 1527
    } else if (spec instanceof Array) {                                                                              // 1528
        for (var i = 0; i < spec.length; i++) {                                                                      // 1529
            this._parseSpec(spec[i], parentContext, sizeContext);                                                    // 1530
        }                                                                                                            // 1531
    } else {                                                                                                         // 1532
        target = spec.target;                                                                                        // 1533
        transform = parentContext.transform;                                                                         // 1534
        opacity = parentContext.opacity;                                                                             // 1535
        origin = parentContext.origin;                                                                               // 1536
        align = parentContext.align;                                                                                 // 1537
        size = parentContext.size;                                                                                   // 1538
        var nextSizeContext = sizeContext;                                                                           // 1539
        if (spec.opacity !== undefined)                                                                              // 1540
            opacity = parentContext.opacity * spec.opacity;                                                          // 1541
        if (spec.transform)                                                                                          // 1542
            transform = Transform.multiply(parentContext.transform, spec.transform);                                 // 1543
        if (spec.origin) {                                                                                           // 1544
            origin = spec.origin;                                                                                    // 1545
            nextSizeContext = parentContext.transform;                                                               // 1546
        }                                                                                                            // 1547
        if (spec.align)                                                                                              // 1548
            align = spec.align;                                                                                      // 1549
        if (spec.size || spec.proportions) {                                                                         // 1550
            var parentSize = size;                                                                                   // 1551
            size = [                                                                                                 // 1552
                size[0],                                                                                             // 1553
                size[1]                                                                                              // 1554
            ];                                                                                                       // 1555
            if (spec.size) {                                                                                         // 1556
                if (spec.size[0] !== undefined)                                                                      // 1557
                    size[0] = spec.size[0];                                                                          // 1558
                if (spec.size[1] !== undefined)                                                                      // 1559
                    size[1] = spec.size[1];                                                                          // 1560
            }                                                                                                        // 1561
            if (spec.proportions) {                                                                                  // 1562
                if (spec.proportions[0] !== undefined)                                                               // 1563
                    size[0] = size[0] * spec.proportions[0];                                                         // 1564
                if (spec.proportions[1] !== undefined)                                                               // 1565
                    size[1] = size[1] * spec.proportions[1];                                                         // 1566
            }                                                                                                        // 1567
            if (parentSize) {                                                                                        // 1568
                if (align && (align[0] || align[1]))                                                                 // 1569
                    transform = Transform.thenMove(transform, _vecInContext([                                        // 1570
                        align[0] * parentSize[0],                                                                    // 1571
                        align[1] * parentSize[1],                                                                    // 1572
                        0                                                                                            // 1573
                    ], sizeContext));                                                                                // 1574
                if (origin && (origin[0] || origin[1]))                                                              // 1575
                    transform = Transform.moveThen([                                                                 // 1576
                        -origin[0] * size[0],                                                                        // 1577
                        -origin[1] * size[1],                                                                        // 1578
                        0                                                                                            // 1579
                    ], transform);                                                                                   // 1580
            }                                                                                                        // 1581
            nextSizeContext = parentContext.transform;                                                               // 1582
            origin = null;                                                                                           // 1583
            align = null;                                                                                            // 1584
        }                                                                                                            // 1585
        this._parseSpec(target, {                                                                                    // 1586
            transform: transform,                                                                                    // 1587
            opacity: opacity,                                                                                        // 1588
            origin: origin,                                                                                          // 1589
            align: align,                                                                                            // 1590
            size: size                                                                                               // 1591
        }, nextSizeContext);                                                                                         // 1592
    }                                                                                                                // 1593
};                                                                                                                   // 1594
module.exports = SpecParser;                                                                                         // 1595
},{"./Transform":20}],19:[function(require,module,exports){                                                          // 1596
var ElementOutput = require('./ElementOutput');                                                                      // 1597
function Surface(options) {                                                                                          // 1598
    ElementOutput.call(this);                                                                                        // 1599
    this.options = {};                                                                                               // 1600
    this.properties = {};                                                                                            // 1601
    this.attributes = {};                                                                                            // 1602
    this.content = '';                                                                                               // 1603
    this.classList = [];                                                                                             // 1604
    this.size = null;                                                                                                // 1605
    this._classesDirty = true;                                                                                       // 1606
    this._stylesDirty = true;                                                                                        // 1607
    this._attributesDirty = true;                                                                                    // 1608
    this._sizeDirty = true;                                                                                          // 1609
    this._contentDirty = true;                                                                                       // 1610
    this._trueSizeCheck = true;                                                                                      // 1611
    this._dirtyClasses = [];                                                                                         // 1612
    if (options)                                                                                                     // 1613
        this.setOptions(options);                                                                                    // 1614
    this._currentTarget = null;                                                                                      // 1615
}                                                                                                                    // 1616
Surface.prototype = Object.create(ElementOutput.prototype);                                                          // 1617
Surface.prototype.constructor = Surface;                                                                             // 1618
Surface.prototype.elementType = 'div';                                                                               // 1619
Surface.prototype.elementClass = 'famous-surface';                                                                   // 1620
Surface.prototype.setAttributes = function setAttributes(attributes) {                                               // 1621
    for (var n in attributes) {                                                                                      // 1622
        if (n === 'style')                                                                                           // 1623
            throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');
        this.attributes[n] = attributes[n];                                                                          // 1625
    }                                                                                                                // 1626
    this._attributesDirty = true;                                                                                    // 1627
};                                                                                                                   // 1628
Surface.prototype.getAttributes = function getAttributes() {                                                         // 1629
    return this.attributes;                                                                                          // 1630
};                                                                                                                   // 1631
Surface.prototype.setProperties = function setProperties(properties) {                                               // 1632
    for (var n in properties) {                                                                                      // 1633
        this.properties[n] = properties[n];                                                                          // 1634
    }                                                                                                                // 1635
    this._stylesDirty = true;                                                                                        // 1636
    return this;                                                                                                     // 1637
};                                                                                                                   // 1638
Surface.prototype.getProperties = function getProperties() {                                                         // 1639
    return this.properties;                                                                                          // 1640
};                                                                                                                   // 1641
Surface.prototype.addClass = function addClass(className) {                                                          // 1642
    if (this.classList.indexOf(className) < 0) {                                                                     // 1643
        this.classList.push(className);                                                                              // 1644
        this._classesDirty = true;                                                                                   // 1645
    }                                                                                                                // 1646
    return this;                                                                                                     // 1647
};                                                                                                                   // 1648
Surface.prototype.removeClass = function removeClass(className) {                                                    // 1649
    var i = this.classList.indexOf(className);                                                                       // 1650
    if (i >= 0) {                                                                                                    // 1651
        this._dirtyClasses.push(this.classList.splice(i, 1)[0]);                                                     // 1652
        this._classesDirty = true;                                                                                   // 1653
    }                                                                                                                // 1654
    return this;                                                                                                     // 1655
};                                                                                                                   // 1656
Surface.prototype.toggleClass = function toggleClass(className) {                                                    // 1657
    var i = this.classList.indexOf(className);                                                                       // 1658
    if (i >= 0) {                                                                                                    // 1659
        this.removeClass(className);                                                                                 // 1660
    } else {                                                                                                         // 1661
        this.addClass(className);                                                                                    // 1662
    }                                                                                                                // 1663
    return this;                                                                                                     // 1664
};                                                                                                                   // 1665
Surface.prototype.setClasses = function setClasses(classList) {                                                      // 1666
    var i = 0;                                                                                                       // 1667
    var removal = [];                                                                                                // 1668
    for (i = 0; i < this.classList.length; i++) {                                                                    // 1669
        if (classList.indexOf(this.classList[i]) < 0)                                                                // 1670
            removal.push(this.classList[i]);                                                                         // 1671
    }                                                                                                                // 1672
    for (i = 0; i < removal.length; i++)                                                                             // 1673
        this.removeClass(removal[i]);                                                                                // 1674
    for (i = 0; i < classList.length; i++)                                                                           // 1675
        this.addClass(classList[i]);                                                                                 // 1676
    return this;                                                                                                     // 1677
};                                                                                                                   // 1678
Surface.prototype.getClassList = function getClassList() {                                                           // 1679
    return this.classList;                                                                                           // 1680
};                                                                                                                   // 1681
Surface.prototype.setContent = function setContent(content) {                                                        // 1682
    if (this.content !== content) {                                                                                  // 1683
        this.content = content;                                                                                      // 1684
        this._contentDirty = true;                                                                                   // 1685
    }                                                                                                                // 1686
    return this;                                                                                                     // 1687
};                                                                                                                   // 1688
Surface.prototype.getContent = function getContent() {                                                               // 1689
    return this.content;                                                                                             // 1690
};                                                                                                                   // 1691
Surface.prototype.setOptions = function setOptions(options) {                                                        // 1692
    if (options.size)                                                                                                // 1693
        this.setSize(options.size);                                                                                  // 1694
    if (options.classes)                                                                                             // 1695
        this.setClasses(options.classes);                                                                            // 1696
    if (options.properties)                                                                                          // 1697
        this.setProperties(options.properties);                                                                      // 1698
    if (options.attributes)                                                                                          // 1699
        this.setAttributes(options.attributes);                                                                      // 1700
    if (options.content)                                                                                             // 1701
        this.setContent(options.content);                                                                            // 1702
    return this;                                                                                                     // 1703
};                                                                                                                   // 1704
function _cleanupClasses(target) {                                                                                   // 1705
    for (var i = 0; i < this._dirtyClasses.length; i++)                                                              // 1706
        target.classList.remove(this._dirtyClasses[i]);                                                              // 1707
    this._dirtyClasses = [];                                                                                         // 1708
}                                                                                                                    // 1709
function _applyStyles(target) {                                                                                      // 1710
    for (var n in this.properties) {                                                                                 // 1711
        target.style[n] = this.properties[n];                                                                        // 1712
    }                                                                                                                // 1713
}                                                                                                                    // 1714
function _cleanupStyles(target) {                                                                                    // 1715
    for (var n in this.properties) {                                                                                 // 1716
        target.style[n] = '';                                                                                        // 1717
    }                                                                                                                // 1718
}                                                                                                                    // 1719
function _applyAttributes(target) {                                                                                  // 1720
    for (var n in this.attributes) {                                                                                 // 1721
        target.setAttribute(n, this.attributes[n]);                                                                  // 1722
    }                                                                                                                // 1723
}                                                                                                                    // 1724
function _cleanupAttributes(target) {                                                                                // 1725
    for (var n in this.attributes) {                                                                                 // 1726
        target.removeAttribute(n);                                                                                   // 1727
    }                                                                                                                // 1728
}                                                                                                                    // 1729
function _xyNotEquals(a, b) {                                                                                        // 1730
    return a && b ? a[0] !== b[0] || a[1] !== b[1] : a !== b;                                                        // 1731
}                                                                                                                    // 1732
Surface.prototype.setup = function setup(allocator) {                                                                // 1733
    var target = allocator.allocate(this.elementType);                                                               // 1734
    if (this.elementClass) {                                                                                         // 1735
        if (this.elementClass instanceof Array) {                                                                    // 1736
            for (var i = 0; i < this.elementClass.length; i++) {                                                     // 1737
                target.classList.add(this.elementClass[i]);                                                          // 1738
            }                                                                                                        // 1739
        } else {                                                                                                     // 1740
            target.classList.add(this.elementClass);                                                                 // 1741
        }                                                                                                            // 1742
    }                                                                                                                // 1743
    target.style.display = '';                                                                                       // 1744
    this.attach(target);                                                                                             // 1745
    this._opacity = null;                                                                                            // 1746
    this._currentTarget = target;                                                                                    // 1747
    this._stylesDirty = true;                                                                                        // 1748
    this._classesDirty = true;                                                                                       // 1749
    this._attributesDirty = true;                                                                                    // 1750
    this._sizeDirty = true;                                                                                          // 1751
    this._contentDirty = true;                                                                                       // 1752
    this._originDirty = true;                                                                                        // 1753
    this._transformDirty = true;                                                                                     // 1754
};                                                                                                                   // 1755
Surface.prototype.commit = function commit(context) {                                                                // 1756
    if (!this._currentTarget)                                                                                        // 1757
        this.setup(context.allocator);                                                                               // 1758
    var target = this._currentTarget;                                                                                // 1759
    var size = context.size;                                                                                         // 1760
    if (this._classesDirty) {                                                                                        // 1761
        _cleanupClasses.call(this, target);                                                                          // 1762
        var classList = this.getClassList();                                                                         // 1763
        for (var i = 0; i < classList.length; i++)                                                                   // 1764
            target.classList.add(classList[i]);                                                                      // 1765
        this._classesDirty = false;                                                                                  // 1766
        this._trueSizeCheck = true;                                                                                  // 1767
    }                                                                                                                // 1768
    if (this._stylesDirty) {                                                                                         // 1769
        _applyStyles.call(this, target);                                                                             // 1770
        this._stylesDirty = false;                                                                                   // 1771
        this._trueSizeCheck = true;                                                                                  // 1772
    }                                                                                                                // 1773
    if (this._attributesDirty) {                                                                                     // 1774
        _applyAttributes.call(this, target);                                                                         // 1775
        this._attributesDirty = false;                                                                               // 1776
        this._trueSizeCheck = true;                                                                                  // 1777
    }                                                                                                                // 1778
    if (this.size) {                                                                                                 // 1779
        var origSize = context.size;                                                                                 // 1780
        size = [                                                                                                     // 1781
            this.size[0],                                                                                            // 1782
            this.size[1]                                                                                             // 1783
        ];                                                                                                           // 1784
        if (size[0] === undefined)                                                                                   // 1785
            size[0] = origSize[0];                                                                                   // 1786
        if (size[1] === undefined)                                                                                   // 1787
            size[1] = origSize[1];                                                                                   // 1788
        if (size[0] === true || size[1] === true) {                                                                  // 1789
            if (size[0] === true && (this._trueSizeCheck || this._size[0] === 0)) {                                  // 1790
                var width = target.clientWidth;                                                                      // 1791
                if (this._size && this._size[0] !== width) {                                                         // 1792
                    this._size[0] = width;                                                                           // 1793
                    this._sizeDirty = true;                                                                          // 1794
                }                                                                                                    // 1795
                size[0] = width;                                                                                     // 1796
            } else {                                                                                                 // 1797
                if (this._size)                                                                                      // 1798
                    size[0] = this._size[0];                                                                         // 1799
            }                                                                                                        // 1800
            if (size[1] === true && (this._trueSizeCheck || this._size[1] === 0)) {                                  // 1801
                var height = target.clientHeight;                                                                    // 1802
                if (this._size && this._size[1] !== height) {                                                        // 1803
                    this._size[1] = height;                                                                          // 1804
                    this._sizeDirty = true;                                                                          // 1805
                }                                                                                                    // 1806
                size[1] = height;                                                                                    // 1807
            } else {                                                                                                 // 1808
                if (this._size)                                                                                      // 1809
                    size[1] = this._size[1];                                                                         // 1810
            }                                                                                                        // 1811
            this._trueSizeCheck = false;                                                                             // 1812
        }                                                                                                            // 1813
    }                                                                                                                // 1814
    if (_xyNotEquals(this._size, size)) {                                                                            // 1815
        if (!this._size)                                                                                             // 1816
            this._size = [                                                                                           // 1817
                0,                                                                                                   // 1818
                0                                                                                                    // 1819
            ];                                                                                                       // 1820
        this._size[0] = size[0];                                                                                     // 1821
        this._size[1] = size[1];                                                                                     // 1822
        this._sizeDirty = true;                                                                                      // 1823
    }                                                                                                                // 1824
    if (this._sizeDirty) {                                                                                           // 1825
        if (this._size) {                                                                                            // 1826
            target.style.width = this.size && this.size[0] === true ? '' : this._size[0] + 'px';                     // 1827
            target.style.height = this.size && this.size[1] === true ? '' : this._size[1] + 'px';                    // 1828
        }                                                                                                            // 1829
        this._eventOutput.emit('resize');                                                                            // 1830
        this._sizeDirty = false;                                                                                     // 1831
    }                                                                                                                // 1832
    if (this._contentDirty) {                                                                                        // 1833
        this.deploy(target);                                                                                         // 1834
        this._eventOutput.emit('deploy');                                                                            // 1835
        this._contentDirty = false;                                                                                  // 1836
        this._trueSizeCheck = true;                                                                                  // 1837
    }                                                                                                                // 1838
    ElementOutput.prototype.commit.call(this, context);                                                              // 1839
};                                                                                                                   // 1840
Surface.prototype.cleanup = function cleanup(allocator) {                                                            // 1841
    var i = 0;                                                                                                       // 1842
    var target = this._currentTarget;                                                                                // 1843
    this._eventOutput.emit('recall');                                                                                // 1844
    this.recall(target);                                                                                             // 1845
    target.style.display = 'none';                                                                                   // 1846
    target.style.opacity = '';                                                                                       // 1847
    target.style.width = '';                                                                                         // 1848
    target.style.height = '';                                                                                        // 1849
    _cleanupStyles.call(this, target);                                                                               // 1850
    _cleanupAttributes.call(this, target);                                                                           // 1851
    var classList = this.getClassList();                                                                             // 1852
    _cleanupClasses.call(this, target);                                                                              // 1853
    for (i = 0; i < classList.length; i++)                                                                           // 1854
        target.classList.remove(classList[i]);                                                                       // 1855
    if (this.elementClass) {                                                                                         // 1856
        if (this.elementClass instanceof Array) {                                                                    // 1857
            for (i = 0; i < this.elementClass.length; i++) {                                                         // 1858
                target.classList.remove(this.elementClass[i]);                                                       // 1859
            }                                                                                                        // 1860
        } else {                                                                                                     // 1861
            target.classList.remove(this.elementClass);                                                              // 1862
        }                                                                                                            // 1863
    }                                                                                                                // 1864
    this.detach(target);                                                                                             // 1865
    this._currentTarget = null;                                                                                      // 1866
    allocator.deallocate(target);                                                                                    // 1867
};                                                                                                                   // 1868
Surface.prototype.deploy = function deploy(target) {                                                                 // 1869
    var content = this.getContent();                                                                                 // 1870
    if (content instanceof Node) {                                                                                   // 1871
        while (target.hasChildNodes())                                                                               // 1872
            target.removeChild(target.firstChild);                                                                   // 1873
        target.appendChild(content);                                                                                 // 1874
    } else                                                                                                           // 1875
        target.innerHTML = content;                                                                                  // 1876
};                                                                                                                   // 1877
Surface.prototype.recall = function recall(target) {                                                                 // 1878
    var df = document.createDocumentFragment();                                                                      // 1879
    while (target.hasChildNodes())                                                                                   // 1880
        df.appendChild(target.firstChild);                                                                           // 1881
    this.setContent(df);                                                                                             // 1882
};                                                                                                                   // 1883
Surface.prototype.getSize = function getSize() {                                                                     // 1884
    return this._size ? this._size : this.size;                                                                      // 1885
};                                                                                                                   // 1886
Surface.prototype.setSize = function setSize(size) {                                                                 // 1887
    this.size = size ? [                                                                                             // 1888
        size[0],                                                                                                     // 1889
        size[1]                                                                                                      // 1890
    ] : null;                                                                                                        // 1891
    this._sizeDirty = true;                                                                                          // 1892
    return this;                                                                                                     // 1893
};                                                                                                                   // 1894
module.exports = Surface;                                                                                            // 1895
},{"./ElementOutput":8}],20:[function(require,module,exports){                                                       // 1896
var Transform = {};                                                                                                  // 1897
Transform.precision = 0.000001;                                                                                      // 1898
Transform.identity = [                                                                                               // 1899
    1,                                                                                                               // 1900
    0,                                                                                                               // 1901
    0,                                                                                                               // 1902
    0,                                                                                                               // 1903
    0,                                                                                                               // 1904
    1,                                                                                                               // 1905
    0,                                                                                                               // 1906
    0,                                                                                                               // 1907
    0,                                                                                                               // 1908
    0,                                                                                                               // 1909
    1,                                                                                                               // 1910
    0,                                                                                                               // 1911
    0,                                                                                                               // 1912
    0,                                                                                                               // 1913
    0,                                                                                                               // 1914
    1                                                                                                                // 1915
];                                                                                                                   // 1916
Transform.multiply4x4 = function multiply4x4(a, b) {                                                                 // 1917
    return [                                                                                                         // 1918
        a[0] * b[0] + a[4] * b[1] + a[8] * b[2] + a[12] * b[3],                                                      // 1919
        a[1] * b[0] + a[5] * b[1] + a[9] * b[2] + a[13] * b[3],                                                      // 1920
        a[2] * b[0] + a[6] * b[1] + a[10] * b[2] + a[14] * b[3],                                                     // 1921
        a[3] * b[0] + a[7] * b[1] + a[11] * b[2] + a[15] * b[3],                                                     // 1922
        a[0] * b[4] + a[4] * b[5] + a[8] * b[6] + a[12] * b[7],                                                      // 1923
        a[1] * b[4] + a[5] * b[5] + a[9] * b[6] + a[13] * b[7],                                                      // 1924
        a[2] * b[4] + a[6] * b[5] + a[10] * b[6] + a[14] * b[7],                                                     // 1925
        a[3] * b[4] + a[7] * b[5] + a[11] * b[6] + a[15] * b[7],                                                     // 1926
        a[0] * b[8] + a[4] * b[9] + a[8] * b[10] + a[12] * b[11],                                                    // 1927
        a[1] * b[8] + a[5] * b[9] + a[9] * b[10] + a[13] * b[11],                                                    // 1928
        a[2] * b[8] + a[6] * b[9] + a[10] * b[10] + a[14] * b[11],                                                   // 1929
        a[3] * b[8] + a[7] * b[9] + a[11] * b[10] + a[15] * b[11],                                                   // 1930
        a[0] * b[12] + a[4] * b[13] + a[8] * b[14] + a[12] * b[15],                                                  // 1931
        a[1] * b[12] + a[5] * b[13] + a[9] * b[14] + a[13] * b[15],                                                  // 1932
        a[2] * b[12] + a[6] * b[13] + a[10] * b[14] + a[14] * b[15],                                                 // 1933
        a[3] * b[12] + a[7] * b[13] + a[11] * b[14] + a[15] * b[15]                                                  // 1934
    ];                                                                                                               // 1935
};                                                                                                                   // 1936
Transform.multiply = function multiply(a, b) {                                                                       // 1937
    return [                                                                                                         // 1938
        a[0] * b[0] + a[4] * b[1] + a[8] * b[2],                                                                     // 1939
        a[1] * b[0] + a[5] * b[1] + a[9] * b[2],                                                                     // 1940
        a[2] * b[0] + a[6] * b[1] + a[10] * b[2],                                                                    // 1941
        0,                                                                                                           // 1942
        a[0] * b[4] + a[4] * b[5] + a[8] * b[6],                                                                     // 1943
        a[1] * b[4] + a[5] * b[5] + a[9] * b[6],                                                                     // 1944
        a[2] * b[4] + a[6] * b[5] + a[10] * b[6],                                                                    // 1945
        0,                                                                                                           // 1946
        a[0] * b[8] + a[4] * b[9] + a[8] * b[10],                                                                    // 1947
        a[1] * b[8] + a[5] * b[9] + a[9] * b[10],                                                                    // 1948
        a[2] * b[8] + a[6] * b[9] + a[10] * b[10],                                                                   // 1949
        0,                                                                                                           // 1950
        a[0] * b[12] + a[4] * b[13] + a[8] * b[14] + a[12],                                                          // 1951
        a[1] * b[12] + a[5] * b[13] + a[9] * b[14] + a[13],                                                          // 1952
        a[2] * b[12] + a[6] * b[13] + a[10] * b[14] + a[14],                                                         // 1953
        1                                                                                                            // 1954
    ];                                                                                                               // 1955
};                                                                                                                   // 1956
Transform.thenMove = function thenMove(m, t) {                                                                       // 1957
    if (!t[2])                                                                                                       // 1958
        t[2] = 0;                                                                                                    // 1959
    return [                                                                                                         // 1960
        m[0],                                                                                                        // 1961
        m[1],                                                                                                        // 1962
        m[2],                                                                                                        // 1963
        0,                                                                                                           // 1964
        m[4],                                                                                                        // 1965
        m[5],                                                                                                        // 1966
        m[6],                                                                                                        // 1967
        0,                                                                                                           // 1968
        m[8],                                                                                                        // 1969
        m[9],                                                                                                        // 1970
        m[10],                                                                                                       // 1971
        0,                                                                                                           // 1972
        m[12] + t[0],                                                                                                // 1973
        m[13] + t[1],                                                                                                // 1974
        m[14] + t[2],                                                                                                // 1975
        1                                                                                                            // 1976
    ];                                                                                                               // 1977
};                                                                                                                   // 1978
Transform.moveThen = function moveThen(v, m) {                                                                       // 1979
    if (!v[2])                                                                                                       // 1980
        v[2] = 0;                                                                                                    // 1981
    var t0 = v[0] * m[0] + v[1] * m[4] + v[2] * m[8];                                                                // 1982
    var t1 = v[0] * m[1] + v[1] * m[5] + v[2] * m[9];                                                                // 1983
    var t2 = v[0] * m[2] + v[1] * m[6] + v[2] * m[10];                                                               // 1984
    return Transform.thenMove(m, [                                                                                   // 1985
        t0,                                                                                                          // 1986
        t1,                                                                                                          // 1987
        t2                                                                                                           // 1988
    ]);                                                                                                              // 1989
};                                                                                                                   // 1990
Transform.translate = function translate(x, y, z) {                                                                  // 1991
    if (z === undefined)                                                                                             // 1992
        z = 0;                                                                                                       // 1993
    return [                                                                                                         // 1994
        1,                                                                                                           // 1995
        0,                                                                                                           // 1996
        0,                                                                                                           // 1997
        0,                                                                                                           // 1998
        0,                                                                                                           // 1999
        1,                                                                                                           // 2000
        0,                                                                                                           // 2001
        0,                                                                                                           // 2002
        0,                                                                                                           // 2003
        0,                                                                                                           // 2004
        1,                                                                                                           // 2005
        0,                                                                                                           // 2006
        x,                                                                                                           // 2007
        y,                                                                                                           // 2008
        z,                                                                                                           // 2009
        1                                                                                                            // 2010
    ];                                                                                                               // 2011
};                                                                                                                   // 2012
Transform.thenScale = function thenScale(m, s) {                                                                     // 2013
    return [                                                                                                         // 2014
        s[0] * m[0],                                                                                                 // 2015
        s[1] * m[1],                                                                                                 // 2016
        s[2] * m[2],                                                                                                 // 2017
        0,                                                                                                           // 2018
        s[0] * m[4],                                                                                                 // 2019
        s[1] * m[5],                                                                                                 // 2020
        s[2] * m[6],                                                                                                 // 2021
        0,                                                                                                           // 2022
        s[0] * m[8],                                                                                                 // 2023
        s[1] * m[9],                                                                                                 // 2024
        s[2] * m[10],                                                                                                // 2025
        0,                                                                                                           // 2026
        s[0] * m[12],                                                                                                // 2027
        s[1] * m[13],                                                                                                // 2028
        s[2] * m[14],                                                                                                // 2029
        1                                                                                                            // 2030
    ];                                                                                                               // 2031
};                                                                                                                   // 2032
Transform.scale = function scale(x, y, z) {                                                                          // 2033
    if (z === undefined)                                                                                             // 2034
        z = 1;                                                                                                       // 2035
    if (y === undefined)                                                                                             // 2036
        y = x;                                                                                                       // 2037
    return [                                                                                                         // 2038
        x,                                                                                                           // 2039
        0,                                                                                                           // 2040
        0,                                                                                                           // 2041
        0,                                                                                                           // 2042
        0,                                                                                                           // 2043
        y,                                                                                                           // 2044
        0,                                                                                                           // 2045
        0,                                                                                                           // 2046
        0,                                                                                                           // 2047
        0,                                                                                                           // 2048
        z,                                                                                                           // 2049
        0,                                                                                                           // 2050
        0,                                                                                                           // 2051
        0,                                                                                                           // 2052
        0,                                                                                                           // 2053
        1                                                                                                            // 2054
    ];                                                                                                               // 2055
};                                                                                                                   // 2056
Transform.rotateX = function rotateX(theta) {                                                                        // 2057
    var cosTheta = Math.cos(theta);                                                                                  // 2058
    var sinTheta = Math.sin(theta);                                                                                  // 2059
    return [                                                                                                         // 2060
        1,                                                                                                           // 2061
        0,                                                                                                           // 2062
        0,                                                                                                           // 2063
        0,                                                                                                           // 2064
        0,                                                                                                           // 2065
        cosTheta,                                                                                                    // 2066
        sinTheta,                                                                                                    // 2067
        0,                                                                                                           // 2068
        0,                                                                                                           // 2069
        -sinTheta,                                                                                                   // 2070
        cosTheta,                                                                                                    // 2071
        0,                                                                                                           // 2072
        0,                                                                                                           // 2073
        0,                                                                                                           // 2074
        0,                                                                                                           // 2075
        1                                                                                                            // 2076
    ];                                                                                                               // 2077
};                                                                                                                   // 2078
Transform.rotateY = function rotateY(theta) {                                                                        // 2079
    var cosTheta = Math.cos(theta);                                                                                  // 2080
    var sinTheta = Math.sin(theta);                                                                                  // 2081
    return [                                                                                                         // 2082
        cosTheta,                                                                                                    // 2083
        0,                                                                                                           // 2084
        -sinTheta,                                                                                                   // 2085
        0,                                                                                                           // 2086
        0,                                                                                                           // 2087
        1,                                                                                                           // 2088
        0,                                                                                                           // 2089
        0,                                                                                                           // 2090
        sinTheta,                                                                                                    // 2091
        0,                                                                                                           // 2092
        cosTheta,                                                                                                    // 2093
        0,                                                                                                           // 2094
        0,                                                                                                           // 2095
        0,                                                                                                           // 2096
        0,                                                                                                           // 2097
        1                                                                                                            // 2098
    ];                                                                                                               // 2099
};                                                                                                                   // 2100
Transform.rotateZ = function rotateZ(theta) {                                                                        // 2101
    var cosTheta = Math.cos(theta);                                                                                  // 2102
    var sinTheta = Math.sin(theta);                                                                                  // 2103
    return [                                                                                                         // 2104
        cosTheta,                                                                                                    // 2105
        sinTheta,                                                                                                    // 2106
        0,                                                                                                           // 2107
        0,                                                                                                           // 2108
        -sinTheta,                                                                                                   // 2109
        cosTheta,                                                                                                    // 2110
        0,                                                                                                           // 2111
        0,                                                                                                           // 2112
        0,                                                                                                           // 2113
        0,                                                                                                           // 2114
        1,                                                                                                           // 2115
        0,                                                                                                           // 2116
        0,                                                                                                           // 2117
        0,                                                                                                           // 2118
        0,                                                                                                           // 2119
        1                                                                                                            // 2120
    ];                                                                                                               // 2121
};                                                                                                                   // 2122
Transform.rotate = function rotate(phi, theta, psi) {                                                                // 2123
    var cosPhi = Math.cos(phi);                                                                                      // 2124
    var sinPhi = Math.sin(phi);                                                                                      // 2125
    var cosTheta = Math.cos(theta);                                                                                  // 2126
    var sinTheta = Math.sin(theta);                                                                                  // 2127
    var cosPsi = Math.cos(psi);                                                                                      // 2128
    var sinPsi = Math.sin(psi);                                                                                      // 2129
    var result = [                                                                                                   // 2130
            cosTheta * cosPsi,                                                                                       // 2131
            cosPhi * sinPsi + sinPhi * sinTheta * cosPsi,                                                            // 2132
            sinPhi * sinPsi - cosPhi * sinTheta * cosPsi,                                                            // 2133
            0,                                                                                                       // 2134
            -cosTheta * sinPsi,                                                                                      // 2135
            cosPhi * cosPsi - sinPhi * sinTheta * sinPsi,                                                            // 2136
            sinPhi * cosPsi + cosPhi * sinTheta * sinPsi,                                                            // 2137
            0,                                                                                                       // 2138
            sinTheta,                                                                                                // 2139
            -sinPhi * cosTheta,                                                                                      // 2140
            cosPhi * cosTheta,                                                                                       // 2141
            0,                                                                                                       // 2142
            0,                                                                                                       // 2143
            0,                                                                                                       // 2144
            0,                                                                                                       // 2145
            1                                                                                                        // 2146
        ];                                                                                                           // 2147
    return result;                                                                                                   // 2148
};                                                                                                                   // 2149
Transform.rotateAxis = function rotateAxis(v, theta) {                                                               // 2150
    var sinTheta = Math.sin(theta);                                                                                  // 2151
    var cosTheta = Math.cos(theta);                                                                                  // 2152
    var verTheta = 1 - cosTheta;                                                                                     // 2153
    var xxV = v[0] * v[0] * verTheta;                                                                                // 2154
    var xyV = v[0] * v[1] * verTheta;                                                                                // 2155
    var xzV = v[0] * v[2] * verTheta;                                                                                // 2156
    var yyV = v[1] * v[1] * verTheta;                                                                                // 2157
    var yzV = v[1] * v[2] * verTheta;                                                                                // 2158
    var zzV = v[2] * v[2] * verTheta;                                                                                // 2159
    var xs = v[0] * sinTheta;                                                                                        // 2160
    var ys = v[1] * sinTheta;                                                                                        // 2161
    var zs = v[2] * sinTheta;                                                                                        // 2162
    var result = [                                                                                                   // 2163
            xxV + cosTheta,                                                                                          // 2164
            xyV + zs,                                                                                                // 2165
            xzV - ys,                                                                                                // 2166
            0,                                                                                                       // 2167
            xyV - zs,                                                                                                // 2168
            yyV + cosTheta,                                                                                          // 2169
            yzV + xs,                                                                                                // 2170
            0,                                                                                                       // 2171
            xzV + ys,                                                                                                // 2172
            yzV - xs,                                                                                                // 2173
            zzV + cosTheta,                                                                                          // 2174
            0,                                                                                                       // 2175
            0,                                                                                                       // 2176
            0,                                                                                                       // 2177
            0,                                                                                                       // 2178
            1                                                                                                        // 2179
        ];                                                                                                           // 2180
    return result;                                                                                                   // 2181
};                                                                                                                   // 2182
Transform.aboutOrigin = function aboutOrigin(v, m) {                                                                 // 2183
    var t0 = v[0] - (v[0] * m[0] + v[1] * m[4] + v[2] * m[8]);                                                       // 2184
    var t1 = v[1] - (v[0] * m[1] + v[1] * m[5] + v[2] * m[9]);                                                       // 2185
    var t2 = v[2] - (v[0] * m[2] + v[1] * m[6] + v[2] * m[10]);                                                      // 2186
    return Transform.thenMove(m, [                                                                                   // 2187
        t0,                                                                                                          // 2188
        t1,                                                                                                          // 2189
        t2                                                                                                           // 2190
    ]);                                                                                                              // 2191
};                                                                                                                   // 2192
Transform.skew = function skew(phi, theta, psi) {                                                                    // 2193
    return [                                                                                                         // 2194
        1,                                                                                                           // 2195
        Math.tan(theta),                                                                                             // 2196
        0,                                                                                                           // 2197
        0,                                                                                                           // 2198
        Math.tan(psi),                                                                                               // 2199
        1,                                                                                                           // 2200
        0,                                                                                                           // 2201
        0,                                                                                                           // 2202
        0,                                                                                                           // 2203
        Math.tan(phi),                                                                                               // 2204
        1,                                                                                                           // 2205
        0,                                                                                                           // 2206
        0,                                                                                                           // 2207
        0,                                                                                                           // 2208
        0,                                                                                                           // 2209
        1                                                                                                            // 2210
    ];                                                                                                               // 2211
};                                                                                                                   // 2212
Transform.skewX = function skewX(angle) {                                                                            // 2213
    return [                                                                                                         // 2214
        1,                                                                                                           // 2215
        0,                                                                                                           // 2216
        0,                                                                                                           // 2217
        0,                                                                                                           // 2218
        Math.tan(angle),                                                                                             // 2219
        1,                                                                                                           // 2220
        0,                                                                                                           // 2221
        0,                                                                                                           // 2222
        0,                                                                                                           // 2223
        0,                                                                                                           // 2224
        1,                                                                                                           // 2225
        0,                                                                                                           // 2226
        0,                                                                                                           // 2227
        0,                                                                                                           // 2228
        0,                                                                                                           // 2229
        1                                                                                                            // 2230
    ];                                                                                                               // 2231
};                                                                                                                   // 2232
Transform.skewY = function skewY(angle) {                                                                            // 2233
    return [                                                                                                         // 2234
        1,                                                                                                           // 2235
        Math.tan(angle),                                                                                             // 2236
        0,                                                                                                           // 2237
        0,                                                                                                           // 2238
        0,                                                                                                           // 2239
        1,                                                                                                           // 2240
        0,                                                                                                           // 2241
        0,                                                                                                           // 2242
        0,                                                                                                           // 2243
        0,                                                                                                           // 2244
        1,                                                                                                           // 2245
        0,                                                                                                           // 2246
        0,                                                                                                           // 2247
        0,                                                                                                           // 2248
        0,                                                                                                           // 2249
        1                                                                                                            // 2250
    ];                                                                                                               // 2251
};                                                                                                                   // 2252
Transform.perspective = function perspective(focusZ) {                                                               // 2253
    return [                                                                                                         // 2254
        1,                                                                                                           // 2255
        0,                                                                                                           // 2256
        0,                                                                                                           // 2257
        0,                                                                                                           // 2258
        0,                                                                                                           // 2259
        1,                                                                                                           // 2260
        0,                                                                                                           // 2261
        0,                                                                                                           // 2262
        0,                                                                                                           // 2263
        0,                                                                                                           // 2264
        1,                                                                                                           // 2265
        -1 / focusZ,                                                                                                 // 2266
        0,                                                                                                           // 2267
        0,                                                                                                           // 2268
        0,                                                                                                           // 2269
        1                                                                                                            // 2270
    ];                                                                                                               // 2271
};                                                                                                                   // 2272
Transform.getTranslate = function getTranslate(m) {                                                                  // 2273
    return [                                                                                                         // 2274
        m[12],                                                                                                       // 2275
        m[13],                                                                                                       // 2276
        m[14]                                                                                                        // 2277
    ];                                                                                                               // 2278
};                                                                                                                   // 2279
Transform.inverse = function inverse(m) {                                                                            // 2280
    var c0 = m[5] * m[10] - m[6] * m[9];                                                                             // 2281
    var c1 = m[4] * m[10] - m[6] * m[8];                                                                             // 2282
    var c2 = m[4] * m[9] - m[5] * m[8];                                                                              // 2283
    var c4 = m[1] * m[10] - m[2] * m[9];                                                                             // 2284
    var c5 = m[0] * m[10] - m[2] * m[8];                                                                             // 2285
    var c6 = m[0] * m[9] - m[1] * m[8];                                                                              // 2286
    var c8 = m[1] * m[6] - m[2] * m[5];                                                                              // 2287
    var c9 = m[0] * m[6] - m[2] * m[4];                                                                              // 2288
    var c10 = m[0] * m[5] - m[1] * m[4];                                                                             // 2289
    var detM = m[0] * c0 - m[1] * c1 + m[2] * c2;                                                                    // 2290
    var invD = 1 / detM;                                                                                             // 2291
    var result = [                                                                                                   // 2292
            invD * c0,                                                                                               // 2293
            -invD * c4,                                                                                              // 2294
            invD * c8,                                                                                               // 2295
            0,                                                                                                       // 2296
            -invD * c1,                                                                                              // 2297
            invD * c5,                                                                                               // 2298
            -invD * c9,                                                                                              // 2299
            0,                                                                                                       // 2300
            invD * c2,                                                                                               // 2301
            -invD * c6,                                                                                              // 2302
            invD * c10,                                                                                              // 2303
            0,                                                                                                       // 2304
            0,                                                                                                       // 2305
            0,                                                                                                       // 2306
            0,                                                                                                       // 2307
            1                                                                                                        // 2308
        ];                                                                                                           // 2309
    result[12] = -m[12] * result[0] - m[13] * result[4] - m[14] * result[8];                                         // 2310
    result[13] = -m[12] * result[1] - m[13] * result[5] - m[14] * result[9];                                         // 2311
    result[14] = -m[12] * result[2] - m[13] * result[6] - m[14] * result[10];                                        // 2312
    return result;                                                                                                   // 2313
};                                                                                                                   // 2314
Transform.transpose = function transpose(m) {                                                                        // 2315
    return [                                                                                                         // 2316
        m[0],                                                                                                        // 2317
        m[4],                                                                                                        // 2318
        m[8],                                                                                                        // 2319
        m[12],                                                                                                       // 2320
        m[1],                                                                                                        // 2321
        m[5],                                                                                                        // 2322
        m[9],                                                                                                        // 2323
        m[13],                                                                                                       // 2324
        m[2],                                                                                                        // 2325
        m[6],                                                                                                        // 2326
        m[10],                                                                                                       // 2327
        m[14],                                                                                                       // 2328
        m[3],                                                                                                        // 2329
        m[7],                                                                                                        // 2330
        m[11],                                                                                                       // 2331
        m[15]                                                                                                        // 2332
    ];                                                                                                               // 2333
};                                                                                                                   // 2334
function _normSquared(v) {                                                                                           // 2335
    return v.length === 2 ? v[0] * v[0] + v[1] * v[1] : v[0] * v[0] + v[1] * v[1] + v[2] * v[2];                     // 2336
}                                                                                                                    // 2337
function _norm(v) {                                                                                                  // 2338
    return Math.sqrt(_normSquared(v));                                                                               // 2339
}                                                                                                                    // 2340
function _sign(n) {                                                                                                  // 2341
    return n < 0 ? -1 : 1;                                                                                           // 2342
}                                                                                                                    // 2343
Transform.interpret = function interpret(M) {                                                                        // 2344
    var x = [                                                                                                        // 2345
            M[0],                                                                                                    // 2346
            M[1],                                                                                                    // 2347
            M[2]                                                                                                     // 2348
        ];                                                                                                           // 2349
    var sgn = _sign(x[0]);                                                                                           // 2350
    var xNorm = _norm(x);                                                                                            // 2351
    var v = [                                                                                                        // 2352
            x[0] + sgn * xNorm,                                                                                      // 2353
            x[1],                                                                                                    // 2354
            x[2]                                                                                                     // 2355
        ];                                                                                                           // 2356
    var mult = 2 / _normSquared(v);                                                                                  // 2357
    if (mult >= Infinity) {                                                                                          // 2358
        return {                                                                                                     // 2359
            translate: Transform.getTranslate(M),                                                                    // 2360
            rotate: [                                                                                                // 2361
                0,                                                                                                   // 2362
                0,                                                                                                   // 2363
                0                                                                                                    // 2364
            ],                                                                                                       // 2365
            scale: [                                                                                                 // 2366
                0,                                                                                                   // 2367
                0,                                                                                                   // 2368
                0                                                                                                    // 2369
            ],                                                                                                       // 2370
            skew: [                                                                                                  // 2371
                0,                                                                                                   // 2372
                0,                                                                                                   // 2373
                0                                                                                                    // 2374
            ]                                                                                                        // 2375
        };                                                                                                           // 2376
    }                                                                                                                // 2377
    var Q1 = [                                                                                                       // 2378
            0,                                                                                                       // 2379
            0,                                                                                                       // 2380
            0,                                                                                                       // 2381
            0,                                                                                                       // 2382
            0,                                                                                                       // 2383
            0,                                                                                                       // 2384
            0,                                                                                                       // 2385
            0,                                                                                                       // 2386
            0,                                                                                                       // 2387
            0,                                                                                                       // 2388
            0,                                                                                                       // 2389
            0,                                                                                                       // 2390
            0,                                                                                                       // 2391
            0,                                                                                                       // 2392
            0,                                                                                                       // 2393
            1                                                                                                        // 2394
        ];                                                                                                           // 2395
    Q1[0] = 1 - mult * v[0] * v[0];                                                                                  // 2396
    Q1[5] = 1 - mult * v[1] * v[1];                                                                                  // 2397
    Q1[10] = 1 - mult * v[2] * v[2];                                                                                 // 2398
    Q1[1] = -mult * v[0] * v[1];                                                                                     // 2399
    Q1[2] = -mult * v[0] * v[2];                                                                                     // 2400
    Q1[6] = -mult * v[1] * v[2];                                                                                     // 2401
    Q1[4] = Q1[1];                                                                                                   // 2402
    Q1[8] = Q1[2];                                                                                                   // 2403
    Q1[9] = Q1[6];                                                                                                   // 2404
    var MQ1 = Transform.multiply(Q1, M);                                                                             // 2405
    var x2 = [                                                                                                       // 2406
            MQ1[5],                                                                                                  // 2407
            MQ1[6]                                                                                                   // 2408
        ];                                                                                                           // 2409
    var sgn2 = _sign(x2[0]);                                                                                         // 2410
    var x2Norm = _norm(x2);                                                                                          // 2411
    var v2 = [                                                                                                       // 2412
            x2[0] + sgn2 * x2Norm,                                                                                   // 2413
            x2[1]                                                                                                    // 2414
        ];                                                                                                           // 2415
    var mult2 = 2 / _normSquared(v2);                                                                                // 2416
    var Q2 = [                                                                                                       // 2417
            1,                                                                                                       // 2418
            0,                                                                                                       // 2419
            0,                                                                                                       // 2420
            0,                                                                                                       // 2421
            0,                                                                                                       // 2422
            0,                                                                                                       // 2423
            0,                                                                                                       // 2424
            0,                                                                                                       // 2425
            0,                                                                                                       // 2426
            0,                                                                                                       // 2427
            0,                                                                                                       // 2428
            0,                                                                                                       // 2429
            0,                                                                                                       // 2430
            0,                                                                                                       // 2431
            0,                                                                                                       // 2432
            1                                                                                                        // 2433
        ];                                                                                                           // 2434
    Q2[5] = 1 - mult2 * v2[0] * v2[0];                                                                               // 2435
    Q2[10] = 1 - mult2 * v2[1] * v2[1];                                                                              // 2436
    Q2[6] = -mult2 * v2[0] * v2[1];                                                                                  // 2437
    Q2[9] = Q2[6];                                                                                                   // 2438
    var Q = Transform.multiply(Q2, Q1);                                                                              // 2439
    var R = Transform.multiply(Q, M);                                                                                // 2440
    var remover = Transform.scale(R[0] < 0 ? -1 : 1, R[5] < 0 ? -1 : 1, R[10] < 0 ? -1 : 1);                         // 2441
    R = Transform.multiply(R, remover);                                                                              // 2442
    Q = Transform.multiply(remover, Q);                                                                              // 2443
    var result = {};                                                                                                 // 2444
    result.translate = Transform.getTranslate(M);                                                                    // 2445
    result.rotate = [                                                                                                // 2446
        Math.atan2(-Q[6], Q[10]),                                                                                    // 2447
        Math.asin(Q[2]),                                                                                             // 2448
        Math.atan2(-Q[1], Q[0])                                                                                      // 2449
    ];                                                                                                               // 2450
    if (!result.rotate[0]) {                                                                                         // 2451
        result.rotate[0] = 0;                                                                                        // 2452
        result.rotate[2] = Math.atan2(Q[4], Q[5]);                                                                   // 2453
    }                                                                                                                // 2454
    result.scale = [                                                                                                 // 2455
        R[0],                                                                                                        // 2456
        R[5],                                                                                                        // 2457
        R[10]                                                                                                        // 2458
    ];                                                                                                               // 2459
    result.skew = [                                                                                                  // 2460
        Math.atan2(R[9], result.scale[2]),                                                                           // 2461
        Math.atan2(R[8], result.scale[2]),                                                                           // 2462
        Math.atan2(R[4], result.scale[0])                                                                            // 2463
    ];                                                                                                               // 2464
    if (Math.abs(result.rotate[0]) + Math.abs(result.rotate[2]) > 1.5 * Math.PI) {                                   // 2465
        result.rotate[1] = Math.PI - result.rotate[1];                                                               // 2466
        if (result.rotate[1] > Math.PI)                                                                              // 2467
            result.rotate[1] -= 2 * Math.PI;                                                                         // 2468
        if (result.rotate[1] < -Math.PI)                                                                             // 2469
            result.rotate[1] += 2 * Math.PI;                                                                         // 2470
        if (result.rotate[0] < 0)                                                                                    // 2471
            result.rotate[0] += Math.PI;                                                                             // 2472
        else                                                                                                         // 2473
            result.rotate[0] -= Math.PI;                                                                             // 2474
        if (result.rotate[2] < 0)                                                                                    // 2475
            result.rotate[2] += Math.PI;                                                                             // 2476
        else                                                                                                         // 2477
            result.rotate[2] -= Math.PI;                                                                             // 2478
    }                                                                                                                // 2479
    return result;                                                                                                   // 2480
};                                                                                                                   // 2481
Transform.average = function average(M1, M2, t) {                                                                    // 2482
    t = t === undefined ? 0.5 : t;                                                                                   // 2483
    var specM1 = Transform.interpret(M1);                                                                            // 2484
    var specM2 = Transform.interpret(M2);                                                                            // 2485
    var specAvg = {                                                                                                  // 2486
            translate: [                                                                                             // 2487
                0,                                                                                                   // 2488
                0,                                                                                                   // 2489
                0                                                                                                    // 2490
            ],                                                                                                       // 2491
            rotate: [                                                                                                // 2492
                0,                                                                                                   // 2493
                0,                                                                                                   // 2494
                0                                                                                                    // 2495
            ],                                                                                                       // 2496
            scale: [                                                                                                 // 2497
                0,                                                                                                   // 2498
                0,                                                                                                   // 2499
                0                                                                                                    // 2500
            ],                                                                                                       // 2501
            skew: [                                                                                                  // 2502
                0,                                                                                                   // 2503
                0,                                                                                                   // 2504
                0                                                                                                    // 2505
            ]                                                                                                        // 2506
        };                                                                                                           // 2507
    for (var i = 0; i < 3; i++) {                                                                                    // 2508
        specAvg.translate[i] = (1 - t) * specM1.translate[i] + t * specM2.translate[i];                              // 2509
        specAvg.rotate[i] = (1 - t) * specM1.rotate[i] + t * specM2.rotate[i];                                       // 2510
        specAvg.scale[i] = (1 - t) * specM1.scale[i] + t * specM2.scale[i];                                          // 2511
        specAvg.skew[i] = (1 - t) * specM1.skew[i] + t * specM2.skew[i];                                             // 2512
    }                                                                                                                // 2513
    return Transform.build(specAvg);                                                                                 // 2514
};                                                                                                                   // 2515
Transform.build = function build(spec) {                                                                             // 2516
    var scaleMatrix = Transform.scale(spec.scale[0], spec.scale[1], spec.scale[2]);                                  // 2517
    var skewMatrix = Transform.skew(spec.skew[0], spec.skew[1], spec.skew[2]);                                       // 2518
    var rotateMatrix = Transform.rotate(spec.rotate[0], spec.rotate[1], spec.rotate[2]);                             // 2519
    return Transform.thenMove(Transform.multiply(Transform.multiply(rotateMatrix, skewMatrix), scaleMatrix), spec.translate);
};                                                                                                                   // 2521
Transform.equals = function equals(a, b) {                                                                           // 2522
    return !Transform.notEquals(a, b);                                                                               // 2523
};                                                                                                                   // 2524
Transform.notEquals = function notEquals(a, b) {                                                                     // 2525
    if (a === b)                                                                                                     // 2526
        return false;                                                                                                // 2527
    return !(a && b) || a[12] !== b[12] || a[13] !== b[13] || a[14] !== b[14] || a[0] !== b[0] || a[1] !== b[1] || a[2] !== b[2] || a[4] !== b[4] || a[5] !== b[5] || a[6] !== b[6] || a[8] !== b[8] || a[9] !== b[9] || a[10] !== b[10];
};                                                                                                                   // 2529
Transform.normalizeRotation = function normalizeRotation(rotation) {                                                 // 2530
    var result = rotation.slice(0);                                                                                  // 2531
    if (result[0] === Math.PI * 0.5 || result[0] === -Math.PI * 0.5) {                                               // 2532
        result[0] = -result[0];                                                                                      // 2533
        result[1] = Math.PI - result[1];                                                                             // 2534
        result[2] -= Math.PI;                                                                                        // 2535
    }                                                                                                                // 2536
    if (result[0] > Math.PI * 0.5) {                                                                                 // 2537
        result[0] = result[0] - Math.PI;                                                                             // 2538
        result[1] = Math.PI - result[1];                                                                             // 2539
        result[2] -= Math.PI;                                                                                        // 2540
    }                                                                                                                // 2541
    if (result[0] < -Math.PI * 0.5) {                                                                                // 2542
        result[0] = result[0] + Math.PI;                                                                             // 2543
        result[1] = -Math.PI - result[1];                                                                            // 2544
        result[2] -= Math.PI;                                                                                        // 2545
    }                                                                                                                // 2546
    while (result[1] < -Math.PI)                                                                                     // 2547
        result[1] += 2 * Math.PI;                                                                                    // 2548
    while (result[1] >= Math.PI)                                                                                     // 2549
        result[1] -= 2 * Math.PI;                                                                                    // 2550
    while (result[2] < -Math.PI)                                                                                     // 2551
        result[2] += 2 * Math.PI;                                                                                    // 2552
    while (result[2] >= Math.PI)                                                                                     // 2553
        result[2] -= 2 * Math.PI;                                                                                    // 2554
    return result;                                                                                                   // 2555
};                                                                                                                   // 2556
Transform.inFront = [                                                                                                // 2557
    1,                                                                                                               // 2558
    0,                                                                                                               // 2559
    0,                                                                                                               // 2560
    0,                                                                                                               // 2561
    0,                                                                                                               // 2562
    1,                                                                                                               // 2563
    0,                                                                                                               // 2564
    0,                                                                                                               // 2565
    0,                                                                                                               // 2566
    0,                                                                                                               // 2567
    1,                                                                                                               // 2568
    0,                                                                                                               // 2569
    0,                                                                                                               // 2570
    0,                                                                                                               // 2571
    0.001,                                                                                                           // 2572
    1                                                                                                                // 2573
];                                                                                                                   // 2574
Transform.behind = [                                                                                                 // 2575
    1,                                                                                                               // 2576
    0,                                                                                                               // 2577
    0,                                                                                                               // 2578
    0,                                                                                                               // 2579
    0,                                                                                                               // 2580
    1,                                                                                                               // 2581
    0,                                                                                                               // 2582
    0,                                                                                                               // 2583
    0,                                                                                                               // 2584
    0,                                                                                                               // 2585
    1,                                                                                                               // 2586
    0,                                                                                                               // 2587
    0,                                                                                                               // 2588
    0,                                                                                                               // 2589
    -0.001,                                                                                                          // 2590
    1                                                                                                                // 2591
];                                                                                                                   // 2592
module.exports = Transform;                                                                                          // 2593
},{}],21:[function(require,module,exports){                                                                          // 2594
var EventHandler = require('./EventHandler');                                                                        // 2595
var OptionsManager = require('./OptionsManager');                                                                    // 2596
var RenderNode = require('./RenderNode');                                                                            // 2597
var Utility = require('famous/utilities/Utility');                                                                   // 2598
function View(options) {                                                                                             // 2599
    this._node = new RenderNode();                                                                                   // 2600
    this._eventInput = new EventHandler();                                                                           // 2601
    this._eventOutput = new EventHandler();                                                                          // 2602
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 2603
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 2604
    this.options = Utility.clone(this.constructor.DEFAULT_OPTIONS || View.DEFAULT_OPTIONS);                          // 2605
    this._optionsManager = new OptionsManager(this.options);                                                         // 2606
    if (options)                                                                                                     // 2607
        this.setOptions(options);                                                                                    // 2608
}                                                                                                                    // 2609
View.DEFAULT_OPTIONS = {};                                                                                           // 2610
View.prototype.getOptions = function getOptions(key) {                                                               // 2611
    return this._optionsManager.getOptions(key);                                                                     // 2612
};                                                                                                                   // 2613
View.prototype.setOptions = function setOptions(options) {                                                           // 2614
    this._optionsManager.patch(options);                                                                             // 2615
};                                                                                                                   // 2616
View.prototype.add = function add() {                                                                                // 2617
    return this._node.add.apply(this._node, arguments);                                                              // 2618
};                                                                                                                   // 2619
View.prototype._add = View.prototype.add;                                                                            // 2620
View.prototype.render = function render() {                                                                          // 2621
    return this._node.render();                                                                                      // 2622
};                                                                                                                   // 2623
View.prototype.getSize = function getSize() {                                                                        // 2624
    if (this._node && this._node.getSize) {                                                                          // 2625
        return this._node.getSize.apply(this._node, arguments) || this.options.size;                                 // 2626
    } else                                                                                                           // 2627
        return this.options.size;                                                                                    // 2628
};                                                                                                                   // 2629
module.exports = View;                                                                                               // 2630
},{"./EventHandler":12,"./OptionsManager":15,"./RenderNode":16,"famous/utilities/Utility":86}],22:[function(require,module,exports){
function ViewSequence(options) {                                                                                     // 2632
    if (!options)                                                                                                    // 2633
        options = [];                                                                                                // 2634
    if (options instanceof Array)                                                                                    // 2635
        options = { array: options };                                                                                // 2636
    this._ = null;                                                                                                   // 2637
    this.index = options.index || 0;                                                                                 // 2638
    if (options.array)                                                                                               // 2639
        this._ = new this.constructor.Backing(options.array);                                                        // 2640
    else if (options._)                                                                                              // 2641
        this._ = options._;                                                                                          // 2642
    if (this.index === this._.firstIndex)                                                                            // 2643
        this._.firstNode = this;                                                                                     // 2644
    if (this.index === this._.firstIndex + this._.array.length - 1)                                                  // 2645
        this._.lastNode = this;                                                                                      // 2646
    if (options.loop !== undefined)                                                                                  // 2647
        this._.loop = options.loop;                                                                                  // 2648
    if (options.trackSize !== undefined)                                                                             // 2649
        this._.trackSize = options.trackSize;                                                                        // 2650
    this._previousNode = null;                                                                                       // 2651
    this._nextNode = null;                                                                                           // 2652
}                                                                                                                    // 2653
ViewSequence.Backing = function Backing(array) {                                                                     // 2654
    this.array = array;                                                                                              // 2655
    this.firstIndex = 0;                                                                                             // 2656
    this.loop = false;                                                                                               // 2657
    this.firstNode = null;                                                                                           // 2658
    this.lastNode = null;                                                                                            // 2659
    this.cumulativeSizes = [[                                                                                        // 2660
            0,                                                                                                       // 2661
            0                                                                                                        // 2662
        ]];                                                                                                          // 2663
    this.sizeDirty = true;                                                                                           // 2664
    this.trackSize = false;                                                                                          // 2665
};                                                                                                                   // 2666
ViewSequence.Backing.prototype.getValue = function getValue(i) {                                                     // 2667
    var _i = i - this.firstIndex;                                                                                    // 2668
    if (_i < 0 || _i >= this.array.length)                                                                           // 2669
        return null;                                                                                                 // 2670
    return this.array[_i];                                                                                           // 2671
};                                                                                                                   // 2672
ViewSequence.Backing.prototype.setValue = function setValue(i, value) {                                              // 2673
    this.array[i - this.firstIndex] = value;                                                                         // 2674
};                                                                                                                   // 2675
ViewSequence.Backing.prototype.getSize = function getSize(index) {                                                   // 2676
    return this.cumulativeSizes[index];                                                                              // 2677
};                                                                                                                   // 2678
ViewSequence.Backing.prototype.calculateSize = function calculateSize(index) {                                       // 2679
    index = index || this.array.length;                                                                              // 2680
    var size = [                                                                                                     // 2681
            0,                                                                                                       // 2682
            0                                                                                                        // 2683
        ];                                                                                                           // 2684
    for (var i = 0; i < index; i++) {                                                                                // 2685
        var nodeSize = this.array[i].getSize();                                                                      // 2686
        if (!nodeSize)                                                                                               // 2687
            return undefined;                                                                                        // 2688
        if (size[0] !== undefined) {                                                                                 // 2689
            if (nodeSize[0] === undefined)                                                                           // 2690
                size[0] = undefined;                                                                                 // 2691
            else                                                                                                     // 2692
                size[0] += nodeSize[0];                                                                              // 2693
        }                                                                                                            // 2694
        if (size[1] !== undefined) {                                                                                 // 2695
            if (nodeSize[1] === undefined)                                                                           // 2696
                size[1] = undefined;                                                                                 // 2697
            else                                                                                                     // 2698
                size[1] += nodeSize[1];                                                                              // 2699
        }                                                                                                            // 2700
        this.cumulativeSizes[i + 1] = size.slice();                                                                  // 2701
    }                                                                                                                // 2702
    this.sizeDirty = false;                                                                                          // 2703
    return size;                                                                                                     // 2704
};                                                                                                                   // 2705
ViewSequence.Backing.prototype.reindex = function reindex(start, removeCount, insertCount) {                         // 2706
    if (!this.array[0])                                                                                              // 2707
        return;                                                                                                      // 2708
    var i = 0;                                                                                                       // 2709
    var index = this.firstIndex;                                                                                     // 2710
    var indexShiftAmount = insertCount - removeCount;                                                                // 2711
    var node = this.firstNode;                                                                                       // 2712
    while (index < start - 1) {                                                                                      // 2713
        node = node.getNext();                                                                                       // 2714
        index++;                                                                                                     // 2715
    }                                                                                                                // 2716
    var spliceStartNode = node;                                                                                      // 2717
    for (i = 0; i < removeCount; i++) {                                                                              // 2718
        node = node.getNext();                                                                                       // 2719
        if (node)                                                                                                    // 2720
            node._previousNode = spliceStartNode;                                                                    // 2721
    }                                                                                                                // 2722
    var spliceResumeNode = node ? node.getNext() : null;                                                             // 2723
    spliceStartNode._nextNode = null;                                                                                // 2724
    node = spliceStartNode;                                                                                          // 2725
    for (i = 0; i < insertCount; i++)                                                                                // 2726
        node = node.getNext();                                                                                       // 2727
    index += insertCount;                                                                                            // 2728
    if (node !== spliceResumeNode) {                                                                                 // 2729
        node._nextNode = spliceResumeNode;                                                                           // 2730
        if (spliceResumeNode)                                                                                        // 2731
            spliceResumeNode._previousNode = node;                                                                   // 2732
    }                                                                                                                // 2733
    if (spliceResumeNode) {                                                                                          // 2734
        node = spliceResumeNode;                                                                                     // 2735
        index++;                                                                                                     // 2736
        while (node && index < this.array.length + this.firstIndex) {                                                // 2737
            if (node._nextNode)                                                                                      // 2738
                node.index += indexShiftAmount;                                                                      // 2739
            else                                                                                                     // 2740
                node.index = index;                                                                                  // 2741
            node = node.getNext();                                                                                   // 2742
            index++;                                                                                                 // 2743
        }                                                                                                            // 2744
    }                                                                                                                // 2745
    if (this._.trackSize)                                                                                            // 2746
        this._.sizeDirty = true;                                                                                     // 2747
};                                                                                                                   // 2748
ViewSequence.prototype.getPrevious = function getPrevious() {                                                        // 2749
    if (this.index === this._.firstIndex) {                                                                          // 2750
        if (this._.loop) {                                                                                           // 2751
            this._previousNode = this._.lastNode || new this.constructor({                                           // 2752
                _: this._,                                                                                           // 2753
                index: this._.firstIndex + this._.array.length - 1                                                   // 2754
            });                                                                                                      // 2755
            this._previousNode._nextNode = this;                                                                     // 2756
        } else {                                                                                                     // 2757
            this._previousNode = null;                                                                               // 2758
        }                                                                                                            // 2759
    } else if (!this._previousNode) {                                                                                // 2760
        this._previousNode = new this.constructor({                                                                  // 2761
            _: this._,                                                                                               // 2762
            index: this.index - 1                                                                                    // 2763
        });                                                                                                          // 2764
        this._previousNode._nextNode = this;                                                                         // 2765
    }                                                                                                                // 2766
    return this._previousNode;                                                                                       // 2767
};                                                                                                                   // 2768
ViewSequence.prototype.getNext = function getNext() {                                                                // 2769
    if (this.index === this._.firstIndex + this._.array.length - 1) {                                                // 2770
        if (this._.loop) {                                                                                           // 2771
            this._nextNode = this._.firstNode || new this.constructor({                                              // 2772
                _: this._,                                                                                           // 2773
                index: this._.firstIndex                                                                             // 2774
            });                                                                                                      // 2775
            this._nextNode._previousNode = this;                                                                     // 2776
        } else {                                                                                                     // 2777
            this._nextNode = null;                                                                                   // 2778
        }                                                                                                            // 2779
    } else if (!this._nextNode) {                                                                                    // 2780
        this._nextNode = new this.constructor({                                                                      // 2781
            _: this._,                                                                                               // 2782
            index: this.index + 1                                                                                    // 2783
        });                                                                                                          // 2784
        this._nextNode._previousNode = this;                                                                         // 2785
    }                                                                                                                // 2786
    return this._nextNode;                                                                                           // 2787
};                                                                                                                   // 2788
ViewSequence.prototype.getIndex = function getIndex() {                                                              // 2789
    return this.index;                                                                                               // 2790
};                                                                                                                   // 2791
ViewSequence.prototype.toString = function toString() {                                                              // 2792
    return '' + this.index;                                                                                          // 2793
};                                                                                                                   // 2794
ViewSequence.prototype.unshift = function unshift(value) {                                                           // 2795
    this._.array.unshift.apply(this._.array, arguments);                                                             // 2796
    this._.firstIndex -= arguments.length;                                                                           // 2797
    if (this._.trackSize)                                                                                            // 2798
        this._.sizeDirty = true;                                                                                     // 2799
};                                                                                                                   // 2800
ViewSequence.prototype.push = function push(value) {                                                                 // 2801
    this._.array.push.apply(this._.array, arguments);                                                                // 2802
    if (this._.trackSize)                                                                                            // 2803
        this._.sizeDirty = true;                                                                                     // 2804
};                                                                                                                   // 2805
ViewSequence.prototype.splice = function splice(index, howMany) {                                                    // 2806
    var values = Array.prototype.slice.call(arguments, 2);                                                           // 2807
    this._.array.splice.apply(this._.array, [                                                                        // 2808
        index - this._.firstIndex,                                                                                   // 2809
        howMany                                                                                                      // 2810
    ].concat(values));                                                                                               // 2811
    this._.reindex(index, howMany, values.length);                                                                   // 2812
};                                                                                                                   // 2813
ViewSequence.prototype.swap = function swap(other) {                                                                 // 2814
    var otherValue = other.get();                                                                                    // 2815
    var myValue = this.get();                                                                                        // 2816
    this._.setValue(this.index, otherValue);                                                                         // 2817
    this._.setValue(other.index, myValue);                                                                           // 2818
    var myPrevious = this._previousNode;                                                                             // 2819
    var myNext = this._nextNode;                                                                                     // 2820
    var myIndex = this.index;                                                                                        // 2821
    var otherPrevious = other._previousNode;                                                                         // 2822
    var otherNext = other._nextNode;                                                                                 // 2823
    var otherIndex = other.index;                                                                                    // 2824
    this.index = otherIndex;                                                                                         // 2825
    this._previousNode = otherPrevious === this ? other : otherPrevious;                                             // 2826
    if (this._previousNode)                                                                                          // 2827
        this._previousNode._nextNode = this;                                                                         // 2828
    this._nextNode = otherNext === this ? other : otherNext;                                                         // 2829
    if (this._nextNode)                                                                                              // 2830
        this._nextNode._previousNode = this;                                                                         // 2831
    other.index = myIndex;                                                                                           // 2832
    other._previousNode = myPrevious === other ? this : myPrevious;                                                  // 2833
    if (other._previousNode)                                                                                         // 2834
        other._previousNode._nextNode = other;                                                                       // 2835
    other._nextNode = myNext === other ? this : myNext;                                                              // 2836
    if (other._nextNode)                                                                                             // 2837
        other._nextNode._previousNode = other;                                                                       // 2838
    if (this.index === this._.firstIndex)                                                                            // 2839
        this._.firstNode = this;                                                                                     // 2840
    else if (this.index === this._.firstIndex + this._.array.length - 1)                                             // 2841
        this._.lastNode = this;                                                                                      // 2842
    if (other.index === this._.firstIndex)                                                                           // 2843
        this._.firstNode = other;                                                                                    // 2844
    else if (other.index === this._.firstIndex + this._.array.length - 1)                                            // 2845
        this._.lastNode = other;                                                                                     // 2846
    if (this._.trackSize)                                                                                            // 2847
        this._.sizeDirty = true;                                                                                     // 2848
};                                                                                                                   // 2849
ViewSequence.prototype.get = function get() {                                                                        // 2850
    return this._.getValue(this.index);                                                                              // 2851
};                                                                                                                   // 2852
ViewSequence.prototype.getSize = function getSize() {                                                                // 2853
    var target = this.get();                                                                                         // 2854
    return target ? target.getSize() : null;                                                                         // 2855
};                                                                                                                   // 2856
ViewSequence.prototype.render = function render() {                                                                  // 2857
    if (this._.trackSize && this._.sizeDirty)                                                                        // 2858
        this._.calculateSize();                                                                                      // 2859
    var target = this.get();                                                                                         // 2860
    return target ? target.render.apply(target, arguments) : null;                                                   // 2861
};                                                                                                                   // 2862
module.exports = ViewSequence;                                                                                       // 2863
},{}],23:[function(require,module,exports){                                                                          // 2864
var EventHandler = require('famous/core/EventHandler');                                                              // 2865
function EventArbiter(startMode) {                                                                                   // 2866
    this.dispatchers = {};                                                                                           // 2867
    this.currMode = undefined;                                                                                       // 2868
    this.setMode(startMode);                                                                                         // 2869
}                                                                                                                    // 2870
EventArbiter.prototype.setMode = function setMode(mode) {                                                            // 2871
    if (mode !== this.currMode) {                                                                                    // 2872
        var startMode = this.currMode;                                                                               // 2873
        if (this.dispatchers[this.currMode])                                                                         // 2874
            this.dispatchers[this.currMode].trigger('unpipe');                                                       // 2875
        this.currMode = mode;                                                                                        // 2876
        if (this.dispatchers[mode])                                                                                  // 2877
            this.dispatchers[mode].emit('pipe');                                                                     // 2878
        this.emit('change', {                                                                                        // 2879
            from: startMode,                                                                                         // 2880
            to: mode                                                                                                 // 2881
        });                                                                                                          // 2882
    }                                                                                                                // 2883
};                                                                                                                   // 2884
EventArbiter.prototype.forMode = function forMode(mode) {                                                            // 2885
    if (!this.dispatchers[mode])                                                                                     // 2886
        this.dispatchers[mode] = new EventHandler();                                                                 // 2887
    return this.dispatchers[mode];                                                                                   // 2888
};                                                                                                                   // 2889
EventArbiter.prototype.emit = function emit(eventType, event) {                                                      // 2890
    if (this.currMode === undefined)                                                                                 // 2891
        return false;                                                                                                // 2892
    if (!event)                                                                                                      // 2893
        event = {};                                                                                                  // 2894
    var dispatcher = this.dispatchers[this.currMode];                                                                // 2895
    if (dispatcher)                                                                                                  // 2896
        return dispatcher.trigger(eventType, event);                                                                 // 2897
};                                                                                                                   // 2898
module.exports = EventArbiter;                                                                                       // 2899
},{"famous/core/EventHandler":12}],24:[function(require,module,exports){                                             // 2900
var EventHandler = require('famous/core/EventHandler');                                                              // 2901
function EventFilter(condition) {                                                                                    // 2902
    EventHandler.call(this);                                                                                         // 2903
    this._condition = condition;                                                                                     // 2904
}                                                                                                                    // 2905
EventFilter.prototype = Object.create(EventHandler.prototype);                                                       // 2906
EventFilter.prototype.constructor = EventFilter;                                                                     // 2907
EventFilter.prototype.emit = function emit(type, data) {                                                             // 2908
    if (this._condition(type, data))                                                                                 // 2909
        return EventHandler.prototype.emit.apply(this, arguments);                                                   // 2910
};                                                                                                                   // 2911
EventFilter.prototype.trigger = EventFilter.prototype.emit;                                                          // 2912
module.exports = EventFilter;                                                                                        // 2913
},{"famous/core/EventHandler":12}],25:[function(require,module,exports){                                             // 2914
var EventHandler = require('famous/core/EventHandler');                                                              // 2915
function EventMapper(mappingFunction) {                                                                              // 2916
    EventHandler.call(this);                                                                                         // 2917
    this._mappingFunction = mappingFunction;                                                                         // 2918
}                                                                                                                    // 2919
EventMapper.prototype = Object.create(EventHandler.prototype);                                                       // 2920
EventMapper.prototype.constructor = EventMapper;                                                                     // 2921
EventMapper.prototype.subscribe = null;                                                                              // 2922
EventMapper.prototype.unsubscribe = null;                                                                            // 2923
EventMapper.prototype.emit = function emit(type, data) {                                                             // 2924
    var target = this._mappingFunction.apply(this, arguments);                                                       // 2925
    if (target && target.emit instanceof Function)                                                                   // 2926
        target.emit(type, data);                                                                                     // 2927
};                                                                                                                   // 2928
EventMapper.prototype.trigger = EventMapper.prototype.emit;                                                          // 2929
module.exports = EventMapper;                                                                                        // 2930
},{"famous/core/EventHandler":12}],26:[function(require,module,exports){                                             // 2931
var EventHandler = require('famous/core/EventHandler');                                                              // 2932
var Transitionable = require('famous/transitions/Transitionable');                                                   // 2933
function Accumulator(value, eventName) {                                                                             // 2934
    if (eventName === undefined)                                                                                     // 2935
        eventName = 'update';                                                                                        // 2936
    this._state = value && value.get && value.set ? value : new Transitionable(value || 0);                          // 2937
    this._eventInput = new EventHandler();                                                                           // 2938
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 2939
    this._eventInput.on(eventName, _handleUpdate.bind(this));                                                        // 2940
}                                                                                                                    // 2941
function _handleUpdate(data) {                                                                                       // 2942
    var delta = data.delta;                                                                                          // 2943
    var state = this.get();                                                                                          // 2944
    if (delta.constructor === state.constructor) {                                                                   // 2945
        var newState = delta instanceof Array ? [                                                                    // 2946
                state[0] + delta[0],                                                                                 // 2947
                state[1] + delta[1]                                                                                  // 2948
            ] : state + delta;                                                                                       // 2949
        this.set(newState);                                                                                          // 2950
    }                                                                                                                // 2951
}                                                                                                                    // 2952
Accumulator.prototype.get = function get() {                                                                         // 2953
    return this._state.get();                                                                                        // 2954
};                                                                                                                   // 2955
Accumulator.prototype.set = function set(value) {                                                                    // 2956
    this._state.set(value);                                                                                          // 2957
};                                                                                                                   // 2958
module.exports = Accumulator;                                                                                        // 2959
},{"famous/core/EventHandler":12,"famous/transitions/Transitionable":80}],27:[function(require,module,exports){      // 2960
(function () {                                                                                                       // 2961
    if (!window.CustomEvent)                                                                                         // 2962
        return;                                                                                                      // 2963
    var clickThreshold = 300;                                                                                        // 2964
    var clickWindow = 500;                                                                                           // 2965
    var potentialClicks = {};                                                                                        // 2966
    var recentlyDispatched = {};                                                                                     // 2967
    var _now = Date.now;                                                                                             // 2968
    window.addEventListener('touchstart', function (event) {                                                         // 2969
        var timestamp = _now();                                                                                      // 2970
        for (var i = 0; i < event.changedTouches.length; i++) {                                                      // 2971
            var touch = event.changedTouches[i];                                                                     // 2972
            potentialClicks[touch.identifier] = timestamp;                                                           // 2973
        }                                                                                                            // 2974
    });                                                                                                              // 2975
    window.addEventListener('touchmove', function (event) {                                                          // 2976
        for (var i = 0; i < event.changedTouches.length; i++) {                                                      // 2977
            var touch = event.changedTouches[i];                                                                     // 2978
            delete potentialClicks[touch.identifier];                                                                // 2979
        }                                                                                                            // 2980
    });                                                                                                              // 2981
    window.addEventListener('touchend', function (event) {                                                           // 2982
        var currTime = _now();                                                                                       // 2983
        for (var i = 0; i < event.changedTouches.length; i++) {                                                      // 2984
            var touch = event.changedTouches[i];                                                                     // 2985
            var startTime = potentialClicks[touch.identifier];                                                       // 2986
            if (startTime && currTime - startTime < clickThreshold) {                                                // 2987
                var clickEvt = new window.CustomEvent('click', {                                                     // 2988
                        'bubbles': true,                                                                             // 2989
                        'detail': touch                                                                              // 2990
                    });                                                                                              // 2991
                recentlyDispatched[currTime] = event;                                                                // 2992
                event.target.dispatchEvent(clickEvt);                                                                // 2993
            }                                                                                                        // 2994
            delete potentialClicks[touch.identifier];                                                                // 2995
        }                                                                                                            // 2996
    });                                                                                                              // 2997
    window.addEventListener('click', function (event) {                                                              // 2998
        var currTime = _now();                                                                                       // 2999
        for (var i in recentlyDispatched) {                                                                          // 3000
            var previousEvent = recentlyDispatched[i];                                                               // 3001
            if (currTime - i < clickWindow) {                                                                        // 3002
                if (event instanceof window.MouseEvent && event.target === previousEvent.target)                     // 3003
                    event.stopPropagation();                                                                         // 3004
            } else                                                                                                   // 3005
                delete recentlyDispatched[i];                                                                        // 3006
        }                                                                                                            // 3007
    }, true);                                                                                                        // 3008
}());                                                                                                                // 3009
},{}],28:[function(require,module,exports){                                                                          // 3010
var EventHandler = require('../core/EventHandler');                                                                  // 3011
function GenericSync(syncs, options) {                                                                               // 3012
    this._eventInput = new EventHandler();                                                                           // 3013
    this._eventOutput = new EventHandler();                                                                          // 3014
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 3015
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 3016
    this._syncs = {};                                                                                                // 3017
    if (syncs)                                                                                                       // 3018
        this.addSync(syncs);                                                                                         // 3019
    if (options)                                                                                                     // 3020
        this.setOptions(options);                                                                                    // 3021
}                                                                                                                    // 3022
GenericSync.DIRECTION_X = 0;                                                                                         // 3023
GenericSync.DIRECTION_Y = 1;                                                                                         // 3024
GenericSync.DIRECTION_Z = 2;                                                                                         // 3025
var registry = {};                                                                                                   // 3026
GenericSync.register = function register(syncObject) {                                                               // 3027
    for (var key in syncObject) {                                                                                    // 3028
        if (registry[key]) {                                                                                         // 3029
            if (registry[key] === syncObject[key])                                                                   // 3030
                return;                                                                                              // 3031
            else                                                                                                     // 3032
                throw new Error('this key is registered to a different sync class');                                 // 3033
        } else                                                                                                       // 3034
            registry[key] = syncObject[key];                                                                         // 3035
    }                                                                                                                // 3036
};                                                                                                                   // 3037
GenericSync.prototype.setOptions = function (options) {                                                              // 3038
    for (var key in this._syncs) {                                                                                   // 3039
        this._syncs[key].setOptions(options);                                                                        // 3040
    }                                                                                                                // 3041
};                                                                                                                   // 3042
GenericSync.prototype.pipeSync = function pipeToSync(key) {                                                          // 3043
    var sync = this._syncs[key];                                                                                     // 3044
    this._eventInput.pipe(sync);                                                                                     // 3045
    sync.pipe(this._eventOutput);                                                                                    // 3046
};                                                                                                                   // 3047
GenericSync.prototype.unpipeSync = function unpipeFromSync(key) {                                                    // 3048
    var sync = this._syncs[key];                                                                                     // 3049
    this._eventInput.unpipe(sync);                                                                                   // 3050
    sync.unpipe(this._eventOutput);                                                                                  // 3051
};                                                                                                                   // 3052
function _addSingleSync(key, options) {                                                                              // 3053
    if (!registry[key])                                                                                              // 3054
        return;                                                                                                      // 3055
    this._syncs[key] = new registry[key](options);                                                                   // 3056
    this.pipeSync(key);                                                                                              // 3057
}                                                                                                                    // 3058
GenericSync.prototype.addSync = function addSync(syncs) {                                                            // 3059
    if (syncs instanceof Array)                                                                                      // 3060
        for (var i = 0; i < syncs.length; i++)                                                                       // 3061
            _addSingleSync.call(this, syncs[i]);                                                                     // 3062
    else if (syncs instanceof Object)                                                                                // 3063
        for (var key in syncs)                                                                                       // 3064
            _addSingleSync.call(this, key, syncs[key]);                                                              // 3065
};                                                                                                                   // 3066
module.exports = GenericSync;                                                                                        // 3067
},{"../core/EventHandler":12}],29:[function(require,module,exports){                                                 // 3068
var EventHandler = require('../core/EventHandler');                                                                  // 3069
var OptionsManager = require('../core/OptionsManager');                                                              // 3070
function MouseSync(options) {                                                                                        // 3071
    this.options = Object.create(MouseSync.DEFAULT_OPTIONS);                                                         // 3072
    this._optionsManager = new OptionsManager(this.options);                                                         // 3073
    if (options)                                                                                                     // 3074
        this.setOptions(options);                                                                                    // 3075
    this._eventInput = new EventHandler();                                                                           // 3076
    this._eventOutput = new EventHandler();                                                                          // 3077
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 3078
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 3079
    this._eventInput.on('mousedown', _handleStart.bind(this));                                                       // 3080
    this._eventInput.on('mousemove', _handleMove.bind(this));                                                        // 3081
    this._eventInput.on('mouseup', _handleEnd.bind(this));                                                           // 3082
    if (this.options.propogate)                                                                                      // 3083
        this._eventInput.on('mouseleave', _handleLeave.bind(this));                                                  // 3084
    else                                                                                                             // 3085
        this._eventInput.on('mouseleave', _handleEnd.bind(this));                                                    // 3086
    this._payload = {                                                                                                // 3087
        delta: null,                                                                                                 // 3088
        position: null,                                                                                              // 3089
        velocity: null,                                                                                              // 3090
        clientX: 0,                                                                                                  // 3091
        clientY: 0,                                                                                                  // 3092
        offsetX: 0,                                                                                                  // 3093
        offsetY: 0                                                                                                   // 3094
    };                                                                                                               // 3095
    this._position = null;                                                                                           // 3096
    this._prevCoord = undefined;                                                                                     // 3097
    this._prevTime = undefined;                                                                                      // 3098
    this._down = false;                                                                                              // 3099
    this._moved = false;                                                                                             // 3100
}                                                                                                                    // 3101
MouseSync.DEFAULT_OPTIONS = {                                                                                        // 3102
    direction: undefined,                                                                                            // 3103
    rails: false,                                                                                                    // 3104
    scale: 1,                                                                                                        // 3105
    propogate: true,                                                                                                 // 3106
    preventDefault: true                                                                                             // 3107
};                                                                                                                   // 3108
MouseSync.DIRECTION_X = 0;                                                                                           // 3109
MouseSync.DIRECTION_Y = 1;                                                                                           // 3110
var MINIMUM_TICK_TIME = 8;                                                                                           // 3111
var _now = Date.now;                                                                                                 // 3112
function _handleStart(event) {                                                                                       // 3113
    var delta;                                                                                                       // 3114
    var velocity;                                                                                                    // 3115
    if (this.options.preventDefault)                                                                                 // 3116
        event.preventDefault();                                                                                      // 3117
    var x = event.clientX;                                                                                           // 3118
    var y = event.clientY;                                                                                           // 3119
    this._prevCoord = [                                                                                              // 3120
        x,                                                                                                           // 3121
        y                                                                                                            // 3122
    ];                                                                                                               // 3123
    this._prevTime = _now();                                                                                         // 3124
    this._down = true;                                                                                               // 3125
    this._move = false;                                                                                              // 3126
    if (this.options.direction !== undefined) {                                                                      // 3127
        this._position = 0;                                                                                          // 3128
        delta = 0;                                                                                                   // 3129
        velocity = 0;                                                                                                // 3130
    } else {                                                                                                         // 3131
        this._position = [                                                                                           // 3132
            0,                                                                                                       // 3133
            0                                                                                                        // 3134
        ];                                                                                                           // 3135
        delta = [                                                                                                    // 3136
            0,                                                                                                       // 3137
            0                                                                                                        // 3138
        ];                                                                                                           // 3139
        velocity = [                                                                                                 // 3140
            0,                                                                                                       // 3141
            0                                                                                                        // 3142
        ];                                                                                                           // 3143
    }                                                                                                                // 3144
    var payload = this._payload;                                                                                     // 3145
    payload.delta = delta;                                                                                           // 3146
    payload.position = this._position;                                                                               // 3147
    payload.velocity = velocity;                                                                                     // 3148
    payload.clientX = x;                                                                                             // 3149
    payload.clientY = y;                                                                                             // 3150
    payload.offsetX = event.offsetX;                                                                                 // 3151
    payload.offsetY = event.offsetY;                                                                                 // 3152
    this._eventOutput.emit('start', payload);                                                                        // 3153
}                                                                                                                    // 3154
function _handleMove(event) {                                                                                        // 3155
    if (!this._prevCoord)                                                                                            // 3156
        return;                                                                                                      // 3157
    var prevCoord = this._prevCoord;                                                                                 // 3158
    var prevTime = this._prevTime;                                                                                   // 3159
    var x = event.clientX;                                                                                           // 3160
    var y = event.clientY;                                                                                           // 3161
    var currTime = _now();                                                                                           // 3162
    var diffX = x - prevCoord[0];                                                                                    // 3163
    var diffY = y - prevCoord[1];                                                                                    // 3164
    if (this.options.rails) {                                                                                        // 3165
        if (Math.abs(diffX) > Math.abs(diffY))                                                                       // 3166
            diffY = 0;                                                                                               // 3167
        else                                                                                                         // 3168
            diffX = 0;                                                                                               // 3169
    }                                                                                                                // 3170
    var diffTime = Math.max(currTime - prevTime, MINIMUM_TICK_TIME);                                                 // 3171
    var velX = diffX / diffTime;                                                                                     // 3172
    var velY = diffY / diffTime;                                                                                     // 3173
    var scale = this.options.scale;                                                                                  // 3174
    var nextVel;                                                                                                     // 3175
    var nextDelta;                                                                                                   // 3176
    if (this.options.direction === MouseSync.DIRECTION_X) {                                                          // 3177
        nextDelta = scale * diffX;                                                                                   // 3178
        nextVel = scale * velX;                                                                                      // 3179
        this._position += nextDelta;                                                                                 // 3180
    } else if (this.options.direction === MouseSync.DIRECTION_Y) {                                                   // 3181
        nextDelta = scale * diffY;                                                                                   // 3182
        nextVel = scale * velY;                                                                                      // 3183
        this._position += nextDelta;                                                                                 // 3184
    } else {                                                                                                         // 3185
        nextDelta = [                                                                                                // 3186
            scale * diffX,                                                                                           // 3187
            scale * diffY                                                                                            // 3188
        ];                                                                                                           // 3189
        nextVel = [                                                                                                  // 3190
            scale * velX,                                                                                            // 3191
            scale * velY                                                                                             // 3192
        ];                                                                                                           // 3193
        this._position[0] += nextDelta[0];                                                                           // 3194
        this._position[1] += nextDelta[1];                                                                           // 3195
    }                                                                                                                // 3196
    var payload = this._payload;                                                                                     // 3197
    payload.delta = nextDelta;                                                                                       // 3198
    payload.position = this._position;                                                                               // 3199
    payload.velocity = nextVel;                                                                                      // 3200
    payload.clientX = x;                                                                                             // 3201
    payload.clientY = y;                                                                                             // 3202
    payload.offsetX = event.offsetX;                                                                                 // 3203
    payload.offsetY = event.offsetY;                                                                                 // 3204
    this._eventOutput.emit('update', payload);                                                                       // 3205
    this._prevCoord = [                                                                                              // 3206
        x,                                                                                                           // 3207
        y                                                                                                            // 3208
    ];                                                                                                               // 3209
    this._prevTime = currTime;                                                                                       // 3210
    this._move = true;                                                                                               // 3211
}                                                                                                                    // 3212
function _handleEnd(event) {                                                                                         // 3213
    if (!this._down)                                                                                                 // 3214
        return;                                                                                                      // 3215
    this._eventOutput.emit('end', this._payload);                                                                    // 3216
    this._prevCoord = undefined;                                                                                     // 3217
    this._prevTime = undefined;                                                                                      // 3218
    this._down = false;                                                                                              // 3219
    this._move = false;                                                                                              // 3220
}                                                                                                                    // 3221
function _handleLeave(event) {                                                                                       // 3222
    if (!this._down || !this._move)                                                                                  // 3223
        return;                                                                                                      // 3224
    var boundMove = _handleMove.bind(this);                                                                          // 3225
    var boundEnd = function (event) {                                                                                // 3226
            _handleEnd.call(this, event);                                                                            // 3227
            document.removeEventListener('mousemove', boundMove);                                                    // 3228
            document.removeEventListener('mouseup', boundEnd);                                                       // 3229
        }.bind(this, event);                                                                                         // 3230
    document.addEventListener('mousemove', boundMove);                                                               // 3231
    document.addEventListener('mouseup', boundEnd);                                                                  // 3232
}                                                                                                                    // 3233
MouseSync.prototype.getOptions = function getOptions() {                                                             // 3234
    return this.options;                                                                                             // 3235
};                                                                                                                   // 3236
MouseSync.prototype.setOptions = function setOptions(options) {                                                      // 3237
    return this._optionsManager.setOptions(options);                                                                 // 3238
};                                                                                                                   // 3239
module.exports = MouseSync;                                                                                          // 3240
},{"../core/EventHandler":12,"../core/OptionsManager":15}],30:[function(require,module,exports){                     // 3241
var TwoFingerSync = require('./TwoFingerSync');                                                                      // 3242
var OptionsManager = require('../core/OptionsManager');                                                              // 3243
function PinchSync(options) {                                                                                        // 3244
    TwoFingerSync.call(this);                                                                                        // 3245
    this.options = Object.create(PinchSync.DEFAULT_OPTIONS);                                                         // 3246
    this._optionsManager = new OptionsManager(this.options);                                                         // 3247
    if (options)                                                                                                     // 3248
        this.setOptions(options);                                                                                    // 3249
    this._displacement = 0;                                                                                          // 3250
    this._previousDistance = 0;                                                                                      // 3251
}                                                                                                                    // 3252
PinchSync.prototype = Object.create(TwoFingerSync.prototype);                                                        // 3253
PinchSync.prototype.constructor = PinchSync;                                                                         // 3254
PinchSync.DEFAULT_OPTIONS = { scale: 1 };                                                                            // 3255
PinchSync.prototype._startUpdate = function _startUpdate(event) {                                                    // 3256
    this._previousDistance = TwoFingerSync.calculateDistance(this.posA, this.posB);                                  // 3257
    this._displacement = 0;                                                                                          // 3258
    this._eventOutput.emit('start', {                                                                                // 3259
        count: event.touches.length,                                                                                 // 3260
        touches: [                                                                                                   // 3261
            this.touchAId,                                                                                           // 3262
            this.touchBId                                                                                            // 3263
        ],                                                                                                           // 3264
        distance: this._dist,                                                                                        // 3265
        center: TwoFingerSync.calculateCenter(this.posA, this.posB)                                                  // 3266
    });                                                                                                              // 3267
};                                                                                                                   // 3268
PinchSync.prototype._moveUpdate = function _moveUpdate(diffTime) {                                                   // 3269
    var currDist = TwoFingerSync.calculateDistance(this.posA, this.posB);                                            // 3270
    var center = TwoFingerSync.calculateCenter(this.posA, this.posB);                                                // 3271
    var scale = this.options.scale;                                                                                  // 3272
    var delta = scale * (currDist - this._previousDistance);                                                         // 3273
    var velocity = delta / diffTime;                                                                                 // 3274
    this._previousDistance = currDist;                                                                               // 3275
    this._displacement += delta;                                                                                     // 3276
    this._eventOutput.emit('update', {                                                                               // 3277
        delta: delta,                                                                                                // 3278
        velocity: velocity,                                                                                          // 3279
        distance: currDist,                                                                                          // 3280
        displacement: this._displacement,                                                                            // 3281
        center: center,                                                                                              // 3282
        touches: [                                                                                                   // 3283
            this.touchAId,                                                                                           // 3284
            this.touchBId                                                                                            // 3285
        ]                                                                                                            // 3286
    });                                                                                                              // 3287
};                                                                                                                   // 3288
PinchSync.prototype.getOptions = function getOptions() {                                                             // 3289
    return this.options;                                                                                             // 3290
};                                                                                                                   // 3291
PinchSync.prototype.setOptions = function setOptions(options) {                                                      // 3292
    return this._optionsManager.setOptions(options);                                                                 // 3293
};                                                                                                                   // 3294
module.exports = PinchSync;                                                                                          // 3295
},{"../core/OptionsManager":15,"./TwoFingerSync":36}],31:[function(require,module,exports){                          // 3296
var TwoFingerSync = require('./TwoFingerSync');                                                                      // 3297
var OptionsManager = require('../core/OptionsManager');                                                              // 3298
function RotateSync(options) {                                                                                       // 3299
    TwoFingerSync.call(this);                                                                                        // 3300
    this.options = Object.create(RotateSync.DEFAULT_OPTIONS);                                                        // 3301
    this._optionsManager = new OptionsManager(this.options);                                                         // 3302
    if (options)                                                                                                     // 3303
        this.setOptions(options);                                                                                    // 3304
    this._angle = 0;                                                                                                 // 3305
    this._previousAngle = 0;                                                                                         // 3306
}                                                                                                                    // 3307
RotateSync.prototype = Object.create(TwoFingerSync.prototype);                                                       // 3308
RotateSync.prototype.constructor = RotateSync;                                                                       // 3309
RotateSync.DEFAULT_OPTIONS = { scale: 1 };                                                                           // 3310
RotateSync.prototype._startUpdate = function _startUpdate(event) {                                                   // 3311
    this._angle = 0;                                                                                                 // 3312
    this._previousAngle = TwoFingerSync.calculateAngle(this.posA, this.posB);                                        // 3313
    var center = TwoFingerSync.calculateCenter(this.posA, this.posB);                                                // 3314
    this._eventOutput.emit('start', {                                                                                // 3315
        count: event.touches.length,                                                                                 // 3316
        angle: this._angle,                                                                                          // 3317
        center: center,                                                                                              // 3318
        touches: [                                                                                                   // 3319
            this.touchAId,                                                                                           // 3320
            this.touchBId                                                                                            // 3321
        ]                                                                                                            // 3322
    });                                                                                                              // 3323
};                                                                                                                   // 3324
RotateSync.prototype._moveUpdate = function _moveUpdate(diffTime) {                                                  // 3325
    var scale = this.options.scale;                                                                                  // 3326
    var currAngle = TwoFingerSync.calculateAngle(this.posA, this.posB);                                              // 3327
    var center = TwoFingerSync.calculateCenter(this.posA, this.posB);                                                // 3328
    var diffTheta = scale * (currAngle - this._previousAngle);                                                       // 3329
    var velTheta = diffTheta / diffTime;                                                                             // 3330
    this._angle += diffTheta;                                                                                        // 3331
    this._eventOutput.emit('update', {                                                                               // 3332
        delta: diffTheta,                                                                                            // 3333
        velocity: velTheta,                                                                                          // 3334
        angle: this._angle,                                                                                          // 3335
        center: center,                                                                                              // 3336
        touches: [                                                                                                   // 3337
            this.touchAId,                                                                                           // 3338
            this.touchBId                                                                                            // 3339
        ]                                                                                                            // 3340
    });                                                                                                              // 3341
    this._previousAngle = currAngle;                                                                                 // 3342
};                                                                                                                   // 3343
RotateSync.prototype.getOptions = function getOptions() {                                                            // 3344
    return this.options;                                                                                             // 3345
};                                                                                                                   // 3346
RotateSync.prototype.setOptions = function setOptions(options) {                                                     // 3347
    return this._optionsManager.setOptions(options);                                                                 // 3348
};                                                                                                                   // 3349
module.exports = RotateSync;                                                                                         // 3350
},{"../core/OptionsManager":15,"./TwoFingerSync":36}],32:[function(require,module,exports){                          // 3351
var TwoFingerSync = require('./TwoFingerSync');                                                                      // 3352
var OptionsManager = require('../core/OptionsManager');                                                              // 3353
function ScaleSync(options) {                                                                                        // 3354
    TwoFingerSync.call(this);                                                                                        // 3355
    this.options = Object.create(ScaleSync.DEFAULT_OPTIONS);                                                         // 3356
    this._optionsManager = new OptionsManager(this.options);                                                         // 3357
    if (options)                                                                                                     // 3358
        this.setOptions(options);                                                                                    // 3359
    this._scaleFactor = 1;                                                                                           // 3360
    this._startDist = 0;                                                                                             // 3361
    this._eventInput.on('pipe', _reset.bind(this));                                                                  // 3362
}                                                                                                                    // 3363
ScaleSync.prototype = Object.create(TwoFingerSync.prototype);                                                        // 3364
ScaleSync.prototype.constructor = ScaleSync;                                                                         // 3365
ScaleSync.DEFAULT_OPTIONS = { scale: 1 };                                                                            // 3366
function _reset() {                                                                                                  // 3367
    this.touchAId = undefined;                                                                                       // 3368
    this.touchBId = undefined;                                                                                       // 3369
}                                                                                                                    // 3370
ScaleSync.prototype._startUpdate = function _startUpdate(event) {                                                    // 3371
    this._scaleFactor = 1;                                                                                           // 3372
    this._startDist = TwoFingerSync.calculateDistance(this.posA, this.posB);                                         // 3373
    this._eventOutput.emit('start', {                                                                                // 3374
        count: event.touches.length,                                                                                 // 3375
        touches: [                                                                                                   // 3376
            this.touchAId,                                                                                           // 3377
            this.touchBId                                                                                            // 3378
        ],                                                                                                           // 3379
        distance: this._startDist,                                                                                   // 3380
        center: TwoFingerSync.calculateCenter(this.posA, this.posB)                                                  // 3381
    });                                                                                                              // 3382
};                                                                                                                   // 3383
ScaleSync.prototype._moveUpdate = function _moveUpdate(diffTime) {                                                   // 3384
    var scale = this.options.scale;                                                                                  // 3385
    var currDist = TwoFingerSync.calculateDistance(this.posA, this.posB);                                            // 3386
    var center = TwoFingerSync.calculateCenter(this.posA, this.posB);                                                // 3387
    var delta = (currDist - this._startDist) / this._startDist;                                                      // 3388
    var newScaleFactor = Math.max(1 + scale * delta, 0);                                                             // 3389
    var veloScale = (newScaleFactor - this._scaleFactor) / diffTime;                                                 // 3390
    this._eventOutput.emit('update', {                                                                               // 3391
        delta: delta,                                                                                                // 3392
        scale: newScaleFactor,                                                                                       // 3393
        velocity: veloScale,                                                                                         // 3394
        distance: currDist,                                                                                          // 3395
        center: center,                                                                                              // 3396
        touches: [                                                                                                   // 3397
            this.touchAId,                                                                                           // 3398
            this.touchBId                                                                                            // 3399
        ]                                                                                                            // 3400
    });                                                                                                              // 3401
    this._scaleFactor = newScaleFactor;                                                                              // 3402
};                                                                                                                   // 3403
ScaleSync.prototype.getOptions = function getOptions() {                                                             // 3404
    return this.options;                                                                                             // 3405
};                                                                                                                   // 3406
ScaleSync.prototype.setOptions = function setOptions(options) {                                                      // 3407
    return this._optionsManager.setOptions(options);                                                                 // 3408
};                                                                                                                   // 3409
module.exports = ScaleSync;                                                                                          // 3410
},{"../core/OptionsManager":15,"./TwoFingerSync":36}],33:[function(require,module,exports){                          // 3411
var EventHandler = require('../core/EventHandler');                                                                  // 3412
var Engine = require('../core/Engine');                                                                              // 3413
var OptionsManager = require('../core/OptionsManager');                                                              // 3414
function ScrollSync(options) {                                                                                       // 3415
    this.options = Object.create(ScrollSync.DEFAULT_OPTIONS);                                                        // 3416
    this._optionsManager = new OptionsManager(this.options);                                                         // 3417
    if (options)                                                                                                     // 3418
        this.setOptions(options);                                                                                    // 3419
    this._payload = {                                                                                                // 3420
        delta: null,                                                                                                 // 3421
        position: null,                                                                                              // 3422
        velocity: null,                                                                                              // 3423
        slip: true                                                                                                   // 3424
    };                                                                                                               // 3425
    this._eventInput = new EventHandler();                                                                           // 3426
    this._eventOutput = new EventHandler();                                                                          // 3427
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 3428
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 3429
    this._position = this.options.direction === undefined ? [                                                        // 3430
        0,                                                                                                           // 3431
        0                                                                                                            // 3432
    ] : 0;                                                                                                           // 3433
    this._prevTime = undefined;                                                                                      // 3434
    this._prevVel = undefined;                                                                                       // 3435
    this._eventInput.on('mousewheel', _handleMove.bind(this));                                                       // 3436
    this._eventInput.on('wheel', _handleMove.bind(this));                                                            // 3437
    this._inProgress = false;                                                                                        // 3438
    this._loopBound = false;                                                                                         // 3439
}                                                                                                                    // 3440
ScrollSync.DEFAULT_OPTIONS = {                                                                                       // 3441
    direction: undefined,                                                                                            // 3442
    minimumEndSpeed: Infinity,                                                                                       // 3443
    rails: false,                                                                                                    // 3444
    scale: 1,                                                                                                        // 3445
    stallTime: 50,                                                                                                   // 3446
    lineHeight: 40,                                                                                                  // 3447
    preventDefault: true                                                                                             // 3448
};                                                                                                                   // 3449
ScrollSync.DIRECTION_X = 0;                                                                                          // 3450
ScrollSync.DIRECTION_Y = 1;                                                                                          // 3451
var MINIMUM_TICK_TIME = 8;                                                                                           // 3452
var _now = Date.now;                                                                                                 // 3453
function _newFrame() {                                                                                               // 3454
    if (this._inProgress && _now() - this._prevTime > this.options.stallTime) {                                      // 3455
        this._inProgress = false;                                                                                    // 3456
        var finalVel = Math.abs(this._prevVel) >= this.options.minimumEndSpeed ? this._prevVel : 0;                  // 3457
        var payload = this._payload;                                                                                 // 3458
        payload.position = this._position;                                                                           // 3459
        payload.velocity = finalVel;                                                                                 // 3460
        payload.slip = true;                                                                                         // 3461
        this._eventOutput.emit('end', payload);                                                                      // 3462
    }                                                                                                                // 3463
}                                                                                                                    // 3464
function _handleMove(event) {                                                                                        // 3465
    if (this.options.preventDefault)                                                                                 // 3466
        event.preventDefault();                                                                                      // 3467
    if (!this._inProgress) {                                                                                         // 3468
        this._inProgress = true;                                                                                     // 3469
        this._position = this.options.direction === undefined ? [                                                    // 3470
            0,                                                                                                       // 3471
            0                                                                                                        // 3472
        ] : 0;                                                                                                       // 3473
        payload = this._payload;                                                                                     // 3474
        payload.slip = true;                                                                                         // 3475
        payload.position = this._position;                                                                           // 3476
        payload.clientX = event.clientX;                                                                             // 3477
        payload.clientY = event.clientY;                                                                             // 3478
        payload.offsetX = event.offsetX;                                                                             // 3479
        payload.offsetY = event.offsetY;                                                                             // 3480
        this._eventOutput.emit('start', payload);                                                                    // 3481
        if (!this._loopBound) {                                                                                      // 3482
            Engine.on('prerender', _newFrame.bind(this));                                                            // 3483
            this._loopBound = true;                                                                                  // 3484
        }                                                                                                            // 3485
    }                                                                                                                // 3486
    var currTime = _now();                                                                                           // 3487
    var prevTime = this._prevTime || currTime;                                                                       // 3488
    var diffX = event.wheelDeltaX !== undefined ? event.wheelDeltaX : -event.deltaX;                                 // 3489
    var diffY = event.wheelDeltaY !== undefined ? event.wheelDeltaY : -event.deltaY;                                 // 3490
    if (event.deltaMode === 1) {                                                                                     // 3491
        diffX *= this.options.lineHeight;                                                                            // 3492
        diffY *= this.options.lineHeight;                                                                            // 3493
    }                                                                                                                // 3494
    if (this.options.rails) {                                                                                        // 3495
        if (Math.abs(diffX) > Math.abs(diffY))                                                                       // 3496
            diffY = 0;                                                                                               // 3497
        else                                                                                                         // 3498
            diffX = 0;                                                                                               // 3499
    }                                                                                                                // 3500
    var diffTime = Math.max(currTime - prevTime, MINIMUM_TICK_TIME);                                                 // 3501
    var velX = diffX / diffTime;                                                                                     // 3502
    var velY = diffY / diffTime;                                                                                     // 3503
    var scale = this.options.scale;                                                                                  // 3504
    var nextVel;                                                                                                     // 3505
    var nextDelta;                                                                                                   // 3506
    if (this.options.direction === ScrollSync.DIRECTION_X) {                                                         // 3507
        nextDelta = scale * diffX;                                                                                   // 3508
        nextVel = scale * velX;                                                                                      // 3509
        this._position += nextDelta;                                                                                 // 3510
    } else if (this.options.direction === ScrollSync.DIRECTION_Y) {                                                  // 3511
        nextDelta = scale * diffY;                                                                                   // 3512
        nextVel = scale * velY;                                                                                      // 3513
        this._position += nextDelta;                                                                                 // 3514
    } else {                                                                                                         // 3515
        nextDelta = [                                                                                                // 3516
            scale * diffX,                                                                                           // 3517
            scale * diffY                                                                                            // 3518
        ];                                                                                                           // 3519
        nextVel = [                                                                                                  // 3520
            scale * velX,                                                                                            // 3521
            scale * velY                                                                                             // 3522
        ];                                                                                                           // 3523
        this._position[0] += nextDelta[0];                                                                           // 3524
        this._position[1] += nextDelta[1];                                                                           // 3525
    }                                                                                                                // 3526
    var payload = this._payload;                                                                                     // 3527
    payload.delta = nextDelta;                                                                                       // 3528
    payload.velocity = nextVel;                                                                                      // 3529
    payload.position = this._position;                                                                               // 3530
    payload.slip = true;                                                                                             // 3531
    this._eventOutput.emit('update', payload);                                                                       // 3532
    this._prevTime = currTime;                                                                                       // 3533
    this._prevVel = nextVel;                                                                                         // 3534
}                                                                                                                    // 3535
ScrollSync.prototype.getOptions = function getOptions() {                                                            // 3536
    return this.options;                                                                                             // 3537
};                                                                                                                   // 3538
ScrollSync.prototype.setOptions = function setOptions(options) {                                                     // 3539
    return this._optionsManager.setOptions(options);                                                                 // 3540
};                                                                                                                   // 3541
module.exports = ScrollSync;                                                                                         // 3542
},{"../core/Engine":9,"../core/EventHandler":12,"../core/OptionsManager":15}],34:[function(require,module,exports){  // 3543
var TouchTracker = require('./TouchTracker');                                                                        // 3544
var EventHandler = require('../core/EventHandler');                                                                  // 3545
var OptionsManager = require('../core/OptionsManager');                                                              // 3546
function TouchSync(options) {                                                                                        // 3547
    this.options = Object.create(TouchSync.DEFAULT_OPTIONS);                                                         // 3548
    this._optionsManager = new OptionsManager(this.options);                                                         // 3549
    if (options)                                                                                                     // 3550
        this.setOptions(options);                                                                                    // 3551
    this._eventOutput = new EventHandler();                                                                          // 3552
    this._touchTracker = new TouchTracker();                                                                         // 3553
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 3554
    EventHandler.setInputHandler(this, this._touchTracker);                                                          // 3555
    this._touchTracker.on('trackstart', _handleStart.bind(this));                                                    // 3556
    this._touchTracker.on('trackmove', _handleMove.bind(this));                                                      // 3557
    this._touchTracker.on('trackend', _handleEnd.bind(this));                                                        // 3558
    this._payload = {                                                                                                // 3559
        delta: null,                                                                                                 // 3560
        position: null,                                                                                              // 3561
        velocity: null,                                                                                              // 3562
        clientX: undefined,                                                                                          // 3563
        clientY: undefined,                                                                                          // 3564
        count: 0,                                                                                                    // 3565
        touch: undefined                                                                                             // 3566
    };                                                                                                               // 3567
    this._position = null;                                                                                           // 3568
}                                                                                                                    // 3569
TouchSync.DEFAULT_OPTIONS = {                                                                                        // 3570
    direction: undefined,                                                                                            // 3571
    rails: false,                                                                                                    // 3572
    scale: 1                                                                                                         // 3573
};                                                                                                                   // 3574
TouchSync.DIRECTION_X = 0;                                                                                           // 3575
TouchSync.DIRECTION_Y = 1;                                                                                           // 3576
var MINIMUM_TICK_TIME = 8;                                                                                           // 3577
function _handleStart(data) {                                                                                        // 3578
    var velocity;                                                                                                    // 3579
    var delta;                                                                                                       // 3580
    if (this.options.direction !== undefined) {                                                                      // 3581
        this._position = 0;                                                                                          // 3582
        velocity = 0;                                                                                                // 3583
        delta = 0;                                                                                                   // 3584
    } else {                                                                                                         // 3585
        this._position = [                                                                                           // 3586
            0,                                                                                                       // 3587
            0                                                                                                        // 3588
        ];                                                                                                           // 3589
        velocity = [                                                                                                 // 3590
            0,                                                                                                       // 3591
            0                                                                                                        // 3592
        ];                                                                                                           // 3593
        delta = [                                                                                                    // 3594
            0,                                                                                                       // 3595
            0                                                                                                        // 3596
        ];                                                                                                           // 3597
    }                                                                                                                // 3598
    var payload = this._payload;                                                                                     // 3599
    payload.delta = delta;                                                                                           // 3600
    payload.position = this._position;                                                                               // 3601
    payload.velocity = velocity;                                                                                     // 3602
    payload.clientX = data.x;                                                                                        // 3603
    payload.clientY = data.y;                                                                                        // 3604
    payload.count = data.count;                                                                                      // 3605
    payload.touch = data.identifier;                                                                                 // 3606
    this._eventOutput.emit('start', payload);                                                                        // 3607
}                                                                                                                    // 3608
function _handleMove(data) {                                                                                         // 3609
    var history = data.history;                                                                                      // 3610
    var currHistory = history[history.length - 1];                                                                   // 3611
    var prevHistory = history[history.length - 2];                                                                   // 3612
    var prevTime = prevHistory.timestamp;                                                                            // 3613
    var currTime = currHistory.timestamp;                                                                            // 3614
    var diffX = currHistory.x - prevHistory.x;                                                                       // 3615
    var diffY = currHistory.y - prevHistory.y;                                                                       // 3616
    if (this.options.rails) {                                                                                        // 3617
        if (Math.abs(diffX) > Math.abs(diffY))                                                                       // 3618
            diffY = 0;                                                                                               // 3619
        else                                                                                                         // 3620
            diffX = 0;                                                                                               // 3621
    }                                                                                                                // 3622
    var diffTime = Math.max(currTime - prevTime, MINIMUM_TICK_TIME);                                                 // 3623
    var velX = diffX / diffTime;                                                                                     // 3624
    var velY = diffY / diffTime;                                                                                     // 3625
    var scale = this.options.scale;                                                                                  // 3626
    var nextVel;                                                                                                     // 3627
    var nextDelta;                                                                                                   // 3628
    if (this.options.direction === TouchSync.DIRECTION_X) {                                                          // 3629
        nextDelta = scale * diffX;                                                                                   // 3630
        nextVel = scale * velX;                                                                                      // 3631
        this._position += nextDelta;                                                                                 // 3632
    } else if (this.options.direction === TouchSync.DIRECTION_Y) {                                                   // 3633
        nextDelta = scale * diffY;                                                                                   // 3634
        nextVel = scale * velY;                                                                                      // 3635
        this._position += nextDelta;                                                                                 // 3636
    } else {                                                                                                         // 3637
        nextDelta = [                                                                                                // 3638
            scale * diffX,                                                                                           // 3639
            scale * diffY                                                                                            // 3640
        ];                                                                                                           // 3641
        nextVel = [                                                                                                  // 3642
            scale * velX,                                                                                            // 3643
            scale * velY                                                                                             // 3644
        ];                                                                                                           // 3645
        this._position[0] += nextDelta[0];                                                                           // 3646
        this._position[1] += nextDelta[1];                                                                           // 3647
    }                                                                                                                // 3648
    var payload = this._payload;                                                                                     // 3649
    payload.delta = nextDelta;                                                                                       // 3650
    payload.velocity = nextVel;                                                                                      // 3651
    payload.position = this._position;                                                                               // 3652
    payload.clientX = data.x;                                                                                        // 3653
    payload.clientY = data.y;                                                                                        // 3654
    payload.count = data.count;                                                                                      // 3655
    payload.touch = data.identifier;                                                                                 // 3656
    this._eventOutput.emit('update', payload);                                                                       // 3657
}                                                                                                                    // 3658
function _handleEnd(data) {                                                                                          // 3659
    this._payload.count = data.count;                                                                                // 3660
    this._eventOutput.emit('end', this._payload);                                                                    // 3661
}                                                                                                                    // 3662
TouchSync.prototype.setOptions = function setOptions(options) {                                                      // 3663
    return this._optionsManager.setOptions(options);                                                                 // 3664
};                                                                                                                   // 3665
TouchSync.prototype.getOptions = function getOptions() {                                                             // 3666
    return this.options;                                                                                             // 3667
};                                                                                                                   // 3668
module.exports = TouchSync;                                                                                          // 3669
},{"../core/EventHandler":12,"../core/OptionsManager":15,"./TouchTracker":35}],35:[function(require,module,exports){ // 3670
var EventHandler = require('../core/EventHandler');                                                                  // 3671
var _now = Date.now;                                                                                                 // 3672
function _timestampTouch(touch, event, history) {                                                                    // 3673
    return {                                                                                                         // 3674
        x: touch.clientX,                                                                                            // 3675
        y: touch.clientY,                                                                                            // 3676
        identifier: touch.identifier,                                                                                // 3677
        origin: event.origin,                                                                                        // 3678
        timestamp: _now(),                                                                                           // 3679
        count: event.touches.length,                                                                                 // 3680
        history: history                                                                                             // 3681
    };                                                                                                               // 3682
}                                                                                                                    // 3683
function _handleStart(event) {                                                                                       // 3684
    for (var i = 0; i < event.changedTouches.length; i++) {                                                          // 3685
        var touch = event.changedTouches[i];                                                                         // 3686
        var data = _timestampTouch(touch, event, null);                                                              // 3687
        this.eventOutput.emit('trackstart', data);                                                                   // 3688
        if (!this.selective && !this.touchHistory[touch.identifier])                                                 // 3689
            this.track(data);                                                                                        // 3690
    }                                                                                                                // 3691
}                                                                                                                    // 3692
function _handleMove(event) {                                                                                        // 3693
    for (var i = 0; i < event.changedTouches.length; i++) {                                                          // 3694
        var touch = event.changedTouches[i];                                                                         // 3695
        var history = this.touchHistory[touch.identifier];                                                           // 3696
        if (history) {                                                                                               // 3697
            var data = _timestampTouch(touch, event, history);                                                       // 3698
            this.touchHistory[touch.identifier].push(data);                                                          // 3699
            this.eventOutput.emit('trackmove', data);                                                                // 3700
        }                                                                                                            // 3701
    }                                                                                                                // 3702
}                                                                                                                    // 3703
function _handleEnd(event) {                                                                                         // 3704
    for (var i = 0; i < event.changedTouches.length; i++) {                                                          // 3705
        var touch = event.changedTouches[i];                                                                         // 3706
        var history = this.touchHistory[touch.identifier];                                                           // 3707
        if (history) {                                                                                               // 3708
            var data = _timestampTouch(touch, event, history);                                                       // 3709
            this.eventOutput.emit('trackend', data);                                                                 // 3710
            delete this.touchHistory[touch.identifier];                                                              // 3711
        }                                                                                                            // 3712
    }                                                                                                                // 3713
}                                                                                                                    // 3714
function _handleUnpipe() {                                                                                           // 3715
    for (var i in this.touchHistory) {                                                                               // 3716
        var history = this.touchHistory[i];                                                                          // 3717
        this.eventOutput.emit('trackend', {                                                                          // 3718
            touch: history[history.length - 1].touch,                                                                // 3719
            timestamp: Date.now(),                                                                                   // 3720
            count: 0,                                                                                                // 3721
            history: history                                                                                         // 3722
        });                                                                                                          // 3723
        delete this.touchHistory[i];                                                                                 // 3724
    }                                                                                                                // 3725
}                                                                                                                    // 3726
function TouchTracker(selective) {                                                                                   // 3727
    this.selective = selective;                                                                                      // 3728
    this.touchHistory = {};                                                                                          // 3729
    this.eventInput = new EventHandler();                                                                            // 3730
    this.eventOutput = new EventHandler();                                                                           // 3731
    EventHandler.setInputHandler(this, this.eventInput);                                                             // 3732
    EventHandler.setOutputHandler(this, this.eventOutput);                                                           // 3733
    this.eventInput.on('touchstart', _handleStart.bind(this));                                                       // 3734
    this.eventInput.on('touchmove', _handleMove.bind(this));                                                         // 3735
    this.eventInput.on('touchend', _handleEnd.bind(this));                                                           // 3736
    this.eventInput.on('touchcancel', _handleEnd.bind(this));                                                        // 3737
    this.eventInput.on('unpipe', _handleUnpipe.bind(this));                                                          // 3738
}                                                                                                                    // 3739
TouchTracker.prototype.track = function track(data) {                                                                // 3740
    this.touchHistory[data.identifier] = [data];                                                                     // 3741
};                                                                                                                   // 3742
module.exports = TouchTracker;                                                                                       // 3743
},{"../core/EventHandler":12}],36:[function(require,module,exports){                                                 // 3744
var EventHandler = require('../core/EventHandler');                                                                  // 3745
function TwoFingerSync() {                                                                                           // 3746
    this._eventInput = new EventHandler();                                                                           // 3747
    this._eventOutput = new EventHandler();                                                                          // 3748
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 3749
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 3750
    this.touchAEnabled = false;                                                                                      // 3751
    this.touchAId = 0;                                                                                               // 3752
    this.posA = null;                                                                                                // 3753
    this.timestampA = 0;                                                                                             // 3754
    this.touchBEnabled = false;                                                                                      // 3755
    this.touchBId = 0;                                                                                               // 3756
    this.posB = null;                                                                                                // 3757
    this.timestampB = 0;                                                                                             // 3758
    this._eventInput.on('touchstart', this.handleStart.bind(this));                                                  // 3759
    this._eventInput.on('touchmove', this.handleMove.bind(this));                                                    // 3760
    this._eventInput.on('touchend', this.handleEnd.bind(this));                                                      // 3761
    this._eventInput.on('touchcancel', this.handleEnd.bind(this));                                                   // 3762
}                                                                                                                    // 3763
TwoFingerSync.calculateAngle = function (posA, posB) {                                                               // 3764
    var diffX = posB[0] - posA[0];                                                                                   // 3765
    var diffY = posB[1] - posA[1];                                                                                   // 3766
    return Math.atan2(diffY, diffX);                                                                                 // 3767
};                                                                                                                   // 3768
TwoFingerSync.calculateDistance = function (posA, posB) {                                                            // 3769
    var diffX = posB[0] - posA[0];                                                                                   // 3770
    var diffY = posB[1] - posA[1];                                                                                   // 3771
    return Math.sqrt(diffX * diffX + diffY * diffY);                                                                 // 3772
};                                                                                                                   // 3773
TwoFingerSync.calculateCenter = function (posA, posB) {                                                              // 3774
    return [                                                                                                         // 3775
        (posA[0] + posB[0]) / 2,                                                                                     // 3776
        (posA[1] + posB[1]) / 2                                                                                      // 3777
    ];                                                                                                               // 3778
};                                                                                                                   // 3779
var _now = Date.now;                                                                                                 // 3780
TwoFingerSync.prototype.handleStart = function handleStart(event) {                                                  // 3781
    for (var i = 0; i < event.changedTouches.length; i++) {                                                          // 3782
        var touch = event.changedTouches[i];                                                                         // 3783
        if (!this.touchAEnabled) {                                                                                   // 3784
            this.touchAId = touch.identifier;                                                                        // 3785
            this.touchAEnabled = true;                                                                               // 3786
            this.posA = [                                                                                            // 3787
                touch.pageX,                                                                                         // 3788
                touch.pageY                                                                                          // 3789
            ];                                                                                                       // 3790
            this.timestampA = _now();                                                                                // 3791
        } else if (!this.touchBEnabled) {                                                                            // 3792
            this.touchBId = touch.identifier;                                                                        // 3793
            this.touchBEnabled = true;                                                                               // 3794
            this.posB = [                                                                                            // 3795
                touch.pageX,                                                                                         // 3796
                touch.pageY                                                                                          // 3797
            ];                                                                                                       // 3798
            this.timestampB = _now();                                                                                // 3799
            this._startUpdate(event);                                                                                // 3800
        }                                                                                                            // 3801
    }                                                                                                                // 3802
};                                                                                                                   // 3803
TwoFingerSync.prototype.handleMove = function handleMove(event) {                                                    // 3804
    if (!(this.touchAEnabled && this.touchBEnabled))                                                                 // 3805
        return;                                                                                                      // 3806
    var prevTimeA = this.timestampA;                                                                                 // 3807
    var prevTimeB = this.timestampB;                                                                                 // 3808
    var diffTime;                                                                                                    // 3809
    for (var i = 0; i < event.changedTouches.length; i++) {                                                          // 3810
        var touch = event.changedTouches[i];                                                                         // 3811
        if (touch.identifier === this.touchAId) {                                                                    // 3812
            this.posA = [                                                                                            // 3813
                touch.pageX,                                                                                         // 3814
                touch.pageY                                                                                          // 3815
            ];                                                                                                       // 3816
            this.timestampA = _now();                                                                                // 3817
            diffTime = this.timestampA - prevTimeA;                                                                  // 3818
        } else if (touch.identifier === this.touchBId) {                                                             // 3819
            this.posB = [                                                                                            // 3820
                touch.pageX,                                                                                         // 3821
                touch.pageY                                                                                          // 3822
            ];                                                                                                       // 3823
            this.timestampB = _now();                                                                                // 3824
            diffTime = this.timestampB - prevTimeB;                                                                  // 3825
        }                                                                                                            // 3826
    }                                                                                                                // 3827
    if (diffTime)                                                                                                    // 3828
        this._moveUpdate(diffTime);                                                                                  // 3829
};                                                                                                                   // 3830
TwoFingerSync.prototype.handleEnd = function handleEnd(event) {                                                      // 3831
    for (var i = 0; i < event.changedTouches.length; i++) {                                                          // 3832
        var touch = event.changedTouches[i];                                                                         // 3833
        if (touch.identifier === this.touchAId || touch.identifier === this.touchBId) {                              // 3834
            if (this.touchAEnabled && this.touchBEnabled) {                                                          // 3835
                this._eventOutput.emit('end', {                                                                      // 3836
                    touches: [                                                                                       // 3837
                        this.touchAId,                                                                               // 3838
                        this.touchBId                                                                                // 3839
                    ],                                                                                               // 3840
                    angle: this._angle                                                                               // 3841
                });                                                                                                  // 3842
            }                                                                                                        // 3843
            this.touchAEnabled = false;                                                                              // 3844
            this.touchAId = 0;                                                                                       // 3845
            this.touchBEnabled = false;                                                                              // 3846
            this.touchBId = 0;                                                                                       // 3847
        }                                                                                                            // 3848
    }                                                                                                                // 3849
};                                                                                                                   // 3850
module.exports = TwoFingerSync;                                                                                      // 3851
},{"../core/EventHandler":12}],37:[function(require,module,exports){                                                 // 3852
var Vector = require('./Vector');                                                                                    // 3853
function Matrix(values) {                                                                                            // 3854
    this.values = values || [                                                                                        // 3855
        [                                                                                                            // 3856
            1,                                                                                                       // 3857
            0,                                                                                                       // 3858
            0                                                                                                        // 3859
        ],                                                                                                           // 3860
        [                                                                                                            // 3861
            0,                                                                                                       // 3862
            1,                                                                                                       // 3863
            0                                                                                                        // 3864
        ],                                                                                                           // 3865
        [                                                                                                            // 3866
            0,                                                                                                       // 3867
            0,                                                                                                       // 3868
            1                                                                                                        // 3869
        ]                                                                                                            // 3870
    ];                                                                                                               // 3871
    return this;                                                                                                     // 3872
}                                                                                                                    // 3873
var _register = new Matrix();                                                                                        // 3874
var _vectorRegister = new Vector();                                                                                  // 3875
Matrix.prototype.get = function get() {                                                                              // 3876
    return this.values;                                                                                              // 3877
};                                                                                                                   // 3878
Matrix.prototype.set = function set(values) {                                                                        // 3879
    this.values = values;                                                                                            // 3880
};                                                                                                                   // 3881
Matrix.prototype.vectorMultiply = function vectorMultiply(v) {                                                       // 3882
    var M = this.get();                                                                                              // 3883
    var v0 = v.x;                                                                                                    // 3884
    var v1 = v.y;                                                                                                    // 3885
    var v2 = v.z;                                                                                                    // 3886
    var M0 = M[0];                                                                                                   // 3887
    var M1 = M[1];                                                                                                   // 3888
    var M2 = M[2];                                                                                                   // 3889
    var M00 = M0[0];                                                                                                 // 3890
    var M01 = M0[1];                                                                                                 // 3891
    var M02 = M0[2];                                                                                                 // 3892
    var M10 = M1[0];                                                                                                 // 3893
    var M11 = M1[1];                                                                                                 // 3894
    var M12 = M1[2];                                                                                                 // 3895
    var M20 = M2[0];                                                                                                 // 3896
    var M21 = M2[1];                                                                                                 // 3897
    var M22 = M2[2];                                                                                                 // 3898
    return _vectorRegister.setXYZ(M00 * v0 + M01 * v1 + M02 * v2, M10 * v0 + M11 * v1 + M12 * v2, M20 * v0 + M21 * v1 + M22 * v2);
};                                                                                                                   // 3900
Matrix.prototype.multiply = function multiply(M2) {                                                                  // 3901
    var M1 = this.get();                                                                                             // 3902
    var result = [[]];                                                                                               // 3903
    for (var i = 0; i < 3; i++) {                                                                                    // 3904
        result[i] = [];                                                                                              // 3905
        for (var j = 0; j < 3; j++) {                                                                                // 3906
            var sum = 0;                                                                                             // 3907
            for (var k = 0; k < 3; k++) {                                                                            // 3908
                sum += M1[i][k] * M2[k][j];                                                                          // 3909
            }                                                                                                        // 3910
            result[i][j] = sum;                                                                                      // 3911
        }                                                                                                            // 3912
    }                                                                                                                // 3913
    return _register.set(result);                                                                                    // 3914
};                                                                                                                   // 3915
Matrix.prototype.transpose = function transpose() {                                                                  // 3916
    var result = [];                                                                                                 // 3917
    var M = this.get();                                                                                              // 3918
    for (var row = 0; row < 3; row++) {                                                                              // 3919
        for (var col = 0; col < 3; col++) {                                                                          // 3920
            result[row][col] = M[col][row];                                                                          // 3921
        }                                                                                                            // 3922
    }                                                                                                                // 3923
    return _register.set(result);                                                                                    // 3924
};                                                                                                                   // 3925
Matrix.prototype.clone = function clone() {                                                                          // 3926
    var values = this.get();                                                                                         // 3927
    var M = [];                                                                                                      // 3928
    for (var row = 0; row < 3; row++)                                                                                // 3929
        M[row] = values[row].slice();                                                                                // 3930
    return new Matrix(M);                                                                                            // 3931
};                                                                                                                   // 3932
module.exports = Matrix;                                                                                             // 3933
},{"./Vector":41}],38:[function(require,module,exports){                                                             // 3934
var Matrix = require('./Matrix');                                                                                    // 3935
function Quaternion(w, x, y, z) {                                                                                    // 3936
    if (arguments.length === 1)                                                                                      // 3937
        this.set(w);                                                                                                 // 3938
    else {                                                                                                           // 3939
        this.w = w !== undefined ? w : 1;                                                                            // 3940
        this.x = x !== undefined ? x : 0;                                                                            // 3941
        this.y = y !== undefined ? y : 0;                                                                            // 3942
        this.z = z !== undefined ? z : 0;                                                                            // 3943
    }                                                                                                                // 3944
    return this;                                                                                                     // 3945
}                                                                                                                    // 3946
var register = new Quaternion(1, 0, 0, 0);                                                                           // 3947
Quaternion.prototype.add = function add(q) {                                                                         // 3948
    return register.setWXYZ(this.w + q.w, this.x + q.x, this.y + q.y, this.z + q.z);                                 // 3949
};                                                                                                                   // 3950
Quaternion.prototype.sub = function sub(q) {                                                                         // 3951
    return register.setWXYZ(this.w - q.w, this.x - q.x, this.y - q.y, this.z - q.z);                                 // 3952
};                                                                                                                   // 3953
Quaternion.prototype.scalarDivide = function scalarDivide(s) {                                                       // 3954
    return this.scalarMultiply(1 / s);                                                                               // 3955
};                                                                                                                   // 3956
Quaternion.prototype.scalarMultiply = function scalarMultiply(s) {                                                   // 3957
    return register.setWXYZ(this.w * s, this.x * s, this.y * s, this.z * s);                                         // 3958
};                                                                                                                   // 3959
Quaternion.prototype.multiply = function multiply(q) {                                                               // 3960
    var x1 = this.x;                                                                                                 // 3961
    var y1 = this.y;                                                                                                 // 3962
    var z1 = this.z;                                                                                                 // 3963
    var w1 = this.w;                                                                                                 // 3964
    var x2 = q.x;                                                                                                    // 3965
    var y2 = q.y;                                                                                                    // 3966
    var z2 = q.z;                                                                                                    // 3967
    var w2 = q.w || 0;                                                                                               // 3968
    return register.setWXYZ(w1 * w2 - x1 * x2 - y1 * y2 - z1 * z2, x1 * w2 + x2 * w1 + y2 * z1 - y1 * z2, y1 * w2 + y2 * w1 + x1 * z2 - x2 * z1, z1 * w2 + z2 * w1 + x2 * y1 - x1 * y2);
};                                                                                                                   // 3970
var conj = new Quaternion(1, 0, 0, 0);                                                                               // 3971
Quaternion.prototype.rotateVector = function rotateVector(v) {                                                       // 3972
    conj.set(this.conj());                                                                                           // 3973
    return register.set(this.multiply(v).multiply(conj));                                                            // 3974
};                                                                                                                   // 3975
Quaternion.prototype.inverse = function inverse() {                                                                  // 3976
    return register.set(this.conj().scalarDivide(this.normSquared()));                                               // 3977
};                                                                                                                   // 3978
Quaternion.prototype.negate = function negate() {                                                                    // 3979
    return this.scalarMultiply(-1);                                                                                  // 3980
};                                                                                                                   // 3981
Quaternion.prototype.conj = function conj() {                                                                        // 3982
    return register.setWXYZ(this.w, -this.x, -this.y, -this.z);                                                      // 3983
};                                                                                                                   // 3984
Quaternion.prototype.normalize = function normalize(length) {                                                        // 3985
    length = length === undefined ? 1 : length;                                                                      // 3986
    return this.scalarDivide(length * this.norm());                                                                  // 3987
};                                                                                                                   // 3988
Quaternion.prototype.makeFromAngleAndAxis = function makeFromAngleAndAxis(angle, v) {                                // 3989
    var n = v.normalize();                                                                                           // 3990
    var ha = angle * 0.5;                                                                                            // 3991
    var s = -Math.sin(ha);                                                                                           // 3992
    this.x = s * n.x;                                                                                                // 3993
    this.y = s * n.y;                                                                                                // 3994
    this.z = s * n.z;                                                                                                // 3995
    this.w = Math.cos(ha);                                                                                           // 3996
    return this;                                                                                                     // 3997
};                                                                                                                   // 3998
Quaternion.prototype.setWXYZ = function setWXYZ(w, x, y, z) {                                                        // 3999
    register.clear();                                                                                                // 4000
    this.w = w;                                                                                                      // 4001
    this.x = x;                                                                                                      // 4002
    this.y = y;                                                                                                      // 4003
    this.z = z;                                                                                                      // 4004
    return this;                                                                                                     // 4005
};                                                                                                                   // 4006
Quaternion.prototype.set = function set(v) {                                                                         // 4007
    if (v instanceof Array) {                                                                                        // 4008
        this.w = 0;                                                                                                  // 4009
        this.x = v[0];                                                                                               // 4010
        this.y = v[1];                                                                                               // 4011
        this.z = v[2];                                                                                               // 4012
    } else {                                                                                                         // 4013
        this.w = v.w;                                                                                                // 4014
        this.x = v.x;                                                                                                // 4015
        this.y = v.y;                                                                                                // 4016
        this.z = v.z;                                                                                                // 4017
    }                                                                                                                // 4018
    if (this !== register)                                                                                           // 4019
        register.clear();                                                                                            // 4020
    return this;                                                                                                     // 4021
};                                                                                                                   // 4022
Quaternion.prototype.put = function put(q) {                                                                         // 4023
    q.set(register);                                                                                                 // 4024
};                                                                                                                   // 4025
Quaternion.prototype.clone = function clone() {                                                                      // 4026
    return new Quaternion(this);                                                                                     // 4027
};                                                                                                                   // 4028
Quaternion.prototype.clear = function clear() {                                                                      // 4029
    this.w = 1;                                                                                                      // 4030
    this.x = 0;                                                                                                      // 4031
    this.y = 0;                                                                                                      // 4032
    this.z = 0;                                                                                                      // 4033
    return this;                                                                                                     // 4034
};                                                                                                                   // 4035
Quaternion.prototype.isEqual = function isEqual(q) {                                                                 // 4036
    return q.w === this.w && q.x === this.x && q.y === this.y && q.z === this.z;                                     // 4037
};                                                                                                                   // 4038
Quaternion.prototype.dot = function dot(q) {                                                                         // 4039
    return this.w * q.w + this.x * q.x + this.y * q.y + this.z * q.z;                                                // 4040
};                                                                                                                   // 4041
Quaternion.prototype.normSquared = function normSquared() {                                                          // 4042
    return this.dot(this);                                                                                           // 4043
};                                                                                                                   // 4044
Quaternion.prototype.norm = function norm() {                                                                        // 4045
    return Math.sqrt(this.normSquared());                                                                            // 4046
};                                                                                                                   // 4047
Quaternion.prototype.isZero = function isZero() {                                                                    // 4048
    return !(this.x || this.y || this.z);                                                                            // 4049
};                                                                                                                   // 4050
Quaternion.prototype.getTransform = function getTransform() {                                                        // 4051
    var temp = this.normalize(1);                                                                                    // 4052
    var x = temp.x;                                                                                                  // 4053
    var y = temp.y;                                                                                                  // 4054
    var z = temp.z;                                                                                                  // 4055
    var w = temp.w;                                                                                                  // 4056
    return [                                                                                                         // 4057
        1 - 2 * y * y - 2 * z * z,                                                                                   // 4058
        2 * x * y - 2 * z * w,                                                                                       // 4059
        2 * x * z + 2 * y * w,                                                                                       // 4060
        0,                                                                                                           // 4061
        2 * x * y + 2 * z * w,                                                                                       // 4062
        1 - 2 * x * x - 2 * z * z,                                                                                   // 4063
        2 * y * z - 2 * x * w,                                                                                       // 4064
        0,                                                                                                           // 4065
        2 * x * z - 2 * y * w,                                                                                       // 4066
        2 * y * z + 2 * x * w,                                                                                       // 4067
        1 - 2 * x * x - 2 * y * y,                                                                                   // 4068
        0,                                                                                                           // 4069
        0,                                                                                                           // 4070
        0,                                                                                                           // 4071
        0,                                                                                                           // 4072
        1                                                                                                            // 4073
    ];                                                                                                               // 4074
};                                                                                                                   // 4075
var matrixRegister = new Matrix();                                                                                   // 4076
Quaternion.prototype.getMatrix = function getMatrix() {                                                              // 4077
    var temp = this.normalize(1);                                                                                    // 4078
    var x = temp.x;                                                                                                  // 4079
    var y = temp.y;                                                                                                  // 4080
    var z = temp.z;                                                                                                  // 4081
    var w = temp.w;                                                                                                  // 4082
    return matrixRegister.set([                                                                                      // 4083
        [                                                                                                            // 4084
            1 - 2 * y * y - 2 * z * z,                                                                               // 4085
            2 * x * y + 2 * z * w,                                                                                   // 4086
            2 * x * z - 2 * y * w                                                                                    // 4087
        ],                                                                                                           // 4088
        [                                                                                                            // 4089
            2 * x * y - 2 * z * w,                                                                                   // 4090
            1 - 2 * x * x - 2 * z * z,                                                                               // 4091
            2 * y * z + 2 * x * w                                                                                    // 4092
        ],                                                                                                           // 4093
        [                                                                                                            // 4094
            2 * x * z + 2 * y * w,                                                                                   // 4095
            2 * y * z - 2 * x * w,                                                                                   // 4096
            1 - 2 * x * x - 2 * y * y                                                                                // 4097
        ]                                                                                                            // 4098
    ]);                                                                                                              // 4099
};                                                                                                                   // 4100
var epsilon = 0.00001;                                                                                               // 4101
Quaternion.prototype.slerp = function slerp(q, t) {                                                                  // 4102
    var omega;                                                                                                       // 4103
    var cosomega;                                                                                                    // 4104
    var sinomega;                                                                                                    // 4105
    var scaleFrom;                                                                                                   // 4106
    var scaleTo;                                                                                                     // 4107
    cosomega = this.dot(q);                                                                                          // 4108
    if (1 - cosomega > epsilon) {                                                                                    // 4109
        omega = Math.acos(cosomega);                                                                                 // 4110
        sinomega = Math.sin(omega);                                                                                  // 4111
        scaleFrom = Math.sin((1 - t) * omega) / sinomega;                                                            // 4112
        scaleTo = Math.sin(t * omega) / sinomega;                                                                    // 4113
    } else {                                                                                                         // 4114
        scaleFrom = 1 - t;                                                                                           // 4115
        scaleTo = t;                                                                                                 // 4116
    }                                                                                                                // 4117
    return register.set(this.scalarMultiply(scaleFrom / scaleTo).add(q).multiply(scaleTo));                          // 4118
};                                                                                                                   // 4119
module.exports = Quaternion;                                                                                         // 4120
},{"./Matrix":37}],39:[function(require,module,exports){                                                             // 4121
var RAND = Math.random;                                                                                              // 4122
function _randomFloat(min, max) {                                                                                    // 4123
    return min + RAND() * (max - min);                                                                               // 4124
}                                                                                                                    // 4125
function _randomInteger(min, max) {                                                                                  // 4126
    return min + RAND() * (max - min + 1) >> 0;                                                                      // 4127
}                                                                                                                    // 4128
var Random = {};                                                                                                     // 4129
Random.integer = function integer(min, max, dim) {                                                                   // 4130
    min = min !== undefined ? min : 0;                                                                               // 4131
    max = max !== undefined ? max : 1;                                                                               // 4132
    if (dim !== undefined) {                                                                                         // 4133
        var result = [];                                                                                             // 4134
        for (var i = 0; i < dim; i++)                                                                                // 4135
            result.push(_randomInteger(min, max));                                                                   // 4136
        return result;                                                                                               // 4137
    } else                                                                                                           // 4138
        return _randomInteger(min, max);                                                                             // 4139
};                                                                                                                   // 4140
Random.range = function range(min, max, dim) {                                                                       // 4141
    min = min !== undefined ? min : 0;                                                                               // 4142
    max = max !== undefined ? max : 1;                                                                               // 4143
    if (dim !== undefined) {                                                                                         // 4144
        var result = [];                                                                                             // 4145
        for (var i = 0; i < dim; i++)                                                                                // 4146
            result.push(_randomFloat(min, max));                                                                     // 4147
        return result;                                                                                               // 4148
    } else                                                                                                           // 4149
        return _randomFloat(min, max);                                                                               // 4150
};                                                                                                                   // 4151
Random.sign = function sign(prob) {                                                                                  // 4152
    prob = prob !== undefined ? prob : 0.5;                                                                          // 4153
    return RAND() < prob ? 1 : -1;                                                                                   // 4154
};                                                                                                                   // 4155
Random.bool = function bool(prob) {                                                                                  // 4156
    prob = prob !== undefined ? prob : 0.5;                                                                          // 4157
    return RAND() < prob;                                                                                            // 4158
};                                                                                                                   // 4159
module.exports = Random;                                                                                             // 4160
},{}],40:[function(require,module,exports){                                                                          // 4161
var Utilities = {};                                                                                                  // 4162
Utilities.clamp = function clamp(value, range) {                                                                     // 4163
    return Math.max(Math.min(value, range[1]), range[0]);                                                            // 4164
};                                                                                                                   // 4165
Utilities.length = function length(array) {                                                                          // 4166
    var distanceSquared = 0;                                                                                         // 4167
    for (var i = 0; i < array.length; i++) {                                                                         // 4168
        distanceSquared += array[i] * array[i];                                                                      // 4169
    }                                                                                                                // 4170
    return Math.sqrt(distanceSquared);                                                                               // 4171
};                                                                                                                   // 4172
module.exports = Utilities;                                                                                          // 4173
},{}],41:[function(require,module,exports){                                                                          // 4174
function Vector(x, y, z) {                                                                                           // 4175
    if (arguments.length === 1 && x !== undefined)                                                                   // 4176
        this.set(x);                                                                                                 // 4177
    else {                                                                                                           // 4178
        this.x = x || 0;                                                                                             // 4179
        this.y = y || 0;                                                                                             // 4180
        this.z = z || 0;                                                                                             // 4181
    }                                                                                                                // 4182
    return this;                                                                                                     // 4183
}                                                                                                                    // 4184
var _register = new Vector(0, 0, 0);                                                                                 // 4185
Vector.prototype.add = function add(v) {                                                                             // 4186
    return _setXYZ.call(_register, this.x + v.x, this.y + v.y, this.z + v.z);                                        // 4187
};                                                                                                                   // 4188
Vector.prototype.sub = function sub(v) {                                                                             // 4189
    return _setXYZ.call(_register, this.x - v.x, this.y - v.y, this.z - v.z);                                        // 4190
};                                                                                                                   // 4191
Vector.prototype.mult = function mult(r) {                                                                           // 4192
    return _setXYZ.call(_register, r * this.x, r * this.y, r * this.z);                                              // 4193
};                                                                                                                   // 4194
Vector.prototype.div = function div(r) {                                                                             // 4195
    return this.mult(1 / r);                                                                                         // 4196
};                                                                                                                   // 4197
Vector.prototype.cross = function cross(v) {                                                                         // 4198
    var x = this.x;                                                                                                  // 4199
    var y = this.y;                                                                                                  // 4200
    var z = this.z;                                                                                                  // 4201
    var vx = v.x;                                                                                                    // 4202
    var vy = v.y;                                                                                                    // 4203
    var vz = v.z;                                                                                                    // 4204
    return _setXYZ.call(_register, z * vy - y * vz, x * vz - z * vx, y * vx - x * vy);                               // 4205
};                                                                                                                   // 4206
Vector.prototype.equals = function equals(v) {                                                                       // 4207
    return v.x === this.x && v.y === this.y && v.z === this.z;                                                       // 4208
};                                                                                                                   // 4209
Vector.prototype.rotateX = function rotateX(theta) {                                                                 // 4210
    var x = this.x;                                                                                                  // 4211
    var y = this.y;                                                                                                  // 4212
    var z = this.z;                                                                                                  // 4213
    var cosTheta = Math.cos(theta);                                                                                  // 4214
    var sinTheta = Math.sin(theta);                                                                                  // 4215
    return _setXYZ.call(_register, x, y * cosTheta - z * sinTheta, y * sinTheta + z * cosTheta);                     // 4216
};                                                                                                                   // 4217
Vector.prototype.rotateY = function rotateY(theta) {                                                                 // 4218
    var x = this.x;                                                                                                  // 4219
    var y = this.y;                                                                                                  // 4220
    var z = this.z;                                                                                                  // 4221
    var cosTheta = Math.cos(theta);                                                                                  // 4222
    var sinTheta = Math.sin(theta);                                                                                  // 4223
    return _setXYZ.call(_register, z * sinTheta + x * cosTheta, y, z * cosTheta - x * sinTheta);                     // 4224
};                                                                                                                   // 4225
Vector.prototype.rotateZ = function rotateZ(theta) {                                                                 // 4226
    var x = this.x;                                                                                                  // 4227
    var y = this.y;                                                                                                  // 4228
    var z = this.z;                                                                                                  // 4229
    var cosTheta = Math.cos(theta);                                                                                  // 4230
    var sinTheta = Math.sin(theta);                                                                                  // 4231
    return _setXYZ.call(_register, x * cosTheta - y * sinTheta, x * sinTheta + y * cosTheta, z);                     // 4232
};                                                                                                                   // 4233
Vector.prototype.dot = function dot(v) {                                                                             // 4234
    return this.x * v.x + this.y * v.y + this.z * v.z;                                                               // 4235
};                                                                                                                   // 4236
Vector.prototype.normSquared = function normSquared() {                                                              // 4237
    return this.dot(this);                                                                                           // 4238
};                                                                                                                   // 4239
Vector.prototype.norm = function norm() {                                                                            // 4240
    return Math.sqrt(this.normSquared());                                                                            // 4241
};                                                                                                                   // 4242
Vector.prototype.normalize = function normalize(length) {                                                            // 4243
    if (arguments.length === 0)                                                                                      // 4244
        length = 1;                                                                                                  // 4245
    var norm = this.norm();                                                                                          // 4246
    if (norm > 1e-7)                                                                                                 // 4247
        return _setFromVector.call(_register, this.mult(length / norm));                                             // 4248
    else                                                                                                             // 4249
        return _setXYZ.call(_register, length, 0, 0);                                                                // 4250
};                                                                                                                   // 4251
Vector.prototype.clone = function clone() {                                                                          // 4252
    return new Vector(this);                                                                                         // 4253
};                                                                                                                   // 4254
Vector.prototype.isZero = function isZero() {                                                                        // 4255
    return !(this.x || this.y || this.z);                                                                            // 4256
};                                                                                                                   // 4257
function _setXYZ(x, y, z) {                                                                                          // 4258
    this.x = x;                                                                                                      // 4259
    this.y = y;                                                                                                      // 4260
    this.z = z;                                                                                                      // 4261
    return this;                                                                                                     // 4262
}                                                                                                                    // 4263
function _setFromArray(v) {                                                                                          // 4264
    return _setXYZ.call(this, v[0], v[1], v[2] || 0);                                                                // 4265
}                                                                                                                    // 4266
function _setFromVector(v) {                                                                                         // 4267
    return _setXYZ.call(this, v.x, v.y, v.z);                                                                        // 4268
}                                                                                                                    // 4269
function _setFromNumber(x) {                                                                                         // 4270
    return _setXYZ.call(this, x, 0, 0);                                                                              // 4271
}                                                                                                                    // 4272
Vector.prototype.set = function set(v) {                                                                             // 4273
    if (v instanceof Array)                                                                                          // 4274
        return _setFromArray.call(this, v);                                                                          // 4275
    if (typeof v === 'number')                                                                                       // 4276
        return _setFromNumber.call(this, v);                                                                         // 4277
    return _setFromVector.call(this, v);                                                                             // 4278
};                                                                                                                   // 4279
Vector.prototype.setXYZ = function (x, y, z) {                                                                       // 4280
    return _setXYZ.apply(this, arguments);                                                                           // 4281
};                                                                                                                   // 4282
Vector.prototype.set1D = function (x) {                                                                              // 4283
    return _setFromNumber.call(this, x);                                                                             // 4284
};                                                                                                                   // 4285
Vector.prototype.put = function put(v) {                                                                             // 4286
    if (this === _register)                                                                                          // 4287
        _setFromVector.call(v, _register);                                                                           // 4288
    else                                                                                                             // 4289
        _setFromVector.call(v, this);                                                                                // 4290
};                                                                                                                   // 4291
Vector.prototype.clear = function clear() {                                                                          // 4292
    return _setXYZ.call(this, 0, 0, 0);                                                                              // 4293
};                                                                                                                   // 4294
Vector.prototype.cap = function cap(cap) {                                                                           // 4295
    if (cap === Infinity)                                                                                            // 4296
        return _setFromVector.call(_register, this);                                                                 // 4297
    var norm = this.norm();                                                                                          // 4298
    if (norm > cap)                                                                                                  // 4299
        return _setFromVector.call(_register, this.mult(cap / norm));                                                // 4300
    else                                                                                                             // 4301
        return _setFromVector.call(_register, this);                                                                 // 4302
};                                                                                                                   // 4303
Vector.prototype.project = function project(n) {                                                                     // 4304
    return n.mult(this.dot(n));                                                                                      // 4305
};                                                                                                                   // 4306
Vector.prototype.reflectAcross = function reflectAcross(n) {                                                         // 4307
    n.normalize().put(n);                                                                                            // 4308
    return _setFromVector(_register, this.sub(this.project(n).mult(2)));                                             // 4309
};                                                                                                                   // 4310
Vector.prototype.get = function get() {                                                                              // 4311
    return [                                                                                                         // 4312
        this.x,                                                                                                      // 4313
        this.y,                                                                                                      // 4314
        this.z                                                                                                       // 4315
    ];                                                                                                               // 4316
};                                                                                                                   // 4317
Vector.prototype.get1D = function () {                                                                               // 4318
    return this.x;                                                                                                   // 4319
};                                                                                                                   // 4320
module.exports = Vector;                                                                                             // 4321
},{}],42:[function(require,module,exports){                                                                          // 4322
var Transform = require('famous/core/Transform');                                                                    // 4323
var Transitionable = require('famous/transitions/Transitionable');                                                   // 4324
var EventHandler = require('famous/core/EventHandler');                                                              // 4325
var Utilities = require('famous/math/Utilities');                                                                    // 4326
var GenericSync = require('famous/inputs/GenericSync');                                                              // 4327
var MouseSync = require('famous/inputs/MouseSync');                                                                  // 4328
var TouchSync = require('famous/inputs/TouchSync');                                                                  // 4329
GenericSync.register({                                                                                               // 4330
    'mouse': MouseSync,                                                                                              // 4331
    'touch': TouchSync                                                                                               // 4332
});                                                                                                                  // 4333
function Draggable(options) {                                                                                        // 4334
    this.options = Object.create(Draggable.DEFAULT_OPTIONS);                                                         // 4335
    if (options)                                                                                                     // 4336
        this.setOptions(options);                                                                                    // 4337
    this._positionState = new Transitionable([                                                                       // 4338
        0,                                                                                                           // 4339
        0                                                                                                            // 4340
    ]);                                                                                                              // 4341
    this._differential = [                                                                                           // 4342
        0,                                                                                                           // 4343
        0                                                                                                            // 4344
    ];                                                                                                               // 4345
    this._active = true;                                                                                             // 4346
    this.sync = new GenericSync([                                                                                    // 4347
        'mouse',                                                                                                     // 4348
        'touch'                                                                                                      // 4349
    ], { scale: this.options.scale });                                                                               // 4350
    this.eventOutput = new EventHandler();                                                                           // 4351
    EventHandler.setInputHandler(this, this.sync);                                                                   // 4352
    EventHandler.setOutputHandler(this, this.eventOutput);                                                           // 4353
    _bindEvents.call(this);                                                                                          // 4354
}                                                                                                                    // 4355
var _direction = {                                                                                                   // 4356
        x: 1,                                                                                                        // 4357
        y: 2                                                                                                         // 4358
    };                                                                                                               // 4359
Draggable.DIRECTION_X = _direction.x;                                                                                // 4360
Draggable.DIRECTION_Y = _direction.y;                                                                                // 4361
var _clamp = Utilities.clamp;                                                                                        // 4362
Draggable.DEFAULT_OPTIONS = {                                                                                        // 4363
    projection: _direction.x | _direction.y,                                                                         // 4364
    scale: 1,                                                                                                        // 4365
    xRange: null,                                                                                                    // 4366
    yRange: null,                                                                                                    // 4367
    snapX: 0,                                                                                                        // 4368
    snapY: 0,                                                                                                        // 4369
    transition: { duration: 0 }                                                                                      // 4370
};                                                                                                                   // 4371
function _mapDifferential(differential) {                                                                            // 4372
    var opts = this.options;                                                                                         // 4373
    var projection = opts.projection;                                                                                // 4374
    var snapX = opts.snapX;                                                                                          // 4375
    var snapY = opts.snapY;                                                                                          // 4376
    var tx = projection & _direction.x ? differential[0] : 0;                                                        // 4377
    var ty = projection & _direction.y ? differential[1] : 0;                                                        // 4378
    if (snapX > 0)                                                                                                   // 4379
        tx -= tx % snapX;                                                                                            // 4380
    if (snapY > 0)                                                                                                   // 4381
        ty -= ty % snapY;                                                                                            // 4382
    return [                                                                                                         // 4383
        tx,                                                                                                          // 4384
        ty                                                                                                           // 4385
    ];                                                                                                               // 4386
}                                                                                                                    // 4387
function _handleStart() {                                                                                            // 4388
    if (!this._active)                                                                                               // 4389
        return;                                                                                                      // 4390
    if (this._positionState.isActive())                                                                              // 4391
        this._positionState.halt();                                                                                  // 4392
    this.eventOutput.emit('start', { position: this.getPosition() });                                                // 4393
}                                                                                                                    // 4394
function _handleMove(event) {                                                                                        // 4395
    if (!this._active)                                                                                               // 4396
        return;                                                                                                      // 4397
    var options = this.options;                                                                                      // 4398
    this._differential = event.position;                                                                             // 4399
    var newDifferential = _mapDifferential.call(this, this._differential);                                           // 4400
    this._differential[0] -= newDifferential[0];                                                                     // 4401
    this._differential[1] -= newDifferential[1];                                                                     // 4402
    var pos = this.getPosition();                                                                                    // 4403
    pos[0] += newDifferential[0];                                                                                    // 4404
    pos[1] += newDifferential[1];                                                                                    // 4405
    if (options.xRange) {                                                                                            // 4406
        var xRange = [                                                                                               // 4407
                options.xRange[0] + 0.5 * options.snapX,                                                             // 4408
                options.xRange[1] - 0.5 * options.snapX                                                              // 4409
            ];                                                                                                       // 4410
        pos[0] = _clamp(pos[0], xRange);                                                                             // 4411
    }                                                                                                                // 4412
    if (options.yRange) {                                                                                            // 4413
        var yRange = [                                                                                               // 4414
                options.yRange[0] + 0.5 * options.snapY,                                                             // 4415
                options.yRange[1] - 0.5 * options.snapY                                                              // 4416
            ];                                                                                                       // 4417
        pos[1] = _clamp(pos[1], yRange);                                                                             // 4418
    }                                                                                                                // 4419
    this.eventOutput.emit('update', { position: pos });                                                              // 4420
}                                                                                                                    // 4421
function _handleEnd() {                                                                                              // 4422
    if (!this._active)                                                                                               // 4423
        return;                                                                                                      // 4424
    this.eventOutput.emit('end', { position: this.getPosition() });                                                  // 4425
}                                                                                                                    // 4426
function _bindEvents() {                                                                                             // 4427
    this.sync.on('start', _handleStart.bind(this));                                                                  // 4428
    this.sync.on('update', _handleMove.bind(this));                                                                  // 4429
    this.sync.on('end', _handleEnd.bind(this));                                                                      // 4430
}                                                                                                                    // 4431
Draggable.prototype.setOptions = function setOptions(options) {                                                      // 4432
    var currentOptions = this.options;                                                                               // 4433
    if (options.projection !== undefined) {                                                                          // 4434
        var proj = options.projection;                                                                               // 4435
        this.options.projection = 0;                                                                                 // 4436
        [                                                                                                            // 4437
            'x',                                                                                                     // 4438
            'y'                                                                                                      // 4439
        ].forEach(function (val) {                                                                                   // 4440
            if (proj.indexOf(val) !== -1)                                                                            // 4441
                currentOptions.projection |= _direction[val];                                                        // 4442
        });                                                                                                          // 4443
    }                                                                                                                // 4444
    if (options.scale !== undefined) {                                                                               // 4445
        currentOptions.scale = options.scale;                                                                        // 4446
        this.sync.setOptions({ scale: options.scale });                                                              // 4447
    }                                                                                                                // 4448
    if (options.xRange !== undefined)                                                                                // 4449
        currentOptions.xRange = options.xRange;                                                                      // 4450
    if (options.yRange !== undefined)                                                                                // 4451
        currentOptions.yRange = options.yRange;                                                                      // 4452
    if (options.snapX !== undefined)                                                                                 // 4453
        currentOptions.snapX = options.snapX;                                                                        // 4454
    if (options.snapY !== undefined)                                                                                 // 4455
        currentOptions.snapY = options.snapY;                                                                        // 4456
};                                                                                                                   // 4457
Draggable.prototype.getPosition = function getPosition() {                                                           // 4458
    return this._positionState.get();                                                                                // 4459
};                                                                                                                   // 4460
Draggable.prototype.setRelativePosition = function setRelativePosition(position, transition, callback) {             // 4461
    var currPos = this.getPosition();                                                                                // 4462
    var relativePosition = [                                                                                         // 4463
            currPos[0] + position[0],                                                                                // 4464
            currPos[1] + position[1]                                                                                 // 4465
        ];                                                                                                           // 4466
    this.setPosition(relativePosition, transition, callback);                                                        // 4467
};                                                                                                                   // 4468
Draggable.prototype.setPosition = function setPosition(position, transition, callback) {                             // 4469
    if (this._positionState.isActive())                                                                              // 4470
        this._positionState.halt();                                                                                  // 4471
    this._positionState.set(position, transition, callback);                                                         // 4472
};                                                                                                                   // 4473
Draggable.prototype.activate = function activate() {                                                                 // 4474
    this._active = true;                                                                                             // 4475
};                                                                                                                   // 4476
Draggable.prototype.deactivate = function deactivate() {                                                             // 4477
    this._active = false;                                                                                            // 4478
};                                                                                                                   // 4479
Draggable.prototype.toggle = function toggle() {                                                                     // 4480
    this._active = !this._active;                                                                                    // 4481
};                                                                                                                   // 4482
Draggable.prototype.modify = function modify(target) {                                                               // 4483
    var pos = this.getPosition();                                                                                    // 4484
    return {                                                                                                         // 4485
        transform: Transform.translate(pos[0], pos[1]),                                                              // 4486
        target: target                                                                                               // 4487
    };                                                                                                               // 4488
};                                                                                                                   // 4489
module.exports = Draggable;                                                                                          // 4490
},{"famous/core/EventHandler":12,"famous/core/Transform":20,"famous/inputs/GenericSync":28,"famous/inputs/MouseSync":29,"famous/inputs/TouchSync":34,"famous/math/Utilities":40,"famous/transitions/Transitionable":80}],43:[function(require,module,exports){
var Transitionable = require('famous/transitions/Transitionable');                                                   // 4492
var OptionsManager = require('famous/core/OptionsManager');                                                          // 4493
function Fader(options, startState) {                                                                                // 4494
    this.options = Object.create(Fader.DEFAULT_OPTIONS);                                                             // 4495
    this._optionsManager = new OptionsManager(this.options);                                                         // 4496
    if (options)                                                                                                     // 4497
        this.setOptions(options);                                                                                    // 4498
    if (!startState)                                                                                                 // 4499
        startState = 0;                                                                                              // 4500
    this.transitionHelper = new Transitionable(startState);                                                          // 4501
}                                                                                                                    // 4502
Fader.DEFAULT_OPTIONS = {                                                                                            // 4503
    cull: false,                                                                                                     // 4504
    transition: true,                                                                                                // 4505
    pulseInTransition: true,                                                                                         // 4506
    pulseOutTransition: true                                                                                         // 4507
};                                                                                                                   // 4508
Fader.prototype.setOptions = function setOptions(options) {                                                          // 4509
    return this._optionsManager.setOptions(options);                                                                 // 4510
};                                                                                                                   // 4511
Fader.prototype.show = function show(transition, callback) {                                                         // 4512
    transition = transition || this.options.transition;                                                              // 4513
    this.set(1, transition, callback);                                                                               // 4514
};                                                                                                                   // 4515
Fader.prototype.hide = function hide(transition, callback) {                                                         // 4516
    transition = transition || this.options.transition;                                                              // 4517
    this.set(0, transition, callback);                                                                               // 4518
};                                                                                                                   // 4519
Fader.prototype.set = function set(state, transition, callback) {                                                    // 4520
    this.halt();                                                                                                     // 4521
    this.transitionHelper.set(state, transition, callback);                                                          // 4522
};                                                                                                                   // 4523
Fader.prototype.halt = function halt() {                                                                             // 4524
    this.transitionHelper.halt();                                                                                    // 4525
};                                                                                                                   // 4526
Fader.prototype.isVisible = function isVisible() {                                                                   // 4527
    return this.transitionHelper.get() > 0;                                                                          // 4528
};                                                                                                                   // 4529
Fader.prototype.modify = function modify(target) {                                                                   // 4530
    var currOpacity = this.transitionHelper.get();                                                                   // 4531
    if (this.options.cull && !currOpacity)                                                                           // 4532
        return undefined;                                                                                            // 4533
    else                                                                                                             // 4534
        return {                                                                                                     // 4535
            opacity: currOpacity,                                                                                    // 4536
            target: target                                                                                           // 4537
        };                                                                                                           // 4538
};                                                                                                                   // 4539
module.exports = Fader;                                                                                              // 4540
},{"famous/core/OptionsManager":15,"famous/transitions/Transitionable":80}],44:[function(require,module,exports){    // 4541
function ModifierChain() {                                                                                           // 4542
    this._chain = [];                                                                                                // 4543
    if (arguments.length)                                                                                            // 4544
        this.addModifier.apply(this, arguments);                                                                     // 4545
}                                                                                                                    // 4546
ModifierChain.prototype.addModifier = function addModifier(varargs) {                                                // 4547
    Array.prototype.push.apply(this._chain, arguments);                                                              // 4548
};                                                                                                                   // 4549
ModifierChain.prototype.removeModifier = function removeModifier(modifier) {                                         // 4550
    var index = this._chain.indexOf(modifier);                                                                       // 4551
    if (index < 0)                                                                                                   // 4552
        return;                                                                                                      // 4553
    this._chain.splice(index, 1);                                                                                    // 4554
};                                                                                                                   // 4555
ModifierChain.prototype.modify = function modify(input) {                                                            // 4556
    var chain = this._chain;                                                                                         // 4557
    var result = input;                                                                                              // 4558
    for (var i = 0; i < chain.length; i++) {                                                                         // 4559
        result = chain[i].modify(result);                                                                            // 4560
    }                                                                                                                // 4561
    return result;                                                                                                   // 4562
};                                                                                                                   // 4563
module.exports = ModifierChain;                                                                                      // 4564
},{}],45:[function(require,module,exports){                                                                          // 4565
var Modifier = require('famous/core/Modifier');                                                                      // 4566
var Transform = require('famous/core/Transform');                                                                    // 4567
var Transitionable = require('famous/transitions/Transitionable');                                                   // 4568
var TransitionableTransform = require('famous/transitions/TransitionableTransform');                                 // 4569
function StateModifier(options) {                                                                                    // 4570
    this._transformState = new TransitionableTransform(Transform.identity);                                          // 4571
    this._opacityState = new Transitionable(1);                                                                      // 4572
    this._originState = new Transitionable([                                                                         // 4573
        0,                                                                                                           // 4574
        0                                                                                                            // 4575
    ]);                                                                                                              // 4576
    this._alignState = new Transitionable([                                                                          // 4577
        0,                                                                                                           // 4578
        0                                                                                                            // 4579
    ]);                                                                                                              // 4580
    this._sizeState = new Transitionable([                                                                           // 4581
        0,                                                                                                           // 4582
        0                                                                                                            // 4583
    ]);                                                                                                              // 4584
    this._proportionsState = new Transitionable([                                                                    // 4585
        0,                                                                                                           // 4586
        0                                                                                                            // 4587
    ]);                                                                                                              // 4588
    this._modifier = new Modifier({                                                                                  // 4589
        transform: this._transformState,                                                                             // 4590
        opacity: this._opacityState,                                                                                 // 4591
        origin: null,                                                                                                // 4592
        align: null,                                                                                                 // 4593
        size: null,                                                                                                  // 4594
        proportions: null                                                                                            // 4595
    });                                                                                                              // 4596
    this._hasOrigin = false;                                                                                         // 4597
    this._hasAlign = false;                                                                                          // 4598
    this._hasSize = false;                                                                                           // 4599
    this._hasProportions = false;                                                                                    // 4600
    if (options) {                                                                                                   // 4601
        if (options.transform)                                                                                       // 4602
            this.setTransform(options.transform);                                                                    // 4603
        if (options.opacity !== undefined)                                                                           // 4604
            this.setOpacity(options.opacity);                                                                        // 4605
        if (options.origin)                                                                                          // 4606
            this.setOrigin(options.origin);                                                                          // 4607
        if (options.align)                                                                                           // 4608
            this.setAlign(options.align);                                                                            // 4609
        if (options.size)                                                                                            // 4610
            this.setSize(options.size);                                                                              // 4611
        if (options.proportions)                                                                                     // 4612
            this.setProportions(options.proportions);                                                                // 4613
    }                                                                                                                // 4614
}                                                                                                                    // 4615
StateModifier.prototype.setTransform = function setTransform(transform, transition, callback) {                      // 4616
    this._transformState.set(transform, transition, callback);                                                       // 4617
    return this;                                                                                                     // 4618
};                                                                                                                   // 4619
StateModifier.prototype.setOpacity = function setOpacity(opacity, transition, callback) {                            // 4620
    this._opacityState.set(opacity, transition, callback);                                                           // 4621
    return this;                                                                                                     // 4622
};                                                                                                                   // 4623
StateModifier.prototype.setOrigin = function setOrigin(origin, transition, callback) {                               // 4624
    if (origin === null) {                                                                                           // 4625
        if (this._hasOrigin) {                                                                                       // 4626
            this._modifier.originFrom(null);                                                                         // 4627
            this._hasOrigin = false;                                                                                 // 4628
        }                                                                                                            // 4629
        return this;                                                                                                 // 4630
    } else if (!this._hasOrigin) {                                                                                   // 4631
        this._hasOrigin = true;                                                                                      // 4632
        this._modifier.originFrom(this._originState);                                                                // 4633
    }                                                                                                                // 4634
    this._originState.set(origin, transition, callback);                                                             // 4635
    return this;                                                                                                     // 4636
};                                                                                                                   // 4637
StateModifier.prototype.setAlign = function setOrigin(align, transition, callback) {                                 // 4638
    if (align === null) {                                                                                            // 4639
        if (this._hasAlign) {                                                                                        // 4640
            this._modifier.alignFrom(null);                                                                          // 4641
            this._hasAlign = false;                                                                                  // 4642
        }                                                                                                            // 4643
        return this;                                                                                                 // 4644
    } else if (!this._hasAlign) {                                                                                    // 4645
        this._hasAlign = true;                                                                                       // 4646
        this._modifier.alignFrom(this._alignState);                                                                  // 4647
    }                                                                                                                // 4648
    this._alignState.set(align, transition, callback);                                                               // 4649
    return this;                                                                                                     // 4650
};                                                                                                                   // 4651
StateModifier.prototype.setSize = function setSize(size, transition, callback) {                                     // 4652
    if (size === null) {                                                                                             // 4653
        if (this._hasSize) {                                                                                         // 4654
            this._modifier.sizeFrom(null);                                                                           // 4655
            this._hasSize = false;                                                                                   // 4656
        }                                                                                                            // 4657
        return this;                                                                                                 // 4658
    } else if (!this._hasSize) {                                                                                     // 4659
        this._hasSize = true;                                                                                        // 4660
        this._modifier.sizeFrom(this._sizeState);                                                                    // 4661
    }                                                                                                                // 4662
    this._sizeState.set(size, transition, callback);                                                                 // 4663
    return this;                                                                                                     // 4664
};                                                                                                                   // 4665
StateModifier.prototype.setProportions = function setSize(proportions, transition, callback) {                       // 4666
    if (proportions === null) {                                                                                      // 4667
        if (this._hasProportions) {                                                                                  // 4668
            this._modifier.proportionsFrom(null);                                                                    // 4669
            this._hasProportions = false;                                                                            // 4670
        }                                                                                                            // 4671
        return this;                                                                                                 // 4672
    } else if (!this._hasProportions) {                                                                              // 4673
        this._hasProportions = true;                                                                                 // 4674
        this._modifier.proportionsFrom(this._proportionsState);                                                      // 4675
    }                                                                                                                // 4676
    this._proportionsState.set(proportions, transition, callback);                                                   // 4677
    return this;                                                                                                     // 4678
};                                                                                                                   // 4679
StateModifier.prototype.halt = function halt() {                                                                     // 4680
    this._transformState.halt();                                                                                     // 4681
    this._opacityState.halt();                                                                                       // 4682
    this._originState.halt();                                                                                        // 4683
    this._alignState.halt();                                                                                         // 4684
    this._sizeState.halt();                                                                                          // 4685
    this._proportionsState.halt();                                                                                   // 4686
};                                                                                                                   // 4687
StateModifier.prototype.getTransform = function getTransform() {                                                     // 4688
    return this._transformState.get();                                                                               // 4689
};                                                                                                                   // 4690
StateModifier.prototype.getFinalTransform = function getFinalTransform() {                                           // 4691
    return this._transformState.getFinal();                                                                          // 4692
};                                                                                                                   // 4693
StateModifier.prototype.getOpacity = function getOpacity() {                                                         // 4694
    return this._opacityState.get();                                                                                 // 4695
};                                                                                                                   // 4696
StateModifier.prototype.getOrigin = function getOrigin() {                                                           // 4697
    return this._hasOrigin ? this._originState.get() : null;                                                         // 4698
};                                                                                                                   // 4699
StateModifier.prototype.getAlign = function getAlign() {                                                             // 4700
    return this._hasAlign ? this._alignState.get() : null;                                                           // 4701
};                                                                                                                   // 4702
StateModifier.prototype.getSize = function getSize() {                                                               // 4703
    return this._hasSize ? this._sizeState.get() : null;                                                             // 4704
};                                                                                                                   // 4705
StateModifier.prototype.getProportions = function getProportions() {                                                 // 4706
    return this._hasProportions ? this._proportionsState.get() : null;                                               // 4707
};                                                                                                                   // 4708
StateModifier.prototype.modify = function modify(target) {                                                           // 4709
    return this._modifier.modify(target);                                                                            // 4710
};                                                                                                                   // 4711
module.exports = StateModifier;                                                                                      // 4712
},{"famous/core/Modifier":14,"famous/core/Transform":20,"famous/transitions/Transitionable":80,"famous/transitions/TransitionableTransform":81}],46:[function(require,module,exports){
var EventHandler = require('famous/core/EventHandler');                                                              // 4714
function PhysicsEngine(options) {                                                                                    // 4715
    this.options = Object.create(PhysicsEngine.DEFAULT_OPTIONS);                                                     // 4716
    if (options)                                                                                                     // 4717
        this.setOptions(options);                                                                                    // 4718
    this._particles = [];                                                                                            // 4719
    this._bodies = [];                                                                                               // 4720
    this._agentData = {};                                                                                            // 4721
    this._forces = [];                                                                                               // 4722
    this._constraints = [];                                                                                          // 4723
    this._buffer = 0;                                                                                                // 4724
    this._prevTime = now();                                                                                          // 4725
    this._isSleeping = false;                                                                                        // 4726
    this._eventHandler = null;                                                                                       // 4727
    this._currAgentId = 0;                                                                                           // 4728
    this._hasBodies = false;                                                                                         // 4729
    this._eventHandler = null;                                                                                       // 4730
}                                                                                                                    // 4731
var TIMESTEP = 17;                                                                                                   // 4732
var MIN_TIME_STEP = 1000 / 120;                                                                                      // 4733
var MAX_TIME_STEP = 17;                                                                                              // 4734
var now = Date.now;                                                                                                  // 4735
var _events = {                                                                                                      // 4736
        start: 'start',                                                                                              // 4737
        update: 'update',                                                                                            // 4738
        end: 'end'                                                                                                   // 4739
    };                                                                                                               // 4740
PhysicsEngine.DEFAULT_OPTIONS = {                                                                                    // 4741
    constraintSteps: 1,                                                                                              // 4742
    sleepTolerance: 1e-7,                                                                                            // 4743
    velocityCap: undefined,                                                                                          // 4744
    angularVelocityCap: undefined                                                                                    // 4745
};                                                                                                                   // 4746
PhysicsEngine.prototype.setOptions = function setOptions(opts) {                                                     // 4747
    for (var key in opts)                                                                                            // 4748
        if (this.options[key])                                                                                       // 4749
            this.options[key] = opts[key];                                                                           // 4750
};                                                                                                                   // 4751
PhysicsEngine.prototype.addBody = function addBody(body) {                                                           // 4752
    body._engine = this;                                                                                             // 4753
    if (body.isBody) {                                                                                               // 4754
        this._bodies.push(body);                                                                                     // 4755
        this._hasBodies = true;                                                                                      // 4756
    } else                                                                                                           // 4757
        this._particles.push(body);                                                                                  // 4758
    body.on('start', this.wake.bind(this));                                                                          // 4759
    return body;                                                                                                     // 4760
};                                                                                                                   // 4761
PhysicsEngine.prototype.removeBody = function removeBody(body) {                                                     // 4762
    var array = body.isBody ? this._bodies : this._particles;                                                        // 4763
    var index = array.indexOf(body);                                                                                 // 4764
    if (index > -1) {                                                                                                // 4765
        for (var agent in this._agentData)                                                                           // 4766
            this.detachFrom(agent.id, body);                                                                         // 4767
        array.splice(index, 1);                                                                                      // 4768
    }                                                                                                                // 4769
    if (this.getBodies().length === 0)                                                                               // 4770
        this._hasBodies = false;                                                                                     // 4771
};                                                                                                                   // 4772
function _mapAgentArray(agent) {                                                                                     // 4773
    if (agent.applyForce)                                                                                            // 4774
        return this._forces;                                                                                         // 4775
    if (agent.applyConstraint)                                                                                       // 4776
        return this._constraints;                                                                                    // 4777
}                                                                                                                    // 4778
function _attachOne(agent, targets, source) {                                                                        // 4779
    if (targets === undefined)                                                                                       // 4780
        targets = this.getParticlesAndBodies();                                                                      // 4781
    if (!(targets instanceof Array))                                                                                 // 4782
        targets = [targets];                                                                                         // 4783
    agent.on('change', this.wake.bind(this));                                                                        // 4784
    this._agentData[this._currAgentId] = {                                                                           // 4785
        agent: agent,                                                                                                // 4786
        id: this._currAgentId,                                                                                       // 4787
        targets: targets,                                                                                            // 4788
        source: source                                                                                               // 4789
    };                                                                                                               // 4790
    _mapAgentArray.call(this, agent).push(this._currAgentId);                                                        // 4791
    return this._currAgentId++;                                                                                      // 4792
}                                                                                                                    // 4793
PhysicsEngine.prototype.attach = function attach(agents, targets, source) {                                          // 4794
    this.wake();                                                                                                     // 4795
    if (agents instanceof Array) {                                                                                   // 4796
        var agentIDs = [];                                                                                           // 4797
        for (var i = 0; i < agents.length; i++)                                                                      // 4798
            agentIDs[i] = _attachOne.call(this, agents[i], targets, source);                                         // 4799
        return agentIDs;                                                                                             // 4800
    } else                                                                                                           // 4801
        return _attachOne.call(this, agents, targets, source);                                                       // 4802
};                                                                                                                   // 4803
PhysicsEngine.prototype.attachTo = function attachTo(agentID, target) {                                              // 4804
    _getAgentData.call(this, agentID).targets.push(target);                                                          // 4805
};                                                                                                                   // 4806
PhysicsEngine.prototype.detach = function detach(id) {                                                               // 4807
    var agent = this.getAgent(id);                                                                                   // 4808
    var agentArray = _mapAgentArray.call(this, agent);                                                               // 4809
    var index = agentArray.indexOf(id);                                                                              // 4810
    agentArray.splice(index, 1);                                                                                     // 4811
    delete this._agentData[id];                                                                                      // 4812
};                                                                                                                   // 4813
PhysicsEngine.prototype.detachFrom = function detachFrom(id, target) {                                               // 4814
    var boundAgent = _getAgentData.call(this, id);                                                                   // 4815
    if (boundAgent.source === target)                                                                                // 4816
        this.detach(id);                                                                                             // 4817
    else {                                                                                                           // 4818
        var targets = boundAgent.targets;                                                                            // 4819
        var index = targets.indexOf(target);                                                                         // 4820
        if (index > -1)                                                                                              // 4821
            targets.splice(index, 1);                                                                                // 4822
    }                                                                                                                // 4823
};                                                                                                                   // 4824
PhysicsEngine.prototype.detachAll = function detachAll() {                                                           // 4825
    this._agentData = {};                                                                                            // 4826
    this._forces = [];                                                                                               // 4827
    this._constraints = [];                                                                                          // 4828
    this._currAgentId = 0;                                                                                           // 4829
};                                                                                                                   // 4830
function _getAgentData(id) {                                                                                         // 4831
    return this._agentData[id];                                                                                      // 4832
}                                                                                                                    // 4833
PhysicsEngine.prototype.getAgent = function getAgent(id) {                                                           // 4834
    return _getAgentData.call(this, id).agent;                                                                       // 4835
};                                                                                                                   // 4836
PhysicsEngine.prototype.getParticles = function getParticles() {                                                     // 4837
    return this._particles;                                                                                          // 4838
};                                                                                                                   // 4839
PhysicsEngine.prototype.getBodies = function getBodies() {                                                           // 4840
    return this._bodies;                                                                                             // 4841
};                                                                                                                   // 4842
PhysicsEngine.prototype.getParticlesAndBodies = function getParticlesAndBodies() {                                   // 4843
    return this.getParticles().concat(this.getBodies());                                                             // 4844
};                                                                                                                   // 4845
PhysicsEngine.prototype.forEachParticle = function forEachParticle(fn, dt) {                                         // 4846
    var particles = this.getParticles();                                                                             // 4847
    for (var index = 0, len = particles.length; index < len; index++)                                                // 4848
        fn.call(this, particles[index], dt);                                                                         // 4849
};                                                                                                                   // 4850
PhysicsEngine.prototype.forEachBody = function forEachBody(fn, dt) {                                                 // 4851
    if (!this._hasBodies)                                                                                            // 4852
        return;                                                                                                      // 4853
    var bodies = this.getBodies();                                                                                   // 4854
    for (var index = 0, len = bodies.length; index < len; index++)                                                   // 4855
        fn.call(this, bodies[index], dt);                                                                            // 4856
};                                                                                                                   // 4857
PhysicsEngine.prototype.forEach = function forEach(fn, dt) {                                                         // 4858
    this.forEachParticle(fn, dt);                                                                                    // 4859
    this.forEachBody(fn, dt);                                                                                        // 4860
};                                                                                                                   // 4861
function _updateForce(index) {                                                                                       // 4862
    var boundAgent = _getAgentData.call(this, this._forces[index]);                                                  // 4863
    boundAgent.agent.applyForce(boundAgent.targets, boundAgent.source);                                              // 4864
}                                                                                                                    // 4865
function _updateForces() {                                                                                           // 4866
    for (var index = this._forces.length - 1; index > -1; index--)                                                   // 4867
        _updateForce.call(this, index);                                                                              // 4868
}                                                                                                                    // 4869
function _updateConstraint(index, dt) {                                                                              // 4870
    var boundAgent = this._agentData[this._constraints[index]];                                                      // 4871
    return boundAgent.agent.applyConstraint(boundAgent.targets, boundAgent.source, dt);                              // 4872
}                                                                                                                    // 4873
function _updateConstraints(dt) {                                                                                    // 4874
    var iteration = 0;                                                                                               // 4875
    while (iteration < this.options.constraintSteps) {                                                               // 4876
        for (var index = this._constraints.length - 1; index > -1; index--)                                          // 4877
            _updateConstraint.call(this, index, dt);                                                                 // 4878
        iteration++;                                                                                                 // 4879
    }                                                                                                                // 4880
}                                                                                                                    // 4881
function _updateVelocities(body, dt) {                                                                               // 4882
    body.integrateVelocity(dt);                                                                                      // 4883
    if (this.options.velocityCap)                                                                                    // 4884
        body.velocity.cap(this.options.velocityCap).put(body.velocity);                                              // 4885
}                                                                                                                    // 4886
function _updateAngularVelocities(body, dt) {                                                                        // 4887
    body.integrateAngularMomentum(dt);                                                                               // 4888
    body.updateAngularVelocity();                                                                                    // 4889
    if (this.options.angularVelocityCap)                                                                             // 4890
        body.angularVelocity.cap(this.options.angularVelocityCap).put(body.angularVelocity);                         // 4891
}                                                                                                                    // 4892
function _updateOrientations(body, dt) {                                                                             // 4893
    body.integrateOrientation(dt);                                                                                   // 4894
}                                                                                                                    // 4895
function _updatePositions(body, dt) {                                                                                // 4896
    body.integratePosition(dt);                                                                                      // 4897
    body.emit(_events.update, body);                                                                                 // 4898
}                                                                                                                    // 4899
function _integrate(dt) {                                                                                            // 4900
    _updateForces.call(this, dt);                                                                                    // 4901
    this.forEach(_updateVelocities, dt);                                                                             // 4902
    this.forEachBody(_updateAngularVelocities, dt);                                                                  // 4903
    _updateConstraints.call(this, dt);                                                                               // 4904
    this.forEachBody(_updateOrientations, dt);                                                                       // 4905
    this.forEach(_updatePositions, dt);                                                                              // 4906
}                                                                                                                    // 4907
function _getParticlesEnergy() {                                                                                     // 4908
    var energy = 0;                                                                                                  // 4909
    var particleEnergy = 0;                                                                                          // 4910
    this.forEach(function (particle) {                                                                               // 4911
        particleEnergy = particle.getEnergy();                                                                       // 4912
        energy += particleEnergy;                                                                                    // 4913
    });                                                                                                              // 4914
    return energy;                                                                                                   // 4915
}                                                                                                                    // 4916
function _getAgentsEnergy() {                                                                                        // 4917
    var energy = 0;                                                                                                  // 4918
    for (var id in this._agentData)                                                                                  // 4919
        energy += this.getAgentEnergy(id);                                                                           // 4920
    return energy;                                                                                                   // 4921
}                                                                                                                    // 4922
PhysicsEngine.prototype.getAgentEnergy = function (agentId) {                                                        // 4923
    var agentData = _getAgentData.call(this, agentId);                                                               // 4924
    return agentData.agent.getEnergy(agentData.targets, agentData.source);                                           // 4925
};                                                                                                                   // 4926
PhysicsEngine.prototype.getEnergy = function getEnergy() {                                                           // 4927
    return _getParticlesEnergy.call(this) + _getAgentsEnergy.call(this);                                             // 4928
};                                                                                                                   // 4929
PhysicsEngine.prototype.step = function step() {                                                                     // 4930
    if (this.isSleeping())                                                                                           // 4931
        return;                                                                                                      // 4932
    var currTime = now();                                                                                            // 4933
    var dtFrame = currTime - this._prevTime;                                                                         // 4934
    this._prevTime = currTime;                                                                                       // 4935
    if (dtFrame < MIN_TIME_STEP)                                                                                     // 4936
        return;                                                                                                      // 4937
    if (dtFrame > MAX_TIME_STEP)                                                                                     // 4938
        dtFrame = MAX_TIME_STEP;                                                                                     // 4939
    _integrate.call(this, TIMESTEP);                                                                                 // 4940
    this.emit(_events.update, this);                                                                                 // 4941
    if (this.getEnergy() < this.options.sleepTolerance)                                                              // 4942
        this.sleep();                                                                                                // 4943
};                                                                                                                   // 4944
PhysicsEngine.prototype.isSleeping = function isSleeping() {                                                         // 4945
    return this._isSleeping;                                                                                         // 4946
};                                                                                                                   // 4947
PhysicsEngine.prototype.isActive = function isSleeping() {                                                           // 4948
    return !this._isSleeping;                                                                                        // 4949
};                                                                                                                   // 4950
PhysicsEngine.prototype.sleep = function sleep() {                                                                   // 4951
    if (this._isSleeping)                                                                                            // 4952
        return;                                                                                                      // 4953
    this.forEach(function (body) {                                                                                   // 4954
        body.sleep();                                                                                                // 4955
    });                                                                                                              // 4956
    this.emit(_events.end, this);                                                                                    // 4957
    this._isSleeping = true;                                                                                         // 4958
};                                                                                                                   // 4959
PhysicsEngine.prototype.wake = function wake() {                                                                     // 4960
    if (!this._isSleeping)                                                                                           // 4961
        return;                                                                                                      // 4962
    this._prevTime = now();                                                                                          // 4963
    this.emit(_events.start, this);                                                                                  // 4964
    this._isSleeping = false;                                                                                        // 4965
};                                                                                                                   // 4966
PhysicsEngine.prototype.emit = function emit(type, data) {                                                           // 4967
    if (this._eventHandler === null)                                                                                 // 4968
        return;                                                                                                      // 4969
    this._eventHandler.emit(type, data);                                                                             // 4970
};                                                                                                                   // 4971
PhysicsEngine.prototype.on = function on(event, fn) {                                                                // 4972
    if (this._eventHandler === null)                                                                                 // 4973
        this._eventHandler = new EventHandler();                                                                     // 4974
    this._eventHandler.on(event, fn);                                                                                // 4975
};                                                                                                                   // 4976
module.exports = PhysicsEngine;                                                                                      // 4977
},{"famous/core/EventHandler":12}],47:[function(require,module,exports){                                             // 4978
var Particle = require('./Particle');                                                                                // 4979
var Transform = require('famous/core/Transform');                                                                    // 4980
var Vector = require('famous/math/Vector');                                                                          // 4981
var Quaternion = require('famous/math/Quaternion');                                                                  // 4982
var Matrix = require('famous/math/Matrix');                                                                          // 4983
var Integrator = require('../integrators/SymplecticEuler');                                                          // 4984
function Body(options) {                                                                                             // 4985
    Particle.call(this, options);                                                                                    // 4986
    options = options || {};                                                                                         // 4987
    this.orientation = new Quaternion();                                                                             // 4988
    this.angularVelocity = new Vector();                                                                             // 4989
    this.angularMomentum = new Vector();                                                                             // 4990
    this.torque = new Vector();                                                                                      // 4991
    if (options.orientation)                                                                                         // 4992
        this.orientation.set(options.orientation);                                                                   // 4993
    if (options.angularVelocity)                                                                                     // 4994
        this.angularVelocity.set(options.angularVelocity);                                                           // 4995
    if (options.angularMomentum)                                                                                     // 4996
        this.angularMomentum.set(options.angularMomentum);                                                           // 4997
    if (options.torque)                                                                                              // 4998
        this.torque.set(options.torque);                                                                             // 4999
    this.angularVelocity.w = 0;                                                                                      // 5000
    this.setMomentsOfInertia();                                                                                      // 5001
    this.pWorld = new Vector();                                                                                      // 5002
}                                                                                                                    // 5003
Body.DEFAULT_OPTIONS = Particle.DEFAULT_OPTIONS;                                                                     // 5004
Body.DEFAULT_OPTIONS.orientation = [                                                                                 // 5005
    0,                                                                                                               // 5006
    0,                                                                                                               // 5007
    0,                                                                                                               // 5008
    1                                                                                                                // 5009
];                                                                                                                   // 5010
Body.DEFAULT_OPTIONS.angularVelocity = [                                                                             // 5011
    0,                                                                                                               // 5012
    0,                                                                                                               // 5013
    0                                                                                                                // 5014
];                                                                                                                   // 5015
Body.prototype = Object.create(Particle.prototype);                                                                  // 5016
Body.prototype.constructor = Body;                                                                                   // 5017
Body.prototype.isBody = true;                                                                                        // 5018
Body.prototype.setMass = function setMass() {                                                                        // 5019
    Particle.prototype.setMass.apply(this, arguments);                                                               // 5020
    this.setMomentsOfInertia();                                                                                      // 5021
};                                                                                                                   // 5022
Body.prototype.setMomentsOfInertia = function setMomentsOfInertia() {                                                // 5023
    this.inertia = new Matrix();                                                                                     // 5024
    this.inverseInertia = new Matrix();                                                                              // 5025
};                                                                                                                   // 5026
Body.prototype.updateAngularVelocity = function updateAngularVelocity() {                                            // 5027
    this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum));                              // 5028
};                                                                                                                   // 5029
Body.prototype.toWorldCoordinates = function toWorldCoordinates(localPosition) {                                     // 5030
    return this.pWorld.set(this.orientation.rotateVector(localPosition));                                            // 5031
};                                                                                                                   // 5032
Body.prototype.getEnergy = function getEnergy() {                                                                    // 5033
    return Particle.prototype.getEnergy.call(this) + 0.5 * this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity);
};                                                                                                                   // 5035
Body.prototype.reset = function reset(p, v, q, L) {                                                                  // 5036
    Particle.prototype.reset.call(this, p, v);                                                                       // 5037
    this.angularVelocity.clear();                                                                                    // 5038
    this.setOrientation(q || [                                                                                       // 5039
        1,                                                                                                           // 5040
        0,                                                                                                           // 5041
        0,                                                                                                           // 5042
        0                                                                                                            // 5043
    ]);                                                                                                              // 5044
    this.setAngularMomentum(L || [                                                                                   // 5045
        0,                                                                                                           // 5046
        0,                                                                                                           // 5047
        0                                                                                                            // 5048
    ]);                                                                                                              // 5049
};                                                                                                                   // 5050
Body.prototype.setOrientation = function setOrientation(q) {                                                         // 5051
    this.orientation.set(q);                                                                                         // 5052
};                                                                                                                   // 5053
Body.prototype.setAngularVelocity = function setAngularVelocity(w) {                                                 // 5054
    this.wake();                                                                                                     // 5055
    this.angularVelocity.set(w);                                                                                     // 5056
};                                                                                                                   // 5057
Body.prototype.setAngularMomentum = function setAngularMomentum(L) {                                                 // 5058
    this.wake();                                                                                                     // 5059
    this.angularMomentum.set(L);                                                                                     // 5060
};                                                                                                                   // 5061
Body.prototype.applyForce = function applyForce(force, location) {                                                   // 5062
    Particle.prototype.applyForce.call(this, force);                                                                 // 5063
    if (location !== undefined)                                                                                      // 5064
        this.applyTorque(location.cross(force));                                                                     // 5065
};                                                                                                                   // 5066
Body.prototype.applyTorque = function applyTorque(torque) {                                                          // 5067
    this.wake();                                                                                                     // 5068
    this.torque.set(this.torque.add(torque));                                                                        // 5069
};                                                                                                                   // 5070
Body.prototype.getTransform = function getTransform() {                                                              // 5071
    return Transform.thenMove(this.orientation.getTransform(), Transform.getTranslate(Particle.prototype.getTransform.call(this)));
};                                                                                                                   // 5073
Body.prototype._integrate = function _integrate(dt) {                                                                // 5074
    Particle.prototype._integrate.call(this, dt);                                                                    // 5075
    this.integrateAngularMomentum(dt);                                                                               // 5076
    this.updateAngularVelocity(dt);                                                                                  // 5077
    this.integrateOrientation(dt);                                                                                   // 5078
};                                                                                                                   // 5079
Body.prototype.integrateAngularMomentum = function integrateAngularMomentum(dt) {                                    // 5080
    Integrator.integrateAngularMomentum(this, dt);                                                                   // 5081
};                                                                                                                   // 5082
Body.prototype.integrateOrientation = function integrateOrientation(dt) {                                            // 5083
    Integrator.integrateOrientation(this, dt);                                                                       // 5084
};                                                                                                                   // 5085
module.exports = Body;                                                                                               // 5086
},{"../integrators/SymplecticEuler":66,"./Particle":49,"famous/core/Transform":20,"famous/math/Matrix":37,"famous/math/Quaternion":38,"famous/math/Vector":41}],48:[function(require,module,exports){
var Body = require('./Body');                                                                                        // 5088
var Matrix = require('famous/math/Matrix');                                                                          // 5089
function Circle(options) {                                                                                           // 5090
    options = options || {};                                                                                         // 5091
    this.setRadius(options.radius || 0);                                                                             // 5092
    Body.call(this, options);                                                                                        // 5093
}                                                                                                                    // 5094
Circle.prototype = Object.create(Body.prototype);                                                                    // 5095
Circle.prototype.constructor = Circle;                                                                               // 5096
Circle.prototype.setRadius = function setRadius(r) {                                                                 // 5097
    this.radius = r;                                                                                                 // 5098
    this.size = [                                                                                                    // 5099
        2 * this.radius,                                                                                             // 5100
        2 * this.radius                                                                                              // 5101
    ];                                                                                                               // 5102
    this.setMomentsOfInertia();                                                                                      // 5103
};                                                                                                                   // 5104
Circle.prototype.setMomentsOfInertia = function setMomentsOfInertia() {                                              // 5105
    var m = this.mass;                                                                                               // 5106
    var r = this.radius;                                                                                             // 5107
    this.inertia = new Matrix([                                                                                      // 5108
        [                                                                                                            // 5109
            0.25 * m * r * r,                                                                                        // 5110
            0,                                                                                                       // 5111
            0                                                                                                        // 5112
        ],                                                                                                           // 5113
        [                                                                                                            // 5114
            0,                                                                                                       // 5115
            0.25 * m * r * r,                                                                                        // 5116
            0                                                                                                        // 5117
        ],                                                                                                           // 5118
        [                                                                                                            // 5119
            0,                                                                                                       // 5120
            0,                                                                                                       // 5121
            0.5 * m * r * r                                                                                          // 5122
        ]                                                                                                            // 5123
    ]);                                                                                                              // 5124
    this.inverseInertia = new Matrix([                                                                               // 5125
        [                                                                                                            // 5126
            4 / (m * r * r),                                                                                         // 5127
            0,                                                                                                       // 5128
            0                                                                                                        // 5129
        ],                                                                                                           // 5130
        [                                                                                                            // 5131
            0,                                                                                                       // 5132
            4 / (m * r * r),                                                                                         // 5133
            0                                                                                                        // 5134
        ],                                                                                                           // 5135
        [                                                                                                            // 5136
            0,                                                                                                       // 5137
            0,                                                                                                       // 5138
            2 / (m * r * r)                                                                                          // 5139
        ]                                                                                                            // 5140
    ]);                                                                                                              // 5141
};                                                                                                                   // 5142
module.exports = Circle;                                                                                             // 5143
},{"./Body":47,"famous/math/Matrix":37}],49:[function(require,module,exports){                                       // 5144
var Vector = require('famous/math/Vector');                                                                          // 5145
var Transform = require('famous/core/Transform');                                                                    // 5146
var EventHandler = require('famous/core/EventHandler');                                                              // 5147
var Integrator = require('../integrators/SymplecticEuler');                                                          // 5148
function Particle(options) {                                                                                         // 5149
    options = options || {};                                                                                         // 5150
    var defaults = Particle.DEFAULT_OPTIONS;                                                                         // 5151
    this.position = new Vector();                                                                                    // 5152
    this.velocity = new Vector();                                                                                    // 5153
    this.force = new Vector();                                                                                       // 5154
    this._engine = null;                                                                                             // 5155
    this._isSleeping = true;                                                                                         // 5156
    this._eventOutput = null;                                                                                        // 5157
    this.mass = options.mass !== undefined ? options.mass : defaults.mass;                                           // 5158
    this.inverseMass = 1 / this.mass;                                                                                // 5159
    this.setPosition(options.position || defaults.position);                                                         // 5160
    this.setVelocity(options.velocity || defaults.velocity);                                                         // 5161
    this.force.set(options.force || [                                                                                // 5162
        0,                                                                                                           // 5163
        0,                                                                                                           // 5164
        0                                                                                                            // 5165
    ]);                                                                                                              // 5166
    this.transform = Transform.identity.slice();                                                                     // 5167
    this._spec = {                                                                                                   // 5168
        size: [                                                                                                      // 5169
            true,                                                                                                    // 5170
            true                                                                                                     // 5171
        ],                                                                                                           // 5172
        target: {                                                                                                    // 5173
            transform: this.transform,                                                                               // 5174
            origin: [                                                                                                // 5175
                0.5,                                                                                                 // 5176
                0.5                                                                                                  // 5177
            ],                                                                                                       // 5178
            target: null                                                                                             // 5179
        }                                                                                                            // 5180
    };                                                                                                               // 5181
}                                                                                                                    // 5182
Particle.DEFAULT_OPTIONS = {                                                                                         // 5183
    position: [                                                                                                      // 5184
        0,                                                                                                           // 5185
        0,                                                                                                           // 5186
        0                                                                                                            // 5187
    ],                                                                                                               // 5188
    velocity: [                                                                                                      // 5189
        0,                                                                                                           // 5190
        0,                                                                                                           // 5191
        0                                                                                                            // 5192
    ],                                                                                                               // 5193
    mass: 1                                                                                                          // 5194
};                                                                                                                   // 5195
var _events = {                                                                                                      // 5196
        start: 'start',                                                                                              // 5197
        update: 'update',                                                                                            // 5198
        end: 'end'                                                                                                   // 5199
    };                                                                                                               // 5200
var now = Date.now;                                                                                                  // 5201
Particle.prototype.isBody = false;                                                                                   // 5202
Particle.prototype.isActive = function isActive() {                                                                  // 5203
    return !this._isSleeping;                                                                                        // 5204
};                                                                                                                   // 5205
Particle.prototype.sleep = function sleep() {                                                                        // 5206
    if (this._isSleeping)                                                                                            // 5207
        return;                                                                                                      // 5208
    this.emit(_events.end, this);                                                                                    // 5209
    this._isSleeping = true;                                                                                         // 5210
};                                                                                                                   // 5211
Particle.prototype.wake = function wake() {                                                                          // 5212
    if (!this._isSleeping)                                                                                           // 5213
        return;                                                                                                      // 5214
    this.emit(_events.start, this);                                                                                  // 5215
    this._isSleeping = false;                                                                                        // 5216
    this._prevTime = now();                                                                                          // 5217
    if (this._engine)                                                                                                // 5218
        this._engine.wake();                                                                                         // 5219
};                                                                                                                   // 5220
Particle.prototype.setPosition = function setPosition(position) {                                                    // 5221
    this.position.set(position);                                                                                     // 5222
};                                                                                                                   // 5223
Particle.prototype.setPosition1D = function setPosition1D(x) {                                                       // 5224
    this.position.x = x;                                                                                             // 5225
};                                                                                                                   // 5226
Particle.prototype.getPosition = function getPosition() {                                                            // 5227
    this._engine.step();                                                                                             // 5228
    return this.position.get();                                                                                      // 5229
};                                                                                                                   // 5230
Particle.prototype.getPosition1D = function getPosition1D() {                                                        // 5231
    this._engine.step();                                                                                             // 5232
    return this.position.x;                                                                                          // 5233
};                                                                                                                   // 5234
Particle.prototype.setVelocity = function setVelocity(velocity) {                                                    // 5235
    this.velocity.set(velocity);                                                                                     // 5236
    if (!(velocity[0] === 0 && velocity[1] === 0 && velocity[2] === 0))                                              // 5237
        this.wake();                                                                                                 // 5238
};                                                                                                                   // 5239
Particle.prototype.setVelocity1D = function setVelocity1D(x) {                                                       // 5240
    this.velocity.x = x;                                                                                             // 5241
    if (x !== 0)                                                                                                     // 5242
        this.wake();                                                                                                 // 5243
};                                                                                                                   // 5244
Particle.prototype.getVelocity = function getVelocity() {                                                            // 5245
    return this.velocity.get();                                                                                      // 5246
};                                                                                                                   // 5247
Particle.prototype.setForce = function setForce(force) {                                                             // 5248
    this.force.set(force);                                                                                           // 5249
    this.wake();                                                                                                     // 5250
};                                                                                                                   // 5251
Particle.prototype.getVelocity1D = function getVelocity1D() {                                                        // 5252
    return this.velocity.x;                                                                                          // 5253
};                                                                                                                   // 5254
Particle.prototype.setMass = function setMass(mass) {                                                                // 5255
    this.mass = mass;                                                                                                // 5256
    this.inverseMass = 1 / mass;                                                                                     // 5257
};                                                                                                                   // 5258
Particle.prototype.getMass = function getMass() {                                                                    // 5259
    return this.mass;                                                                                                // 5260
};                                                                                                                   // 5261
Particle.prototype.reset = function reset(position, velocity) {                                                      // 5262
    this.setPosition(position || [                                                                                   // 5263
        0,                                                                                                           // 5264
        0,                                                                                                           // 5265
        0                                                                                                            // 5266
    ]);                                                                                                              // 5267
    this.setVelocity(velocity || [                                                                                   // 5268
        0,                                                                                                           // 5269
        0,                                                                                                           // 5270
        0                                                                                                            // 5271
    ]);                                                                                                              // 5272
};                                                                                                                   // 5273
Particle.prototype.applyForce = function applyForce(force) {                                                         // 5274
    if (force.isZero())                                                                                              // 5275
        return;                                                                                                      // 5276
    this.force.add(force).put(this.force);                                                                           // 5277
    this.wake();                                                                                                     // 5278
};                                                                                                                   // 5279
Particle.prototype.applyImpulse = function applyImpulse(impulse) {                                                   // 5280
    if (impulse.isZero())                                                                                            // 5281
        return;                                                                                                      // 5282
    var velocity = this.velocity;                                                                                    // 5283
    velocity.add(impulse.mult(this.inverseMass)).put(velocity);                                                      // 5284
};                                                                                                                   // 5285
Particle.prototype.integrateVelocity = function integrateVelocity(dt) {                                              // 5286
    Integrator.integrateVelocity(this, dt);                                                                          // 5287
};                                                                                                                   // 5288
Particle.prototype.integratePosition = function integratePosition(dt) {                                              // 5289
    Integrator.integratePosition(this, dt);                                                                          // 5290
};                                                                                                                   // 5291
Particle.prototype._integrate = function _integrate(dt) {                                                            // 5292
    this.integrateVelocity(dt);                                                                                      // 5293
    this.integratePosition(dt);                                                                                      // 5294
};                                                                                                                   // 5295
Particle.prototype.getEnergy = function getEnergy() {                                                                // 5296
    return 0.5 * this.mass * this.velocity.normSquared();                                                            // 5297
};                                                                                                                   // 5298
Particle.prototype.getTransform = function getTransform() {                                                          // 5299
    this._engine.step();                                                                                             // 5300
    var position = this.position;                                                                                    // 5301
    var transform = this.transform;                                                                                  // 5302
    transform[12] = position.x;                                                                                      // 5303
    transform[13] = position.y;                                                                                      // 5304
    transform[14] = position.z;                                                                                      // 5305
    return transform;                                                                                                // 5306
};                                                                                                                   // 5307
Particle.prototype.modify = function modify(target) {                                                                // 5308
    var _spec = this._spec.target;                                                                                   // 5309
    _spec.transform = this.getTransform();                                                                           // 5310
    _spec.target = target;                                                                                           // 5311
    return this._spec;                                                                                               // 5312
};                                                                                                                   // 5313
function _createEventOutput() {                                                                                      // 5314
    this._eventOutput = new EventHandler();                                                                          // 5315
    this._eventOutput.bindThis(this);                                                                                // 5316
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 5317
}                                                                                                                    // 5318
Particle.prototype.emit = function emit(type, data) {                                                                // 5319
    if (!this._eventOutput)                                                                                          // 5320
        return;                                                                                                      // 5321
    this._eventOutput.emit(type, data);                                                                              // 5322
};                                                                                                                   // 5323
Particle.prototype.on = function on() {                                                                              // 5324
    _createEventOutput.call(this);                                                                                   // 5325
    return this.on.apply(this, arguments);                                                                           // 5326
};                                                                                                                   // 5327
Particle.prototype.removeListener = function removeListener() {                                                      // 5328
    _createEventOutput.call(this);                                                                                   // 5329
    return this.removeListener.apply(this, arguments);                                                               // 5330
};                                                                                                                   // 5331
Particle.prototype.pipe = function pipe() {                                                                          // 5332
    _createEventOutput.call(this);                                                                                   // 5333
    return this.pipe.apply(this, arguments);                                                                         // 5334
};                                                                                                                   // 5335
Particle.prototype.unpipe = function unpipe() {                                                                      // 5336
    _createEventOutput.call(this);                                                                                   // 5337
    return this.unpipe.apply(this, arguments);                                                                       // 5338
};                                                                                                                   // 5339
module.exports = Particle;                                                                                           // 5340
},{"../integrators/SymplecticEuler":66,"famous/core/EventHandler":12,"famous/core/Transform":20,"famous/math/Vector":41}],50:[function(require,module,exports){
var Body = require('./Body');                                                                                        // 5342
var Matrix = require('famous/math/Matrix');                                                                          // 5343
function Rectangle(options) {                                                                                        // 5344
    options = options || {};                                                                                         // 5345
    this.size = options.size || [                                                                                    // 5346
        0,                                                                                                           // 5347
        0                                                                                                            // 5348
    ];                                                                                                               // 5349
    Body.call(this, options);                                                                                        // 5350
}                                                                                                                    // 5351
Rectangle.prototype = Object.create(Body.prototype);                                                                 // 5352
Rectangle.prototype.constructor = Rectangle;                                                                         // 5353
Rectangle.prototype.setSize = function setSize(size) {                                                               // 5354
    this.size = size;                                                                                                // 5355
    this.setMomentsOfInertia();                                                                                      // 5356
};                                                                                                                   // 5357
Rectangle.prototype.setMomentsOfInertia = function setMomentsOfInertia() {                                           // 5358
    var m = this.mass;                                                                                               // 5359
    var w = this.size[0];                                                                                            // 5360
    var h = this.size[1];                                                                                            // 5361
    this.inertia = new Matrix([                                                                                      // 5362
        [                                                                                                            // 5363
            m * h * h / 12,                                                                                          // 5364
            0,                                                                                                       // 5365
            0                                                                                                        // 5366
        ],                                                                                                           // 5367
        [                                                                                                            // 5368
            0,                                                                                                       // 5369
            m * w * w / 12,                                                                                          // 5370
            0                                                                                                        // 5371
        ],                                                                                                           // 5372
        [                                                                                                            // 5373
            0,                                                                                                       // 5374
            0,                                                                                                       // 5375
            m * (w * w + h * h) / 12                                                                                 // 5376
        ]                                                                                                            // 5377
    ]);                                                                                                              // 5378
    this.inverseInertia = new Matrix([                                                                               // 5379
        [                                                                                                            // 5380
            12 / (m * h * h),                                                                                        // 5381
            0,                                                                                                       // 5382
            0                                                                                                        // 5383
        ],                                                                                                           // 5384
        [                                                                                                            // 5385
            0,                                                                                                       // 5386
            12 / (m * w * w),                                                                                        // 5387
            0                                                                                                        // 5388
        ],                                                                                                           // 5389
        [                                                                                                            // 5390
            0,                                                                                                       // 5391
            0,                                                                                                       // 5392
            12 / (m * (w * w + h * h))                                                                               // 5393
        ]                                                                                                            // 5394
    ]);                                                                                                              // 5395
};                                                                                                                   // 5396
module.exports = Rectangle;                                                                                          // 5397
},{"./Body":47,"famous/math/Matrix":37}],51:[function(require,module,exports){                                       // 5398
var Constraint = require('./Constraint');                                                                            // 5399
var Vector = require('famous/math/Vector');                                                                          // 5400
function Collision(options) {                                                                                        // 5401
    this.options = Object.create(Collision.DEFAULT_OPTIONS);                                                         // 5402
    if (options)                                                                                                     // 5403
        this.setOptions(options);                                                                                    // 5404
    this.normal = new Vector();                                                                                      // 5405
    this.pDiff = new Vector();                                                                                       // 5406
    this.vDiff = new Vector();                                                                                       // 5407
    this.impulse1 = new Vector();                                                                                    // 5408
    this.impulse2 = new Vector();                                                                                    // 5409
    Constraint.call(this);                                                                                           // 5410
}                                                                                                                    // 5411
Collision.prototype = Object.create(Constraint.prototype);                                                           // 5412
Collision.prototype.constructor = Collision;                                                                         // 5413
Collision.DEFAULT_OPTIONS = {                                                                                        // 5414
    restitution: 0.5,                                                                                                // 5415
    drift: 0.5,                                                                                                      // 5416
    slop: 0                                                                                                          // 5417
};                                                                                                                   // 5418
function _normalVelocity(particle1, particle2) {                                                                     // 5419
    return particle1.velocity.dot(particle2.velocity);                                                               // 5420
}                                                                                                                    // 5421
Collision.prototype.setOptions = function setOptions(options) {                                                      // 5422
    for (var key in options)                                                                                         // 5423
        this.options[key] = options[key];                                                                            // 5424
};                                                                                                                   // 5425
Collision.prototype.applyConstraint = function applyConstraint(targets, source, dt) {                                // 5426
    if (source === undefined)                                                                                        // 5427
        return;                                                                                                      // 5428
    var v1 = source.velocity;                                                                                        // 5429
    var p1 = source.position;                                                                                        // 5430
    var w1 = source.inverseMass;                                                                                     // 5431
    var r1 = source.radius;                                                                                          // 5432
    var options = this.options;                                                                                      // 5433
    var drift = options.drift;                                                                                       // 5434
    var slop = -options.slop;                                                                                        // 5435
    var restitution = options.restitution;                                                                           // 5436
    var n = this.normal;                                                                                             // 5437
    var pDiff = this.pDiff;                                                                                          // 5438
    var vDiff = this.vDiff;                                                                                          // 5439
    var impulse1 = this.impulse1;                                                                                    // 5440
    var impulse2 = this.impulse2;                                                                                    // 5441
    for (var i = 0; i < targets.length; i++) {                                                                       // 5442
        var target = targets[i];                                                                                     // 5443
        if (target === source)                                                                                       // 5444
            continue;                                                                                                // 5445
        var v2 = target.velocity;                                                                                    // 5446
        var p2 = target.position;                                                                                    // 5447
        var w2 = target.inverseMass;                                                                                 // 5448
        var r2 = target.radius;                                                                                      // 5449
        pDiff.set(p2.sub(p1));                                                                                       // 5450
        vDiff.set(v2.sub(v1));                                                                                       // 5451
        var dist = pDiff.norm();                                                                                     // 5452
        var overlap = dist - (r1 + r2);                                                                              // 5453
        var effMass = 1 / (w1 + w2);                                                                                 // 5454
        var gamma = 0;                                                                                               // 5455
        if (overlap < 0) {                                                                                           // 5456
            n.set(pDiff.normalize());                                                                                // 5457
            if (this._eventOutput) {                                                                                 // 5458
                var collisionData = {                                                                                // 5459
                        target: target,                                                                              // 5460
                        source: source,                                                                              // 5461
                        overlap: overlap,                                                                            // 5462
                        normal: n                                                                                    // 5463
                    };                                                                                               // 5464
                this._eventOutput.emit('preCollision', collisionData);                                               // 5465
                this._eventOutput.emit('collision', collisionData);                                                  // 5466
            }                                                                                                        // 5467
            var lambda = overlap <= slop ? ((1 + restitution) * n.dot(vDiff) + drift / dt * (overlap - slop)) / (gamma + dt / effMass) : (1 + restitution) * n.dot(vDiff) / (gamma + dt / effMass);
            n.mult(dt * lambda).put(impulse1);                                                                       // 5469
            impulse1.mult(-1).put(impulse2);                                                                         // 5470
            source.applyImpulse(impulse1);                                                                           // 5471
            target.applyImpulse(impulse2);                                                                           // 5472
            if (this._eventOutput)                                                                                   // 5473
                this._eventOutput.emit('postCollision', collisionData);                                              // 5474
        }                                                                                                            // 5475
    }                                                                                                                // 5476
};                                                                                                                   // 5477
module.exports = Collision;                                                                                          // 5478
},{"./Constraint":52,"famous/math/Vector":41}],52:[function(require,module,exports){                                 // 5479
var EventHandler = require('famous/core/EventHandler');                                                              // 5480
function Constraint() {                                                                                              // 5481
    this.options = this.options || {};                                                                               // 5482
    this._eventOutput = new EventHandler();                                                                          // 5483
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 5484
}                                                                                                                    // 5485
Constraint.prototype.setOptions = function setOptions(options) {                                                     // 5486
    this._eventOutput.emit('change', options);                                                                       // 5487
};                                                                                                                   // 5488
Constraint.prototype.applyConstraint = function applyConstraint() {                                                  // 5489
};                                                                                                                   // 5490
Constraint.prototype.getEnergy = function getEnergy() {                                                              // 5491
    return 0;                                                                                                        // 5492
};                                                                                                                   // 5493
module.exports = Constraint;                                                                                         // 5494
},{"famous/core/EventHandler":12}],53:[function(require,module,exports){                                             // 5495
var Constraint = require('./Constraint');                                                                            // 5496
var Vector = require('famous/math/Vector');                                                                          // 5497
function Curve(options) {                                                                                            // 5498
    this.options = Object.create(Curve.DEFAULT_OPTIONS);                                                             // 5499
    if (options)                                                                                                     // 5500
        this.setOptions(options);                                                                                    // 5501
    this.J = new Vector();                                                                                           // 5502
    this.impulse = new Vector();                                                                                     // 5503
    Constraint.call(this);                                                                                           // 5504
}                                                                                                                    // 5505
Curve.prototype = Object.create(Constraint.prototype);                                                               // 5506
Curve.prototype.constructor = Curve;                                                                                 // 5507
var epsilon = 1e-7;                                                                                                  // 5508
var pi = Math.PI;                                                                                                    // 5509
Curve.DEFAULT_OPTIONS = {                                                                                            // 5510
    equation: function (x, y, z) {                                                                                   // 5511
        return 0;                                                                                                    // 5512
    },                                                                                                               // 5513
    plane: function (x, y, z) {                                                                                      // 5514
        return z;                                                                                                    // 5515
    },                                                                                                               // 5516
    period: 0,                                                                                                       // 5517
    dampingRatio: 0                                                                                                  // 5518
};                                                                                                                   // 5519
Curve.prototype.setOptions = function setOptions(options) {                                                          // 5520
    for (var key in options)                                                                                         // 5521
        this.options[key] = options[key];                                                                            // 5522
};                                                                                                                   // 5523
Curve.prototype.applyConstraint = function applyConstraint(targets, source, dt) {                                    // 5524
    var options = this.options;                                                                                      // 5525
    var impulse = this.impulse;                                                                                      // 5526
    var J = this.J;                                                                                                  // 5527
    var f = options.equation;                                                                                        // 5528
    var g = options.plane;                                                                                           // 5529
    var dampingRatio = options.dampingRatio;                                                                         // 5530
    var period = options.period;                                                                                     // 5531
    for (var i = 0; i < targets.length; i++) {                                                                       // 5532
        var body = targets[i];                                                                                       // 5533
        var v = body.velocity;                                                                                       // 5534
        var p = body.position;                                                                                       // 5535
        var m = body.mass;                                                                                           // 5536
        var gamma;                                                                                                   // 5537
        var beta;                                                                                                    // 5538
        if (period === 0) {                                                                                          // 5539
            gamma = 0;                                                                                               // 5540
            beta = 1;                                                                                                // 5541
        } else {                                                                                                     // 5542
            var c = 4 * m * pi * dampingRatio / period;                                                              // 5543
            var k = 4 * m * pi * pi / (period * period);                                                             // 5544
            gamma = 1 / (c + dt * k);                                                                                // 5545
            beta = dt * k / (c + dt * k);                                                                            // 5546
        }                                                                                                            // 5547
        var x = p.x;                                                                                                 // 5548
        var y = p.y;                                                                                                 // 5549
        var z = p.z;                                                                                                 // 5550
        var f0 = f(x, y, z);                                                                                         // 5551
        var dfx = (f(x + epsilon, p, p) - f0) / epsilon;                                                             // 5552
        var dfy = (f(x, y + epsilon, p) - f0) / epsilon;                                                             // 5553
        var dfz = (f(x, y, p + epsilon) - f0) / epsilon;                                                             // 5554
        var g0 = g(x, y, z);                                                                                         // 5555
        var dgx = (g(x + epsilon, y, z) - g0) / epsilon;                                                             // 5556
        var dgy = (g(x, y + epsilon, z) - g0) / epsilon;                                                             // 5557
        var dgz = (g(x, y, z + epsilon) - g0) / epsilon;                                                             // 5558
        J.setXYZ(dfx + dgx, dfy + dgy, dfz + dgz);                                                                   // 5559
        var antiDrift = beta / dt * (f0 + g0);                                                                       // 5560
        var lambda = -(J.dot(v) + antiDrift) / (gamma + dt * J.normSquared() / m);                                   // 5561
        impulse.set(J.mult(dt * lambda));                                                                            // 5562
        body.applyImpulse(impulse);                                                                                  // 5563
    }                                                                                                                // 5564
};                                                                                                                   // 5565
module.exports = Curve;                                                                                              // 5566
},{"./Constraint":52,"famous/math/Vector":41}],54:[function(require,module,exports){                                 // 5567
var Constraint = require('./Constraint');                                                                            // 5568
var Vector = require('famous/math/Vector');                                                                          // 5569
function Distance(options) {                                                                                         // 5570
    this.options = Object.create(this.constructor.DEFAULT_OPTIONS);                                                  // 5571
    if (options)                                                                                                     // 5572
        this.setOptions(options);                                                                                    // 5573
    this.impulse = new Vector();                                                                                     // 5574
    this.normal = new Vector();                                                                                      // 5575
    this.diffP = new Vector();                                                                                       // 5576
    this.diffV = new Vector();                                                                                       // 5577
    Constraint.call(this);                                                                                           // 5578
}                                                                                                                    // 5579
Distance.prototype = Object.create(Constraint.prototype);                                                            // 5580
Distance.prototype.constructor = Distance;                                                                           // 5581
Distance.DEFAULT_OPTIONS = {                                                                                         // 5582
    anchor: null,                                                                                                    // 5583
    length: 0,                                                                                                       // 5584
    minLength: 0,                                                                                                    // 5585
    period: 0,                                                                                                       // 5586
    dampingRatio: 0                                                                                                  // 5587
};                                                                                                                   // 5588
var pi = Math.PI;                                                                                                    // 5589
Distance.prototype.setOptions = function setOptions(options) {                                                       // 5590
    if (options.anchor) {                                                                                            // 5591
        if (options.anchor.position instanceof Vector)                                                               // 5592
            this.options.anchor = options.anchor.position;                                                           // 5593
        if (options.anchor instanceof Vector)                                                                        // 5594
            this.options.anchor = options.anchor;                                                                    // 5595
        if (options.anchor instanceof Array)                                                                         // 5596
            this.options.anchor = new Vector(options.anchor);                                                        // 5597
    }                                                                                                                // 5598
    if (options.length !== undefined)                                                                                // 5599
        this.options.length = options.length;                                                                        // 5600
    if (options.dampingRatio !== undefined)                                                                          // 5601
        this.options.dampingRatio = options.dampingRatio;                                                            // 5602
    if (options.period !== undefined)                                                                                // 5603
        this.options.period = options.period;                                                                        // 5604
    if (options.minLength !== undefined)                                                                             // 5605
        this.options.minLength = options.minLength;                                                                  // 5606
};                                                                                                                   // 5607
function _calcError(impulse, body) {                                                                                 // 5608
    return body.mass * impulse.norm();                                                                               // 5609
}                                                                                                                    // 5610
Distance.prototype.setAnchor = function setAnchor(anchor) {                                                          // 5611
    if (!this.options.anchor)                                                                                        // 5612
        this.options.anchor = new Vector();                                                                          // 5613
    this.options.anchor.set(anchor);                                                                                 // 5614
};                                                                                                                   // 5615
Distance.prototype.applyConstraint = function applyConstraint(targets, source, dt) {                                 // 5616
    var n = this.normal;                                                                                             // 5617
    var diffP = this.diffP;                                                                                          // 5618
    var diffV = this.diffV;                                                                                          // 5619
    var impulse = this.impulse;                                                                                      // 5620
    var options = this.options;                                                                                      // 5621
    var dampingRatio = options.dampingRatio;                                                                         // 5622
    var period = options.period;                                                                                     // 5623
    var minLength = options.minLength;                                                                               // 5624
    var p2;                                                                                                          // 5625
    var w2;                                                                                                          // 5626
    if (source) {                                                                                                    // 5627
        var v2 = source.velocity;                                                                                    // 5628
        p2 = source.position;                                                                                        // 5629
        w2 = source.inverseMass;                                                                                     // 5630
    } else {                                                                                                         // 5631
        p2 = this.options.anchor;                                                                                    // 5632
        w2 = 0;                                                                                                      // 5633
    }                                                                                                                // 5634
    var length = this.options.length;                                                                                // 5635
    for (var i = 0; i < targets.length; i++) {                                                                       // 5636
        var body = targets[i];                                                                                       // 5637
        var v1 = body.velocity;                                                                                      // 5638
        var p1 = body.position;                                                                                      // 5639
        var w1 = body.inverseMass;                                                                                   // 5640
        diffP.set(p1.sub(p2));                                                                                       // 5641
        n.set(diffP.normalize());                                                                                    // 5642
        var dist = diffP.norm() - length;                                                                            // 5643
        if (Math.abs(dist) < minLength)                                                                              // 5644
            return;                                                                                                  // 5645
        if (source)                                                                                                  // 5646
            diffV.set(v1.sub(v2));                                                                                   // 5647
        else                                                                                                         // 5648
            diffV.set(v1);                                                                                           // 5649
        var effMass = 1 / (w1 + w2);                                                                                 // 5650
        var gamma;                                                                                                   // 5651
        var beta;                                                                                                    // 5652
        if (period === 0) {                                                                                          // 5653
            gamma = 0;                                                                                               // 5654
            beta = 1;                                                                                                // 5655
        } else {                                                                                                     // 5656
            var c = 4 * effMass * pi * dampingRatio / period;                                                        // 5657
            var k = 4 * effMass * pi * pi / (period * period);                                                       // 5658
            gamma = 1 / (c + dt * k);                                                                                // 5659
            beta = dt * k / (c + dt * k);                                                                            // 5660
        }                                                                                                            // 5661
        var antiDrift = beta / dt * dist;                                                                            // 5662
        var lambda = -(n.dot(diffV) + antiDrift) / (gamma + dt / effMass);                                           // 5663
        impulse.set(n.mult(dt * lambda));                                                                            // 5664
        body.applyImpulse(impulse);                                                                                  // 5665
        if (source)                                                                                                  // 5666
            source.applyImpulse(impulse.mult(-1));                                                                   // 5667
    }                                                                                                                // 5668
};                                                                                                                   // 5669
module.exports = Distance;                                                                                           // 5670
},{"./Constraint":52,"famous/math/Vector":41}],55:[function(require,module,exports){                                 // 5671
var Constraint = require('./Constraint');                                                                            // 5672
var Vector = require('famous/math/Vector');                                                                          // 5673
function Snap(options) {                                                                                             // 5674
    Constraint.call(this);                                                                                           // 5675
    this.options = Object.create(this.constructor.DEFAULT_OPTIONS);                                                  // 5676
    if (options)                                                                                                     // 5677
        this.setOptions(options);                                                                                    // 5678
    this.pDiff = new Vector();                                                                                       // 5679
    this.vDiff = new Vector();                                                                                       // 5680
    this.impulse1 = new Vector();                                                                                    // 5681
    this.impulse2 = new Vector();                                                                                    // 5682
}                                                                                                                    // 5683
Snap.prototype = Object.create(Constraint.prototype);                                                                // 5684
Snap.prototype.constructor = Snap;                                                                                   // 5685
Snap.DEFAULT_OPTIONS = {                                                                                             // 5686
    period: 300,                                                                                                     // 5687
    dampingRatio: 0.1,                                                                                               // 5688
    length: 0,                                                                                                       // 5689
    anchor: undefined                                                                                                // 5690
};                                                                                                                   // 5691
var pi = Math.PI;                                                                                                    // 5692
Snap.prototype.setOptions = function setOptions(options) {                                                           // 5693
    if (options.anchor !== undefined) {                                                                              // 5694
        if (options.anchor instanceof Vector)                                                                        // 5695
            this.options.anchor = options.anchor;                                                                    // 5696
        if (options.anchor.position instanceof Vector)                                                               // 5697
            this.options.anchor = options.anchor.position;                                                           // 5698
        if (options.anchor instanceof Array)                                                                         // 5699
            this.options.anchor = new Vector(options.anchor);                                                        // 5700
    }                                                                                                                // 5701
    if (options.length !== undefined)                                                                                // 5702
        this.options.length = options.length;                                                                        // 5703
    if (options.dampingRatio !== undefined)                                                                          // 5704
        this.options.dampingRatio = options.dampingRatio;                                                            // 5705
    if (options.period !== undefined)                                                                                // 5706
        this.options.period = options.period;                                                                        // 5707
    Constraint.prototype.setOptions.call(this, options);                                                             // 5708
};                                                                                                                   // 5709
Snap.prototype.getEnergy = function getEnergy(targets, source) {                                                     // 5710
    var options = this.options;                                                                                      // 5711
    var restLength = options.length;                                                                                 // 5712
    var anchor = options.anchor || source.position;                                                                  // 5713
    var strength = Math.pow(2 * pi / options.period, 2);                                                             // 5714
    var energy = 0;                                                                                                  // 5715
    for (var i = 0; i < targets.length; i++) {                                                                       // 5716
        var target = targets[i];                                                                                     // 5717
        var dist = anchor.sub(target.position).norm() - restLength;                                                  // 5718
        energy += 0.5 * strength * dist * dist;                                                                      // 5719
    }                                                                                                                // 5720
    return energy;                                                                                                   // 5721
};                                                                                                                   // 5722
Snap.prototype.applyConstraint = function applyConstraint(targets, source, dt) {                                     // 5723
    var options = this.options;                                                                                      // 5724
    var pDiff = this.pDiff;                                                                                          // 5725
    var vDiff = this.vDiff;                                                                                          // 5726
    var impulse1 = this.impulse1;                                                                                    // 5727
    var impulse2 = this.impulse2;                                                                                    // 5728
    var length = options.length;                                                                                     // 5729
    var anchor = options.anchor || source.position;                                                                  // 5730
    var period = options.period;                                                                                     // 5731
    var dampingRatio = options.dampingRatio;                                                                         // 5732
    for (var i = 0; i < targets.length; i++) {                                                                       // 5733
        var target = targets[i];                                                                                     // 5734
        var p1 = target.position;                                                                                    // 5735
        var v1 = target.velocity;                                                                                    // 5736
        var m1 = target.mass;                                                                                        // 5737
        var w1 = target.inverseMass;                                                                                 // 5738
        pDiff.set(p1.sub(anchor));                                                                                   // 5739
        var dist = pDiff.norm() - length;                                                                            // 5740
        var effMass;                                                                                                 // 5741
        if (source) {                                                                                                // 5742
            var w2 = source.inverseMass;                                                                             // 5743
            var v2 = source.velocity;                                                                                // 5744
            vDiff.set(v1.sub(v2));                                                                                   // 5745
            effMass = 1 / (w1 + w2);                                                                                 // 5746
        } else {                                                                                                     // 5747
            vDiff.set(v1);                                                                                           // 5748
            effMass = m1;                                                                                            // 5749
        }                                                                                                            // 5750
        var gamma;                                                                                                   // 5751
        var beta;                                                                                                    // 5752
        if (this.options.period === 0) {                                                                             // 5753
            gamma = 0;                                                                                               // 5754
            beta = 1;                                                                                                // 5755
        } else {                                                                                                     // 5756
            var k = 4 * effMass * pi * pi / (period * period);                                                       // 5757
            var c = 4 * effMass * pi * dampingRatio / period;                                                        // 5758
            beta = dt * k / (c + dt * k);                                                                            // 5759
            gamma = 1 / (c + dt * k);                                                                                // 5760
        }                                                                                                            // 5761
        var antiDrift = beta / dt * dist;                                                                            // 5762
        pDiff.normalize(-antiDrift).sub(vDiff).mult(dt / (gamma + dt / effMass)).put(impulse1);                      // 5763
        target.applyImpulse(impulse1);                                                                               // 5764
        if (source) {                                                                                                // 5765
            impulse1.mult(-1).put(impulse2);                                                                         // 5766
            source.applyImpulse(impulse2);                                                                           // 5767
        }                                                                                                            // 5768
    }                                                                                                                // 5769
};                                                                                                                   // 5770
module.exports = Snap;                                                                                               // 5771
},{"./Constraint":52,"famous/math/Vector":41}],56:[function(require,module,exports){                                 // 5772
var Constraint = require('./Constraint');                                                                            // 5773
var Vector = require('famous/math/Vector');                                                                          // 5774
function Surface(options) {                                                                                          // 5775
    this.options = Object.create(Surface.DEFAULT_OPTIONS);                                                           // 5776
    if (options)                                                                                                     // 5777
        this.setOptions(options);                                                                                    // 5778
    this.J = new Vector();                                                                                           // 5779
    this.impulse = new Vector();                                                                                     // 5780
    Constraint.call(this);                                                                                           // 5781
}                                                                                                                    // 5782
Surface.prototype = Object.create(Constraint.prototype);                                                             // 5783
Surface.prototype.constructor = Surface;                                                                             // 5784
Surface.DEFAULT_OPTIONS = {                                                                                          // 5785
    equation: undefined,                                                                                             // 5786
    period: 0,                                                                                                       // 5787
    dampingRatio: 0                                                                                                  // 5788
};                                                                                                                   // 5789
var epsilon = 1e-7;                                                                                                  // 5790
var pi = Math.PI;                                                                                                    // 5791
Surface.prototype.setOptions = function setOptions(options) {                                                        // 5792
    for (var key in options)                                                                                         // 5793
        this.options[key] = options[key];                                                                            // 5794
};                                                                                                                   // 5795
Surface.prototype.applyConstraint = function applyConstraint(targets, source, dt) {                                  // 5796
    var impulse = this.impulse;                                                                                      // 5797
    var J = this.J;                                                                                                  // 5798
    var options = this.options;                                                                                      // 5799
    var f = options.equation;                                                                                        // 5800
    var dampingRatio = options.dampingRatio;                                                                         // 5801
    var period = options.period;                                                                                     // 5802
    for (var i = 0; i < targets.length; i++) {                                                                       // 5803
        var particle = targets[i];                                                                                   // 5804
        var v = particle.velocity;                                                                                   // 5805
        var p = particle.position;                                                                                   // 5806
        var m = particle.mass;                                                                                       // 5807
        var gamma;                                                                                                   // 5808
        var beta;                                                                                                    // 5809
        if (period === 0) {                                                                                          // 5810
            gamma = 0;                                                                                               // 5811
            beta = 1;                                                                                                // 5812
        } else {                                                                                                     // 5813
            var c = 4 * m * pi * dampingRatio / period;                                                              // 5814
            var k = 4 * m * pi * pi / (period * period);                                                             // 5815
            gamma = 1 / (c + dt * k);                                                                                // 5816
            beta = dt * k / (c + dt * k);                                                                            // 5817
        }                                                                                                            // 5818
        var x = p.x;                                                                                                 // 5819
        var y = p.y;                                                                                                 // 5820
        var z = p.z;                                                                                                 // 5821
        var f0 = f(x, y, z);                                                                                         // 5822
        var dfx = (f(x + epsilon, p, p) - f0) / epsilon;                                                             // 5823
        var dfy = (f(x, y + epsilon, p) - f0) / epsilon;                                                             // 5824
        var dfz = (f(x, y, p + epsilon) - f0) / epsilon;                                                             // 5825
        J.setXYZ(dfx, dfy, dfz);                                                                                     // 5826
        var antiDrift = beta / dt * f0;                                                                              // 5827
        var lambda = -(J.dot(v) + antiDrift) / (gamma + dt * J.normSquared() / m);                                   // 5828
        impulse.set(J.mult(dt * lambda));                                                                            // 5829
        particle.applyImpulse(impulse);                                                                              // 5830
    }                                                                                                                // 5831
};                                                                                                                   // 5832
module.exports = Surface;                                                                                            // 5833
},{"./Constraint":52,"famous/math/Vector":41}],57:[function(require,module,exports){                                 // 5834
var Constraint = require('./Constraint');                                                                            // 5835
var Vector = require('famous/math/Vector');                                                                          // 5836
function Wall(options) {                                                                                             // 5837
    this.options = Object.create(Wall.DEFAULT_OPTIONS);                                                              // 5838
    if (options)                                                                                                     // 5839
        this.setOptions(options);                                                                                    // 5840
    this.diff = new Vector();                                                                                        // 5841
    this.impulse = new Vector();                                                                                     // 5842
    Constraint.call(this);                                                                                           // 5843
}                                                                                                                    // 5844
Wall.prototype = Object.create(Constraint.prototype);                                                                // 5845
Wall.prototype.constructor = Wall;                                                                                   // 5846
Wall.ON_CONTACT = {                                                                                                  // 5847
    REFLECT: 0,                                                                                                      // 5848
    SILENT: 1                                                                                                        // 5849
};                                                                                                                   // 5850
Wall.DEFAULT_OPTIONS = {                                                                                             // 5851
    restitution: 0.5,                                                                                                // 5852
    drift: 0.5,                                                                                                      // 5853
    slop: 0,                                                                                                         // 5854
    normal: [                                                                                                        // 5855
        1,                                                                                                           // 5856
        0,                                                                                                           // 5857
        0                                                                                                            // 5858
    ],                                                                                                               // 5859
    distance: 0,                                                                                                     // 5860
    onContact: Wall.ON_CONTACT.REFLECT                                                                               // 5861
};                                                                                                                   // 5862
Wall.prototype.setOptions = function setOptions(options) {                                                           // 5863
    if (options.normal !== undefined) {                                                                              // 5864
        if (options.normal instanceof Vector)                                                                        // 5865
            this.options.normal = options.normal.clone();                                                            // 5866
        if (options.normal instanceof Array)                                                                         // 5867
            this.options.normal = new Vector(options.normal);                                                        // 5868
    }                                                                                                                // 5869
    if (options.restitution !== undefined)                                                                           // 5870
        this.options.restitution = options.restitution;                                                              // 5871
    if (options.drift !== undefined)                                                                                 // 5872
        this.options.drift = options.drift;                                                                          // 5873
    if (options.slop !== undefined)                                                                                  // 5874
        this.options.slop = options.slop;                                                                            // 5875
    if (options.distance !== undefined)                                                                              // 5876
        this.options.distance = options.distance;                                                                    // 5877
    if (options.onContact !== undefined)                                                                             // 5878
        this.options.onContact = options.onContact;                                                                  // 5879
};                                                                                                                   // 5880
function _getNormalVelocity(n, v) {                                                                                  // 5881
    return v.dot(n);                                                                                                 // 5882
}                                                                                                                    // 5883
function _getDistanceFromOrigin(p) {                                                                                 // 5884
    var n = this.options.normal;                                                                                     // 5885
    var d = this.options.distance;                                                                                   // 5886
    return p.dot(n) + d;                                                                                             // 5887
}                                                                                                                    // 5888
function _onEnter(particle, overlap, dt) {                                                                           // 5889
    var p = particle.position;                                                                                       // 5890
    var v = particle.velocity;                                                                                       // 5891
    var m = particle.mass;                                                                                           // 5892
    var n = this.options.normal;                                                                                     // 5893
    var action = this.options.onContact;                                                                             // 5894
    var restitution = this.options.restitution;                                                                      // 5895
    var impulse = this.impulse;                                                                                      // 5896
    var drift = this.options.drift;                                                                                  // 5897
    var slop = -this.options.slop;                                                                                   // 5898
    var gamma = 0;                                                                                                   // 5899
    if (this._eventOutput) {                                                                                         // 5900
        var data = {                                                                                                 // 5901
                particle: particle,                                                                                  // 5902
                wall: this,                                                                                          // 5903
                overlap: overlap,                                                                                    // 5904
                normal: n                                                                                            // 5905
            };                                                                                                       // 5906
        this._eventOutput.emit('preCollision', data);                                                                // 5907
        this._eventOutput.emit('collision', data);                                                                   // 5908
    }                                                                                                                // 5909
    switch (action) {                                                                                                // 5910
    case Wall.ON_CONTACT.REFLECT:                                                                                    // 5911
        var lambda = overlap < slop ? -((1 + restitution) * n.dot(v) + drift / dt * (overlap - slop)) / (m * dt + gamma) : -((1 + restitution) * n.dot(v)) / (m * dt + gamma);
        impulse.set(n.mult(dt * lambda));                                                                            // 5913
        particle.applyImpulse(impulse);                                                                              // 5914
        particle.setPosition(p.add(n.mult(-overlap)));                                                               // 5915
        break;                                                                                                       // 5916
    }                                                                                                                // 5917
    if (this._eventOutput)                                                                                           // 5918
        this._eventOutput.emit('postCollision', data);                                                               // 5919
}                                                                                                                    // 5920
function _onExit(particle, overlap, dt) {                                                                            // 5921
    var action = this.options.onContact;                                                                             // 5922
    var p = particle.position;                                                                                       // 5923
    var n = this.options.normal;                                                                                     // 5924
    if (action === Wall.ON_CONTACT.REFLECT) {                                                                        // 5925
        particle.setPosition(p.add(n.mult(-overlap)));                                                               // 5926
    }                                                                                                                // 5927
}                                                                                                                    // 5928
Wall.prototype.applyConstraint = function applyConstraint(targets, source, dt) {                                     // 5929
    var n = this.options.normal;                                                                                     // 5930
    for (var i = 0; i < targets.length; i++) {                                                                       // 5931
        var particle = targets[i];                                                                                   // 5932
        var p = particle.position;                                                                                   // 5933
        var v = particle.velocity;                                                                                   // 5934
        var r = particle.radius || 0;                                                                                // 5935
        var overlap = _getDistanceFromOrigin.call(this, p.add(n.mult(-r)));                                          // 5936
        var nv = _getNormalVelocity.call(this, n, v);                                                                // 5937
        if (overlap <= 0) {                                                                                          // 5938
            if (nv < 0)                                                                                              // 5939
                _onEnter.call(this, particle, overlap, dt);                                                          // 5940
            else                                                                                                     // 5941
                _onExit.call(this, particle, overlap, dt);                                                           // 5942
        }                                                                                                            // 5943
    }                                                                                                                // 5944
};                                                                                                                   // 5945
module.exports = Wall;                                                                                               // 5946
},{"./Constraint":52,"famous/math/Vector":41}],58:[function(require,module,exports){                                 // 5947
var Constraint = require('./Constraint');                                                                            // 5948
var Wall = require('./Wall');                                                                                        // 5949
var Vector = require('famous/math/Vector');                                                                          // 5950
function Walls(options) {                                                                                            // 5951
    this.options = Object.create(Walls.DEFAULT_OPTIONS);                                                             // 5952
    if (options)                                                                                                     // 5953
        this.setOptions(options);                                                                                    // 5954
    _createComponents.call(this, options.sides || this.options.sides);                                               // 5955
    Constraint.call(this);                                                                                           // 5956
}                                                                                                                    // 5957
Walls.prototype = Object.create(Constraint.prototype);                                                               // 5958
Walls.prototype.constructor = Walls;                                                                                 // 5959
Walls.ON_CONTACT = Wall.ON_CONTACT;                                                                                  // 5960
Walls.SIDES = {                                                                                                      // 5961
    LEFT: 0,                                                                                                         // 5962
    RIGHT: 1,                                                                                                        // 5963
    TOP: 2,                                                                                                          // 5964
    BOTTOM: 3,                                                                                                       // 5965
    FRONT: 4,                                                                                                        // 5966
    BACK: 5,                                                                                                         // 5967
    TWO_DIMENSIONAL: [                                                                                               // 5968
        0,                                                                                                           // 5969
        1,                                                                                                           // 5970
        2,                                                                                                           // 5971
        3                                                                                                            // 5972
    ],                                                                                                               // 5973
    THREE_DIMENSIONAL: [                                                                                             // 5974
        0,                                                                                                           // 5975
        1,                                                                                                           // 5976
        2,                                                                                                           // 5977
        3,                                                                                                           // 5978
        4,                                                                                                           // 5979
        5                                                                                                            // 5980
    ]                                                                                                                // 5981
};                                                                                                                   // 5982
Walls.DEFAULT_OPTIONS = {                                                                                            // 5983
    sides: Walls.SIDES.TWO_DIMENSIONAL,                                                                              // 5984
    size: [                                                                                                          // 5985
        window.innerWidth,                                                                                           // 5986
        window.innerHeight,                                                                                          // 5987
        0                                                                                                            // 5988
    ],                                                                                                               // 5989
    origin: [                                                                                                        // 5990
        0.5,                                                                                                         // 5991
        0.5,                                                                                                         // 5992
        0.5                                                                                                          // 5993
    ],                                                                                                               // 5994
    drift: 0.5,                                                                                                      // 5995
    slop: 0,                                                                                                         // 5996
    restitution: 0.5,                                                                                                // 5997
    onContact: Walls.ON_CONTACT.REFLECT                                                                              // 5998
};                                                                                                                   // 5999
var _SIDE_NORMALS = {                                                                                                // 6000
        0: new Vector(1, 0, 0),                                                                                      // 6001
        1: new Vector(-1, 0, 0),                                                                                     // 6002
        2: new Vector(0, 1, 0),                                                                                      // 6003
        3: new Vector(0, -1, 0),                                                                                     // 6004
        4: new Vector(0, 0, 1),                                                                                      // 6005
        5: new Vector(0, 0, -1)                                                                                      // 6006
    };                                                                                                               // 6007
function _getDistance(side, size, origin) {                                                                          // 6008
    var distance;                                                                                                    // 6009
    var SIDES = Walls.SIDES;                                                                                         // 6010
    switch (parseInt(side)) {                                                                                        // 6011
    case SIDES.LEFT:                                                                                                 // 6012
        distance = size[0] * origin[0];                                                                              // 6013
        break;                                                                                                       // 6014
    case SIDES.TOP:                                                                                                  // 6015
        distance = size[1] * origin[1];                                                                              // 6016
        break;                                                                                                       // 6017
    case SIDES.FRONT:                                                                                                // 6018
        distance = size[2] * origin[2];                                                                              // 6019
        break;                                                                                                       // 6020
    case SIDES.RIGHT:                                                                                                // 6021
        distance = size[0] * (1 - origin[0]);                                                                        // 6022
        break;                                                                                                       // 6023
    case SIDES.BOTTOM:                                                                                               // 6024
        distance = size[1] * (1 - origin[1]);                                                                        // 6025
        break;                                                                                                       // 6026
    case SIDES.BACK:                                                                                                 // 6027
        distance = size[2] * (1 - origin[2]);                                                                        // 6028
        break;                                                                                                       // 6029
    }                                                                                                                // 6030
    return distance;                                                                                                 // 6031
}                                                                                                                    // 6032
Walls.prototype.setOptions = function setOptions(options) {                                                          // 6033
    var resizeFlag = false;                                                                                          // 6034
    if (options.restitution !== undefined)                                                                           // 6035
        _setOptionsForEach.call(this, { restitution: options.restitution });                                         // 6036
    if (options.drift !== undefined)                                                                                 // 6037
        _setOptionsForEach.call(this, { drift: options.drift });                                                     // 6038
    if (options.slop !== undefined)                                                                                  // 6039
        _setOptionsForEach.call(this, { slop: options.slop });                                                       // 6040
    if (options.onContact !== undefined)                                                                             // 6041
        _setOptionsForEach.call(this, { onContact: options.onContact });                                             // 6042
    if (options.size !== undefined)                                                                                  // 6043
        resizeFlag = true;                                                                                           // 6044
    if (options.sides !== undefined)                                                                                 // 6045
        this.options.sides = options.sides;                                                                          // 6046
    if (options.origin !== undefined)                                                                                // 6047
        resizeFlag = true;                                                                                           // 6048
    if (resizeFlag)                                                                                                  // 6049
        this.setSize(options.size, options.origin);                                                                  // 6050
};                                                                                                                   // 6051
function _createComponents(sides) {                                                                                  // 6052
    this.components = {};                                                                                            // 6053
    var components = this.components;                                                                                // 6054
    for (var i = 0; i < sides.length; i++) {                                                                         // 6055
        var side = sides[i];                                                                                         // 6056
        components[i] = new Wall({                                                                                   // 6057
            normal: _SIDE_NORMALS[side].clone(),                                                                     // 6058
            distance: _getDistance(side, this.options.size, this.options.origin)                                     // 6059
        });                                                                                                          // 6060
    }                                                                                                                // 6061
}                                                                                                                    // 6062
Walls.prototype.setSize = function setSize(size, origin) {                                                           // 6063
    origin = origin || this.options.origin;                                                                          // 6064
    if (origin.length < 3)                                                                                           // 6065
        origin[2] = 0.5;                                                                                             // 6066
    this.forEach(function (wall, side) {                                                                             // 6067
        var d = _getDistance(side, size, origin);                                                                    // 6068
        wall.setOptions({ distance: d });                                                                            // 6069
    });                                                                                                              // 6070
    this.options.size = size;                                                                                        // 6071
    this.options.origin = origin;                                                                                    // 6072
};                                                                                                                   // 6073
function _setOptionsForEach(options) {                                                                               // 6074
    this.forEach(function (wall) {                                                                                   // 6075
        wall.setOptions(options);                                                                                    // 6076
    });                                                                                                              // 6077
    for (var key in options)                                                                                         // 6078
        this.options[key] = options[key];                                                                            // 6079
}                                                                                                                    // 6080
Walls.prototype.applyConstraint = function applyConstraint(targets, source, dt) {                                    // 6081
    this.forEach(function (wall) {                                                                                   // 6082
        wall.applyConstraint(targets, source, dt);                                                                   // 6083
    });                                                                                                              // 6084
};                                                                                                                   // 6085
Walls.prototype.forEach = function forEach(fn) {                                                                     // 6086
    var sides = this.options.sides;                                                                                  // 6087
    for (var key in this.sides)                                                                                      // 6088
        fn(sides[key], key);                                                                                         // 6089
};                                                                                                                   // 6090
Walls.prototype.rotateZ = function rotateZ(angle) {                                                                  // 6091
    this.forEach(function (wall) {                                                                                   // 6092
        var n = wall.options.normal;                                                                                 // 6093
        n.rotateZ(angle).put(n);                                                                                     // 6094
    });                                                                                                              // 6095
};                                                                                                                   // 6096
Walls.prototype.rotateX = function rotateX(angle) {                                                                  // 6097
    this.forEach(function (wall) {                                                                                   // 6098
        var n = wall.options.normal;                                                                                 // 6099
        n.rotateX(angle).put(n);                                                                                     // 6100
    });                                                                                                              // 6101
};                                                                                                                   // 6102
Walls.prototype.rotateY = function rotateY(angle) {                                                                  // 6103
    this.forEach(function (wall) {                                                                                   // 6104
        var n = wall.options.normal;                                                                                 // 6105
        n.rotateY(angle).put(n);                                                                                     // 6106
    });                                                                                                              // 6107
};                                                                                                                   // 6108
module.exports = Walls;                                                                                              // 6109
},{"./Constraint":52,"./Wall":57,"famous/math/Vector":41}],59:[function(require,module,exports){                     // 6110
var Force = require('./Force');                                                                                      // 6111
function Drag(options) {                                                                                             // 6112
    this.options = Object.create(this.constructor.DEFAULT_OPTIONS);                                                  // 6113
    if (options)                                                                                                     // 6114
        this.setOptions(options);                                                                                    // 6115
    Force.call(this);                                                                                                // 6116
}                                                                                                                    // 6117
Drag.prototype = Object.create(Force.prototype);                                                                     // 6118
Drag.prototype.constructor = Drag;                                                                                   // 6119
Drag.FORCE_FUNCTIONS = {                                                                                             // 6120
    LINEAR: function (velocity) {                                                                                    // 6121
        return velocity;                                                                                             // 6122
    },                                                                                                               // 6123
    QUADRATIC: function (velocity) {                                                                                 // 6124
        return velocity.mult(velocity.norm());                                                                       // 6125
    }                                                                                                                // 6126
};                                                                                                                   // 6127
Drag.DEFAULT_OPTIONS = {                                                                                             // 6128
    strength: 0.01,                                                                                                  // 6129
    forceFunction: Drag.FORCE_FUNCTIONS.LINEAR                                                                       // 6130
};                                                                                                                   // 6131
Drag.prototype.applyForce = function applyForce(targets) {                                                           // 6132
    var strength = this.options.strength;                                                                            // 6133
    var forceFunction = this.options.forceFunction;                                                                  // 6134
    var force = this.force;                                                                                          // 6135
    for (var index = 0; index < targets.length; index++) {                                                           // 6136
        var particle = targets[index];                                                                               // 6137
        forceFunction(particle.velocity).mult(-strength).put(force);                                                 // 6138
        particle.applyForce(force);                                                                                  // 6139
    }                                                                                                                // 6140
};                                                                                                                   // 6141
Drag.prototype.setOptions = function setOptions(options) {                                                           // 6142
    for (var key in options)                                                                                         // 6143
        this.options[key] = options[key];                                                                            // 6144
};                                                                                                                   // 6145
module.exports = Drag;                                                                                               // 6146
},{"./Force":60}],60:[function(require,module,exports){                                                              // 6147
var Vector = require('famous/math/Vector');                                                                          // 6148
var EventHandler = require('famous/core/EventHandler');                                                              // 6149
function Force(force) {                                                                                              // 6150
    this.force = new Vector(force);                                                                                  // 6151
    this._eventOutput = new EventHandler();                                                                          // 6152
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 6153
}                                                                                                                    // 6154
Force.prototype.setOptions = function setOptions(options) {                                                          // 6155
    this._eventOutput.emit('change', options);                                                                       // 6156
};                                                                                                                   // 6157
Force.prototype.applyForce = function applyForce(body) {                                                             // 6158
    body.applyForce(this.force);                                                                                     // 6159
};                                                                                                                   // 6160
Force.prototype.getEnergy = function getEnergy() {                                                                   // 6161
    return 0;                                                                                                        // 6162
};                                                                                                                   // 6163
module.exports = Force;                                                                                              // 6164
},{"famous/core/EventHandler":12,"famous/math/Vector":41}],61:[function(require,module,exports){                     // 6165
var Force = require('./Force');                                                                                      // 6166
var Vector = require('famous/math/Vector');                                                                          // 6167
function Repulsion(options) {                                                                                        // 6168
    this.options = Object.create(Repulsion.DEFAULT_OPTIONS);                                                         // 6169
    if (options)                                                                                                     // 6170
        this.setOptions(options);                                                                                    // 6171
    this.disp = new Vector();                                                                                        // 6172
    Force.call(this);                                                                                                // 6173
}                                                                                                                    // 6174
Repulsion.prototype = Object.create(Force.prototype);                                                                // 6175
Repulsion.prototype.constructor = Repulsion;                                                                         // 6176
Repulsion.DECAY_FUNCTIONS = {                                                                                        // 6177
    LINEAR: function (r, cutoff) {                                                                                   // 6178
        return Math.max(1 - 1 / cutoff * r, 0);                                                                      // 6179
    },                                                                                                               // 6180
    MORSE: function (r, cutoff) {                                                                                    // 6181
        var r0 = cutoff === 0 ? 100 : cutoff;                                                                        // 6182
        var rShifted = r + r0 * (1 - Math.log(2));                                                                   // 6183
        return Math.max(1 - Math.pow(1 - Math.exp(rShifted / r0 - 1), 2), 0);                                        // 6184
    },                                                                                                               // 6185
    INVERSE: function (r, cutoff) {                                                                                  // 6186
        return 1 / (1 - cutoff + r);                                                                                 // 6187
    },                                                                                                               // 6188
    GRAVITY: function (r, cutoff) {                                                                                  // 6189
        return 1 / (1 - cutoff + r * r);                                                                             // 6190
    }                                                                                                                // 6191
};                                                                                                                   // 6192
Repulsion.DEFAULT_OPTIONS = {                                                                                        // 6193
    strength: 1,                                                                                                     // 6194
    anchor: undefined,                                                                                               // 6195
    range: [                                                                                                         // 6196
        0,                                                                                                           // 6197
        Infinity                                                                                                     // 6198
    ],                                                                                                               // 6199
    cutoff: 0,                                                                                                       // 6200
    cap: Infinity,                                                                                                   // 6201
    decayFunction: Repulsion.DECAY_FUNCTIONS.GRAVITY                                                                 // 6202
};                                                                                                                   // 6203
Repulsion.prototype.setOptions = function setOptions(options) {                                                      // 6204
    if (options.anchor !== undefined) {                                                                              // 6205
        if (options.anchor.position instanceof Vector)                                                               // 6206
            this.options.anchor = options.anchor.position;                                                           // 6207
        if (options.anchor instanceof Array)                                                                         // 6208
            this.options.anchor = new Vector(options.anchor);                                                        // 6209
        delete options.anchor;                                                                                       // 6210
    }                                                                                                                // 6211
    for (var key in options)                                                                                         // 6212
        this.options[key] = options[key];                                                                            // 6213
};                                                                                                                   // 6214
Repulsion.prototype.applyForce = function applyForce(targets, source) {                                              // 6215
    var options = this.options;                                                                                      // 6216
    var force = this.force;                                                                                          // 6217
    var disp = this.disp;                                                                                            // 6218
    var strength = options.strength;                                                                                 // 6219
    var anchor = options.anchor || source.position;                                                                  // 6220
    var cap = options.cap;                                                                                           // 6221
    var cutoff = options.cutoff;                                                                                     // 6222
    var rMin = options.range[0];                                                                                     // 6223
    var rMax = options.range[1];                                                                                     // 6224
    var decayFn = options.decayFunction;                                                                             // 6225
    if (strength === 0)                                                                                              // 6226
        return;                                                                                                      // 6227
    for (var index in targets) {                                                                                     // 6228
        var particle = targets[index];                                                                               // 6229
        if (particle === source)                                                                                     // 6230
            continue;                                                                                                // 6231
        var m1 = particle.mass;                                                                                      // 6232
        var p1 = particle.position;                                                                                  // 6233
        disp.set(p1.sub(anchor));                                                                                    // 6234
        var r = disp.norm();                                                                                         // 6235
        if (r < rMax && r > rMin) {                                                                                  // 6236
            force.set(disp.normalize(strength * m1 * decayFn(r, cutoff)).cap(cap));                                  // 6237
            particle.applyForce(force);                                                                              // 6238
        }                                                                                                            // 6239
    }                                                                                                                // 6240
};                                                                                                                   // 6241
module.exports = Repulsion;                                                                                          // 6242
},{"./Force":60,"famous/math/Vector":41}],62:[function(require,module,exports){                                      // 6243
var Drag = require('./Drag');                                                                                        // 6244
function RotationalDrag(options) {                                                                                   // 6245
    Drag.call(this, options);                                                                                        // 6246
}                                                                                                                    // 6247
RotationalDrag.prototype = Object.create(Drag.prototype);                                                            // 6248
RotationalDrag.prototype.constructor = RotationalDrag;                                                               // 6249
RotationalDrag.DEFAULT_OPTIONS = Drag.DEFAULT_OPTIONS;                                                               // 6250
RotationalDrag.FORCE_FUNCTIONS = Drag.FORCE_FUNCTIONS;                                                               // 6251
RotationalDrag.FORCE_FUNCTIONS = {                                                                                   // 6252
    LINEAR: function (angularVelocity) {                                                                             // 6253
        return angularVelocity;                                                                                      // 6254
    },                                                                                                               // 6255
    QUADRATIC: function (angularVelocity) {                                                                          // 6256
        return angularVelocity.mult(angularVelocity.norm());                                                         // 6257
    }                                                                                                                // 6258
};                                                                                                                   // 6259
RotationalDrag.prototype.applyForce = function applyForce(targets) {                                                 // 6260
    var strength = this.options.strength;                                                                            // 6261
    var forceFunction = this.options.forceFunction;                                                                  // 6262
    var force = this.force;                                                                                          // 6263
    for (var index = 0; index < targets.length; index++) {                                                           // 6264
        var particle = targets[index];                                                                               // 6265
        forceFunction(particle.angularVelocity).mult(-100 * strength).put(force);                                    // 6266
        particle.applyTorque(force);                                                                                 // 6267
    }                                                                                                                // 6268
};                                                                                                                   // 6269
RotationalDrag.prototype.setOptions = function setOptions(options) {                                                 // 6270
    for (var key in options)                                                                                         // 6271
        this.options[key] = options[key];                                                                            // 6272
};                                                                                                                   // 6273
module.exports = RotationalDrag;                                                                                     // 6274
},{"./Drag":59}],63:[function(require,module,exports){                                                               // 6275
var Force = require('./Force');                                                                                      // 6276
var Spring = require('./Spring');                                                                                    // 6277
var Quaternion = require('famous/math/Quaternion');                                                                  // 6278
function RotationalSpring(options) {                                                                                 // 6279
    Spring.call(this, options);                                                                                      // 6280
}                                                                                                                    // 6281
RotationalSpring.prototype = Object.create(Spring.prototype);                                                        // 6282
RotationalSpring.prototype.constructor = RotationalSpring;                                                           // 6283
RotationalSpring.DEFAULT_OPTIONS = Spring.DEFAULT_OPTIONS;                                                           // 6284
RotationalSpring.FORCE_FUNCTIONS = Spring.FORCE_FUNCTIONS;                                                           // 6285
var pi = Math.PI;                                                                                                    // 6286
function _calcStiffness() {                                                                                          // 6287
    var options = this.options;                                                                                      // 6288
    options.stiffness = Math.pow(2 * pi / options.period, 2);                                                        // 6289
}                                                                                                                    // 6290
function _calcDamping() {                                                                                            // 6291
    var options = this.options;                                                                                      // 6292
    options.damping = 4 * pi * options.dampingRatio / options.period;                                                // 6293
}                                                                                                                    // 6294
function _init() {                                                                                                   // 6295
    _calcStiffness.call(this);                                                                                       // 6296
    _calcDamping.call(this);                                                                                         // 6297
}                                                                                                                    // 6298
RotationalSpring.prototype.setOptions = function setOptions(options) {                                               // 6299
    if (options.anchor !== undefined) {                                                                              // 6300
        if (options.anchor instanceof Quaternion)                                                                    // 6301
            this.options.anchor = options.anchor;                                                                    // 6302
        if (options.anchor instanceof Array)                                                                         // 6303
            this.options.anchor = new Quaternion(options.anchor);                                                    // 6304
    }                                                                                                                // 6305
    if (options.period !== undefined) {                                                                              // 6306
        this.options.period = options.period;                                                                        // 6307
    }                                                                                                                // 6308
    if (options.dampingRatio !== undefined)                                                                          // 6309
        this.options.dampingRatio = options.dampingRatio;                                                            // 6310
    if (options.length !== undefined)                                                                                // 6311
        this.options.length = options.length;                                                                        // 6312
    if (options.forceFunction !== undefined)                                                                         // 6313
        this.options.forceFunction = options.forceFunction;                                                          // 6314
    if (options.maxLength !== undefined)                                                                             // 6315
        this.options.maxLength = options.maxLength;                                                                  // 6316
    _init.call(this);                                                                                                // 6317
    Force.prototype.setOptions.call(this, options);                                                                  // 6318
};                                                                                                                   // 6319
RotationalSpring.prototype.applyForce = function applyForce(targets) {                                               // 6320
    var force = this.force;                                                                                          // 6321
    var options = this.options;                                                                                      // 6322
    var disp = this.disp;                                                                                            // 6323
    var stiffness = options.stiffness;                                                                               // 6324
    var damping = options.damping;                                                                                   // 6325
    var restLength = options.length;                                                                                 // 6326
    var anchor = options.anchor;                                                                                     // 6327
    var forceFunction = options.forceFunction;                                                                       // 6328
    var maxLength = options.maxLength;                                                                               // 6329
    for (var i = 0; i < targets.length; i++) {                                                                       // 6330
        var target = targets[i];                                                                                     // 6331
        disp.set(anchor.sub(target.orientation));                                                                    // 6332
        var dist = disp.norm() - restLength;                                                                         // 6333
        if (dist === 0)                                                                                              // 6334
            return;                                                                                                  // 6335
        var m = target.mass;                                                                                         // 6336
        stiffness *= m;                                                                                              // 6337
        damping *= m;                                                                                                // 6338
        force.set(disp.normalize(stiffness * forceFunction(dist, maxLength)));                                       // 6339
        if (damping)                                                                                                 // 6340
            force.add(target.angularVelocity.mult(-damping)).put(force);                                             // 6341
        target.applyTorque(force);                                                                                   // 6342
    }                                                                                                                // 6343
};                                                                                                                   // 6344
RotationalSpring.prototype.getEnergy = function getEnergy(targets) {                                                 // 6345
    var options = this.options;                                                                                      // 6346
    var restLength = options.length;                                                                                 // 6347
    var anchor = options.anchor;                                                                                     // 6348
    var strength = options.stiffness;                                                                                // 6349
    var energy = 0;                                                                                                  // 6350
    for (var i = 0; i < targets.length; i++) {                                                                       // 6351
        var target = targets[i];                                                                                     // 6352
        var dist = anchor.sub(target.orientation).norm() - restLength;                                               // 6353
        energy += 0.5 * strength * dist * dist;                                                                      // 6354
    }                                                                                                                // 6355
    return energy;                                                                                                   // 6356
};                                                                                                                   // 6357
module.exports = RotationalSpring;                                                                                   // 6358
},{"./Force":60,"./Spring":64,"famous/math/Quaternion":38}],64:[function(require,module,exports){                    // 6359
var Force = require('./Force');                                                                                      // 6360
var Vector = require('famous/math/Vector');                                                                          // 6361
function Spring(options) {                                                                                           // 6362
    Force.call(this);                                                                                                // 6363
    this.options = Object.create(this.constructor.DEFAULT_OPTIONS);                                                  // 6364
    if (options)                                                                                                     // 6365
        this.setOptions(options);                                                                                    // 6366
    this.disp = new Vector(0, 0, 0);                                                                                 // 6367
    _init.call(this);                                                                                                // 6368
}                                                                                                                    // 6369
Spring.prototype = Object.create(Force.prototype);                                                                   // 6370
Spring.prototype.constructor = Spring;                                                                               // 6371
var pi = Math.PI;                                                                                                    // 6372
var MIN_PERIOD = 150;                                                                                                // 6373
Spring.FORCE_FUNCTIONS = {                                                                                           // 6374
    FENE: function (dist, rMax) {                                                                                    // 6375
        var rMaxSmall = rMax * 0.99;                                                                                 // 6376
        var r = Math.max(Math.min(dist, rMaxSmall), -rMaxSmall);                                                     // 6377
        return r / (1 - r * r / (rMax * rMax));                                                                      // 6378
    },                                                                                                               // 6379
    HOOK: function (dist) {                                                                                          // 6380
        return dist;                                                                                                 // 6381
    }                                                                                                                // 6382
};                                                                                                                   // 6383
Spring.DEFAULT_OPTIONS = {                                                                                           // 6384
    period: 300,                                                                                                     // 6385
    dampingRatio: 0.1,                                                                                               // 6386
    length: 0,                                                                                                       // 6387
    maxLength: Infinity,                                                                                             // 6388
    anchor: undefined,                                                                                               // 6389
    forceFunction: Spring.FORCE_FUNCTIONS.HOOK                                                                       // 6390
};                                                                                                                   // 6391
function _calcStiffness() {                                                                                          // 6392
    var options = this.options;                                                                                      // 6393
    options.stiffness = Math.pow(2 * pi / options.period, 2);                                                        // 6394
}                                                                                                                    // 6395
function _calcDamping() {                                                                                            // 6396
    var options = this.options;                                                                                      // 6397
    options.damping = 4 * pi * options.dampingRatio / options.period;                                                // 6398
}                                                                                                                    // 6399
function _init() {                                                                                                   // 6400
    _calcStiffness.call(this);                                                                                       // 6401
    _calcDamping.call(this);                                                                                         // 6402
}                                                                                                                    // 6403
Spring.prototype.setOptions = function setOptions(options) {                                                         // 6404
    if (options.anchor !== undefined) {                                                                              // 6405
        if (options.anchor.position instanceof Vector)                                                               // 6406
            this.options.anchor = options.anchor.position;                                                           // 6407
        if (options.anchor instanceof Vector)                                                                        // 6408
            this.options.anchor = options.anchor;                                                                    // 6409
        if (options.anchor instanceof Array)                                                                         // 6410
            this.options.anchor = new Vector(options.anchor);                                                        // 6411
    }                                                                                                                // 6412
    if (options.period !== undefined) {                                                                              // 6413
        if (options.period < MIN_PERIOD) {                                                                           // 6414
            options.period = MIN_PERIOD;                                                                             // 6415
            console.warn('The period of a SpringTransition is capped at ' + MIN_PERIOD + ' ms. Use a SnapTransition for faster transitions');
        }                                                                                                            // 6417
        this.options.period = options.period;                                                                        // 6418
    }                                                                                                                // 6419
    if (options.dampingRatio !== undefined)                                                                          // 6420
        this.options.dampingRatio = options.dampingRatio;                                                            // 6421
    if (options.length !== undefined)                                                                                // 6422
        this.options.length = options.length;                                                                        // 6423
    if (options.forceFunction !== undefined)                                                                         // 6424
        this.options.forceFunction = options.forceFunction;                                                          // 6425
    if (options.maxLength !== undefined)                                                                             // 6426
        this.options.maxLength = options.maxLength;                                                                  // 6427
    _init.call(this);                                                                                                // 6428
    Force.prototype.setOptions.call(this, options);                                                                  // 6429
};                                                                                                                   // 6430
Spring.prototype.applyForce = function applyForce(targets, source) {                                                 // 6431
    var force = this.force;                                                                                          // 6432
    var disp = this.disp;                                                                                            // 6433
    var options = this.options;                                                                                      // 6434
    var stiffness = options.stiffness;                                                                               // 6435
    var damping = options.damping;                                                                                   // 6436
    var restLength = options.length;                                                                                 // 6437
    var maxLength = options.maxLength;                                                                               // 6438
    var anchor = options.anchor || source.position;                                                                  // 6439
    var forceFunction = options.forceFunction;                                                                       // 6440
    for (var i = 0; i < targets.length; i++) {                                                                       // 6441
        var target = targets[i];                                                                                     // 6442
        var p2 = target.position;                                                                                    // 6443
        var v2 = target.velocity;                                                                                    // 6444
        anchor.sub(p2).put(disp);                                                                                    // 6445
        var dist = disp.norm() - restLength;                                                                         // 6446
        if (dist === 0)                                                                                              // 6447
            return;                                                                                                  // 6448
        var m = target.mass;                                                                                         // 6449
        stiffness *= m;                                                                                              // 6450
        damping *= m;                                                                                                // 6451
        disp.normalize(stiffness * forceFunction(dist, maxLength)).put(force);                                       // 6452
        if (damping)                                                                                                 // 6453
            if (source)                                                                                              // 6454
                force.add(v2.sub(source.velocity).mult(-damping)).put(force);                                        // 6455
            else                                                                                                     // 6456
                force.add(v2.mult(-damping)).put(force);                                                             // 6457
        target.applyForce(force);                                                                                    // 6458
        if (source)                                                                                                  // 6459
            source.applyForce(force.mult(-1));                                                                       // 6460
    }                                                                                                                // 6461
};                                                                                                                   // 6462
Spring.prototype.getEnergy = function getEnergy(targets, source) {                                                   // 6463
    var options = this.options;                                                                                      // 6464
    var restLength = options.length;                                                                                 // 6465
    var anchor = source ? source.position : options.anchor;                                                          // 6466
    var strength = options.stiffness;                                                                                // 6467
    var energy = 0;                                                                                                  // 6468
    for (var i = 0; i < targets.length; i++) {                                                                       // 6469
        var target = targets[i];                                                                                     // 6470
        var dist = anchor.sub(target.position).norm() - restLength;                                                  // 6471
        energy += 0.5 * strength * dist * dist;                                                                      // 6472
    }                                                                                                                // 6473
    return energy;                                                                                                   // 6474
};                                                                                                                   // 6475
module.exports = Spring;                                                                                             // 6476
},{"./Force":60,"famous/math/Vector":41}],65:[function(require,module,exports){                                      // 6477
var Force = require('./Force');                                                                                      // 6478
var Vector = require('famous/math/Vector');                                                                          // 6479
function VectorField(options) {                                                                                      // 6480
    Force.call(this);                                                                                                // 6481
    this.options = Object.create(VectorField.DEFAULT_OPTIONS);                                                       // 6482
    if (options)                                                                                                     // 6483
        this.setOptions(options);                                                                                    // 6484
    this.evaluation = new Vector();                                                                                  // 6485
}                                                                                                                    // 6486
VectorField.prototype = Object.create(Force.prototype);                                                              // 6487
VectorField.prototype.constructor = VectorField;                                                                     // 6488
VectorField.FIELDS = {                                                                                               // 6489
    CONSTANT: function (v, options) {                                                                                // 6490
        options.direction.put(this.evaluation);                                                                      // 6491
    },                                                                                                               // 6492
    LINEAR: function (v) {                                                                                           // 6493
        v.put(this.evaluation);                                                                                      // 6494
    },                                                                                                               // 6495
    RADIAL: function (v) {                                                                                           // 6496
        v.mult(-1).put(this.evaluation);                                                                             // 6497
    },                                                                                                               // 6498
    POINT_ATTRACTOR: function (v, options) {                                                                         // 6499
        options.position.sub(v).put(this.evaluation);                                                                // 6500
    }                                                                                                                // 6501
};                                                                                                                   // 6502
VectorField.DEFAULT_OPTIONS = {                                                                                      // 6503
    strength: 0.01,                                                                                                  // 6504
    field: VectorField.FIELDS.CONSTANT                                                                               // 6505
};                                                                                                                   // 6506
VectorField.prototype.setOptions = function setOptions(options) {                                                    // 6507
    if (options.strength !== undefined)                                                                              // 6508
        this.options.strength = options.strength;                                                                    // 6509
    if (options.field !== undefined) {                                                                               // 6510
        this.options.field = options.field;                                                                          // 6511
        _setFieldOptions.call(this, this.options.field);                                                             // 6512
    }                                                                                                                // 6513
};                                                                                                                   // 6514
function _setFieldOptions(field) {                                                                                   // 6515
    var FIELDS = VectorField.FIELDS;                                                                                 // 6516
    switch (field) {                                                                                                 // 6517
    case FIELDS.CONSTANT:                                                                                            // 6518
        if (!this.options.direction)                                                                                 // 6519
            this.options.direction = new Vector(0, 1, 0);                                                            // 6520
        else if (this.options.direction instanceof Array)                                                            // 6521
            this.options.direction = new Vector(this.options.direction);                                             // 6522
        break;                                                                                                       // 6523
    case FIELDS.POINT_ATTRACTOR:                                                                                     // 6524
        if (!this.options.position)                                                                                  // 6525
            this.options.position = new Vector(0, 0, 0);                                                             // 6526
        else if (this.options.position instanceof Array)                                                             // 6527
            this.options.position = new Vector(this.options.position);                                               // 6528
        break;                                                                                                       // 6529
    }                                                                                                                // 6530
}                                                                                                                    // 6531
VectorField.prototype.applyForce = function applyForce(targets) {                                                    // 6532
    var force = this.force;                                                                                          // 6533
    var strength = this.options.strength;                                                                            // 6534
    var field = this.options.field;                                                                                  // 6535
    for (var i = 0; i < targets.length; i++) {                                                                       // 6536
        var target = targets[i];                                                                                     // 6537
        field.call(this, target.position, this.options);                                                             // 6538
        this.evaluation.mult(target.mass * strength).put(force);                                                     // 6539
        target.applyForce(force);                                                                                    // 6540
    }                                                                                                                // 6541
};                                                                                                                   // 6542
VectorField.prototype.getEnergy = function getEnergy(targets) {                                                      // 6543
    var field = this.options.field;                                                                                  // 6544
    var FIELDS = VectorField.FIELDS;                                                                                 // 6545
    var energy = 0;                                                                                                  // 6546
    var i;                                                                                                           // 6547
    var target;                                                                                                      // 6548
    switch (field) {                                                                                                 // 6549
    case FIELDS.CONSTANT:                                                                                            // 6550
        energy = targets.length * this.options.direction.norm();                                                     // 6551
        break;                                                                                                       // 6552
    case FIELDS.RADIAL:                                                                                              // 6553
        for (i = 0; i < targets.length; i++) {                                                                       // 6554
            target = targets[i];                                                                                     // 6555
            energy += target.position.norm();                                                                        // 6556
        }                                                                                                            // 6557
        break;                                                                                                       // 6558
    case FIELDS.POINT_ATTRACTOR:                                                                                     // 6559
        for (i = 0; i < targets.length; i++) {                                                                       // 6560
            target = targets[i];                                                                                     // 6561
            energy += target.position.sub(this.options.position).norm();                                             // 6562
        }                                                                                                            // 6563
        break;                                                                                                       // 6564
    }                                                                                                                // 6565
    energy *= this.options.strength;                                                                                 // 6566
    return energy;                                                                                                   // 6567
};                                                                                                                   // 6568
module.exports = VectorField;                                                                                        // 6569
},{"./Force":60,"famous/math/Vector":41}],66:[function(require,module,exports){                                      // 6570
var SymplecticEuler = {};                                                                                            // 6571
SymplecticEuler.integrateVelocity = function integrateVelocity(body, dt) {                                           // 6572
    var v = body.velocity;                                                                                           // 6573
    var w = body.inverseMass;                                                                                        // 6574
    var f = body.force;                                                                                              // 6575
    if (f.isZero())                                                                                                  // 6576
        return;                                                                                                      // 6577
    v.add(f.mult(dt * w)).put(v);                                                                                    // 6578
    f.clear();                                                                                                       // 6579
};                                                                                                                   // 6580
SymplecticEuler.integratePosition = function integratePosition(body, dt) {                                           // 6581
    var p = body.position;                                                                                           // 6582
    var v = body.velocity;                                                                                           // 6583
    p.add(v.mult(dt)).put(p);                                                                                        // 6584
};                                                                                                                   // 6585
SymplecticEuler.integrateAngularMomentum = function integrateAngularMomentum(body, dt) {                             // 6586
    var L = body.angularMomentum;                                                                                    // 6587
    var t = body.torque;                                                                                             // 6588
    if (t.isZero())                                                                                                  // 6589
        return;                                                                                                      // 6590
    L.add(t.mult(dt)).put(L);                                                                                        // 6591
    t.clear();                                                                                                       // 6592
};                                                                                                                   // 6593
SymplecticEuler.integrateOrientation = function integrateOrientation(body, dt) {                                     // 6594
    var q = body.orientation;                                                                                        // 6595
    var w = body.angularVelocity;                                                                                    // 6596
    if (w.isZero())                                                                                                  // 6597
        return;                                                                                                      // 6598
    q.add(q.multiply(w).scalarMultiply(0.5 * dt)).put(q);                                                            // 6599
};                                                                                                                   // 6600
module.exports = SymplecticEuler;                                                                                    // 6601
},{}],67:[function(require,module,exports){                                                                          // 6602
var Surface = require('famous/core/Surface');                                                                        // 6603
function CanvasSurface(options) {                                                                                    // 6604
    if (options && options.canvasSize)                                                                               // 6605
        this._canvasSize = options.canvasSize;                                                                       // 6606
    Surface.apply(this, arguments);                                                                                  // 6607
    if (!this._canvasSize)                                                                                           // 6608
        this._canvasSize = this.getSize();                                                                           // 6609
    this._backBuffer = document.createElement('canvas');                                                             // 6610
    if (this._canvasSize) {                                                                                          // 6611
        this._backBuffer.width = this._canvasSize[0];                                                                // 6612
        this._backBuffer.height = this._canvasSize[1];                                                               // 6613
    }                                                                                                                // 6614
    this._contextId = undefined;                                                                                     // 6615
}                                                                                                                    // 6616
CanvasSurface.prototype = Object.create(Surface.prototype);                                                          // 6617
CanvasSurface.prototype.constructor = CanvasSurface;                                                                 // 6618
CanvasSurface.prototype.elementType = 'canvas';                                                                      // 6619
CanvasSurface.prototype.elementClass = 'famous-surface';                                                             // 6620
CanvasSurface.prototype.setContent = function setContent() {                                                         // 6621
};                                                                                                                   // 6622
CanvasSurface.prototype.deploy = function deploy(target) {                                                           // 6623
    if (this._canvasSize) {                                                                                          // 6624
        target.width = this._canvasSize[0];                                                                          // 6625
        target.height = this._canvasSize[1];                                                                         // 6626
    }                                                                                                                // 6627
    if (this._contextId === '2d') {                                                                                  // 6628
        target.getContext(this._contextId).drawImage(this._backBuffer, 0, 0);                                        // 6629
        this._backBuffer.width = 0;                                                                                  // 6630
        this._backBuffer.height = 0;                                                                                 // 6631
    }                                                                                                                // 6632
};                                                                                                                   // 6633
CanvasSurface.prototype.recall = function recall(target) {                                                           // 6634
    var size = this.getSize();                                                                                       // 6635
    this._backBuffer.width = target.width;                                                                           // 6636
    this._backBuffer.height = target.height;                                                                         // 6637
    if (this._contextId === '2d') {                                                                                  // 6638
        this._backBuffer.getContext(this._contextId).drawImage(target, 0, 0);                                        // 6639
        target.width = 0;                                                                                            // 6640
        target.height = 0;                                                                                           // 6641
    }                                                                                                                // 6642
};                                                                                                                   // 6643
CanvasSurface.prototype.getContext = function getContext(contextId) {                                                // 6644
    this._contextId = contextId;                                                                                     // 6645
    return this._currentTarget ? this._currentTarget.getContext(contextId) : this._backBuffer.getContext(contextId); // 6646
};                                                                                                                   // 6647
CanvasSurface.prototype.setSize = function setSize(size, canvasSize) {                                               // 6648
    Surface.prototype.setSize.apply(this, arguments);                                                                // 6649
    if (canvasSize)                                                                                                  // 6650
        this._canvasSize = [                                                                                         // 6651
            canvasSize[0],                                                                                           // 6652
            canvasSize[1]                                                                                            // 6653
        ];                                                                                                           // 6654
    if (this._currentTarget) {                                                                                       // 6655
        this._currentTarget.width = this._canvasSize[0];                                                             // 6656
        this._currentTarget.height = this._canvasSize[1];                                                            // 6657
    }                                                                                                                // 6658
};                                                                                                                   // 6659
module.exports = CanvasSurface;                                                                                      // 6660
},{"famous/core/Surface":19}],68:[function(require,module,exports){                                                  // 6661
var Surface = require('famous/core/Surface');                                                                        // 6662
var Context = require('famous/core/Context');                                                                        // 6663
function ContainerSurface(options) {                                                                                 // 6664
    Surface.call(this, options);                                                                                     // 6665
    this._container = document.createElement('div');                                                                 // 6666
    this._container.classList.add('famous-group');                                                                   // 6667
    this._container.classList.add('famous-container-group');                                                         // 6668
    this._shouldRecalculateSize = false;                                                                             // 6669
    this.context = new Context(this._container);                                                                     // 6670
    this.setContent(this._container);                                                                                // 6671
}                                                                                                                    // 6672
ContainerSurface.prototype = Object.create(Surface.prototype);                                                       // 6673
ContainerSurface.prototype.constructor = ContainerSurface;                                                           // 6674
ContainerSurface.prototype.elementType = 'div';                                                                      // 6675
ContainerSurface.prototype.elementClass = 'famous-surface';                                                          // 6676
ContainerSurface.prototype.add = function add() {                                                                    // 6677
    return this.context.add.apply(this.context, arguments);                                                          // 6678
};                                                                                                                   // 6679
ContainerSurface.prototype.render = function render() {                                                              // 6680
    if (this._sizeDirty)                                                                                             // 6681
        this._shouldRecalculateSize = true;                                                                          // 6682
    return Surface.prototype.render.apply(this, arguments);                                                          // 6683
};                                                                                                                   // 6684
ContainerSurface.prototype.deploy = function deploy() {                                                              // 6685
    this._shouldRecalculateSize = true;                                                                              // 6686
    return Surface.prototype.deploy.apply(this, arguments);                                                          // 6687
};                                                                                                                   // 6688
ContainerSurface.prototype.commit = function commit(context, transform, opacity, origin, size) {                     // 6689
    var previousSize = this._size ? [                                                                                // 6690
            this._size[0],                                                                                           // 6691
            this._size[1]                                                                                            // 6692
        ] : null;                                                                                                    // 6693
    var result = Surface.prototype.commit.apply(this, arguments);                                                    // 6694
    if (this._shouldRecalculateSize || previousSize && (this._size[0] !== previousSize[0] || this._size[1] !== previousSize[1])) {
        this.context.setSize();                                                                                      // 6696
        this._shouldRecalculateSize = false;                                                                         // 6697
    }                                                                                                                // 6698
    this.context.update();                                                                                           // 6699
    return result;                                                                                                   // 6700
};                                                                                                                   // 6701
module.exports = ContainerSurface;                                                                                   // 6702
},{"famous/core/Context":6,"famous/core/Surface":19}],69:[function(require,module,exports){                          // 6703
var ContainerSurface = require('./ContainerSurface');                                                                // 6704
function FormContainerSurface(options) {                                                                             // 6705
    if (options)                                                                                                     // 6706
        this._method = options.method || '';                                                                         // 6707
    ContainerSurface.apply(this, arguments);                                                                         // 6708
}                                                                                                                    // 6709
FormContainerSurface.prototype = Object.create(ContainerSurface.prototype);                                          // 6710
FormContainerSurface.prototype.constructor = FormContainerSurface;                                                   // 6711
FormContainerSurface.prototype.elementType = 'form';                                                                 // 6712
FormContainerSurface.prototype.deploy = function deploy(target) {                                                    // 6713
    if (this._method)                                                                                                // 6714
        target.method = this._method;                                                                                // 6715
    return ContainerSurface.prototype.deploy.apply(this, arguments);                                                 // 6716
};                                                                                                                   // 6717
module.exports = FormContainerSurface;                                                                               // 6718
},{"./ContainerSurface":68}],70:[function(require,module,exports){                                                   // 6719
var Surface = require('famous/core/Surface');                                                                        // 6720
function ImageSurface(options) {                                                                                     // 6721
    this._imageUrl = undefined;                                                                                      // 6722
    Surface.apply(this, arguments);                                                                                  // 6723
}                                                                                                                    // 6724
var urlCache = [];                                                                                                   // 6725
var countCache = [];                                                                                                 // 6726
var nodeCache = [];                                                                                                  // 6727
var cacheEnabled = true;                                                                                             // 6728
ImageSurface.enableCache = function enableCache() {                                                                  // 6729
    cacheEnabled = true;                                                                                             // 6730
};                                                                                                                   // 6731
ImageSurface.disableCache = function disableCache() {                                                                // 6732
    cacheEnabled = false;                                                                                            // 6733
};                                                                                                                   // 6734
ImageSurface.clearCache = function clearCache() {                                                                    // 6735
    urlCache = [];                                                                                                   // 6736
    countCache = [];                                                                                                 // 6737
    nodeCache = [];                                                                                                  // 6738
};                                                                                                                   // 6739
ImageSurface.getCache = function getCache() {                                                                        // 6740
    return {                                                                                                         // 6741
        urlCache: urlCache,                                                                                          // 6742
        countCache: countCache,                                                                                      // 6743
        nodeCache: countCache                                                                                        // 6744
    };                                                                                                               // 6745
};                                                                                                                   // 6746
ImageSurface.prototype = Object.create(Surface.prototype);                                                           // 6747
ImageSurface.prototype.constructor = ImageSurface;                                                                   // 6748
ImageSurface.prototype.elementType = 'img';                                                                          // 6749
ImageSurface.prototype.elementClass = 'famous-surface';                                                              // 6750
ImageSurface.prototype.setContent = function setContent(imageUrl) {                                                  // 6751
    var urlIndex = urlCache.indexOf(this._imageUrl);                                                                 // 6752
    if (urlIndex !== -1) {                                                                                           // 6753
        if (countCache[urlIndex] === 1) {                                                                            // 6754
            urlCache.splice(urlIndex, 1);                                                                            // 6755
            countCache.splice(urlIndex, 1);                                                                          // 6756
            nodeCache.splice(urlIndex, 1);                                                                           // 6757
        } else {                                                                                                     // 6758
            countCache[urlIndex]--;                                                                                  // 6759
        }                                                                                                            // 6760
    }                                                                                                                // 6761
    urlIndex = urlCache.indexOf(imageUrl);                                                                           // 6762
    if (urlIndex === -1) {                                                                                           // 6763
        urlCache.push(imageUrl);                                                                                     // 6764
        countCache.push(1);                                                                                          // 6765
    } else {                                                                                                         // 6766
        countCache[urlIndex]++;                                                                                      // 6767
    }                                                                                                                // 6768
    this._imageUrl = imageUrl;                                                                                       // 6769
    this._contentDirty = true;                                                                                       // 6770
};                                                                                                                   // 6771
ImageSurface.prototype.deploy = function deploy(target) {                                                            // 6772
    var urlIndex = urlCache.indexOf(this._imageUrl);                                                                 // 6773
    if (nodeCache[urlIndex] === undefined && cacheEnabled) {                                                         // 6774
        var img = new Image();                                                                                       // 6775
        img.src = this._imageUrl || '';                                                                              // 6776
        nodeCache[urlIndex] = img;                                                                                   // 6777
    }                                                                                                                // 6778
    target.src = this._imageUrl || '';                                                                               // 6779
};                                                                                                                   // 6780
ImageSurface.prototype.recall = function recall(target) {                                                            // 6781
    target.src = '';                                                                                                 // 6782
};                                                                                                                   // 6783
module.exports = ImageSurface;                                                                                       // 6784
},{"famous/core/Surface":19}],71:[function(require,module,exports){                                                  // 6785
var Surface = require('famous/core/Surface');                                                                        // 6786
function InputSurface(options) {                                                                                     // 6787
    this._placeholder = options.placeholder || '';                                                                   // 6788
    this._value = options.value || '';                                                                               // 6789
    this._type = options.type || 'text';                                                                             // 6790
    this._name = options.name || '';                                                                                 // 6791
    Surface.apply(this, arguments);                                                                                  // 6792
    this.on('click', this.focus.bind(this));                                                                         // 6793
    window.addEventListener('click', function (event) {                                                              // 6794
        if (event.target !== this._currentTarget)                                                                    // 6795
            this.blur();                                                                                             // 6796
    }.bind(this));                                                                                                   // 6797
}                                                                                                                    // 6798
InputSurface.prototype = Object.create(Surface.prototype);                                                           // 6799
InputSurface.prototype.constructor = InputSurface;                                                                   // 6800
InputSurface.prototype.elementType = 'input';                                                                        // 6801
InputSurface.prototype.elementClass = 'famous-surface';                                                              // 6802
InputSurface.prototype.setPlaceholder = function setPlaceholder(str) {                                               // 6803
    this._placeholder = str;                                                                                         // 6804
    this._contentDirty = true;                                                                                       // 6805
    return this;                                                                                                     // 6806
};                                                                                                                   // 6807
InputSurface.prototype.focus = function focus() {                                                                    // 6808
    if (this._currentTarget)                                                                                         // 6809
        this._currentTarget.focus();                                                                                 // 6810
    return this;                                                                                                     // 6811
};                                                                                                                   // 6812
InputSurface.prototype.blur = function blur() {                                                                      // 6813
    if (this._currentTarget)                                                                                         // 6814
        this._currentTarget.blur();                                                                                  // 6815
    return this;                                                                                                     // 6816
};                                                                                                                   // 6817
InputSurface.prototype.setValue = function setValue(str) {                                                           // 6818
    this._value = str;                                                                                               // 6819
    this._contentDirty = true;                                                                                       // 6820
    return this;                                                                                                     // 6821
};                                                                                                                   // 6822
InputSurface.prototype.setType = function setType(str) {                                                             // 6823
    this._type = str;                                                                                                // 6824
    this._contentDirty = true;                                                                                       // 6825
    return this;                                                                                                     // 6826
};                                                                                                                   // 6827
InputSurface.prototype.getValue = function getValue() {                                                              // 6828
    if (this._currentTarget) {                                                                                       // 6829
        return this._currentTarget.value;                                                                            // 6830
    } else {                                                                                                         // 6831
        return this._value;                                                                                          // 6832
    }                                                                                                                // 6833
};                                                                                                                   // 6834
InputSurface.prototype.setName = function setName(str) {                                                             // 6835
    this._name = str;                                                                                                // 6836
    this._contentDirty = true;                                                                                       // 6837
    return this;                                                                                                     // 6838
};                                                                                                                   // 6839
InputSurface.prototype.getName = function getName() {                                                                // 6840
    return this._name;                                                                                               // 6841
};                                                                                                                   // 6842
InputSurface.prototype.deploy = function deploy(target) {                                                            // 6843
    if (this._placeholder !== '')                                                                                    // 6844
        target.placeholder = this._placeholder;                                                                      // 6845
    target.value = this._value;                                                                                      // 6846
    target.type = this._type;                                                                                        // 6847
    target.name = this._name;                                                                                        // 6848
};                                                                                                                   // 6849
module.exports = InputSurface;                                                                                       // 6850
},{"famous/core/Surface":19}],72:[function(require,module,exports){                                                  // 6851
var InputSurface = require('./InputSurface');                                                                        // 6852
function SubmitInputSurface(options) {                                                                               // 6853
    InputSurface.apply(this, arguments);                                                                             // 6854
    this._type = 'submit';                                                                                           // 6855
    if (options && options.onClick)                                                                                  // 6856
        this.setOnClick(options.onClick);                                                                            // 6857
}                                                                                                                    // 6858
SubmitInputSurface.prototype = Object.create(InputSurface.prototype);                                                // 6859
SubmitInputSurface.prototype.constructor = SubmitInputSurface;                                                       // 6860
SubmitInputSurface.prototype.setOnClick = function (onClick) {                                                       // 6861
    this.onClick = onClick;                                                                                          // 6862
};                                                                                                                   // 6863
SubmitInputSurface.prototype.deploy = function deploy(target) {                                                      // 6864
    if (this.onclick)                                                                                                // 6865
        target.onClick = this.onClick;                                                                               // 6866
    InputSurface.prototype.deploy.apply(this, arguments);                                                            // 6867
};                                                                                                                   // 6868
module.exports = SubmitInputSurface;                                                                                 // 6869
},{"./InputSurface":71}],73:[function(require,module,exports){                                                       // 6870
var Surface = require('famous/core/Surface');                                                                        // 6871
function TextareaSurface(options) {                                                                                  // 6872
    this._placeholder = options.placeholder || '';                                                                   // 6873
    this._value = options.value || '';                                                                               // 6874
    this._name = options.name || '';                                                                                 // 6875
    this._wrap = options.wrap || '';                                                                                 // 6876
    this._cols = options.cols || '';                                                                                 // 6877
    this._rows = options.rows || '';                                                                                 // 6878
    Surface.apply(this, arguments);                                                                                  // 6879
    this.on('click', this.focus.bind(this));                                                                         // 6880
}                                                                                                                    // 6881
TextareaSurface.prototype = Object.create(Surface.prototype);                                                        // 6882
TextareaSurface.prototype.constructor = TextareaSurface;                                                             // 6883
TextareaSurface.prototype.elementType = 'textarea';                                                                  // 6884
TextareaSurface.prototype.elementClass = 'famous-surface';                                                           // 6885
TextareaSurface.prototype.setPlaceholder = function setPlaceholder(str) {                                            // 6886
    this._placeholder = str;                                                                                         // 6887
    this._contentDirty = true;                                                                                       // 6888
    return this;                                                                                                     // 6889
};                                                                                                                   // 6890
TextareaSurface.prototype.focus = function focus() {                                                                 // 6891
    if (this._currentTarget)                                                                                         // 6892
        this._currentTarget.focus();                                                                                 // 6893
    return this;                                                                                                     // 6894
};                                                                                                                   // 6895
TextareaSurface.prototype.blur = function blur() {                                                                   // 6896
    if (this._currentTarget)                                                                                         // 6897
        this._currentTarget.blur();                                                                                  // 6898
    return this;                                                                                                     // 6899
};                                                                                                                   // 6900
TextareaSurface.prototype.setValue = function setValue(str) {                                                        // 6901
    this._value = str;                                                                                               // 6902
    this._contentDirty = true;                                                                                       // 6903
    return this;                                                                                                     // 6904
};                                                                                                                   // 6905
TextareaSurface.prototype.getValue = function getValue() {                                                           // 6906
    if (this._currentTarget) {                                                                                       // 6907
        return this._currentTarget.value;                                                                            // 6908
    } else {                                                                                                         // 6909
        return this._value;                                                                                          // 6910
    }                                                                                                                // 6911
};                                                                                                                   // 6912
TextareaSurface.prototype.setName = function setName(str) {                                                          // 6913
    this._name = str;                                                                                                // 6914
    this._contentDirty = true;                                                                                       // 6915
    return this;                                                                                                     // 6916
};                                                                                                                   // 6917
TextareaSurface.prototype.getName = function getName() {                                                             // 6918
    return this._name;                                                                                               // 6919
};                                                                                                                   // 6920
TextareaSurface.prototype.setWrap = function setWrap(str) {                                                          // 6921
    this._wrap = str;                                                                                                // 6922
    this._contentDirty = true;                                                                                       // 6923
    return this;                                                                                                     // 6924
};                                                                                                                   // 6925
TextareaSurface.prototype.setColumns = function setColumns(num) {                                                    // 6926
    this._cols = num;                                                                                                // 6927
    this._contentDirty = true;                                                                                       // 6928
    return this;                                                                                                     // 6929
};                                                                                                                   // 6930
TextareaSurface.prototype.setRows = function setRows(num) {                                                          // 6931
    this._rows = num;                                                                                                // 6932
    this._contentDirty = true;                                                                                       // 6933
    return this;                                                                                                     // 6934
};                                                                                                                   // 6935
TextareaSurface.prototype.deploy = function deploy(target) {                                                         // 6936
    if (this._placeholder !== '')                                                                                    // 6937
        target.placeholder = this._placeholder;                                                                      // 6938
    if (this._value !== '')                                                                                          // 6939
        target.value = this._value;                                                                                  // 6940
    if (this._name !== '')                                                                                           // 6941
        target.name = this._name;                                                                                    // 6942
    if (this._wrap !== '')                                                                                           // 6943
        target.wrap = this._wrap;                                                                                    // 6944
    if (this._cols !== '')                                                                                           // 6945
        target.cols = this._cols;                                                                                    // 6946
    if (this._rows !== '')                                                                                           // 6947
        target.rows = this._rows;                                                                                    // 6948
};                                                                                                                   // 6949
module.exports = TextareaSurface;                                                                                    // 6950
},{"famous/core/Surface":19}],74:[function(require,module,exports){                                                  // 6951
var Surface = require('famous/core/Surface');                                                                        // 6952
function VideoSurface(options) {                                                                                     // 6953
    this._videoUrl = undefined;                                                                                      // 6954
    this.options = Object.create(VideoSurface.DEFAULT_OPTIONS);                                                      // 6955
    if (options)                                                                                                     // 6956
        this.setOptions(options);                                                                                    // 6957
    Surface.apply(this, arguments);                                                                                  // 6958
}                                                                                                                    // 6959
VideoSurface.prototype = Object.create(Surface.prototype);                                                           // 6960
VideoSurface.prototype.constructor = VideoSurface;                                                                   // 6961
VideoSurface.DEFAULT_OPTIONS = { autoplay: false };                                                                  // 6962
VideoSurface.prototype.elementType = 'video';                                                                        // 6963
VideoSurface.prototype.elementClass = 'famous-surface';                                                              // 6964
VideoSurface.prototype.setOptions = function setOptions(options) {                                                   // 6965
    if (options.size)                                                                                                // 6966
        this.setSize(options.size);                                                                                  // 6967
    if (options.classes)                                                                                             // 6968
        this.setClasses(options.classes);                                                                            // 6969
    if (options.properties)                                                                                          // 6970
        this.setProperties(options.properties);                                                                      // 6971
    if (options.autoplay)                                                                                            // 6972
        this.options.autoplay = options.autoplay;                                                                    // 6973
    if (options.src) {                                                                                               // 6974
        this._videoUrl = options.src;                                                                                // 6975
        this._contentDirty = true;                                                                                   // 6976
    }                                                                                                                // 6977
};                                                                                                                   // 6978
VideoSurface.prototype.setContent = function setContent(videoUrl) {                                                  // 6979
    this._videoUrl = videoUrl;                                                                                       // 6980
    this._contentDirty = true;                                                                                       // 6981
};                                                                                                                   // 6982
VideoSurface.prototype.deploy = function deploy(target) {                                                            // 6983
    target.src = this._videoUrl;                                                                                     // 6984
    target.autoplay = this.options.autoplay;                                                                         // 6985
};                                                                                                                   // 6986
VideoSurface.prototype.recall = function recall(target) {                                                            // 6987
    target.src = '';                                                                                                 // 6988
};                                                                                                                   // 6989
module.exports = VideoSurface;                                                                                       // 6990
},{"famous/core/Surface":19}],75:[function(require,module,exports){                                                  // 6991
function CachedMap(mappingFunction) {                                                                                // 6992
    this._map = mappingFunction || null;                                                                             // 6993
    this._cachedOutput = null;                                                                                       // 6994
    this._cachedInput = Number.NaN;                                                                                  // 6995
}                                                                                                                    // 6996
CachedMap.create = function create(mappingFunction) {                                                                // 6997
    var instance = new CachedMap(mappingFunction);                                                                   // 6998
    return instance.get.bind(instance);                                                                              // 6999
};                                                                                                                   // 7000
CachedMap.prototype.get = function get(input) {                                                                      // 7001
    if (input !== this._cachedInput) {                                                                               // 7002
        this._cachedInput = input;                                                                                   // 7003
        this._cachedOutput = this._map(input);                                                                       // 7004
    }                                                                                                                // 7005
    return this._cachedOutput;                                                                                       // 7006
};                                                                                                                   // 7007
module.exports = CachedMap;                                                                                          // 7008
},{}],76:[function(require,module,exports){                                                                          // 7009
var Easing = {                                                                                                       // 7010
        inQuad: function (t) {                                                                                       // 7011
            return t * t;                                                                                            // 7012
        },                                                                                                           // 7013
        outQuad: function (t) {                                                                                      // 7014
            return -(t -= 1) * t + 1;                                                                                // 7015
        },                                                                                                           // 7016
        inOutQuad: function (t) {                                                                                    // 7017
            if ((t /= 0.5) < 1)                                                                                      // 7018
                return 0.5 * t * t;                                                                                  // 7019
            return -0.5 * (--t * (t - 2) - 1);                                                                       // 7020
        },                                                                                                           // 7021
        inCubic: function (t) {                                                                                      // 7022
            return t * t * t;                                                                                        // 7023
        },                                                                                                           // 7024
        outCubic: function (t) {                                                                                     // 7025
            return --t * t * t + 1;                                                                                  // 7026
        },                                                                                                           // 7027
        inOutCubic: function (t) {                                                                                   // 7028
            if ((t /= 0.5) < 1)                                                                                      // 7029
                return 0.5 * t * t * t;                                                                              // 7030
            return 0.5 * ((t -= 2) * t * t + 2);                                                                     // 7031
        },                                                                                                           // 7032
        inQuart: function (t) {                                                                                      // 7033
            return t * t * t * t;                                                                                    // 7034
        },                                                                                                           // 7035
        outQuart: function (t) {                                                                                     // 7036
            return -(--t * t * t * t - 1);                                                                           // 7037
        },                                                                                                           // 7038
        inOutQuart: function (t) {                                                                                   // 7039
            if ((t /= 0.5) < 1)                                                                                      // 7040
                return 0.5 * t * t * t * t;                                                                          // 7041
            return -0.5 * ((t -= 2) * t * t * t - 2);                                                                // 7042
        },                                                                                                           // 7043
        inQuint: function (t) {                                                                                      // 7044
            return t * t * t * t * t;                                                                                // 7045
        },                                                                                                           // 7046
        outQuint: function (t) {                                                                                     // 7047
            return --t * t * t * t * t + 1;                                                                          // 7048
        },                                                                                                           // 7049
        inOutQuint: function (t) {                                                                                   // 7050
            if ((t /= 0.5) < 1)                                                                                      // 7051
                return 0.5 * t * t * t * t * t;                                                                      // 7052
            return 0.5 * ((t -= 2) * t * t * t * t + 2);                                                             // 7053
        },                                                                                                           // 7054
        inSine: function (t) {                                                                                       // 7055
            return -1 * Math.cos(t * (Math.PI / 2)) + 1;                                                             // 7056
        },                                                                                                           // 7057
        outSine: function (t) {                                                                                      // 7058
            return Math.sin(t * (Math.PI / 2));                                                                      // 7059
        },                                                                                                           // 7060
        inOutSine: function (t) {                                                                                    // 7061
            return -0.5 * (Math.cos(Math.PI * t) - 1);                                                               // 7062
        },                                                                                                           // 7063
        inExpo: function (t) {                                                                                       // 7064
            return t === 0 ? 0 : Math.pow(2, 10 * (t - 1));                                                          // 7065
        },                                                                                                           // 7066
        outExpo: function (t) {                                                                                      // 7067
            return t === 1 ? 1 : -Math.pow(2, -10 * t) + 1;                                                          // 7068
        },                                                                                                           // 7069
        inOutExpo: function (t) {                                                                                    // 7070
            if (t === 0)                                                                                             // 7071
                return 0;                                                                                            // 7072
            if (t === 1)                                                                                             // 7073
                return 1;                                                                                            // 7074
            if ((t /= 0.5) < 1)                                                                                      // 7075
                return 0.5 * Math.pow(2, 10 * (t - 1));                                                              // 7076
            return 0.5 * (-Math.pow(2, -10 * --t) + 2);                                                              // 7077
        },                                                                                                           // 7078
        inCirc: function (t) {                                                                                       // 7079
            return -(Math.sqrt(1 - t * t) - 1);                                                                      // 7080
        },                                                                                                           // 7081
        outCirc: function (t) {                                                                                      // 7082
            return Math.sqrt(1 - --t * t);                                                                           // 7083
        },                                                                                                           // 7084
        inOutCirc: function (t) {                                                                                    // 7085
            if ((t /= 0.5) < 1)                                                                                      // 7086
                return -0.5 * (Math.sqrt(1 - t * t) - 1);                                                            // 7087
            return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);                                                          // 7088
        },                                                                                                           // 7089
        inElastic: function (t) {                                                                                    // 7090
            var s = 1.70158;                                                                                         // 7091
            var p = 0;                                                                                               // 7092
            var a = 1;                                                                                               // 7093
            if (t === 0)                                                                                             // 7094
                return 0;                                                                                            // 7095
            if (t === 1)                                                                                             // 7096
                return 1;                                                                                            // 7097
            if (!p)                                                                                                  // 7098
                p = 0.3;                                                                                             // 7099
            s = p / (2 * Math.PI) * Math.asin(1 / a);                                                                // 7100
            return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));                        // 7101
        },                                                                                                           // 7102
        outElastic: function (t) {                                                                                   // 7103
            var s = 1.70158;                                                                                         // 7104
            var p = 0;                                                                                               // 7105
            var a = 1;                                                                                               // 7106
            if (t === 0)                                                                                             // 7107
                return 0;                                                                                            // 7108
            if (t === 1)                                                                                             // 7109
                return 1;                                                                                            // 7110
            if (!p)                                                                                                  // 7111
                p = 0.3;                                                                                             // 7112
            s = p / (2 * Math.PI) * Math.asin(1 / a);                                                                // 7113
            return a * Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1;                             // 7114
        },                                                                                                           // 7115
        inOutElastic: function (t) {                                                                                 // 7116
            var s = 1.70158;                                                                                         // 7117
            var p = 0;                                                                                               // 7118
            var a = 1;                                                                                               // 7119
            if (t === 0)                                                                                             // 7120
                return 0;                                                                                            // 7121
            if ((t /= 0.5) === 2)                                                                                    // 7122
                return 1;                                                                                            // 7123
            if (!p)                                                                                                  // 7124
                p = 0.3 * 1.5;                                                                                       // 7125
            s = p / (2 * Math.PI) * Math.asin(1 / a);                                                                // 7126
            if (t < 1)                                                                                               // 7127
                return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));              // 7128
            return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p) * 0.5 + 1;                // 7129
        },                                                                                                           // 7130
        inBack: function (t, s) {                                                                                    // 7131
            if (s === undefined)                                                                                     // 7132
                s = 1.70158;                                                                                         // 7133
            return t * t * ((s + 1) * t - s);                                                                        // 7134
        },                                                                                                           // 7135
        outBack: function (t, s) {                                                                                   // 7136
            if (s === undefined)                                                                                     // 7137
                s = 1.70158;                                                                                         // 7138
            return --t * t * ((s + 1) * t + s) + 1;                                                                  // 7139
        },                                                                                                           // 7140
        inOutBack: function (t, s) {                                                                                 // 7141
            if (s === undefined)                                                                                     // 7142
                s = 1.70158;                                                                                         // 7143
            if ((t /= 0.5) < 1)                                                                                      // 7144
                return 0.5 * (t * t * (((s *= 1.525) + 1) * t - s));                                                 // 7145
            return 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);                                          // 7146
        },                                                                                                           // 7147
        inBounce: function (t) {                                                                                     // 7148
            return 1 - Easing.outBounce(1 - t);                                                                      // 7149
        },                                                                                                           // 7150
        outBounce: function (t) {                                                                                    // 7151
            if (t < 1 / 2.75) {                                                                                      // 7152
                return 7.5625 * t * t;                                                                               // 7153
            } else if (t < 2 / 2.75) {                                                                               // 7154
                return 7.5625 * (t -= 1.5 / 2.75) * t + 0.75;                                                        // 7155
            } else if (t < 2.5 / 2.75) {                                                                             // 7156
                return 7.5625 * (t -= 2.25 / 2.75) * t + 0.9375;                                                     // 7157
            } else {                                                                                                 // 7158
                return 7.5625 * (t -= 2.625 / 2.75) * t + 0.984375;                                                  // 7159
            }                                                                                                        // 7160
        },                                                                                                           // 7161
        inOutBounce: function (t) {                                                                                  // 7162
            if (t < 0.5)                                                                                             // 7163
                return Easing.inBounce(t * 2) * 0.5;                                                                 // 7164
            return Easing.outBounce(t * 2 - 1) * 0.5 + 0.5;                                                          // 7165
        }                                                                                                            // 7166
    };                                                                                                               // 7167
module.exports = Easing;                                                                                             // 7168
},{}],77:[function(require,module,exports){                                                                          // 7169
var Utility = require('famous/utilities/Utility');                                                                   // 7170
function MultipleTransition(method) {                                                                                // 7171
    this.method = method;                                                                                            // 7172
    this._instances = [];                                                                                            // 7173
    this.state = [];                                                                                                 // 7174
}                                                                                                                    // 7175
MultipleTransition.SUPPORTS_MULTIPLE = true;                                                                         // 7176
MultipleTransition.prototype.get = function get() {                                                                  // 7177
    for (var i = 0; i < this._instances.length; i++) {                                                               // 7178
        this.state[i] = this._instances[i].get();                                                                    // 7179
    }                                                                                                                // 7180
    return this.state;                                                                                               // 7181
};                                                                                                                   // 7182
MultipleTransition.prototype.set = function set(endState, transition, callback) {                                    // 7183
    var _allCallback = Utility.after(endState.length, callback);                                                     // 7184
    for (var i = 0; i < endState.length; i++) {                                                                      // 7185
        if (!this._instances[i])                                                                                     // 7186
            this._instances[i] = new this.method();                                                                  // 7187
        this._instances[i].set(endState[i], transition, _allCallback);                                               // 7188
    }                                                                                                                // 7189
};                                                                                                                   // 7190
MultipleTransition.prototype.reset = function reset(startState) {                                                    // 7191
    for (var i = 0; i < startState.length; i++) {                                                                    // 7192
        if (!this._instances[i])                                                                                     // 7193
            this._instances[i] = new this.method();                                                                  // 7194
        this._instances[i].reset(startState[i]);                                                                     // 7195
    }                                                                                                                // 7196
};                                                                                                                   // 7197
module.exports = MultipleTransition;                                                                                 // 7198
},{"famous/utilities/Utility":86}],78:[function(require,module,exports){                                             // 7199
var PE = require('famous/physics/PhysicsEngine');                                                                    // 7200
var Particle = require('famous/physics/bodies/Particle');                                                            // 7201
var Spring = require('famous/physics/constraints/Snap');                                                             // 7202
var Vector = require('famous/math/Vector');                                                                          // 7203
function SnapTransition(state) {                                                                                     // 7204
    state = state || 0;                                                                                              // 7205
    this.endState = new Vector(state);                                                                               // 7206
    this.initState = new Vector();                                                                                   // 7207
    this._dimensions = 1;                                                                                            // 7208
    this._restTolerance = 1e-10;                                                                                     // 7209
    this._absRestTolerance = this._restTolerance;                                                                    // 7210
    this._callback = undefined;                                                                                      // 7211
    this.PE = new PE();                                                                                              // 7212
    this.particle = new Particle();                                                                                  // 7213
    this.spring = new Spring({ anchor: this.endState });                                                             // 7214
    this.PE.addBody(this.particle);                                                                                  // 7215
    this.PE.attach(this.spring, this.particle);                                                                      // 7216
}                                                                                                                    // 7217
SnapTransition.SUPPORTS_MULTIPLE = 3;                                                                                // 7218
SnapTransition.DEFAULT_OPTIONS = {                                                                                   // 7219
    period: 100,                                                                                                     // 7220
    dampingRatio: 0.2,                                                                                               // 7221
    velocity: 0                                                                                                      // 7222
};                                                                                                                   // 7223
function _getEnergy() {                                                                                              // 7224
    return this.particle.getEnergy() + this.spring.getEnergy([this.particle]);                                       // 7225
}                                                                                                                    // 7226
function _setAbsoluteRestTolerance() {                                                                               // 7227
    var distance = this.endState.sub(this.initState).normSquared();                                                  // 7228
    this._absRestTolerance = distance === 0 ? this._restTolerance : this._restTolerance * distance;                  // 7229
}                                                                                                                    // 7230
function _setTarget(target) {                                                                                        // 7231
    this.endState.set(target);                                                                                       // 7232
    _setAbsoluteRestTolerance.call(this);                                                                            // 7233
}                                                                                                                    // 7234
function _wake() {                                                                                                   // 7235
    this.PE.wake();                                                                                                  // 7236
}                                                                                                                    // 7237
function _sleep() {                                                                                                  // 7238
    this.PE.sleep();                                                                                                 // 7239
}                                                                                                                    // 7240
function _setParticlePosition(p) {                                                                                   // 7241
    this.particle.position.set(p);                                                                                   // 7242
}                                                                                                                    // 7243
function _setParticleVelocity(v) {                                                                                   // 7244
    this.particle.velocity.set(v);                                                                                   // 7245
}                                                                                                                    // 7246
function _getParticlePosition() {                                                                                    // 7247
    return this._dimensions === 0 ? this.particle.getPosition1D() : this.particle.getPosition();                     // 7248
}                                                                                                                    // 7249
function _getParticleVelocity() {                                                                                    // 7250
    return this._dimensions === 0 ? this.particle.getVelocity1D() : this.particle.getVelocity();                     // 7251
}                                                                                                                    // 7252
function _setCallback(callback) {                                                                                    // 7253
    this._callback = callback;                                                                                       // 7254
}                                                                                                                    // 7255
function _setupDefinition(definition) {                                                                              // 7256
    var defaults = SnapTransition.DEFAULT_OPTIONS;                                                                   // 7257
    if (definition.period === undefined)                                                                             // 7258
        definition.period = defaults.period;                                                                         // 7259
    if (definition.dampingRatio === undefined)                                                                       // 7260
        definition.dampingRatio = defaults.dampingRatio;                                                             // 7261
    if (definition.velocity === undefined)                                                                           // 7262
        definition.velocity = defaults.velocity;                                                                     // 7263
    this.spring.setOptions({                                                                                         // 7264
        period: definition.period,                                                                                   // 7265
        dampingRatio: definition.dampingRatio                                                                        // 7266
    });                                                                                                              // 7267
    _setParticleVelocity.call(this, definition.velocity);                                                            // 7268
}                                                                                                                    // 7269
function _update() {                                                                                                 // 7270
    if (this.PE.isSleeping()) {                                                                                      // 7271
        if (this._callback) {                                                                                        // 7272
            var cb = this._callback;                                                                                 // 7273
            this._callback = undefined;                                                                              // 7274
            cb();                                                                                                    // 7275
        }                                                                                                            // 7276
        return;                                                                                                      // 7277
    }                                                                                                                // 7278
    if (_getEnergy.call(this) < this._absRestTolerance) {                                                            // 7279
        _setParticlePosition.call(this, this.endState);                                                              // 7280
        _setParticleVelocity.call(this, [                                                                            // 7281
            0,                                                                                                       // 7282
            0,                                                                                                       // 7283
            0                                                                                                        // 7284
        ]);                                                                                                          // 7285
        _sleep.call(this);                                                                                           // 7286
    }                                                                                                                // 7287
}                                                                                                                    // 7288
SnapTransition.prototype.reset = function reset(state, velocity) {                                                   // 7289
    this._dimensions = state instanceof Array ? state.length : 0;                                                    // 7290
    this.initState.set(state);                                                                                       // 7291
    _setParticlePosition.call(this, state);                                                                          // 7292
    _setTarget.call(this, state);                                                                                    // 7293
    if (velocity)                                                                                                    // 7294
        _setParticleVelocity.call(this, velocity);                                                                   // 7295
    _setCallback.call(this, undefined);                                                                              // 7296
};                                                                                                                   // 7297
SnapTransition.prototype.getVelocity = function getVelocity() {                                                      // 7298
    return _getParticleVelocity.call(this);                                                                          // 7299
};                                                                                                                   // 7300
SnapTransition.prototype.setVelocity = function setVelocity(velocity) {                                              // 7301
    this.call(this, _setParticleVelocity(velocity));                                                                 // 7302
};                                                                                                                   // 7303
SnapTransition.prototype.isActive = function isActive() {                                                            // 7304
    return !this.PE.isSleeping();                                                                                    // 7305
};                                                                                                                   // 7306
SnapTransition.prototype.halt = function halt() {                                                                    // 7307
    this.set(this.get());                                                                                            // 7308
};                                                                                                                   // 7309
SnapTransition.prototype.get = function get() {                                                                      // 7310
    _update.call(this);                                                                                              // 7311
    return _getParticlePosition.call(this);                                                                          // 7312
};                                                                                                                   // 7313
SnapTransition.prototype.set = function set(state, definition, callback) {                                           // 7314
    if (!definition) {                                                                                               // 7315
        this.reset(state);                                                                                           // 7316
        if (callback)                                                                                                // 7317
            callback();                                                                                              // 7318
        return;                                                                                                      // 7319
    }                                                                                                                // 7320
    this._dimensions = state instanceof Array ? state.length : 0;                                                    // 7321
    _wake.call(this);                                                                                                // 7322
    _setupDefinition.call(this, definition);                                                                         // 7323
    _setTarget.call(this, state);                                                                                    // 7324
    _setCallback.call(this, callback);                                                                               // 7325
};                                                                                                                   // 7326
module.exports = SnapTransition;                                                                                     // 7327
},{"famous/math/Vector":41,"famous/physics/PhysicsEngine":46,"famous/physics/bodies/Particle":49,"famous/physics/constraints/Snap":55}],79:[function(require,module,exports){
var PE = require('famous/physics/PhysicsEngine');                                                                    // 7329
var Particle = require('famous/physics/bodies/Particle');                                                            // 7330
var Spring = require('famous/physics/forces/Spring');                                                                // 7331
var Vector = require('famous/math/Vector');                                                                          // 7332
function SpringTransition(state) {                                                                                   // 7333
    state = state || 0;                                                                                              // 7334
    this.endState = new Vector(state);                                                                               // 7335
    this.initState = new Vector();                                                                                   // 7336
    this._dimensions = undefined;                                                                                    // 7337
    this._restTolerance = 1e-10;                                                                                     // 7338
    this._absRestTolerance = this._restTolerance;                                                                    // 7339
    this._callback = undefined;                                                                                      // 7340
    this.PE = new PE();                                                                                              // 7341
    this.spring = new Spring({ anchor: this.endState });                                                             // 7342
    this.particle = new Particle();                                                                                  // 7343
    this.PE.addBody(this.particle);                                                                                  // 7344
    this.PE.attach(this.spring, this.particle);                                                                      // 7345
}                                                                                                                    // 7346
SpringTransition.SUPPORTS_MULTIPLE = 3;                                                                              // 7347
SpringTransition.DEFAULT_OPTIONS = {                                                                                 // 7348
    period: 300,                                                                                                     // 7349
    dampingRatio: 0.5,                                                                                               // 7350
    velocity: 0                                                                                                      // 7351
};                                                                                                                   // 7352
function _getEnergy() {                                                                                              // 7353
    return this.particle.getEnergy() + this.spring.getEnergy([this.particle]);                                       // 7354
}                                                                                                                    // 7355
function _setParticlePosition(p) {                                                                                   // 7356
    this.particle.setPosition(p);                                                                                    // 7357
}                                                                                                                    // 7358
function _setParticleVelocity(v) {                                                                                   // 7359
    this.particle.setVelocity(v);                                                                                    // 7360
}                                                                                                                    // 7361
function _getParticlePosition() {                                                                                    // 7362
    return this._dimensions === 0 ? this.particle.getPosition1D() : this.particle.getPosition();                     // 7363
}                                                                                                                    // 7364
function _getParticleVelocity() {                                                                                    // 7365
    return this._dimensions === 0 ? this.particle.getVelocity1D() : this.particle.getVelocity();                     // 7366
}                                                                                                                    // 7367
function _setCallback(callback) {                                                                                    // 7368
    this._callback = callback;                                                                                       // 7369
}                                                                                                                    // 7370
function _wake() {                                                                                                   // 7371
    this.PE.wake();                                                                                                  // 7372
}                                                                                                                    // 7373
function _sleep() {                                                                                                  // 7374
    this.PE.sleep();                                                                                                 // 7375
}                                                                                                                    // 7376
function _update() {                                                                                                 // 7377
    if (this.PE.isSleeping()) {                                                                                      // 7378
        if (this._callback) {                                                                                        // 7379
            var cb = this._callback;                                                                                 // 7380
            this._callback = undefined;                                                                              // 7381
            cb();                                                                                                    // 7382
        }                                                                                                            // 7383
        return;                                                                                                      // 7384
    }                                                                                                                // 7385
    if (_getEnergy.call(this) < this._absRestTolerance) {                                                            // 7386
        _setParticlePosition.call(this, this.endState);                                                              // 7387
        _setParticleVelocity.call(this, [                                                                            // 7388
            0,                                                                                                       // 7389
            0,                                                                                                       // 7390
            0                                                                                                        // 7391
        ]);                                                                                                          // 7392
        _sleep.call(this);                                                                                           // 7393
    }                                                                                                                // 7394
}                                                                                                                    // 7395
function _setupDefinition(definition) {                                                                              // 7396
    var defaults = SpringTransition.DEFAULT_OPTIONS;                                                                 // 7397
    if (definition.period === undefined)                                                                             // 7398
        definition.period = defaults.period;                                                                         // 7399
    if (definition.dampingRatio === undefined)                                                                       // 7400
        definition.dampingRatio = defaults.dampingRatio;                                                             // 7401
    if (definition.velocity === undefined)                                                                           // 7402
        definition.velocity = defaults.velocity;                                                                     // 7403
    if (definition.period < 150) {                                                                                   // 7404
        definition.period = 150;                                                                                     // 7405
        console.warn('The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions');
    }                                                                                                                // 7407
    this.spring.setOptions({                                                                                         // 7408
        period: definition.period,                                                                                   // 7409
        dampingRatio: definition.dampingRatio                                                                        // 7410
    });                                                                                                              // 7411
    _setParticleVelocity.call(this, definition.velocity);                                                            // 7412
}                                                                                                                    // 7413
function _setAbsoluteRestTolerance() {                                                                               // 7414
    var distance = this.endState.sub(this.initState).normSquared();                                                  // 7415
    this._absRestTolerance = distance === 0 ? this._restTolerance : this._restTolerance * distance;                  // 7416
}                                                                                                                    // 7417
function _setTarget(target) {                                                                                        // 7418
    this.endState.set(target);                                                                                       // 7419
    _setAbsoluteRestTolerance.call(this);                                                                            // 7420
}                                                                                                                    // 7421
SpringTransition.prototype.reset = function reset(pos, vel) {                                                        // 7422
    this._dimensions = pos instanceof Array ? pos.length : 0;                                                        // 7423
    this.initState.set(pos);                                                                                         // 7424
    _setParticlePosition.call(this, pos);                                                                            // 7425
    _setTarget.call(this, pos);                                                                                      // 7426
    if (vel)                                                                                                         // 7427
        _setParticleVelocity.call(this, vel);                                                                        // 7428
    _setCallback.call(this, undefined);                                                                              // 7429
};                                                                                                                   // 7430
SpringTransition.prototype.getVelocity = function getVelocity() {                                                    // 7431
    return _getParticleVelocity.call(this);                                                                          // 7432
};                                                                                                                   // 7433
SpringTransition.prototype.setVelocity = function setVelocity(v) {                                                   // 7434
    this.call(this, _setParticleVelocity(v));                                                                        // 7435
};                                                                                                                   // 7436
SpringTransition.prototype.isActive = function isActive() {                                                          // 7437
    return !this.PE.isSleeping();                                                                                    // 7438
};                                                                                                                   // 7439
SpringTransition.prototype.halt = function halt() {                                                                  // 7440
    this.set(this.get());                                                                                            // 7441
};                                                                                                                   // 7442
SpringTransition.prototype.get = function get() {                                                                    // 7443
    _update.call(this);                                                                                              // 7444
    return _getParticlePosition.call(this);                                                                          // 7445
};                                                                                                                   // 7446
SpringTransition.prototype.set = function set(endState, definition, callback) {                                      // 7447
    if (!definition) {                                                                                               // 7448
        this.reset(endState);                                                                                        // 7449
        if (callback)                                                                                                // 7450
            callback();                                                                                              // 7451
        return;                                                                                                      // 7452
    }                                                                                                                // 7453
    this._dimensions = endState instanceof Array ? endState.length : 0;                                              // 7454
    _wake.call(this);                                                                                                // 7455
    _setupDefinition.call(this, definition);                                                                         // 7456
    _setTarget.call(this, endState);                                                                                 // 7457
    _setCallback.call(this, callback);                                                                               // 7458
};                                                                                                                   // 7459
module.exports = SpringTransition;                                                                                   // 7460
},{"famous/math/Vector":41,"famous/physics/PhysicsEngine":46,"famous/physics/bodies/Particle":49,"famous/physics/forces/Spring":64}],80:[function(require,module,exports){
var MultipleTransition = require('./MultipleTransition');                                                            // 7462
var TweenTransition = require('./TweenTransition');                                                                  // 7463
function Transitionable(start) {                                                                                     // 7464
    this.currentAction = null;                                                                                       // 7465
    this.actionQueue = [];                                                                                           // 7466
    this.callbackQueue = [];                                                                                         // 7467
    this.state = 0;                                                                                                  // 7468
    this.velocity = undefined;                                                                                       // 7469
    this._callback = undefined;                                                                                      // 7470
    this._engineInstance = null;                                                                                     // 7471
    this._currentMethod = null;                                                                                      // 7472
    this.set(start);                                                                                                 // 7473
}                                                                                                                    // 7474
var transitionMethods = {};                                                                                          // 7475
Transitionable.registerMethod = function registerMethod(name, engineClass) {                                         // 7476
    if (!(name in transitionMethods)) {                                                                              // 7477
        transitionMethods[name] = engineClass;                                                                       // 7478
        return true;                                                                                                 // 7479
    } else                                                                                                           // 7480
        return false;                                                                                                // 7481
};                                                                                                                   // 7482
Transitionable.unregisterMethod = function unregisterMethod(name) {                                                  // 7483
    if (name in transitionMethods) {                                                                                 // 7484
        delete transitionMethods[name];                                                                              // 7485
        return true;                                                                                                 // 7486
    } else                                                                                                           // 7487
        return false;                                                                                                // 7488
};                                                                                                                   // 7489
function _loadNext() {                                                                                               // 7490
    if (this._callback) {                                                                                            // 7491
        var callback = this._callback;                                                                               // 7492
        this._callback = undefined;                                                                                  // 7493
        callback();                                                                                                  // 7494
    }                                                                                                                // 7495
    if (this.actionQueue.length <= 0) {                                                                              // 7496
        this.set(this.get());                                                                                        // 7497
        return;                                                                                                      // 7498
    }                                                                                                                // 7499
    this.currentAction = this.actionQueue.shift();                                                                   // 7500
    this._callback = this.callbackQueue.shift();                                                                     // 7501
    var method = null;                                                                                               // 7502
    var endValue = this.currentAction[0];                                                                            // 7503
    var transition = this.currentAction[1];                                                                          // 7504
    if (transition instanceof Object && transition.method) {                                                         // 7505
        method = transition.method;                                                                                  // 7506
        if (typeof method === 'string')                                                                              // 7507
            method = transitionMethods[method];                                                                      // 7508
    } else {                                                                                                         // 7509
        method = TweenTransition;                                                                                    // 7510
    }                                                                                                                // 7511
    if (this._currentMethod !== method) {                                                                            // 7512
        if (!(endValue instanceof Object) || method.SUPPORTS_MULTIPLE === true || endValue.length <= method.SUPPORTS_MULTIPLE) {
            this._engineInstance = new method();                                                                     // 7514
        } else {                                                                                                     // 7515
            this._engineInstance = new MultipleTransition(method);                                                   // 7516
        }                                                                                                            // 7517
        this._currentMethod = method;                                                                                // 7518
    }                                                                                                                // 7519
    this._engineInstance.reset(this.state, this.velocity);                                                           // 7520
    if (this.velocity !== undefined)                                                                                 // 7521
        transition.velocity = this.velocity;                                                                         // 7522
    this._engineInstance.set(endValue, transition, _loadNext.bind(this));                                            // 7523
}                                                                                                                    // 7524
Transitionable.prototype.set = function set(endState, transition, callback) {                                        // 7525
    if (!transition) {                                                                                               // 7526
        this.reset(endState);                                                                                        // 7527
        if (callback)                                                                                                // 7528
            callback();                                                                                              // 7529
        return this;                                                                                                 // 7530
    }                                                                                                                // 7531
    var action = [                                                                                                   // 7532
            endState,                                                                                                // 7533
            transition                                                                                               // 7534
        ];                                                                                                           // 7535
    this.actionQueue.push(action);                                                                                   // 7536
    this.callbackQueue.push(callback);                                                                               // 7537
    if (!this.currentAction)                                                                                         // 7538
        _loadNext.call(this);                                                                                        // 7539
    return this;                                                                                                     // 7540
};                                                                                                                   // 7541
Transitionable.prototype.reset = function reset(startState, startVelocity) {                                         // 7542
    this._currentMethod = null;                                                                                      // 7543
    this._engineInstance = null;                                                                                     // 7544
    this._callback = undefined;                                                                                      // 7545
    this.state = startState;                                                                                         // 7546
    this.velocity = startVelocity;                                                                                   // 7547
    this.currentAction = null;                                                                                       // 7548
    this.actionQueue = [];                                                                                           // 7549
    this.callbackQueue = [];                                                                                         // 7550
};                                                                                                                   // 7551
Transitionable.prototype.delay = function delay(duration, callback) {                                                // 7552
    this.set(this.get(), {                                                                                           // 7553
        duration: duration,                                                                                          // 7554
        curve: function () {                                                                                         // 7555
            return 0;                                                                                                // 7556
        }                                                                                                            // 7557
    }, callback);                                                                                                    // 7558
};                                                                                                                   // 7559
Transitionable.prototype.get = function get(timestamp) {                                                             // 7560
    if (this._engineInstance) {                                                                                      // 7561
        if (this._engineInstance.getVelocity)                                                                        // 7562
            this.velocity = this._engineInstance.getVelocity();                                                      // 7563
        this.state = this._engineInstance.get(timestamp);                                                            // 7564
    }                                                                                                                // 7565
    return this.state;                                                                                               // 7566
};                                                                                                                   // 7567
Transitionable.prototype.isActive = function isActive() {                                                            // 7568
    return !!this.currentAction;                                                                                     // 7569
};                                                                                                                   // 7570
Transitionable.prototype.halt = function halt() {                                                                    // 7571
    return this.set(this.get());                                                                                     // 7572
};                                                                                                                   // 7573
module.exports = Transitionable;                                                                                     // 7574
},{"./MultipleTransition":77,"./TweenTransition":82}],81:[function(require,module,exports){                          // 7575
var Transitionable = require('./Transitionable');                                                                    // 7576
var Transform = require('famous/core/Transform');                                                                    // 7577
var Utility = require('famous/utilities/Utility');                                                                   // 7578
function TransitionableTransform(transform) {                                                                        // 7579
    this._final = Transform.identity.slice();                                                                        // 7580
    this._finalTranslate = [                                                                                         // 7581
        0,                                                                                                           // 7582
        0,                                                                                                           // 7583
        0                                                                                                            // 7584
    ];                                                                                                               // 7585
    this._finalRotate = [                                                                                            // 7586
        0,                                                                                                           // 7587
        0,                                                                                                           // 7588
        0                                                                                                            // 7589
    ];                                                                                                               // 7590
    this._finalSkew = [                                                                                              // 7591
        0,                                                                                                           // 7592
        0,                                                                                                           // 7593
        0                                                                                                            // 7594
    ];                                                                                                               // 7595
    this._finalScale = [                                                                                             // 7596
        1,                                                                                                           // 7597
        1,                                                                                                           // 7598
        1                                                                                                            // 7599
    ];                                                                                                               // 7600
    this.translate = new Transitionable(this._finalTranslate);                                                       // 7601
    this.rotate = new Transitionable(this._finalRotate);                                                             // 7602
    this.skew = new Transitionable(this._finalSkew);                                                                 // 7603
    this.scale = new Transitionable(this._finalScale);                                                               // 7604
    if (transform)                                                                                                   // 7605
        this.set(transform);                                                                                         // 7606
}                                                                                                                    // 7607
function _build() {                                                                                                  // 7608
    return Transform.build({                                                                                         // 7609
        translate: this.translate.get(),                                                                             // 7610
        rotate: this.rotate.get(),                                                                                   // 7611
        skew: this.skew.get(),                                                                                       // 7612
        scale: this.scale.get()                                                                                      // 7613
    });                                                                                                              // 7614
}                                                                                                                    // 7615
function _buildFinal() {                                                                                             // 7616
    return Transform.build({                                                                                         // 7617
        translate: this._finalTranslate,                                                                             // 7618
        rotate: this._finalRotate,                                                                                   // 7619
        skew: this._finalSkew,                                                                                       // 7620
        scale: this._finalScale                                                                                      // 7621
    });                                                                                                              // 7622
}                                                                                                                    // 7623
TransitionableTransform.prototype.setTranslate = function setTranslate(translate, transition, callback) {            // 7624
    this._finalTranslate = translate;                                                                                // 7625
    this._final = _buildFinal.call(this);                                                                            // 7626
    this.translate.set(translate, transition, callback);                                                             // 7627
    return this;                                                                                                     // 7628
};                                                                                                                   // 7629
TransitionableTransform.prototype.setScale = function setScale(scale, transition, callback) {                        // 7630
    this._finalScale = scale;                                                                                        // 7631
    this._final = _buildFinal.call(this);                                                                            // 7632
    this.scale.set(scale, transition, callback);                                                                     // 7633
    return this;                                                                                                     // 7634
};                                                                                                                   // 7635
TransitionableTransform.prototype.setRotate = function setRotate(eulerAngles, transition, callback) {                // 7636
    this._finalRotate = eulerAngles;                                                                                 // 7637
    this._final = _buildFinal.call(this);                                                                            // 7638
    this.rotate.set(eulerAngles, transition, callback);                                                              // 7639
    return this;                                                                                                     // 7640
};                                                                                                                   // 7641
TransitionableTransform.prototype.setSkew = function setSkew(skewAngles, transition, callback) {                     // 7642
    this._finalSkew = skewAngles;                                                                                    // 7643
    this._final = _buildFinal.call(this);                                                                            // 7644
    this.skew.set(skewAngles, transition, callback);                                                                 // 7645
    return this;                                                                                                     // 7646
};                                                                                                                   // 7647
TransitionableTransform.prototype.set = function set(transform, transition, callback) {                              // 7648
    var components = Transform.interpret(transform);                                                                 // 7649
    this._finalTranslate = components.translate;                                                                     // 7650
    this._finalRotate = components.rotate;                                                                           // 7651
    this._finalSkew = components.skew;                                                                               // 7652
    this._finalScale = components.scale;                                                                             // 7653
    this._final = transform;                                                                                         // 7654
    var _callback = callback ? Utility.after(4, callback) : null;                                                    // 7655
    this.translate.set(components.translate, transition, _callback);                                                 // 7656
    this.rotate.set(components.rotate, transition, _callback);                                                       // 7657
    this.skew.set(components.skew, transition, _callback);                                                           // 7658
    this.scale.set(components.scale, transition, _callback);                                                         // 7659
    return this;                                                                                                     // 7660
};                                                                                                                   // 7661
TransitionableTransform.prototype.setDefaultTransition = function setDefaultTransition(transition) {                 // 7662
    this.translate.setDefault(transition);                                                                           // 7663
    this.rotate.setDefault(transition);                                                                              // 7664
    this.skew.setDefault(transition);                                                                                // 7665
    this.scale.setDefault(transition);                                                                               // 7666
};                                                                                                                   // 7667
TransitionableTransform.prototype.get = function get() {                                                             // 7668
    if (this.isActive()) {                                                                                           // 7669
        return _build.call(this);                                                                                    // 7670
    } else                                                                                                           // 7671
        return this._final;                                                                                          // 7672
};                                                                                                                   // 7673
TransitionableTransform.prototype.getFinal = function getFinal() {                                                   // 7674
    return this._final;                                                                                              // 7675
};                                                                                                                   // 7676
TransitionableTransform.prototype.isActive = function isActive() {                                                   // 7677
    return this.translate.isActive() || this.rotate.isActive() || this.scale.isActive() || this.skew.isActive();     // 7678
};                                                                                                                   // 7679
TransitionableTransform.prototype.halt = function halt() {                                                           // 7680
    this.translate.halt();                                                                                           // 7681
    this.rotate.halt();                                                                                              // 7682
    this.skew.halt();                                                                                                // 7683
    this.scale.halt();                                                                                               // 7684
    this._final = this.get();                                                                                        // 7685
    this._finalTranslate = this.translate.get();                                                                     // 7686
    this._finalRotate = this.rotate.get();                                                                           // 7687
    this._finalSkew = this.skew.get();                                                                               // 7688
    this._finalScale = this.scale.get();                                                                             // 7689
};                                                                                                                   // 7690
module.exports = TransitionableTransform;                                                                            // 7691
},{"./Transitionable":80,"famous/core/Transform":20,"famous/utilities/Utility":86}],82:[function(require,module,exports){
function TweenTransition(options) {                                                                                  // 7693
    this.options = Object.create(TweenTransition.DEFAULT_OPTIONS);                                                   // 7694
    if (options)                                                                                                     // 7695
        this.setOptions(options);                                                                                    // 7696
    this._startTime = 0;                                                                                             // 7697
    this._startValue = 0;                                                                                            // 7698
    this._updateTime = 0;                                                                                            // 7699
    this._endValue = 0;                                                                                              // 7700
    this._curve = undefined;                                                                                         // 7701
    this._duration = 0;                                                                                              // 7702
    this._active = false;                                                                                            // 7703
    this._callback = undefined;                                                                                      // 7704
    this.state = 0;                                                                                                  // 7705
    this.velocity = undefined;                                                                                       // 7706
}                                                                                                                    // 7707
TweenTransition.Curves = {                                                                                           // 7708
    linear: function (t) {                                                                                           // 7709
        return t;                                                                                                    // 7710
    },                                                                                                               // 7711
    easeIn: function (t) {                                                                                           // 7712
        return t * t;                                                                                                // 7713
    },                                                                                                               // 7714
    easeOut: function (t) {                                                                                          // 7715
        return t * (2 - t);                                                                                          // 7716
    },                                                                                                               // 7717
    easeInOut: function (t) {                                                                                        // 7718
        if (t <= 0.5)                                                                                                // 7719
            return 2 * t * t;                                                                                        // 7720
        else                                                                                                         // 7721
            return -2 * t * t + 4 * t - 1;                                                                           // 7722
    },                                                                                                               // 7723
    easeOutBounce: function (t) {                                                                                    // 7724
        return t * (3 - 2 * t);                                                                                      // 7725
    },                                                                                                               // 7726
    spring: function (t) {                                                                                           // 7727
        return (1 - t) * Math.sin(6 * Math.PI * t) + t;                                                              // 7728
    }                                                                                                                // 7729
};                                                                                                                   // 7730
TweenTransition.SUPPORTS_MULTIPLE = true;                                                                            // 7731
TweenTransition.DEFAULT_OPTIONS = {                                                                                  // 7732
    curve: TweenTransition.Curves.linear,                                                                            // 7733
    duration: 500,                                                                                                   // 7734
    speed: 0                                                                                                         // 7735
};                                                                                                                   // 7736
var registeredCurves = {};                                                                                           // 7737
TweenTransition.registerCurve = function registerCurve(curveName, curve) {                                           // 7738
    if (!registeredCurves[curveName]) {                                                                              // 7739
        registeredCurves[curveName] = curve;                                                                         // 7740
        return true;                                                                                                 // 7741
    } else {                                                                                                         // 7742
        return false;                                                                                                // 7743
    }                                                                                                                // 7744
};                                                                                                                   // 7745
TweenTransition.unregisterCurve = function unregisterCurve(curveName) {                                              // 7746
    if (registeredCurves[curveName]) {                                                                               // 7747
        delete registeredCurves[curveName];                                                                          // 7748
        return true;                                                                                                 // 7749
    } else {                                                                                                         // 7750
        return false;                                                                                                // 7751
    }                                                                                                                // 7752
};                                                                                                                   // 7753
TweenTransition.getCurve = function getCurve(curveName) {                                                            // 7754
    var curve = registeredCurves[curveName];                                                                         // 7755
    if (curve !== undefined)                                                                                         // 7756
        return curve;                                                                                                // 7757
    else                                                                                                             // 7758
        throw new Error('curve not registered');                                                                     // 7759
};                                                                                                                   // 7760
TweenTransition.getCurves = function getCurves() {                                                                   // 7761
    return registeredCurves;                                                                                         // 7762
};                                                                                                                   // 7763
function _interpolate(a, b, t) {                                                                                     // 7764
    return (1 - t) * a + t * b;                                                                                      // 7765
}                                                                                                                    // 7766
function _clone(obj) {                                                                                               // 7767
    if (obj instanceof Object) {                                                                                     // 7768
        if (obj instanceof Array)                                                                                    // 7769
            return obj.slice(0);                                                                                     // 7770
        else                                                                                                         // 7771
            return Object.create(obj);                                                                               // 7772
    } else                                                                                                           // 7773
        return obj;                                                                                                  // 7774
}                                                                                                                    // 7775
function _normalize(transition, defaultTransition) {                                                                 // 7776
    var result = { curve: defaultTransition.curve };                                                                 // 7777
    if (defaultTransition.duration)                                                                                  // 7778
        result.duration = defaultTransition.duration;                                                                // 7779
    if (defaultTransition.speed)                                                                                     // 7780
        result.speed = defaultTransition.speed;                                                                      // 7781
    if (transition instanceof Object) {                                                                              // 7782
        if (transition.duration !== undefined)                                                                       // 7783
            result.duration = transition.duration;                                                                   // 7784
        if (transition.curve)                                                                                        // 7785
            result.curve = transition.curve;                                                                         // 7786
        if (transition.speed)                                                                                        // 7787
            result.speed = transition.speed;                                                                         // 7788
    }                                                                                                                // 7789
    if (typeof result.curve === 'string')                                                                            // 7790
        result.curve = TweenTransition.getCurve(result.curve);                                                       // 7791
    return result;                                                                                                   // 7792
}                                                                                                                    // 7793
TweenTransition.prototype.setOptions = function setOptions(options) {                                                // 7794
    if (options.curve !== undefined)                                                                                 // 7795
        this.options.curve = options.curve;                                                                          // 7796
    if (options.duration !== undefined)                                                                              // 7797
        this.options.duration = options.duration;                                                                    // 7798
    if (options.speed !== undefined)                                                                                 // 7799
        this.options.speed = options.speed;                                                                          // 7800
};                                                                                                                   // 7801
TweenTransition.prototype.set = function set(endValue, transition, callback) {                                       // 7802
    if (!transition) {                                                                                               // 7803
        this.reset(endValue);                                                                                        // 7804
        if (callback)                                                                                                // 7805
            callback();                                                                                              // 7806
        return;                                                                                                      // 7807
    }                                                                                                                // 7808
    this._startValue = _clone(this.get());                                                                           // 7809
    transition = _normalize(transition, this.options);                                                               // 7810
    if (transition.speed) {                                                                                          // 7811
        var startValue = this._startValue;                                                                           // 7812
        if (startValue instanceof Object) {                                                                          // 7813
            var variance = 0;                                                                                        // 7814
            for (var i in startValue)                                                                                // 7815
                variance += (endValue[i] - startValue[i]) * (endValue[i] - startValue[i]);                           // 7816
            transition.duration = Math.sqrt(variance) / transition.speed;                                            // 7817
        } else {                                                                                                     // 7818
            transition.duration = Math.abs(endValue - startValue) / transition.speed;                                // 7819
        }                                                                                                            // 7820
    }                                                                                                                // 7821
    this._startTime = Date.now();                                                                                    // 7822
    this._endValue = _clone(endValue);                                                                               // 7823
    this._startVelocity = _clone(transition.velocity);                                                               // 7824
    this._duration = transition.duration;                                                                            // 7825
    this._curve = transition.curve;                                                                                  // 7826
    this._active = true;                                                                                             // 7827
    this._callback = callback;                                                                                       // 7828
};                                                                                                                   // 7829
TweenTransition.prototype.reset = function reset(startValue, startVelocity) {                                        // 7830
    if (this._callback) {                                                                                            // 7831
        var callback = this._callback;                                                                               // 7832
        this._callback = undefined;                                                                                  // 7833
        callback();                                                                                                  // 7834
    }                                                                                                                // 7835
    this.state = _clone(startValue);                                                                                 // 7836
    this.velocity = _clone(startVelocity);                                                                           // 7837
    this._startTime = 0;                                                                                             // 7838
    this._duration = 0;                                                                                              // 7839
    this._updateTime = 0;                                                                                            // 7840
    this._startValue = this.state;                                                                                   // 7841
    this._startVelocity = this.velocity;                                                                             // 7842
    this._endValue = this.state;                                                                                     // 7843
    this._active = false;                                                                                            // 7844
};                                                                                                                   // 7845
TweenTransition.prototype.getVelocity = function getVelocity() {                                                     // 7846
    return this.velocity;                                                                                            // 7847
};                                                                                                                   // 7848
TweenTransition.prototype.get = function get(timestamp) {                                                            // 7849
    this.update(timestamp);                                                                                          // 7850
    return this.state;                                                                                               // 7851
};                                                                                                                   // 7852
function _calculateVelocity(current, start, curve, duration, t) {                                                    // 7853
    var velocity;                                                                                                    // 7854
    var eps = 1e-7;                                                                                                  // 7855
    var speed = (curve(t) - curve(t - eps)) / eps;                                                                   // 7856
    if (current instanceof Array) {                                                                                  // 7857
        velocity = [];                                                                                               // 7858
        for (var i = 0; i < current.length; i++) {                                                                   // 7859
            if (typeof current[i] === 'number')                                                                      // 7860
                velocity[i] = speed * (current[i] - start[i]) / duration;                                            // 7861
            else                                                                                                     // 7862
                velocity[i] = 0;                                                                                     // 7863
        }                                                                                                            // 7864
    } else                                                                                                           // 7865
        velocity = speed * (current - start) / duration;                                                             // 7866
    return velocity;                                                                                                 // 7867
}                                                                                                                    // 7868
function _calculateState(start, end, t) {                                                                            // 7869
    var state;                                                                                                       // 7870
    if (start instanceof Array) {                                                                                    // 7871
        state = [];                                                                                                  // 7872
        for (var i = 0; i < start.length; i++) {                                                                     // 7873
            if (typeof start[i] === 'number')                                                                        // 7874
                state[i] = _interpolate(start[i], end[i], t);                                                        // 7875
            else                                                                                                     // 7876
                state[i] = start[i];                                                                                 // 7877
        }                                                                                                            // 7878
    } else                                                                                                           // 7879
        state = _interpolate(start, end, t);                                                                         // 7880
    return state;                                                                                                    // 7881
}                                                                                                                    // 7882
TweenTransition.prototype.update = function update(timestamp) {                                                      // 7883
    if (!this._active) {                                                                                             // 7884
        if (this._callback) {                                                                                        // 7885
            var callback = this._callback;                                                                           // 7886
            this._callback = undefined;                                                                              // 7887
            callback();                                                                                              // 7888
        }                                                                                                            // 7889
        return;                                                                                                      // 7890
    }                                                                                                                // 7891
    if (!timestamp)                                                                                                  // 7892
        timestamp = Date.now();                                                                                      // 7893
    if (this._updateTime >= timestamp)                                                                               // 7894
        return;                                                                                                      // 7895
    this._updateTime = timestamp;                                                                                    // 7896
    var timeSinceStart = timestamp - this._startTime;                                                                // 7897
    if (timeSinceStart >= this._duration) {                                                                          // 7898
        this.state = this._endValue;                                                                                 // 7899
        this.velocity = _calculateVelocity(this.state, this._startValue, this._curve, this._duration, 1);            // 7900
        this._active = false;                                                                                        // 7901
    } else if (timeSinceStart < 0) {                                                                                 // 7902
        this.state = this._startValue;                                                                               // 7903
        this.velocity = this._startVelocity;                                                                         // 7904
    } else {                                                                                                         // 7905
        var t = timeSinceStart / this._duration;                                                                     // 7906
        this.state = _calculateState(this._startValue, this._endValue, this._curve(t));                              // 7907
        this.velocity = _calculateVelocity(this.state, this._startValue, this._curve, this._duration, t);            // 7908
    }                                                                                                                // 7909
};                                                                                                                   // 7910
TweenTransition.prototype.isActive = function isActive() {                                                           // 7911
    return this._active;                                                                                             // 7912
};                                                                                                                   // 7913
TweenTransition.prototype.halt = function halt() {                                                                   // 7914
    this.reset(this.get());                                                                                          // 7915
};                                                                                                                   // 7916
TweenTransition.registerCurve('linear', TweenTransition.Curves.linear);                                              // 7917
TweenTransition.registerCurve('easeIn', TweenTransition.Curves.easeIn);                                              // 7918
TweenTransition.registerCurve('easeOut', TweenTransition.Curves.easeOut);                                            // 7919
TweenTransition.registerCurve('easeInOut', TweenTransition.Curves.easeInOut);                                        // 7920
TweenTransition.registerCurve('easeOutBounce', TweenTransition.Curves.easeOutBounce);                                // 7921
TweenTransition.registerCurve('spring', TweenTransition.Curves.spring);                                              // 7922
TweenTransition.customCurve = function customCurve(v1, v2) {                                                         // 7923
    v1 = v1 || 0;                                                                                                    // 7924
    v2 = v2 || 0;                                                                                                    // 7925
    return function (t) {                                                                                            // 7926
        return v1 * t + (-2 * v1 - v2 + 3) * t * t + (v1 + v2 - 2) * t * t * t;                                      // 7927
    };                                                                                                               // 7928
};                                                                                                                   // 7929
module.exports = TweenTransition;                                                                                    // 7930
},{}],83:[function(require,module,exports){                                                                          // 7931
var PE = require('famous/physics/PhysicsEngine');                                                                    // 7932
var Particle = require('famous/physics/bodies/Particle');                                                            // 7933
var Spring = require('famous/physics/forces/Spring');                                                                // 7934
var Wall = require('famous/physics/constraints/Wall');                                                               // 7935
var Vector = require('famous/math/Vector');                                                                          // 7936
function WallTransition(state) {                                                                                     // 7937
    state = state || 0;                                                                                              // 7938
    this.endState = new Vector(state);                                                                               // 7939
    this.initState = new Vector();                                                                                   // 7940
    this.spring = new Spring({ anchor: this.endState });                                                             // 7941
    this.wall = new Wall();                                                                                          // 7942
    this._restTolerance = 1e-10;                                                                                     // 7943
    this._dimensions = 1;                                                                                            // 7944
    this._absRestTolerance = this._restTolerance;                                                                    // 7945
    this._callback = undefined;                                                                                      // 7946
    this.PE = new PE();                                                                                              // 7947
    this.particle = new Particle();                                                                                  // 7948
    this.PE.addBody(this.particle);                                                                                  // 7949
    this.PE.attach([                                                                                                 // 7950
        this.wall,                                                                                                   // 7951
        this.spring                                                                                                  // 7952
    ], this.particle);                                                                                               // 7953
}                                                                                                                    // 7954
WallTransition.SUPPORTS_MULTIPLE = 3;                                                                                // 7955
WallTransition.DEFAULT_OPTIONS = {                                                                                   // 7956
    period: 300,                                                                                                     // 7957
    dampingRatio: 0.5,                                                                                               // 7958
    velocity: 0,                                                                                                     // 7959
    restitution: 0.5                                                                                                 // 7960
};                                                                                                                   // 7961
function _getEnergy() {                                                                                              // 7962
    return this.particle.getEnergy() + this.spring.getEnergy([this.particle]);                                       // 7963
}                                                                                                                    // 7964
function _setAbsoluteRestTolerance() {                                                                               // 7965
    var distance = this.endState.sub(this.initState).normSquared();                                                  // 7966
    this._absRestTolerance = distance === 0 ? this._restTolerance : this._restTolerance * distance;                  // 7967
}                                                                                                                    // 7968
function _wake() {                                                                                                   // 7969
    this.PE.wake();                                                                                                  // 7970
}                                                                                                                    // 7971
function _sleep() {                                                                                                  // 7972
    this.PE.sleep();                                                                                                 // 7973
}                                                                                                                    // 7974
function _setTarget(target) {                                                                                        // 7975
    this.endState.set(target);                                                                                       // 7976
    var dist = this.endState.sub(this.initState).norm();                                                             // 7977
    this.wall.setOptions({                                                                                           // 7978
        distance: this.endState.norm(),                                                                              // 7979
        normal: dist === 0 ? this.particle.velocity.normalize(-1) : this.endState.sub(this.initState).normalize(-1)  // 7980
    });                                                                                                              // 7981
    _setAbsoluteRestTolerance.call(this);                                                                            // 7982
}                                                                                                                    // 7983
function _setParticlePosition(p) {                                                                                   // 7984
    this.particle.position.set(p);                                                                                   // 7985
}                                                                                                                    // 7986
function _setParticleVelocity(v) {                                                                                   // 7987
    this.particle.velocity.set(v);                                                                                   // 7988
}                                                                                                                    // 7989
function _getParticlePosition() {                                                                                    // 7990
    return this._dimensions === 0 ? this.particle.getPosition1D() : this.particle.getPosition();                     // 7991
}                                                                                                                    // 7992
function _getParticleVelocity() {                                                                                    // 7993
    return this._dimensions === 0 ? this.particle.getVelocity1D() : this.particle.getVelocity();                     // 7994
}                                                                                                                    // 7995
function _setCallback(callback) {                                                                                    // 7996
    this._callback = callback;                                                                                       // 7997
}                                                                                                                    // 7998
function _update() {                                                                                                 // 7999
    if (this.PE.isSleeping()) {                                                                                      // 8000
        if (this._callback) {                                                                                        // 8001
            var cb = this._callback;                                                                                 // 8002
            this._callback = undefined;                                                                              // 8003
            cb();                                                                                                    // 8004
        }                                                                                                            // 8005
        return;                                                                                                      // 8006
    }                                                                                                                // 8007
    var energy = _getEnergy.call(this);                                                                              // 8008
    if (energy < this._absRestTolerance) {                                                                           // 8009
        _sleep.call(this);                                                                                           // 8010
        _setParticlePosition.call(this, this.endState);                                                              // 8011
        _setParticleVelocity.call(this, [                                                                            // 8012
            0,                                                                                                       // 8013
            0,                                                                                                       // 8014
            0                                                                                                        // 8015
        ]);                                                                                                          // 8016
    }                                                                                                                // 8017
}                                                                                                                    // 8018
function _setupDefinition(def) {                                                                                     // 8019
    var defaults = WallTransition.DEFAULT_OPTIONS;                                                                   // 8020
    if (def.period === undefined)                                                                                    // 8021
        def.period = defaults.period;                                                                                // 8022
    if (def.dampingRatio === undefined)                                                                              // 8023
        def.dampingRatio = defaults.dampingRatio;                                                                    // 8024
    if (def.velocity === undefined)                                                                                  // 8025
        def.velocity = defaults.velocity;                                                                            // 8026
    if (def.restitution === undefined)                                                                               // 8027
        def.restitution = defaults.restitution;                                                                      // 8028
    this.spring.setOptions({                                                                                         // 8029
        period: def.period,                                                                                          // 8030
        dampingRatio: def.dampingRatio                                                                               // 8031
    });                                                                                                              // 8032
    this.wall.setOptions({ restitution: def.restitution });                                                          // 8033
    _setParticleVelocity.call(this, def.velocity);                                                                   // 8034
}                                                                                                                    // 8035
WallTransition.prototype.reset = function reset(state, velocity) {                                                   // 8036
    this._dimensions = state instanceof Array ? state.length : 0;                                                    // 8037
    this.initState.set(state);                                                                                       // 8038
    _setParticlePosition.call(this, state);                                                                          // 8039
    if (velocity)                                                                                                    // 8040
        _setParticleVelocity.call(this, velocity);                                                                   // 8041
    _setTarget.call(this, state);                                                                                    // 8042
    _setCallback.call(this, undefined);                                                                              // 8043
};                                                                                                                   // 8044
WallTransition.prototype.getVelocity = function getVelocity() {                                                      // 8045
    return _getParticleVelocity.call(this);                                                                          // 8046
};                                                                                                                   // 8047
WallTransition.prototype.setVelocity = function setVelocity(velocity) {                                              // 8048
    this.call(this, _setParticleVelocity(velocity));                                                                 // 8049
};                                                                                                                   // 8050
WallTransition.prototype.isActive = function isActive() {                                                            // 8051
    return !this.PE.isSleeping();                                                                                    // 8052
};                                                                                                                   // 8053
WallTransition.prototype.halt = function halt() {                                                                    // 8054
    this.set(this.get());                                                                                            // 8055
};                                                                                                                   // 8056
WallTransition.prototype.get = function get() {                                                                      // 8057
    _update.call(this);                                                                                              // 8058
    return _getParticlePosition.call(this);                                                                          // 8059
};                                                                                                                   // 8060
WallTransition.prototype.set = function set(state, definition, callback) {                                           // 8061
    if (!definition) {                                                                                               // 8062
        this.reset(state);                                                                                           // 8063
        if (callback)                                                                                                // 8064
            callback();                                                                                              // 8065
        return;                                                                                                      // 8066
    }                                                                                                                // 8067
    this._dimensions = state instanceof Array ? state.length : 0;                                                    // 8068
    _wake.call(this);                                                                                                // 8069
    _setupDefinition.call(this, definition);                                                                         // 8070
    _setTarget.call(this, state);                                                                                    // 8071
    _setCallback.call(this, callback);                                                                               // 8072
};                                                                                                                   // 8073
module.exports = WallTransition;                                                                                     // 8074
},{"famous/math/Vector":41,"famous/physics/PhysicsEngine":46,"famous/physics/bodies/Particle":49,"famous/physics/constraints/Wall":57,"famous/physics/forces/Spring":64}],84:[function(require,module,exports){
var KeyCodes = {                                                                                                     // 8076
        0: 48,                                                                                                       // 8077
        1: 49,                                                                                                       // 8078
        2: 50,                                                                                                       // 8079
        3: 51,                                                                                                       // 8080
        4: 52,                                                                                                       // 8081
        5: 53,                                                                                                       // 8082
        6: 54,                                                                                                       // 8083
        7: 55,                                                                                                       // 8084
        8: 56,                                                                                                       // 8085
        9: 57,                                                                                                       // 8086
        a: 97,                                                                                                       // 8087
        b: 98,                                                                                                       // 8088
        c: 99,                                                                                                       // 8089
        d: 100,                                                                                                      // 8090
        e: 101,                                                                                                      // 8091
        f: 102,                                                                                                      // 8092
        g: 103,                                                                                                      // 8093
        h: 104,                                                                                                      // 8094
        i: 105,                                                                                                      // 8095
        j: 106,                                                                                                      // 8096
        k: 107,                                                                                                      // 8097
        l: 108,                                                                                                      // 8098
        m: 109,                                                                                                      // 8099
        n: 110,                                                                                                      // 8100
        o: 111,                                                                                                      // 8101
        p: 112,                                                                                                      // 8102
        q: 113,                                                                                                      // 8103
        r: 114,                                                                                                      // 8104
        s: 115,                                                                                                      // 8105
        t: 116,                                                                                                      // 8106
        u: 117,                                                                                                      // 8107
        v: 118,                                                                                                      // 8108
        w: 119,                                                                                                      // 8109
        x: 120,                                                                                                      // 8110
        y: 121,                                                                                                      // 8111
        z: 122,                                                                                                      // 8112
        A: 65,                                                                                                       // 8113
        B: 66,                                                                                                       // 8114
        C: 67,                                                                                                       // 8115
        D: 68,                                                                                                       // 8116
        E: 69,                                                                                                       // 8117
        F: 70,                                                                                                       // 8118
        G: 71,                                                                                                       // 8119
        H: 72,                                                                                                       // 8120
        I: 73,                                                                                                       // 8121
        J: 74,                                                                                                       // 8122
        K: 75,                                                                                                       // 8123
        L: 76,                                                                                                       // 8124
        M: 77,                                                                                                       // 8125
        N: 78,                                                                                                       // 8126
        O: 79,                                                                                                       // 8127
        P: 80,                                                                                                       // 8128
        Q: 81,                                                                                                       // 8129
        R: 82,                                                                                                       // 8130
        S: 83,                                                                                                       // 8131
        T: 84,                                                                                                       // 8132
        U: 85,                                                                                                       // 8133
        V: 86,                                                                                                       // 8134
        W: 87,                                                                                                       // 8135
        X: 88,                                                                                                       // 8136
        Y: 89,                                                                                                       // 8137
        Z: 90,                                                                                                       // 8138
        ENTER: 13,                                                                                                   // 8139
        LEFT_ARROW: 37,                                                                                              // 8140
        RIGHT_ARROW: 39,                                                                                             // 8141
        UP_ARROW: 38,                                                                                                // 8142
        DOWN_ARROW: 40,                                                                                              // 8143
        SPACE: 32,                                                                                                   // 8144
        SHIFT: 16,                                                                                                   // 8145
        TAB: 9                                                                                                       // 8146
    };                                                                                                               // 8147
module.exports = KeyCodes;                                                                                           // 8148
},{}],85:[function(require,module,exports){                                                                          // 8149
var FamousEngine = require('famous/core/Engine');                                                                    // 8150
var _event = 'prerender';                                                                                            // 8151
var getTime = window.performance && window.performance.now ? function () {                                           // 8152
        return window.performance.now();                                                                             // 8153
    } : function () {                                                                                                // 8154
        return Date.now();                                                                                           // 8155
    };                                                                                                               // 8156
function addTimerFunction(fn) {                                                                                      // 8157
    FamousEngine.on(_event, fn);                                                                                     // 8158
    return fn;                                                                                                       // 8159
}                                                                                                                    // 8160
function setTimeout(fn, duration) {                                                                                  // 8161
    var t = getTime();                                                                                               // 8162
    var callback = function () {                                                                                     // 8163
        var t2 = getTime();                                                                                          // 8164
        if (t2 - t >= duration) {                                                                                    // 8165
            fn.apply(this, arguments);                                                                               // 8166
            FamousEngine.removeListener(_event, callback);                                                           // 8167
        }                                                                                                            // 8168
    };                                                                                                               // 8169
    return addTimerFunction(callback);                                                                               // 8170
}                                                                                                                    // 8171
function setInterval(fn, duration) {                                                                                 // 8172
    var t = getTime();                                                                                               // 8173
    var callback = function () {                                                                                     // 8174
        var t2 = getTime();                                                                                          // 8175
        if (t2 - t >= duration) {                                                                                    // 8176
            fn.apply(this, arguments);                                                                               // 8177
            t = getTime();                                                                                           // 8178
        }                                                                                                            // 8179
    };                                                                                                               // 8180
    return addTimerFunction(callback);                                                                               // 8181
}                                                                                                                    // 8182
function after(fn, numTicks) {                                                                                       // 8183
    if (numTicks === undefined)                                                                                      // 8184
        return undefined;                                                                                            // 8185
    var callback = function () {                                                                                     // 8186
        numTicks--;                                                                                                  // 8187
        if (numTicks <= 0) {                                                                                         // 8188
            fn.apply(this, arguments);                                                                               // 8189
            clear(callback);                                                                                         // 8190
        }                                                                                                            // 8191
    };                                                                                                               // 8192
    return addTimerFunction(callback);                                                                               // 8193
}                                                                                                                    // 8194
function every(fn, numTicks) {                                                                                       // 8195
    numTicks = numTicks || 1;                                                                                        // 8196
    var initial = numTicks;                                                                                          // 8197
    var callback = function () {                                                                                     // 8198
        numTicks--;                                                                                                  // 8199
        if (numTicks <= 0) {                                                                                         // 8200
            fn.apply(this, arguments);                                                                               // 8201
            numTicks = initial;                                                                                      // 8202
        }                                                                                                            // 8203
    };                                                                                                               // 8204
    return addTimerFunction(callback);                                                                               // 8205
}                                                                                                                    // 8206
function clear(fn) {                                                                                                 // 8207
    FamousEngine.removeListener(_event, fn);                                                                         // 8208
}                                                                                                                    // 8209
function debounce(func, wait) {                                                                                      // 8210
    var timeout;                                                                                                     // 8211
    var ctx;                                                                                                         // 8212
    var timestamp;                                                                                                   // 8213
    var result;                                                                                                      // 8214
    var args;                                                                                                        // 8215
    return function () {                                                                                             // 8216
        ctx = this;                                                                                                  // 8217
        args = arguments;                                                                                            // 8218
        timestamp = getTime();                                                                                       // 8219
        var fn = function () {                                                                                       // 8220
            var last = getTime - timestamp;                                                                          // 8221
            if (last < wait) {                                                                                       // 8222
                timeout = setTimeout(fn, wait - last);                                                               // 8223
            } else {                                                                                                 // 8224
                timeout = null;                                                                                      // 8225
                result = func.apply(ctx, args);                                                                      // 8226
            }                                                                                                        // 8227
        };                                                                                                           // 8228
        clear(timeout);                                                                                              // 8229
        timeout = setTimeout(fn, wait);                                                                              // 8230
        return result;                                                                                               // 8231
    };                                                                                                               // 8232
}                                                                                                                    // 8233
module.exports = {                                                                                                   // 8234
    setTimeout: setTimeout,                                                                                          // 8235
    setInterval: setInterval,                                                                                        // 8236
    debounce: debounce,                                                                                              // 8237
    after: after,                                                                                                    // 8238
    every: every,                                                                                                    // 8239
    clear: clear                                                                                                     // 8240
};                                                                                                                   // 8241
},{"famous/core/Engine":9}],86:[function(require,module,exports){                                                    // 8242
var Utility = {};                                                                                                    // 8243
Utility.Direction = {                                                                                                // 8244
    X: 0,                                                                                                            // 8245
    Y: 1,                                                                                                            // 8246
    Z: 2                                                                                                             // 8247
};                                                                                                                   // 8248
Utility.after = function after(count, callback) {                                                                    // 8249
    var counter = count;                                                                                             // 8250
    return function () {                                                                                             // 8251
        counter--;                                                                                                   // 8252
        if (counter === 0)                                                                                           // 8253
            callback.apply(this, arguments);                                                                         // 8254
    };                                                                                                               // 8255
};                                                                                                                   // 8256
Utility.loadURL = function loadURL(url, callback) {                                                                  // 8257
    var xhr = new XMLHttpRequest();                                                                                  // 8258
    xhr.onreadystatechange = function onreadystatechange() {                                                         // 8259
        if (this.readyState === 4) {                                                                                 // 8260
            if (callback)                                                                                            // 8261
                callback(this.responseText);                                                                         // 8262
        }                                                                                                            // 8263
    };                                                                                                               // 8264
    xhr.open('GET', url);                                                                                            // 8265
    xhr.send();                                                                                                      // 8266
};                                                                                                                   // 8267
Utility.createDocumentFragmentFromHTML = function createDocumentFragmentFromHTML(html) {                             // 8268
    var element = document.createElement('div');                                                                     // 8269
    element.innerHTML = html;                                                                                        // 8270
    var result = document.createDocumentFragment();                                                                  // 8271
    while (element.hasChildNodes())                                                                                  // 8272
        result.appendChild(element.firstChild);                                                                      // 8273
    return result;                                                                                                   // 8274
};                                                                                                                   // 8275
Utility.clone = function clone(b) {                                                                                  // 8276
    var a;                                                                                                           // 8277
    if (typeof b === 'object') {                                                                                     // 8278
        a = b instanceof Array ? [] : {};                                                                            // 8279
        for (var key in b) {                                                                                         // 8280
            if (typeof b[key] === 'object' && b[key] !== null) {                                                     // 8281
                if (b[key] instanceof Array) {                                                                       // 8282
                    a[key] = new Array(b[key].length);                                                               // 8283
                    for (var i = 0; i < b[key].length; i++) {                                                        // 8284
                        a[key][i] = Utility.clone(b[key][i]);                                                        // 8285
                    }                                                                                                // 8286
                } else {                                                                                             // 8287
                    a[key] = Utility.clone(b[key]);                                                                  // 8288
                }                                                                                                    // 8289
            } else {                                                                                                 // 8290
                a[key] = b[key];                                                                                     // 8291
            }                                                                                                        // 8292
        }                                                                                                            // 8293
    } else {                                                                                                         // 8294
        a = b;                                                                                                       // 8295
    }                                                                                                                // 8296
    return a;                                                                                                        // 8297
};                                                                                                                   // 8298
module.exports = Utility;                                                                                            // 8299
},{}],87:[function(require,module,exports){                                                                          // 8300
var Entity = require('famous/core/Entity');                                                                          // 8301
var Transform = require('famous/core/Transform');                                                                    // 8302
var EventHandler = require('famous/core/EventHandler');                                                              // 8303
var OptionsManager = require('famous/core/OptionsManager');                                                          // 8304
function ContextualView(options) {                                                                                   // 8305
    this.options = Object.create(this.constructor.DEFAULT_OPTIONS || ContextualView.DEFAULT_OPTIONS);                // 8306
    this._optionsManager = new OptionsManager(this.options);                                                         // 8307
    if (options)                                                                                                     // 8308
        this.setOptions(options);                                                                                    // 8309
    this._eventInput = new EventHandler();                                                                           // 8310
    this._eventOutput = new EventHandler();                                                                          // 8311
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 8312
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 8313
    this._id = Entity.register(this);                                                                                // 8314
}                                                                                                                    // 8315
ContextualView.DEFAULT_OPTIONS = {};                                                                                 // 8316
ContextualView.prototype.setOptions = function setOptions(options) {                                                 // 8317
    return this._optionsManager.setOptions(options);                                                                 // 8318
};                                                                                                                   // 8319
ContextualView.prototype.getOptions = function getOptions(key) {                                                     // 8320
    return this._optionsManager.getOptions(key);                                                                     // 8321
};                                                                                                                   // 8322
ContextualView.prototype.render = function render() {                                                                // 8323
    return this._id;                                                                                                 // 8324
};                                                                                                                   // 8325
ContextualView.prototype.commit = function commit(context) {                                                         // 8326
};                                                                                                                   // 8327
module.exports = ContextualView;                                                                                     // 8328
},{"famous/core/Entity":10,"famous/core/EventHandler":12,"famous/core/OptionsManager":15,"famous/core/Transform":20}],88:[function(require,module,exports){
var Transform = require('famous/core/Transform');                                                                    // 8330
var OptionsManager = require('famous/core/OptionsManager');                                                          // 8331
var Transitionable = require('famous/transitions/Transitionable');                                                   // 8332
var Utility = require('famous/utilities/Utility');                                                                   // 8333
var SequentialLayout = require('./SequentialLayout');                                                                // 8334
function Deck(options) {                                                                                             // 8335
    SequentialLayout.apply(this, arguments);                                                                         // 8336
    this.state = new Transitionable(0);                                                                              // 8337
    this._isOpen = false;                                                                                            // 8338
    this.setOutputFunction(function (input, offset, index) {                                                         // 8339
        var state = _getState.call(this);                                                                            // 8340
        var positionMatrix = this.options.direction === Utility.Direction.X ? Transform.translate(state * offset, 0, 0.001 * (state - 1) * offset) : Transform.translate(0, state * offset, 0.001 * (state - 1) * offset);
        var output = input.render();                                                                                 // 8342
        if (this.options.stackRotation) {                                                                            // 8343
            var amount = this.options.stackRotation * index * (1 - state);                                           // 8344
            output = {                                                                                               // 8345
                transform: Transform.rotateZ(amount),                                                                // 8346
                origin: [                                                                                            // 8347
                    0.5,                                                                                             // 8348
                    0.5                                                                                              // 8349
                ],                                                                                                   // 8350
                target: output                                                                                       // 8351
            };                                                                                                       // 8352
        }                                                                                                            // 8353
        return {                                                                                                     // 8354
            transform: positionMatrix,                                                                               // 8355
            size: input.getSize(),                                                                                   // 8356
            target: output                                                                                           // 8357
        };                                                                                                           // 8358
    });                                                                                                              // 8359
}                                                                                                                    // 8360
Deck.prototype = Object.create(SequentialLayout.prototype);                                                          // 8361
Deck.prototype.constructor = Deck;                                                                                   // 8362
Deck.DEFAULT_OPTIONS = OptionsManager.patch(SequentialLayout.DEFAULT_OPTIONS, {                                      // 8363
    transition: {                                                                                                    // 8364
        curve: 'easeOutBounce',                                                                                      // 8365
        duration: 500                                                                                                // 8366
    },                                                                                                               // 8367
    stackRotation: 0                                                                                                 // 8368
});                                                                                                                  // 8369
Deck.prototype.getSize = function getSize() {                                                                        // 8370
    var originalSize = SequentialLayout.prototype.getSize.apply(this, arguments);                                    // 8371
    var firstSize = this._items ? this._items.get().getSize() : [                                                    // 8372
            0,                                                                                                       // 8373
            0                                                                                                        // 8374
        ];                                                                                                           // 8375
    if (!firstSize)                                                                                                  // 8376
        firstSize = [                                                                                                // 8377
            0,                                                                                                       // 8378
            0                                                                                                        // 8379
        ];                                                                                                           // 8380
    var state = _getState.call(this);                                                                                // 8381
    var invState = 1 - state;                                                                                        // 8382
    return [                                                                                                         // 8383
        firstSize[0] * invState + originalSize[0] * state,                                                           // 8384
        firstSize[1] * invState + originalSize[1] * state                                                            // 8385
    ];                                                                                                               // 8386
};                                                                                                                   // 8387
function _getState(returnFinal) {                                                                                    // 8388
    if (returnFinal)                                                                                                 // 8389
        return this._isOpen ? 1 : 0;                                                                                 // 8390
    else                                                                                                             // 8391
        return this.state.get();                                                                                     // 8392
}                                                                                                                    // 8393
function _setState(pos, transition, callback) {                                                                      // 8394
    this.state.halt();                                                                                               // 8395
    this.state.set(pos, transition, callback);                                                                       // 8396
}                                                                                                                    // 8397
Deck.prototype.isOpen = function isOpen() {                                                                          // 8398
    return this._isOpen;                                                                                             // 8399
};                                                                                                                   // 8400
Deck.prototype.open = function open(callback) {                                                                      // 8401
    this._isOpen = true;                                                                                             // 8402
    _setState.call(this, 1, this.options.transition, callback);                                                      // 8403
};                                                                                                                   // 8404
Deck.prototype.close = function close(callback) {                                                                    // 8405
    this._isOpen = false;                                                                                            // 8406
    _setState.call(this, 0, this.options.transition, callback);                                                      // 8407
};                                                                                                                   // 8408
Deck.prototype.toggle = function toggle(callback) {                                                                  // 8409
    if (this._isOpen)                                                                                                // 8410
        this.close(callback);                                                                                        // 8411
    else                                                                                                             // 8412
        this.open(callback);                                                                                         // 8413
};                                                                                                                   // 8414
module.exports = Deck;                                                                                               // 8415
},{"./SequentialLayout":99,"famous/core/OptionsManager":15,"famous/core/Transform":20,"famous/transitions/Transitionable":80,"famous/utilities/Utility":86}],89:[function(require,module,exports){
var CachedMap = require('famous/transitions/CachedMap');                                                             // 8417
var Entity = require('famous/core/Entity');                                                                          // 8418
var EventHandler = require('famous/core/EventHandler');                                                              // 8419
var Transform = require('famous/core/Transform');                                                                    // 8420
var RenderController = require('./RenderController');                                                                // 8421
function EdgeSwapper(options) {                                                                                      // 8422
    this._currentTarget = null;                                                                                      // 8423
    this._size = [                                                                                                   // 8424
        undefined,                                                                                                   // 8425
        undefined                                                                                                    // 8426
    ];                                                                                                               // 8427
    this._controller = new RenderController(options);                                                                // 8428
    this._controller.inTransformFrom(CachedMap.create(_transformMap.bind(this, 0.0001)));                            // 8429
    this._controller.outTransformFrom(CachedMap.create(_transformMap.bind(this, -0.0001)));                          // 8430
    this._eventInput = new EventHandler();                                                                           // 8431
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 8432
    this._entityId = Entity.register(this);                                                                          // 8433
    if (options)                                                                                                     // 8434
        this.setOptions(options);                                                                                    // 8435
}                                                                                                                    // 8436
function _transformMap(zMax, progress) {                                                                             // 8437
    return Transform.translate(this._size[0] * (1 - progress), 0, zMax * (1 - progress));                            // 8438
}                                                                                                                    // 8439
EdgeSwapper.prototype.show = function show(content) {                                                                // 8440
    if (this._currentTarget)                                                                                         // 8441
        this._eventInput.unpipe(this._currentTarget);                                                                // 8442
    this._currentTarget = content;                                                                                   // 8443
    if (this._currentTarget && this._currentTarget.trigger)                                                          // 8444
        this._eventInput.pipe(this._currentTarget);                                                                  // 8445
    this._controller.show.apply(this._controller, arguments);                                                        // 8446
};                                                                                                                   // 8447
EdgeSwapper.prototype.setOptions = function setOptions(options) {                                                    // 8448
    this._controller.setOptions(options);                                                                            // 8449
};                                                                                                                   // 8450
EdgeSwapper.prototype.render = function render() {                                                                   // 8451
    return this._entityId;                                                                                           // 8452
};                                                                                                                   // 8453
EdgeSwapper.prototype.commit = function commit(context) {                                                            // 8454
    this._size[0] = context.size[0];                                                                                 // 8455
    this._size[1] = context.size[1];                                                                                 // 8456
    return {                                                                                                         // 8457
        transform: context.transform,                                                                                // 8458
        opacity: context.opacity,                                                                                    // 8459
        origin: context.origin,                                                                                      // 8460
        size: context.size,                                                                                          // 8461
        target: this._controller.render()                                                                            // 8462
    };                                                                                                               // 8463
};                                                                                                                   // 8464
module.exports = EdgeSwapper;                                                                                        // 8465
},{"./RenderController":95,"famous/core/Entity":10,"famous/core/EventHandler":12,"famous/core/Transform":20,"famous/transitions/CachedMap":75}],90:[function(require,module,exports){
var Entity = require('famous/core/Entity');                                                                          // 8467
var Transform = require('famous/core/Transform');                                                                    // 8468
var OptionsManager = require('famous/core/OptionsManager');                                                          // 8469
var EventHandler = require('famous/core/EventHandler');                                                              // 8470
var Transitionable = require('famous/transitions/Transitionable');                                                   // 8471
function FlexibleLayout(options) {                                                                                   // 8472
    this.options = Object.create(FlexibleLayout.DEFAULT_OPTIONS);                                                    // 8473
    this.optionsManager = new OptionsManager(this.options);                                                          // 8474
    if (options)                                                                                                     // 8475
        this.setOptions(options);                                                                                    // 8476
    this.id = Entity.register(this);                                                                                 // 8477
    this._ratios = new Transitionable(this.options.ratios);                                                          // 8478
    this._nodes = [];                                                                                                // 8479
    this._cachedDirection = null;                                                                                    // 8480
    this._cachedTotalLength = false;                                                                                 // 8481
    this._cachedLengths = [];                                                                                        // 8482
    this._cachedTransforms = null;                                                                                   // 8483
    this._ratiosDirty = false;                                                                                       // 8484
    this._eventOutput = new EventHandler();                                                                          // 8485
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 8486
}                                                                                                                    // 8487
FlexibleLayout.DIRECTION_X = 0;                                                                                      // 8488
FlexibleLayout.DIRECTION_Y = 1;                                                                                      // 8489
FlexibleLayout.DEFAULT_OPTIONS = {                                                                                   // 8490
    direction: FlexibleLayout.DIRECTION_X,                                                                           // 8491
    transition: false,                                                                                               // 8492
    ratios: []                                                                                                       // 8493
};                                                                                                                   // 8494
function _reflow(ratios, length, direction) {                                                                        // 8495
    var currTransform;                                                                                               // 8496
    var translation = 0;                                                                                             // 8497
    var flexLength = length;                                                                                         // 8498
    var ratioSum = 0;                                                                                                // 8499
    var ratio;                                                                                                       // 8500
    var node;                                                                                                        // 8501
    var i;                                                                                                           // 8502
    this._cachedLengths = [];                                                                                        // 8503
    this._cachedTransforms = [];                                                                                     // 8504
    for (i = 0; i < ratios.length; i++) {                                                                            // 8505
        ratio = ratios[i];                                                                                           // 8506
        node = this._nodes[i];                                                                                       // 8507
        if (typeof ratio !== 'number')                                                                               // 8508
            flexLength -= node.getSize()[direction] || 0;                                                            // 8509
        else                                                                                                         // 8510
            ratioSum += ratio;                                                                                       // 8511
    }                                                                                                                // 8512
    for (i = 0; i < ratios.length; i++) {                                                                            // 8513
        node = this._nodes[i];                                                                                       // 8514
        ratio = ratios[i];                                                                                           // 8515
        length = typeof ratio === 'number' ? flexLength * ratio / ratioSum : node.getSize()[direction];              // 8516
        currTransform = direction === FlexibleLayout.DIRECTION_X ? Transform.translate(translation, 0, 0) : Transform.translate(0, translation, 0);
        this._cachedTransforms.push(currTransform);                                                                  // 8518
        this._cachedLengths.push(length);                                                                            // 8519
        translation += length;                                                                                       // 8520
    }                                                                                                                // 8521
}                                                                                                                    // 8522
FlexibleLayout.prototype.render = function render() {                                                                // 8523
    return this.id;                                                                                                  // 8524
};                                                                                                                   // 8525
FlexibleLayout.prototype.setOptions = function setOptions(options) {                                                 // 8526
    this.optionsManager.setOptions(options);                                                                         // 8527
};                                                                                                                   // 8528
FlexibleLayout.prototype.sequenceFrom = function sequenceFrom(sequence) {                                            // 8529
    this._nodes = sequence;                                                                                          // 8530
    if (this._ratios.get().length === 0) {                                                                           // 8531
        var ratios = [];                                                                                             // 8532
        for (var i = 0; i < this._nodes.length; i++)                                                                 // 8533
            ratios.push(1);                                                                                          // 8534
        this.setRatios(ratios);                                                                                      // 8535
    }                                                                                                                // 8536
};                                                                                                                   // 8537
FlexibleLayout.prototype.setRatios = function setRatios(ratios, transition, callback) {                              // 8538
    if (transition === undefined)                                                                                    // 8539
        transition = this.options.transition;                                                                        // 8540
    var currRatios = this._ratios;                                                                                   // 8541
    if (currRatios.get().length === 0)                                                                               // 8542
        transition = undefined;                                                                                      // 8543
    if (currRatios.isActive())                                                                                       // 8544
        currRatios.halt();                                                                                           // 8545
    currRatios.set(ratios, transition, callback);                                                                    // 8546
    this._ratiosDirty = true;                                                                                        // 8547
};                                                                                                                   // 8548
FlexibleLayout.prototype.commit = function commit(context) {                                                         // 8549
    var parentSize = context.size;                                                                                   // 8550
    var parentTransform = context.transform;                                                                         // 8551
    var parentOrigin = context.origin;                                                                               // 8552
    var parentOpacity = context.opacity;                                                                             // 8553
    var ratios = this._ratios.get();                                                                                 // 8554
    var direction = this.options.direction;                                                                          // 8555
    var length = parentSize[direction];                                                                              // 8556
    var size;                                                                                                        // 8557
    if (length !== this._cachedTotalLength || this._ratiosDirty || this._ratios.isActive() || direction !== this._cachedDirection) {
        _reflow.call(this, ratios, length, direction);                                                               // 8559
        if (length !== this._cachedTotalLength)                                                                      // 8560
            this._cachedTotalLength = length;                                                                        // 8561
        if (direction !== this._cachedDirection)                                                                     // 8562
            this._cachedDirection = direction;                                                                       // 8563
        if (this._ratiosDirty)                                                                                       // 8564
            this._ratiosDirty = false;                                                                               // 8565
    }                                                                                                                // 8566
    var result = [];                                                                                                 // 8567
    for (var i = 0; i < ratios.length; i++) {                                                                        // 8568
        size = [                                                                                                     // 8569
            undefined,                                                                                               // 8570
            undefined                                                                                                // 8571
        ];                                                                                                           // 8572
        length = this._cachedLengths[i];                                                                             // 8573
        size[direction] = length;                                                                                    // 8574
        result.push({                                                                                                // 8575
            transform: this._cachedTransforms[i],                                                                    // 8576
            size: size,                                                                                              // 8577
            target: this._nodes[i].render()                                                                          // 8578
        });                                                                                                          // 8579
    }                                                                                                                // 8580
    if (parentSize && (parentOrigin[0] !== 0 && parentOrigin[1] !== 0))                                              // 8581
        parentTransform = Transform.moveThen([                                                                       // 8582
            -parentSize[0] * parentOrigin[0],                                                                        // 8583
            -parentSize[1] * parentOrigin[1],                                                                        // 8584
            0                                                                                                        // 8585
        ], parentTransform);                                                                                         // 8586
    return {                                                                                                         // 8587
        transform: parentTransform,                                                                                  // 8588
        size: parentSize,                                                                                            // 8589
        opacity: parentOpacity,                                                                                      // 8590
        target: result                                                                                               // 8591
    };                                                                                                               // 8592
};                                                                                                                   // 8593
module.exports = FlexibleLayout;                                                                                     // 8594
},{"famous/core/Entity":10,"famous/core/EventHandler":12,"famous/core/OptionsManager":15,"famous/core/Transform":20,"famous/transitions/Transitionable":80}],91:[function(require,module,exports){
var Transform = require('famous/core/Transform');                                                                    // 8596
var Transitionable = require('famous/transitions/Transitionable');                                                   // 8597
var RenderNode = require('famous/core/RenderNode');                                                                  // 8598
var OptionsManager = require('famous/core/OptionsManager');                                                          // 8599
function Flipper(options) {                                                                                          // 8600
    this.options = Object.create(Flipper.DEFAULT_OPTIONS);                                                           // 8601
    this._optionsManager = new OptionsManager(this.options);                                                         // 8602
    if (options)                                                                                                     // 8603
        this.setOptions(options);                                                                                    // 8604
    this.angle = new Transitionable(0);                                                                              // 8605
    this.frontNode = undefined;                                                                                      // 8606
    this.backNode = undefined;                                                                                       // 8607
    this.flipped = false;                                                                                            // 8608
}                                                                                                                    // 8609
Flipper.DIRECTION_X = 0;                                                                                             // 8610
Flipper.DIRECTION_Y = 1;                                                                                             // 8611
var SEPERATION_LENGTH = 1;                                                                                           // 8612
Flipper.DEFAULT_OPTIONS = {                                                                                          // 8613
    transition: true,                                                                                                // 8614
    direction: Flipper.DIRECTION_X                                                                                   // 8615
};                                                                                                                   // 8616
Flipper.prototype.flip = function flip(transition, callback) {                                                       // 8617
    var angle = this.flipped ? 0 : Math.PI;                                                                          // 8618
    this.setAngle(angle, transition, callback);                                                                      // 8619
    this.flipped = !this.flipped;                                                                                    // 8620
};                                                                                                                   // 8621
Flipper.prototype.setAngle = function setAngle(angle, transition, callback) {                                        // 8622
    if (transition === undefined)                                                                                    // 8623
        transition = this.options.transition;                                                                        // 8624
    if (this.angle.isActive())                                                                                       // 8625
        this.angle.halt();                                                                                           // 8626
    this.angle.set(angle, transition, callback);                                                                     // 8627
};                                                                                                                   // 8628
Flipper.prototype.setOptions = function setOptions(options) {                                                        // 8629
    return this._optionsManager.setOptions(options);                                                                 // 8630
};                                                                                                                   // 8631
Flipper.prototype.setFront = function setFront(node) {                                                               // 8632
    this.frontNode = node;                                                                                           // 8633
};                                                                                                                   // 8634
Flipper.prototype.setBack = function setBack(node) {                                                                 // 8635
    this.backNode = node;                                                                                            // 8636
};                                                                                                                   // 8637
Flipper.prototype.render = function render() {                                                                       // 8638
    var angle = this.angle.get();                                                                                    // 8639
    var frontTransform;                                                                                              // 8640
    var backTransform;                                                                                               // 8641
    if (this.options.direction === Flipper.DIRECTION_X) {                                                            // 8642
        frontTransform = Transform.rotateY(angle);                                                                   // 8643
        backTransform = Transform.rotateY(angle + Math.PI);                                                          // 8644
    } else {                                                                                                         // 8645
        frontTransform = Transform.rotateX(angle);                                                                   // 8646
        backTransform = Transform.rotateX(angle + Math.PI);                                                          // 8647
    }                                                                                                                // 8648
    var result = [];                                                                                                 // 8649
    if (this.frontNode) {                                                                                            // 8650
        result.push({                                                                                                // 8651
            transform: frontTransform,                                                                               // 8652
            target: this.frontNode.render()                                                                          // 8653
        });                                                                                                          // 8654
    }                                                                                                                // 8655
    if (this.backNode) {                                                                                             // 8656
        result.push({                                                                                                // 8657
            transform: Transform.moveThen([                                                                          // 8658
                0,                                                                                                   // 8659
                0,                                                                                                   // 8660
                SEPERATION_LENGTH                                                                                    // 8661
            ], backTransform),                                                                                       // 8662
            target: this.backNode.render()                                                                           // 8663
        });                                                                                                          // 8664
    }                                                                                                                // 8665
    return result;                                                                                                   // 8666
};                                                                                                                   // 8667
module.exports = Flipper;                                                                                            // 8668
},{"famous/core/OptionsManager":15,"famous/core/RenderNode":16,"famous/core/Transform":20,"famous/transitions/Transitionable":80}],92:[function(require,module,exports){
var Entity = require('famous/core/Entity');                                                                          // 8670
var RenderNode = require('famous/core/RenderNode');                                                                  // 8671
var Transform = require('famous/core/Transform');                                                                    // 8672
var ViewSequence = require('famous/core/ViewSequence');                                                              // 8673
var EventHandler = require('famous/core/EventHandler');                                                              // 8674
var Modifier = require('famous/core/Modifier');                                                                      // 8675
var OptionsManager = require('famous/core/OptionsManager');                                                          // 8676
var Transitionable = require('famous/transitions/Transitionable');                                                   // 8677
var TransitionableTransform = require('famous/transitions/TransitionableTransform');                                 // 8678
function GridLayout(options) {                                                                                       // 8679
    this.options = Object.create(GridLayout.DEFAULT_OPTIONS);                                                        // 8680
    this.optionsManager = new OptionsManager(this.options);                                                          // 8681
    if (options)                                                                                                     // 8682
        this.setOptions(options);                                                                                    // 8683
    this.id = Entity.register(this);                                                                                 // 8684
    this._modifiers = [];                                                                                            // 8685
    this._states = [];                                                                                               // 8686
    this._contextSizeCache = [                                                                                       // 8687
        0,                                                                                                           // 8688
        0                                                                                                            // 8689
    ];                                                                                                               // 8690
    this._dimensionsCache = [                                                                                        // 8691
        0,                                                                                                           // 8692
        0                                                                                                            // 8693
    ];                                                                                                               // 8694
    this._activeCount = 0;                                                                                           // 8695
    this._eventOutput = new EventHandler();                                                                          // 8696
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 8697
}                                                                                                                    // 8698
function _reflow(size, cols, rows) {                                                                                 // 8699
    var usableSize = [                                                                                               // 8700
            size[0],                                                                                                 // 8701
            size[1]                                                                                                  // 8702
        ];                                                                                                           // 8703
    usableSize[0] -= this.options.gutterSize[0] * (cols - 1);                                                        // 8704
    usableSize[1] -= this.options.gutterSize[1] * (rows - 1);                                                        // 8705
    var rowSize = Math.round(usableSize[1] / rows);                                                                  // 8706
    var colSize = Math.round(usableSize[0] / cols);                                                                  // 8707
    var currY = 0;                                                                                                   // 8708
    var currX;                                                                                                       // 8709
    var currIndex = 0;                                                                                               // 8710
    for (var i = 0; i < rows; i++) {                                                                                 // 8711
        currX = 0;                                                                                                   // 8712
        for (var j = 0; j < cols; j++) {                                                                             // 8713
            if (this._modifiers[currIndex] === undefined) {                                                          // 8714
                _createModifier.call(this, currIndex, [                                                              // 8715
                    colSize,                                                                                         // 8716
                    rowSize                                                                                          // 8717
                ], [                                                                                                 // 8718
                    currX,                                                                                           // 8719
                    currY,                                                                                           // 8720
                    0                                                                                                // 8721
                ], 1);                                                                                               // 8722
            } else {                                                                                                 // 8723
                _animateModifier.call(this, currIndex, [                                                             // 8724
                    colSize,                                                                                         // 8725
                    rowSize                                                                                          // 8726
                ], [                                                                                                 // 8727
                    currX,                                                                                           // 8728
                    currY,                                                                                           // 8729
                    0                                                                                                // 8730
                ], 1);                                                                                               // 8731
            }                                                                                                        // 8732
            currIndex++;                                                                                             // 8733
            currX += colSize + this.options.gutterSize[0];                                                           // 8734
        }                                                                                                            // 8735
        currY += rowSize + this.options.gutterSize[1];                                                               // 8736
    }                                                                                                                // 8737
    this._dimensionsCache = [                                                                                        // 8738
        this.options.dimensions[0],                                                                                  // 8739
        this.options.dimensions[1]                                                                                   // 8740
    ];                                                                                                               // 8741
    this._contextSizeCache = [                                                                                       // 8742
        size[0],                                                                                                     // 8743
        size[1]                                                                                                      // 8744
    ];                                                                                                               // 8745
    this._activeCount = rows * cols;                                                                                 // 8746
    for (i = this._activeCount; i < this._modifiers.length; i++)                                                     // 8747
        _animateModifier.call(this, i, [                                                                             // 8748
            Math.round(colSize),                                                                                     // 8749
            Math.round(rowSize)                                                                                      // 8750
        ], [                                                                                                         // 8751
            0,                                                                                                       // 8752
            0                                                                                                        // 8753
        ], 0);                                                                                                       // 8754
    this._eventOutput.emit('reflow');                                                                                // 8755
}                                                                                                                    // 8756
function _createModifier(index, size, position, opacity) {                                                           // 8757
    var transitionItem = {                                                                                           // 8758
            transform: new TransitionableTransform(Transform.translate.apply(null, position)),                       // 8759
            opacity: new Transitionable(opacity),                                                                    // 8760
            size: new Transitionable(size)                                                                           // 8761
        };                                                                                                           // 8762
    var modifier = new Modifier({                                                                                    // 8763
            transform: transitionItem.transform,                                                                     // 8764
            opacity: transitionItem.opacity,                                                                         // 8765
            size: transitionItem.size                                                                                // 8766
        });                                                                                                          // 8767
    this._states[index] = transitionItem;                                                                            // 8768
    this._modifiers[index] = modifier;                                                                               // 8769
}                                                                                                                    // 8770
function _animateModifier(index, size, position, opacity) {                                                          // 8771
    var currState = this._states[index];                                                                             // 8772
    var currSize = currState.size;                                                                                   // 8773
    var currOpacity = currState.opacity;                                                                             // 8774
    var currTransform = currState.transform;                                                                         // 8775
    var transition = this.options.transition;                                                                        // 8776
    currTransform.halt();                                                                                            // 8777
    currOpacity.halt();                                                                                              // 8778
    currSize.halt();                                                                                                 // 8779
    currTransform.setTranslate(position, transition);                                                                // 8780
    currSize.set(size, transition);                                                                                  // 8781
    currOpacity.set(opacity, transition);                                                                            // 8782
}                                                                                                                    // 8783
GridLayout.DEFAULT_OPTIONS = {                                                                                       // 8784
    dimensions: [                                                                                                    // 8785
        1,                                                                                                           // 8786
        1                                                                                                            // 8787
    ],                                                                                                               // 8788
    transition: false,                                                                                               // 8789
    gutterSize: [                                                                                                    // 8790
        0,                                                                                                           // 8791
        0                                                                                                            // 8792
    ]                                                                                                                // 8793
};                                                                                                                   // 8794
GridLayout.prototype.render = function render() {                                                                    // 8795
    return this.id;                                                                                                  // 8796
};                                                                                                                   // 8797
GridLayout.prototype.setOptions = function setOptions(options) {                                                     // 8798
    return this.optionsManager.setOptions(options);                                                                  // 8799
};                                                                                                                   // 8800
GridLayout.prototype.sequenceFrom = function sequenceFrom(sequence) {                                                // 8801
    if (sequence instanceof Array)                                                                                   // 8802
        sequence = new ViewSequence(sequence);                                                                       // 8803
    this.sequence = sequence;                                                                                        // 8804
};                                                                                                                   // 8805
GridLayout.prototype.commit = function commit(context) {                                                             // 8806
    var transform = context.transform;                                                                               // 8807
    var opacity = context.opacity;                                                                                   // 8808
    var origin = context.origin;                                                                                     // 8809
    var size = context.size;                                                                                         // 8810
    var cols = this.options.dimensions[0];                                                                           // 8811
    var rows = this.options.dimensions[1];                                                                           // 8812
    if (size[0] !== this._contextSizeCache[0] || size[1] !== this._contextSizeCache[1] || cols !== this._dimensionsCache[0] || rows !== this._dimensionsCache[1]) {
        _reflow.call(this, size, cols, rows);                                                                        // 8814
    }                                                                                                                // 8815
    var sequence = this.sequence;                                                                                    // 8816
    var result = [];                                                                                                 // 8817
    var currIndex = 0;                                                                                               // 8818
    while (sequence && currIndex < this._modifiers.length) {                                                         // 8819
        var item = sequence.get();                                                                                   // 8820
        var modifier = this._modifiers[currIndex];                                                                   // 8821
        if (currIndex >= this._activeCount && this._states[currIndex].opacity.isActive()) {                          // 8822
            this._modifiers.splice(currIndex, 1);                                                                    // 8823
            this._states.splice(currIndex, 1);                                                                       // 8824
        }                                                                                                            // 8825
        if (item) {                                                                                                  // 8826
            result.push(modifier.modify({                                                                            // 8827
                origin: origin,                                                                                      // 8828
                target: item.render()                                                                                // 8829
            }));                                                                                                     // 8830
        }                                                                                                            // 8831
        sequence = sequence.getNext();                                                                               // 8832
        currIndex++;                                                                                                 // 8833
    }                                                                                                                // 8834
    if (size)                                                                                                        // 8835
        transform = Transform.moveThen([                                                                             // 8836
            -size[0] * origin[0],                                                                                    // 8837
            -size[1] * origin[1],                                                                                    // 8838
            0                                                                                                        // 8839
        ], transform);                                                                                               // 8840
    return {                                                                                                         // 8841
        transform: transform,                                                                                        // 8842
        opacity: opacity,                                                                                            // 8843
        size: size,                                                                                                  // 8844
        target: result                                                                                               // 8845
    };                                                                                                               // 8846
};                                                                                                                   // 8847
module.exports = GridLayout;                                                                                         // 8848
},{"famous/core/Entity":10,"famous/core/EventHandler":12,"famous/core/Modifier":14,"famous/core/OptionsManager":15,"famous/core/RenderNode":16,"famous/core/Transform":20,"famous/core/ViewSequence":22,"famous/transitions/Transitionable":80,"famous/transitions/TransitionableTransform":81}],93:[function(require,module,exports){
var Entity = require('famous/core/Entity');                                                                          // 8850
var RenderNode = require('famous/core/RenderNode');                                                                  // 8851
var Transform = require('famous/core/Transform');                                                                    // 8852
var OptionsManager = require('famous/core/OptionsManager');                                                          // 8853
function HeaderFooterLayout(options) {                                                                               // 8854
    this.options = Object.create(HeaderFooterLayout.DEFAULT_OPTIONS);                                                // 8855
    this._optionsManager = new OptionsManager(this.options);                                                         // 8856
    if (options)                                                                                                     // 8857
        this.setOptions(options);                                                                                    // 8858
    this._entityId = Entity.register(this);                                                                          // 8859
    this.header = new RenderNode();                                                                                  // 8860
    this.footer = new RenderNode();                                                                                  // 8861
    this.content = new RenderNode();                                                                                 // 8862
}                                                                                                                    // 8863
HeaderFooterLayout.DIRECTION_X = 0;                                                                                  // 8864
HeaderFooterLayout.DIRECTION_Y = 1;                                                                                  // 8865
HeaderFooterLayout.DEFAULT_OPTIONS = {                                                                               // 8866
    direction: HeaderFooterLayout.DIRECTION_Y,                                                                       // 8867
    headerSize: undefined,                                                                                           // 8868
    footerSize: undefined,                                                                                           // 8869
    defaultHeaderSize: 0,                                                                                            // 8870
    defaultFooterSize: 0                                                                                             // 8871
};                                                                                                                   // 8872
HeaderFooterLayout.prototype.render = function render() {                                                            // 8873
    return this._entityId;                                                                                           // 8874
};                                                                                                                   // 8875
HeaderFooterLayout.prototype.setOptions = function setOptions(options) {                                             // 8876
    return this._optionsManager.setOptions(options);                                                                 // 8877
};                                                                                                                   // 8878
function _resolveNodeSize(node, defaultSize) {                                                                       // 8879
    var nodeSize = node.getSize();                                                                                   // 8880
    return nodeSize ? nodeSize[this.options.direction] : defaultSize;                                                // 8881
}                                                                                                                    // 8882
function _outputTransform(offset) {                                                                                  // 8883
    if (this.options.direction === HeaderFooterLayout.DIRECTION_X)                                                   // 8884
        return Transform.translate(offset, 0, 0);                                                                    // 8885
    else                                                                                                             // 8886
        return Transform.translate(0, offset, 0);                                                                    // 8887
}                                                                                                                    // 8888
function _finalSize(directionSize, size) {                                                                           // 8889
    if (this.options.direction === HeaderFooterLayout.DIRECTION_X)                                                   // 8890
        return [                                                                                                     // 8891
            directionSize,                                                                                           // 8892
            size[1]                                                                                                  // 8893
        ];                                                                                                           // 8894
    else                                                                                                             // 8895
        return [                                                                                                     // 8896
            size[0],                                                                                                 // 8897
            directionSize                                                                                            // 8898
        ];                                                                                                           // 8899
}                                                                                                                    // 8900
HeaderFooterLayout.prototype.commit = function commit(context) {                                                     // 8901
    var transform = context.transform;                                                                               // 8902
    var origin = context.origin;                                                                                     // 8903
    var size = context.size;                                                                                         // 8904
    var opacity = context.opacity;                                                                                   // 8905
    var headerSize = this.options.headerSize !== undefined ? this.options.headerSize : _resolveNodeSize.call(this, this.header, this.options.defaultHeaderSize);
    var footerSize = this.options.footerSize !== undefined ? this.options.footerSize : _resolveNodeSize.call(this, this.footer, this.options.defaultFooterSize);
    var contentSize = size[this.options.direction] - headerSize - footerSize;                                        // 8908
    if (size)                                                                                                        // 8909
        transform = Transform.moveThen([                                                                             // 8910
            -size[0] * origin[0],                                                                                    // 8911
            -size[1] * origin[1],                                                                                    // 8912
            0                                                                                                        // 8913
        ], transform);                                                                                               // 8914
    var result = [                                                                                                   // 8915
            {                                                                                                        // 8916
                size: _finalSize.call(this, headerSize, size),                                                       // 8917
                target: this.header.render()                                                                         // 8918
            },                                                                                                       // 8919
            {                                                                                                        // 8920
                transform: _outputTransform.call(this, headerSize),                                                  // 8921
                size: _finalSize.call(this, contentSize, size),                                                      // 8922
                target: this.content.render()                                                                        // 8923
            },                                                                                                       // 8924
            {                                                                                                        // 8925
                transform: _outputTransform.call(this, headerSize + contentSize),                                    // 8926
                size: _finalSize.call(this, footerSize, size),                                                       // 8927
                target: this.footer.render()                                                                         // 8928
            }                                                                                                        // 8929
        ];                                                                                                           // 8930
    return {                                                                                                         // 8931
        transform: transform,                                                                                        // 8932
        opacity: opacity,                                                                                            // 8933
        size: size,                                                                                                  // 8934
        target: result                                                                                               // 8935
    };                                                                                                               // 8936
};                                                                                                                   // 8937
module.exports = HeaderFooterLayout;                                                                                 // 8938
},{"famous/core/Entity":10,"famous/core/OptionsManager":15,"famous/core/RenderNode":16,"famous/core/Transform":20}],94:[function(require,module,exports){
var Transform = require('famous/core/Transform');                                                                    // 8940
var Modifier = require('famous/core/Modifier');                                                                      // 8941
var RenderNode = require('famous/core/RenderNode');                                                                  // 8942
var Utility = require('famous/utilities/Utility');                                                                   // 8943
var OptionsManager = require('famous/core/OptionsManager');                                                          // 8944
var Transitionable = require('famous/transitions/Transitionable');                                                   // 8945
var TransitionableTransform = require('famous/transitions/TransitionableTransform');                                 // 8946
function Lightbox(options) {                                                                                         // 8947
    this.options = Object.create(Lightbox.DEFAULT_OPTIONS);                                                          // 8948
    this._optionsManager = new OptionsManager(this.options);                                                         // 8949
    if (options)                                                                                                     // 8950
        this.setOptions(options);                                                                                    // 8951
    this._showing = false;                                                                                           // 8952
    this.nodes = [];                                                                                                 // 8953
    this.transforms = [];                                                                                            // 8954
    this.states = [];                                                                                                // 8955
}                                                                                                                    // 8956
Lightbox.DEFAULT_OPTIONS = {                                                                                         // 8957
    inTransform: Transform.scale(0.001, 0.001, 0.001),                                                               // 8958
    inOpacity: 0,                                                                                                    // 8959
    inOrigin: [                                                                                                      // 8960
        0.5,                                                                                                         // 8961
        0.5                                                                                                          // 8962
    ],                                                                                                               // 8963
    outTransform: Transform.scale(0.001, 0.001, 0.001),                                                              // 8964
    outOpacity: 0,                                                                                                   // 8965
    outOrigin: [                                                                                                     // 8966
        0.5,                                                                                                         // 8967
        0.5                                                                                                          // 8968
    ],                                                                                                               // 8969
    showTransform: Transform.identity,                                                                               // 8970
    showOpacity: 1,                                                                                                  // 8971
    showOrigin: [                                                                                                    // 8972
        0.5,                                                                                                         // 8973
        0.5                                                                                                          // 8974
    ],                                                                                                               // 8975
    inTransition: true,                                                                                              // 8976
    outTransition: true,                                                                                             // 8977
    overlap: false                                                                                                   // 8978
};                                                                                                                   // 8979
Lightbox.prototype.setOptions = function setOptions(options) {                                                       // 8980
    return this._optionsManager.setOptions(options);                                                                 // 8981
};                                                                                                                   // 8982
Lightbox.prototype.show = function show(renderable, transition, callback) {                                          // 8983
    if (!renderable) {                                                                                               // 8984
        return this.hide(callback);                                                                                  // 8985
    }                                                                                                                // 8986
    if (transition instanceof Function) {                                                                            // 8987
        callback = transition;                                                                                       // 8988
        transition = undefined;                                                                                      // 8989
    }                                                                                                                // 8990
    if (this._showing) {                                                                                             // 8991
        if (this.options.overlap)                                                                                    // 8992
            this.hide();                                                                                             // 8993
        else {                                                                                                       // 8994
            return this.hide(this.show.bind(this, renderable, transition, callback));                                // 8995
        }                                                                                                            // 8996
    }                                                                                                                // 8997
    this._showing = true;                                                                                            // 8998
    var stateItem = {                                                                                                // 8999
            transform: new TransitionableTransform(this.options.inTransform),                                        // 9000
            origin: new Transitionable(this.options.inOrigin),                                                       // 9001
            opacity: new Transitionable(this.options.inOpacity)                                                      // 9002
        };                                                                                                           // 9003
    var transform = new Modifier({                                                                                   // 9004
            transform: stateItem.transform,                                                                          // 9005
            opacity: stateItem.opacity,                                                                              // 9006
            origin: stateItem.origin                                                                                 // 9007
        });                                                                                                          // 9008
    var node = new RenderNode();                                                                                     // 9009
    node.add(transform).add(renderable);                                                                             // 9010
    this.nodes.push(node);                                                                                           // 9011
    this.states.push(stateItem);                                                                                     // 9012
    this.transforms.push(transform);                                                                                 // 9013
    var _cb = callback ? Utility.after(3, callback) : undefined;                                                     // 9014
    if (!transition)                                                                                                 // 9015
        transition = this.options.inTransition;                                                                      // 9016
    stateItem.transform.set(this.options.showTransform, transition, _cb);                                            // 9017
    stateItem.opacity.set(this.options.showOpacity, transition, _cb);                                                // 9018
    stateItem.origin.set(this.options.showOrigin, transition, _cb);                                                  // 9019
};                                                                                                                   // 9020
Lightbox.prototype.hide = function hide(transition, callback) {                                                      // 9021
    if (!this._showing)                                                                                              // 9022
        return;                                                                                                      // 9023
    this._showing = false;                                                                                           // 9024
    if (transition instanceof Function) {                                                                            // 9025
        callback = transition;                                                                                       // 9026
        transition = undefined;                                                                                      // 9027
    }                                                                                                                // 9028
    var node = this.nodes[this.nodes.length - 1];                                                                    // 9029
    var transform = this.transforms[this.transforms.length - 1];                                                     // 9030
    var stateItem = this.states[this.states.length - 1];                                                             // 9031
    var _cb = Utility.after(3, function () {                                                                         // 9032
            this.nodes.splice(this.nodes.indexOf(node), 1);                                                          // 9033
            this.states.splice(this.states.indexOf(stateItem), 1);                                                   // 9034
            this.transforms.splice(this.transforms.indexOf(transform), 1);                                           // 9035
            if (callback)                                                                                            // 9036
                callback.call(this);                                                                                 // 9037
        }.bind(this));                                                                                               // 9038
    if (!transition)                                                                                                 // 9039
        transition = this.options.outTransition;                                                                     // 9040
    stateItem.transform.set(this.options.outTransform, transition, _cb);                                             // 9041
    stateItem.opacity.set(this.options.outOpacity, transition, _cb);                                                 // 9042
    stateItem.origin.set(this.options.outOrigin, transition, _cb);                                                   // 9043
};                                                                                                                   // 9044
Lightbox.prototype.render = function render() {                                                                      // 9045
    var result = [];                                                                                                 // 9046
    for (var i = 0; i < this.nodes.length; i++) {                                                                    // 9047
        result.push(this.nodes[i].render());                                                                         // 9048
    }                                                                                                                // 9049
    return result;                                                                                                   // 9050
};                                                                                                                   // 9051
module.exports = Lightbox;                                                                                           // 9052
},{"famous/core/Modifier":14,"famous/core/OptionsManager":15,"famous/core/RenderNode":16,"famous/core/Transform":20,"famous/transitions/Transitionable":80,"famous/transitions/TransitionableTransform":81,"famous/utilities/Utility":86}],95:[function(require,module,exports){
var Modifier = require('famous/core/Modifier');                                                                      // 9054
var RenderNode = require('famous/core/RenderNode');                                                                  // 9055
var Transform = require('famous/core/Transform');                                                                    // 9056
var Transitionable = require('famous/transitions/Transitionable');                                                   // 9057
var View = require('famous/core/View');                                                                              // 9058
function RenderController(options) {                                                                                 // 9059
    View.apply(this, arguments);                                                                                     // 9060
    this._showing = -1;                                                                                              // 9061
    this._outgoingRenderables = [];                                                                                  // 9062
    this._nextRenderable = null;                                                                                     // 9063
    this._renderables = [];                                                                                          // 9064
    this._nodes = [];                                                                                                // 9065
    this._modifiers = [];                                                                                            // 9066
    this._states = [];                                                                                               // 9067
    this.inTransformMap = RenderController.DefaultMap.transform;                                                     // 9068
    this.inOpacityMap = RenderController.DefaultMap.opacity;                                                         // 9069
    this.inOriginMap = RenderController.DefaultMap.origin;                                                           // 9070
    this.outTransformMap = RenderController.DefaultMap.transform;                                                    // 9071
    this.outOpacityMap = RenderController.DefaultMap.opacity;                                                        // 9072
    this.outOriginMap = RenderController.DefaultMap.origin;                                                          // 9073
    this._output = [];                                                                                               // 9074
}                                                                                                                    // 9075
RenderController.prototype = Object.create(View.prototype);                                                          // 9076
RenderController.prototype.constructor = RenderController;                                                           // 9077
RenderController.DEFAULT_OPTIONS = {                                                                                 // 9078
    inTransition: true,                                                                                              // 9079
    outTransition: true,                                                                                             // 9080
    overlap: true                                                                                                    // 9081
};                                                                                                                   // 9082
RenderController.DefaultMap = {                                                                                      // 9083
    transform: function () {                                                                                         // 9084
        return Transform.identity;                                                                                   // 9085
    },                                                                                                               // 9086
    opacity: function (progress) {                                                                                   // 9087
        return progress;                                                                                             // 9088
    },                                                                                                               // 9089
    origin: null                                                                                                     // 9090
};                                                                                                                   // 9091
function _mappedState(map, state) {                                                                                  // 9092
    return map(state.get());                                                                                         // 9093
}                                                                                                                    // 9094
RenderController.prototype.inTransformFrom = function inTransformFrom(transform) {                                   // 9095
    if (transform instanceof Function)                                                                               // 9096
        this.inTransformMap = transform;                                                                             // 9097
    else if (transform && transform.get)                                                                             // 9098
        this.inTransformMap = transform.get.bind(transform);                                                         // 9099
    else                                                                                                             // 9100
        throw new Error('inTransformFrom takes only function or getter object');                                     // 9101
    return this;                                                                                                     // 9102
};                                                                                                                   // 9103
RenderController.prototype.inOpacityFrom = function inOpacityFrom(opacity) {                                         // 9104
    if (opacity instanceof Function)                                                                                 // 9105
        this.inOpacityMap = opacity;                                                                                 // 9106
    else if (opacity && opacity.get)                                                                                 // 9107
        this.inOpacityMap = opacity.get.bind(opacity);                                                               // 9108
    else                                                                                                             // 9109
        throw new Error('inOpacityFrom takes only function or getter object');                                       // 9110
    return this;                                                                                                     // 9111
};                                                                                                                   // 9112
RenderController.prototype.inOriginFrom = function inOriginFrom(origin) {                                            // 9113
    if (origin instanceof Function)                                                                                  // 9114
        this.inOriginMap = origin;                                                                                   // 9115
    else if (origin && origin.get)                                                                                   // 9116
        this.inOriginMap = origin.get.bind(origin);                                                                  // 9117
    else                                                                                                             // 9118
        throw new Error('inOriginFrom takes only function or getter object');                                        // 9119
    return this;                                                                                                     // 9120
};                                                                                                                   // 9121
RenderController.prototype.outTransformFrom = function outTransformFrom(transform) {                                 // 9122
    if (transform instanceof Function)                                                                               // 9123
        this.outTransformMap = transform;                                                                            // 9124
    else if (transform && transform.get)                                                                             // 9125
        this.outTransformMap = transform.get.bind(transform);                                                        // 9126
    else                                                                                                             // 9127
        throw new Error('outTransformFrom takes only function or getter object');                                    // 9128
    return this;                                                                                                     // 9129
};                                                                                                                   // 9130
RenderController.prototype.outOpacityFrom = function outOpacityFrom(opacity) {                                       // 9131
    if (opacity instanceof Function)                                                                                 // 9132
        this.outOpacityMap = opacity;                                                                                // 9133
    else if (opacity && opacity.get)                                                                                 // 9134
        this.outOpacityMap = opacity.get.bind(opacity);                                                              // 9135
    else                                                                                                             // 9136
        throw new Error('outOpacityFrom takes only function or getter object');                                      // 9137
    return this;                                                                                                     // 9138
};                                                                                                                   // 9139
RenderController.prototype.outOriginFrom = function outOriginFrom(origin) {                                          // 9140
    if (origin instanceof Function)                                                                                  // 9141
        this.outOriginMap = origin;                                                                                  // 9142
    else if (origin && origin.get)                                                                                   // 9143
        this.outOriginMap = origin.get.bind(origin);                                                                 // 9144
    else                                                                                                             // 9145
        throw new Error('outOriginFrom takes only function or getter object');                                       // 9146
    return this;                                                                                                     // 9147
};                                                                                                                   // 9148
RenderController.prototype.show = function show(renderable, transition, callback) {                                  // 9149
    if (!renderable) {                                                                                               // 9150
        return this.hide(callback);                                                                                  // 9151
    }                                                                                                                // 9152
    if (transition instanceof Function) {                                                                            // 9153
        callback = transition;                                                                                       // 9154
        transition = null;                                                                                           // 9155
    }                                                                                                                // 9156
    if (this._showing >= 0) {                                                                                        // 9157
        if (this.options.overlap)                                                                                    // 9158
            this.hide();                                                                                             // 9159
        else {                                                                                                       // 9160
            if (this._nextRenderable) {                                                                              // 9161
                this._nextRenderable = renderable;                                                                   // 9162
            } else {                                                                                                 // 9163
                this._nextRenderable = renderable;                                                                   // 9164
                this.hide(function () {                                                                              // 9165
                    if (this._nextRenderable === renderable)                                                         // 9166
                        this.show(this._nextRenderable, callback);                                                   // 9167
                    this._nextRenderable = null;                                                                     // 9168
                });                                                                                                  // 9169
            }                                                                                                        // 9170
            return undefined;                                                                                        // 9171
        }                                                                                                            // 9172
    }                                                                                                                // 9173
    var state = null;                                                                                                // 9174
    var renderableIndex = this._renderables.indexOf(renderable);                                                     // 9175
    if (renderableIndex >= 0) {                                                                                      // 9176
        this._showing = renderableIndex;                                                                             // 9177
        state = this._states[renderableIndex];                                                                       // 9178
        state.halt();                                                                                                // 9179
        var outgoingIndex = this._outgoingRenderables.indexOf(renderable);                                           // 9180
        if (outgoingIndex >= 0)                                                                                      // 9181
            this._outgoingRenderables.splice(outgoingIndex, 1);                                                      // 9182
    } else {                                                                                                         // 9183
        state = new Transitionable(0);                                                                               // 9184
        var modifier = new Modifier({                                                                                // 9185
                transform: this.inTransformMap ? _mappedState.bind(this, this.inTransformMap, state) : null,         // 9186
                opacity: this.inOpacityMap ? _mappedState.bind(this, this.inOpacityMap, state) : null,               // 9187
                origin: this.inOriginMap ? _mappedState.bind(this, this.inOriginMap, state) : null                   // 9188
            });                                                                                                      // 9189
        var node = new RenderNode();                                                                                 // 9190
        node.add(modifier).add(renderable);                                                                          // 9191
        this._showing = this._nodes.length;                                                                          // 9192
        this._nodes.push(node);                                                                                      // 9193
        this._modifiers.push(modifier);                                                                              // 9194
        this._states.push(state);                                                                                    // 9195
        this._renderables.push(renderable);                                                                          // 9196
    }                                                                                                                // 9197
    if (!transition)                                                                                                 // 9198
        transition = this.options.inTransition;                                                                      // 9199
    state.set(1, transition, callback);                                                                              // 9200
};                                                                                                                   // 9201
RenderController.prototype.hide = function hide(transition, callback) {                                              // 9202
    if (this._showing < 0)                                                                                           // 9203
        return;                                                                                                      // 9204
    var index = this._showing;                                                                                       // 9205
    this._showing = -1;                                                                                              // 9206
    if (transition instanceof Function) {                                                                            // 9207
        callback = transition;                                                                                       // 9208
        transition = undefined;                                                                                      // 9209
    }                                                                                                                // 9210
    var node = this._nodes[index];                                                                                   // 9211
    var modifier = this._modifiers[index];                                                                           // 9212
    var state = this._states[index];                                                                                 // 9213
    var renderable = this._renderables[index];                                                                       // 9214
    modifier.transformFrom(this.outTransformMap ? _mappedState.bind(this, this.outTransformMap, state) : null);      // 9215
    modifier.opacityFrom(this.outOpacityMap ? _mappedState.bind(this, this.outOpacityMap, state) : null);            // 9216
    modifier.originFrom(this.outOriginMap ? _mappedState.bind(this, this.outOriginMap, state) : null);               // 9217
    if (this._outgoingRenderables.indexOf(renderable) < 0)                                                           // 9218
        this._outgoingRenderables.push(renderable);                                                                  // 9219
    if (!transition)                                                                                                 // 9220
        transition = this.options.outTransition;                                                                     // 9221
    state.halt();                                                                                                    // 9222
    state.set(0, transition, function (node, modifier, state, renderable) {                                          // 9223
        if (this._outgoingRenderables.indexOf(renderable) >= 0) {                                                    // 9224
            var index = this._nodes.indexOf(node);                                                                   // 9225
            this._nodes.splice(index, 1);                                                                            // 9226
            this._modifiers.splice(index, 1);                                                                        // 9227
            this._states.splice(index, 1);                                                                           // 9228
            this._renderables.splice(index, 1);                                                                      // 9229
            this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(renderable), 1);                      // 9230
            if (this._showing >= index)                                                                              // 9231
                this._showing--;                                                                                     // 9232
        }                                                                                                            // 9233
        if (callback)                                                                                                // 9234
            callback.call(this);                                                                                     // 9235
    }.bind(this, node, modifier, state, renderable));                                                                // 9236
};                                                                                                                   // 9237
RenderController.prototype.render = function render() {                                                              // 9238
    var result = this._output;                                                                                       // 9239
    if (result.length > this._nodes.length)                                                                          // 9240
        result.splice(this._nodes.length);                                                                           // 9241
    for (var i = 0; i < this._nodes.length; i++) {                                                                   // 9242
        result[i] = this._nodes[i].render();                                                                         // 9243
    }                                                                                                                // 9244
    return result;                                                                                                   // 9245
};                                                                                                                   // 9246
module.exports = RenderController;                                                                                   // 9247
},{"famous/core/Modifier":14,"famous/core/RenderNode":16,"famous/core/Transform":20,"famous/core/View":21,"famous/transitions/Transitionable":80}],96:[function(require,module,exports){
var ContainerSurface = require('famous/surfaces/ContainerSurface');                                                  // 9249
var EventHandler = require('famous/core/EventHandler');                                                              // 9250
var Scrollview = require('./Scrollview');                                                                            // 9251
var Utility = require('famous/utilities/Utility');                                                                   // 9252
var OptionsManager = require('famous/core/OptionsManager');                                                          // 9253
function ScrollContainer(options) {                                                                                  // 9254
    this.options = Object.create(ScrollContainer.DEFAULT_OPTIONS);                                                   // 9255
    this._optionsManager = new OptionsManager(this.options);                                                         // 9256
    if (options)                                                                                                     // 9257
        this.setOptions(options);                                                                                    // 9258
    this.container = new ContainerSurface(this.options.container);                                                   // 9259
    this.scrollview = new Scrollview(this.options.scrollview);                                                       // 9260
    this.container.add(this.scrollview);                                                                             // 9261
    this._eventInput = new EventHandler();                                                                           // 9262
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 9263
    this._eventInput.pipe(this.scrollview);                                                                          // 9264
    this._eventOutput = new EventHandler();                                                                          // 9265
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 9266
    this.container.pipe(this._eventOutput);                                                                          // 9267
    this.scrollview.pipe(this._eventOutput);                                                                         // 9268
}                                                                                                                    // 9269
ScrollContainer.DEFAULT_OPTIONS = {                                                                                  // 9270
    container: { properties: { overflow: 'hidden' } },                                                               // 9271
    scrollview: {}                                                                                                   // 9272
};                                                                                                                   // 9273
ScrollContainer.prototype.setOptions = function setOptions(options) {                                                // 9274
    return this._optionsManager.setOptions(options);                                                                 // 9275
};                                                                                                                   // 9276
ScrollContainer.prototype.sequenceFrom = function sequenceFrom() {                                                   // 9277
    return this.scrollview.sequenceFrom.apply(this.scrollview, arguments);                                           // 9278
};                                                                                                                   // 9279
ScrollContainer.prototype.getSize = function getSize() {                                                             // 9280
    return this.container.getSize.apply(this.container, arguments);                                                  // 9281
};                                                                                                                   // 9282
ScrollContainer.prototype.render = function render() {                                                               // 9283
    return this.container.render();                                                                                  // 9284
};                                                                                                                   // 9285
module.exports = ScrollContainer;                                                                                    // 9286
},{"./Scrollview":98,"famous/core/EventHandler":12,"famous/core/OptionsManager":15,"famous/surfaces/ContainerSurface":68,"famous/utilities/Utility":86}],97:[function(require,module,exports){
var Entity = require('famous/core/Entity');                                                                          // 9288
var Group = require('famous/core/Group');                                                                            // 9289
var OptionsManager = require('famous/core/OptionsManager');                                                          // 9290
var Transform = require('famous/core/Transform');                                                                    // 9291
var Utility = require('famous/utilities/Utility');                                                                   // 9292
var ViewSequence = require('famous/core/ViewSequence');                                                              // 9293
var EventHandler = require('famous/core/EventHandler');                                                              // 9294
function Scroller(options) {                                                                                         // 9295
    this.options = Object.create(this.constructor.DEFAULT_OPTIONS);                                                  // 9296
    this._optionsManager = new OptionsManager(this.options);                                                         // 9297
    if (options)                                                                                                     // 9298
        this._optionsManager.setOptions(options);                                                                    // 9299
    this._node = null;                                                                                               // 9300
    this._position = 0;                                                                                              // 9301
    this._positionOffset = 0;                                                                                        // 9302
    this._positionGetter = null;                                                                                     // 9303
    this._outputFunction = null;                                                                                     // 9304
    this._masterOutputFunction = null;                                                                               // 9305
    this.outputFrom();                                                                                               // 9306
    this._onEdge = 0;                                                                                                // 9307
    this.group = new Group();                                                                                        // 9308
    this.group.add({ render: _innerRender.bind(this) });                                                             // 9309
    this._entityId = Entity.register(this);                                                                          // 9310
    this._size = [                                                                                                   // 9311
        undefined,                                                                                                   // 9312
        undefined                                                                                                    // 9313
    ];                                                                                                               // 9314
    this._contextSize = [                                                                                            // 9315
        undefined,                                                                                                   // 9316
        undefined                                                                                                    // 9317
    ];                                                                                                               // 9318
    this._eventInput = new EventHandler();                                                                           // 9319
    this._eventOutput = new EventHandler();                                                                          // 9320
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 9321
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 9322
}                                                                                                                    // 9323
Scroller.DEFAULT_OPTIONS = {                                                                                         // 9324
    direction: Utility.Direction.Y,                                                                                  // 9325
    margin: 0,                                                                                                       // 9326
    clipSize: undefined,                                                                                             // 9327
    groupScroll: false                                                                                               // 9328
};                                                                                                                   // 9329
var EDGE_TOLERANCE = 0;                                                                                              // 9330
function _sizeForDir(size) {                                                                                         // 9331
    if (!size)                                                                                                       // 9332
        size = this._contextSize;                                                                                    // 9333
    var dimension = this.options.direction;                                                                          // 9334
    return size[dimension] === undefined ? this._contextSize[dimension] : size[dimension];                           // 9335
}                                                                                                                    // 9336
function _output(node, offset, target) {                                                                             // 9337
    var size = node.getSize ? node.getSize() : this._contextSize;                                                    // 9338
    var transform = this._outputFunction(offset);                                                                    // 9339
    target.push({                                                                                                    // 9340
        transform: transform,                                                                                        // 9341
        target: node.render()                                                                                        // 9342
    });                                                                                                              // 9343
    return _sizeForDir.call(this, size);                                                                             // 9344
}                                                                                                                    // 9345
function _getClipSize() {                                                                                            // 9346
    if (this.options.clipSize !== undefined)                                                                         // 9347
        return this.options.clipSize;                                                                                // 9348
    if (this._contextSize[this.options.direction] > this.getCumulativeSize()[this.options.direction]) {              // 9349
        return _sizeForDir.call(this, this.getCumulativeSize());                                                     // 9350
    } else {                                                                                                         // 9351
        return _sizeForDir.call(this, this._contextSize);                                                            // 9352
    }                                                                                                                // 9353
}                                                                                                                    // 9354
Scroller.prototype.getCumulativeSize = function (index) {                                                            // 9355
    if (index === undefined)                                                                                         // 9356
        index = this._node._.cumulativeSizes.length - 1;                                                             // 9357
    return this._node._.getSize(index);                                                                              // 9358
};                                                                                                                   // 9359
Scroller.prototype.setOptions = function setOptions(options) {                                                       // 9360
    if (options.groupScroll !== this.options.groupScroll) {                                                          // 9361
        if (options.groupScroll)                                                                                     // 9362
            this.group.pipe(this._eventOutput);                                                                      // 9363
        else                                                                                                         // 9364
            this.group.unpipe(this._eventOutput);                                                                    // 9365
    }                                                                                                                // 9366
    this._optionsManager.setOptions(options);                                                                        // 9367
};                                                                                                                   // 9368
Scroller.prototype.onEdge = function onEdge() {                                                                      // 9369
    return this._onEdge;                                                                                             // 9370
};                                                                                                                   // 9371
Scroller.prototype.outputFrom = function outputFrom(fn, masterFn) {                                                  // 9372
    if (!fn) {                                                                                                       // 9373
        fn = function (offset) {                                                                                     // 9374
            return this.options.direction === Utility.Direction.X ? Transform.translate(offset, 0) : Transform.translate(0, offset);
        }.bind(this);                                                                                                // 9376
        if (!masterFn)                                                                                               // 9377
            masterFn = fn;                                                                                           // 9378
    }                                                                                                                // 9379
    this._outputFunction = fn;                                                                                       // 9380
    this._masterOutputFunction = masterFn ? masterFn : function (offset) {                                           // 9381
        return Transform.inverse(fn(-offset));                                                                       // 9382
    };                                                                                                               // 9383
};                                                                                                                   // 9384
Scroller.prototype.positionFrom = function positionFrom(position) {                                                  // 9385
    if (position instanceof Function)                                                                                // 9386
        this._positionGetter = position;                                                                             // 9387
    else if (position && position.get)                                                                               // 9388
        this._positionGetter = position.get.bind(position);                                                          // 9389
    else {                                                                                                           // 9390
        this._positionGetter = null;                                                                                 // 9391
        this._position = position;                                                                                   // 9392
    }                                                                                                                // 9393
    if (this._positionGetter)                                                                                        // 9394
        this._position = this._positionGetter.call(this);                                                            // 9395
};                                                                                                                   // 9396
Scroller.prototype.sequenceFrom = function sequenceFrom(node) {                                                      // 9397
    if (node instanceof Array)                                                                                       // 9398
        node = new ViewSequence({ array: node });                                                                    // 9399
    this._node = node;                                                                                               // 9400
    this._positionOffset = 0;                                                                                        // 9401
};                                                                                                                   // 9402
Scroller.prototype.getSize = function getSize(actual) {                                                              // 9403
    return actual ? this._contextSize : this._size;                                                                  // 9404
};                                                                                                                   // 9405
Scroller.prototype.render = function render() {                                                                      // 9406
    if (!this._node)                                                                                                 // 9407
        return null;                                                                                                 // 9408
    if (this._positionGetter)                                                                                        // 9409
        this._position = this._positionGetter.call(this);                                                            // 9410
    return this._entityId;                                                                                           // 9411
};                                                                                                                   // 9412
Scroller.prototype.commit = function commit(context) {                                                               // 9413
    var transform = context.transform;                                                                               // 9414
    var opacity = context.opacity;                                                                                   // 9415
    var origin = context.origin;                                                                                     // 9416
    var size = context.size;                                                                                         // 9417
    if (!this.options.clipSize && (size[0] !== this._contextSize[0] || size[1] !== this._contextSize[1])) {          // 9418
        this._onEdge = 0;                                                                                            // 9419
        this._contextSize[0] = size[0];                                                                              // 9420
        this._contextSize[1] = size[1];                                                                              // 9421
        if (this.options.direction === Utility.Direction.X) {                                                        // 9422
            this._size[0] = _getClipSize.call(this);                                                                 // 9423
            this._size[1] = undefined;                                                                               // 9424
        } else {                                                                                                     // 9425
            this._size[0] = undefined;                                                                               // 9426
            this._size[1] = _getClipSize.call(this);                                                                 // 9427
        }                                                                                                            // 9428
    }                                                                                                                // 9429
    var scrollTransform = this._masterOutputFunction(-this._position);                                               // 9430
    return {                                                                                                         // 9431
        transform: Transform.multiply(transform, scrollTransform),                                                   // 9432
        size: size,                                                                                                  // 9433
        opacity: opacity,                                                                                            // 9434
        origin: origin,                                                                                              // 9435
        target: this.group.render()                                                                                  // 9436
    };                                                                                                               // 9437
};                                                                                                                   // 9438
function _innerRender() {                                                                                            // 9439
    var size = null;                                                                                                 // 9440
    var position = this._position;                                                                                   // 9441
    var result = [];                                                                                                 // 9442
    var offset = -this._positionOffset;                                                                              // 9443
    var clipSize = _getClipSize.call(this);                                                                          // 9444
    var currNode = this._node;                                                                                       // 9445
    while (currNode && offset - position < clipSize + this.options.margin) {                                         // 9446
        offset += _output.call(this, currNode, offset, result);                                                      // 9447
        currNode = currNode.getNext ? currNode.getNext() : null;                                                     // 9448
    }                                                                                                                // 9449
    var sizeNode = this._node;                                                                                       // 9450
    var nodesSize = _sizeForDir.call(this, sizeNode.getSize());                                                      // 9451
    if (offset < clipSize) {                                                                                         // 9452
        while (sizeNode && nodesSize < clipSize) {                                                                   // 9453
            sizeNode = sizeNode.getPrevious();                                                                       // 9454
            if (sizeNode)                                                                                            // 9455
                nodesSize += _sizeForDir.call(this, sizeNode.getSize());                                             // 9456
        }                                                                                                            // 9457
        sizeNode = this._node;                                                                                       // 9458
        while (sizeNode && nodesSize < clipSize) {                                                                   // 9459
            sizeNode = sizeNode.getNext();                                                                           // 9460
            if (sizeNode)                                                                                            // 9461
                nodesSize += _sizeForDir.call(this, sizeNode.getSize());                                             // 9462
        }                                                                                                            // 9463
    }                                                                                                                // 9464
    if (!currNode && offset - position < clipSize - EDGE_TOLERANCE) {                                                // 9465
        if (this._onEdge !== 1) {                                                                                    // 9466
            this._onEdge = 1;                                                                                        // 9467
            this._eventOutput.emit('onEdge', { position: offset - clipSize });                                       // 9468
        }                                                                                                            // 9469
    } else if (!this._node.getPrevious() && position < -EDGE_TOLERANCE) {                                            // 9470
        if (this._onEdge !== -1) {                                                                                   // 9471
            this._onEdge = -1;                                                                                       // 9472
            this._eventOutput.emit('onEdge', { position: 0 });                                                       // 9473
        }                                                                                                            // 9474
    } else {                                                                                                         // 9475
        if (this._onEdge !== 0) {                                                                                    // 9476
            this._onEdge = 0;                                                                                        // 9477
            this._eventOutput.emit('offEdge');                                                                       // 9478
        }                                                                                                            // 9479
    }                                                                                                                // 9480
    currNode = this._node && this._node.getPrevious ? this._node.getPrevious() : null;                               // 9481
    offset = -this._positionOffset;                                                                                  // 9482
    if (currNode) {                                                                                                  // 9483
        size = currNode.getSize ? currNode.getSize() : this._contextSize;                                            // 9484
        offset -= _sizeForDir.call(this, size);                                                                      // 9485
    }                                                                                                                // 9486
    while (currNode && offset - position > -(clipSize + this.options.margin)) {                                      // 9487
        _output.call(this, currNode, offset, result);                                                                // 9488
        currNode = currNode.getPrevious ? currNode.getPrevious() : null;                                             // 9489
        if (currNode) {                                                                                              // 9490
            size = currNode.getSize ? currNode.getSize() : this._contextSize;                                        // 9491
            offset -= _sizeForDir.call(this, size);                                                                  // 9492
        }                                                                                                            // 9493
    }                                                                                                                // 9494
    return result;                                                                                                   // 9495
}                                                                                                                    // 9496
module.exports = Scroller;                                                                                           // 9497
},{"famous/core/Entity":10,"famous/core/EventHandler":12,"famous/core/Group":13,"famous/core/OptionsManager":15,"famous/core/Transform":20,"famous/core/ViewSequence":22,"famous/utilities/Utility":86}],98:[function(require,module,exports){
var PhysicsEngine = require('famous/physics/PhysicsEngine');                                                         // 9499
var Particle = require('famous/physics/bodies/Particle');                                                            // 9500
var Drag = require('famous/physics/forces/Drag');                                                                    // 9501
var Spring = require('famous/physics/forces/Spring');                                                                // 9502
var EventHandler = require('famous/core/EventHandler');                                                              // 9503
var OptionsManager = require('famous/core/OptionsManager');                                                          // 9504
var ViewSequence = require('famous/core/ViewSequence');                                                              // 9505
var Scroller = require('famous/views/Scroller');                                                                     // 9506
var Utility = require('famous/utilities/Utility');                                                                   // 9507
var GenericSync = require('famous/inputs/GenericSync');                                                              // 9508
var ScrollSync = require('famous/inputs/ScrollSync');                                                                // 9509
var TouchSync = require('famous/inputs/TouchSync');                                                                  // 9510
GenericSync.register({                                                                                               // 9511
    scroll: ScrollSync,                                                                                              // 9512
    touch: TouchSync                                                                                                 // 9513
});                                                                                                                  // 9514
var TOLERANCE = 0.5;                                                                                                 // 9515
var SpringStates = {                                                                                                 // 9516
        NONE: 0,                                                                                                     // 9517
        EDGE: 1,                                                                                                     // 9518
        PAGE: 2                                                                                                      // 9519
    };                                                                                                               // 9520
var EdgeStates = {                                                                                                   // 9521
        TOP: -1,                                                                                                     // 9522
        NONE: 0,                                                                                                     // 9523
        BOTTOM: 1                                                                                                    // 9524
    };                                                                                                               // 9525
function Scrollview(options) {                                                                                       // 9526
    this.options = Object.create(Scrollview.DEFAULT_OPTIONS);                                                        // 9527
    this._optionsManager = new OptionsManager(this.options);                                                         // 9528
    this._scroller = new Scroller(this.options);                                                                     // 9529
    this.sync = new GenericSync([                                                                                    // 9530
        'scroll',                                                                                                    // 9531
        'touch'                                                                                                      // 9532
    ], {                                                                                                             // 9533
        direction: this.options.direction,                                                                           // 9534
        scale: this.options.syncScale,                                                                               // 9535
        rails: this.options.rails,                                                                                   // 9536
        preventDefault: this.options.preventDefault                                                                  // 9537
    });                                                                                                              // 9538
    this._physicsEngine = new PhysicsEngine();                                                                       // 9539
    this._particle = new Particle();                                                                                 // 9540
    this._physicsEngine.addBody(this._particle);                                                                     // 9541
    this.spring = new Spring({                                                                                       // 9542
        anchor: [                                                                                                    // 9543
            0,                                                                                                       // 9544
            0,                                                                                                       // 9545
            0                                                                                                        // 9546
        ],                                                                                                           // 9547
        period: this.options.edgePeriod,                                                                             // 9548
        dampingRatio: this.options.edgeDamp                                                                          // 9549
    });                                                                                                              // 9550
    this.drag = new Drag({                                                                                           // 9551
        forceFunction: Drag.FORCE_FUNCTIONS.QUADRATIC,                                                               // 9552
        strength: this.options.drag                                                                                  // 9553
    });                                                                                                              // 9554
    this.friction = new Drag({                                                                                       // 9555
        forceFunction: Drag.FORCE_FUNCTIONS.LINEAR,                                                                  // 9556
        strength: this.options.friction                                                                              // 9557
    });                                                                                                              // 9558
    this._node = null;                                                                                               // 9559
    this._touchCount = 0;                                                                                            // 9560
    this._springState = SpringStates.NONE;                                                                           // 9561
    this._onEdge = EdgeStates.NONE;                                                                                  // 9562
    this._pageSpringPosition = 0;                                                                                    // 9563
    this._edgeSpringPosition = 0;                                                                                    // 9564
    this._touchVelocity = 0;                                                                                         // 9565
    this._earlyEnd = false;                                                                                          // 9566
    this._needsPaginationCheck = false;                                                                              // 9567
    this._displacement = 0;                                                                                          // 9568
    this._totalShift = 0;                                                                                            // 9569
    this._cachedIndex = 0;                                                                                           // 9570
    this._scroller.positionFrom(this.getPosition.bind(this));                                                        // 9571
    this._eventInput = new EventHandler();                                                                           // 9572
    this._eventOutput = new EventHandler();                                                                          // 9573
    this._eventInput.pipe(this.sync);                                                                                // 9574
    this.sync.pipe(this._eventInput);                                                                                // 9575
    EventHandler.setInputHandler(this, this._eventInput);                                                            // 9576
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 9577
    _bindEvents.call(this);                                                                                          // 9578
    if (options)                                                                                                     // 9579
        this.setOptions(options);                                                                                    // 9580
}                                                                                                                    // 9581
Scrollview.DEFAULT_OPTIONS = {                                                                                       // 9582
    direction: Utility.Direction.Y,                                                                                  // 9583
    rails: true,                                                                                                     // 9584
    friction: 0.005,                                                                                                 // 9585
    drag: 0.0001,                                                                                                    // 9586
    edgeGrip: 0.2,                                                                                                   // 9587
    edgePeriod: 300,                                                                                                 // 9588
    edgeDamp: 1,                                                                                                     // 9589
    margin: 1000,                                                                                                    // 9590
    paginated: false,                                                                                                // 9591
    pagePeriod: 500,                                                                                                 // 9592
    pageDamp: 0.8,                                                                                                   // 9593
    pageStopSpeed: 10,                                                                                               // 9594
    pageSwitchSpeed: 0.5,                                                                                            // 9595
    speedLimit: 5,                                                                                                   // 9596
    groupScroll: false,                                                                                              // 9597
    syncScale: 1                                                                                                     // 9598
};                                                                                                                   // 9599
function _handleStart(event) {                                                                                       // 9600
    this._touchCount = event.count;                                                                                  // 9601
    if (event.count === undefined)                                                                                   // 9602
        this._touchCount = 1;                                                                                        // 9603
    _detachAgents.call(this);                                                                                        // 9604
    this.setVelocity(0);                                                                                             // 9605
    this._touchVelocity = 0;                                                                                         // 9606
    this._earlyEnd = false;                                                                                          // 9607
}                                                                                                                    // 9608
function _handleMove(event) {                                                                                        // 9609
    var velocity = -event.velocity;                                                                                  // 9610
    var delta = -event.delta;                                                                                        // 9611
    if (this._onEdge !== EdgeStates.NONE && event.slip) {                                                            // 9612
        if (velocity < 0 && this._onEdge === EdgeStates.TOP || velocity > 0 && this._onEdge === EdgeStates.BOTTOM) { // 9613
            if (!this._earlyEnd) {                                                                                   // 9614
                _handleEnd.call(this, event);                                                                        // 9615
                this._earlyEnd = true;                                                                               // 9616
            }                                                                                                        // 9617
        } else if (this._earlyEnd && Math.abs(velocity) > Math.abs(this.getVelocity())) {                            // 9618
            _handleStart.call(this, event);                                                                          // 9619
        }                                                                                                            // 9620
    }                                                                                                                // 9621
    if (this._earlyEnd)                                                                                              // 9622
        return;                                                                                                      // 9623
    this._touchVelocity = velocity;                                                                                  // 9624
    if (event.slip) {                                                                                                // 9625
        var speedLimit = this.options.speedLimit;                                                                    // 9626
        if (velocity < -speedLimit)                                                                                  // 9627
            velocity = -speedLimit;                                                                                  // 9628
        else if (velocity > speedLimit)                                                                              // 9629
            velocity = speedLimit;                                                                                   // 9630
        this.setVelocity(velocity);                                                                                  // 9631
        var deltaLimit = speedLimit * 16;                                                                            // 9632
        if (delta > deltaLimit)                                                                                      // 9633
            delta = deltaLimit;                                                                                      // 9634
        else if (delta < -deltaLimit)                                                                                // 9635
            delta = -deltaLimit;                                                                                     // 9636
    }                                                                                                                // 9637
    this.setPosition(this.getPosition() + delta);                                                                    // 9638
    this._displacement += delta;                                                                                     // 9639
    if (this._springState === SpringStates.NONE)                                                                     // 9640
        _normalizeState.call(this);                                                                                  // 9641
}                                                                                                                    // 9642
function _handleEnd(event) {                                                                                         // 9643
    this._touchCount = event.count || 0;                                                                             // 9644
    if (!this._touchCount) {                                                                                         // 9645
        _detachAgents.call(this);                                                                                    // 9646
        if (this._onEdge !== EdgeStates.NONE)                                                                        // 9647
            _setSpring.call(this, this._edgeSpringPosition, SpringStates.EDGE);                                      // 9648
        _attachAgents.call(this);                                                                                    // 9649
        var velocity = -event.velocity;                                                                              // 9650
        var speedLimit = this.options.speedLimit;                                                                    // 9651
        if (event.slip)                                                                                              // 9652
            speedLimit *= this.options.edgeGrip;                                                                     // 9653
        if (velocity < -speedLimit)                                                                                  // 9654
            velocity = -speedLimit;                                                                                  // 9655
        else if (velocity > speedLimit)                                                                              // 9656
            velocity = speedLimit;                                                                                   // 9657
        this.setVelocity(velocity);                                                                                  // 9658
        this._touchVelocity = 0;                                                                                     // 9659
        this._needsPaginationCheck = true;                                                                           // 9660
    }                                                                                                                // 9661
}                                                                                                                    // 9662
function _bindEvents() {                                                                                             // 9663
    this._eventInput.bindThis(this);                                                                                 // 9664
    this._eventInput.on('start', _handleStart);                                                                      // 9665
    this._eventInput.on('update', _handleMove);                                                                      // 9666
    this._eventInput.on('end', _handleEnd);                                                                          // 9667
    this._eventInput.on('resize', function () {                                                                      // 9668
        this._node._.calculateSize();                                                                                // 9669
    }.bind(this));                                                                                                   // 9670
    this._scroller.on('onEdge', function (data) {                                                                    // 9671
        this._edgeSpringPosition = data.position;                                                                    // 9672
        _handleEdge.call(this, this._scroller.onEdge());                                                             // 9673
        this._eventOutput.emit('onEdge');                                                                            // 9674
    }.bind(this));                                                                                                   // 9675
    this._scroller.on('offEdge', function () {                                                                       // 9676
        this.sync.setOptions({ scale: this.options.syncScale });                                                     // 9677
        this._onEdge = this._scroller.onEdge();                                                                      // 9678
        this._eventOutput.emit('offEdge');                                                                           // 9679
    }.bind(this));                                                                                                   // 9680
    this._particle.on('update', function (particle) {                                                                // 9681
        if (this._springState === SpringStates.NONE)                                                                 // 9682
            _normalizeState.call(this);                                                                              // 9683
        this._displacement = particle.position.x - this._totalShift;                                                 // 9684
    }.bind(this));                                                                                                   // 9685
    this._particle.on('end', function () {                                                                           // 9686
        if (!this.options.paginated || this.options.paginated && this._springState !== SpringStates.NONE)            // 9687
            this._eventOutput.emit('settle');                                                                        // 9688
    }.bind(this));                                                                                                   // 9689
}                                                                                                                    // 9690
function _attachAgents() {                                                                                           // 9691
    if (this._springState)                                                                                           // 9692
        this._physicsEngine.attach([this.spring], this._particle);                                                   // 9693
    else                                                                                                             // 9694
        this._physicsEngine.attach([                                                                                 // 9695
            this.drag,                                                                                               // 9696
            this.friction                                                                                            // 9697
        ], this._particle);                                                                                          // 9698
}                                                                                                                    // 9699
function _detachAgents() {                                                                                           // 9700
    this._springState = SpringStates.NONE;                                                                           // 9701
    this._physicsEngine.detachAll();                                                                                 // 9702
}                                                                                                                    // 9703
function _nodeSizeForDirection(node) {                                                                               // 9704
    var direction = this.options.direction;                                                                          // 9705
    var nodeSize = node.getSize();                                                                                   // 9706
    return !nodeSize ? this._scroller.getSize()[direction] : nodeSize[direction];                                    // 9707
}                                                                                                                    // 9708
function _handleEdge(edge) {                                                                                         // 9709
    this.sync.setOptions({ scale: this.options.edgeGrip });                                                          // 9710
    this._onEdge = edge;                                                                                             // 9711
    if (!this._touchCount && this._springState !== SpringStates.EDGE) {                                              // 9712
        _setSpring.call(this, this._edgeSpringPosition, SpringStates.EDGE);                                          // 9713
    }                                                                                                                // 9714
    if (this._springState && Math.abs(this.getVelocity()) < 0.001) {                                                 // 9715
        _detachAgents.call(this);                                                                                    // 9716
        _attachAgents.call(this);                                                                                    // 9717
    }                                                                                                                // 9718
}                                                                                                                    // 9719
function _handlePagination() {                                                                                       // 9720
    if (this._touchCount)                                                                                            // 9721
        return;                                                                                                      // 9722
    if (this._springState === SpringStates.EDGE)                                                                     // 9723
        return;                                                                                                      // 9724
    var velocity = this.getVelocity();                                                                               // 9725
    if (Math.abs(velocity) >= this.options.pageStopSpeed)                                                            // 9726
        return;                                                                                                      // 9727
    var position = this.getPosition();                                                                               // 9728
    var velocitySwitch = Math.abs(velocity) > this.options.pageSwitchSpeed;                                          // 9729
    var nodeSize = _nodeSizeForDirection.call(this, this._node);                                                     // 9730
    var positionNext = position > 0.5 * nodeSize;                                                                    // 9731
    var positionPrev = position < 0.5 * nodeSize;                                                                    // 9732
    var velocityNext = velocity > 0;                                                                                 // 9733
    var velocityPrev = velocity < 0;                                                                                 // 9734
    this._needsPaginationCheck = false;                                                                              // 9735
    if (positionNext && !velocitySwitch || velocitySwitch && velocityNext) {                                         // 9736
        this.goToNextPage();                                                                                         // 9737
    } else if (velocitySwitch && velocityPrev) {                                                                     // 9738
        this.goToPreviousPage();                                                                                     // 9739
    } else                                                                                                           // 9740
        _setSpring.call(this, 0, SpringStates.PAGE);                                                                 // 9741
}                                                                                                                    // 9742
function _setSpring(position, springState) {                                                                         // 9743
    var springOptions;                                                                                               // 9744
    if (springState === SpringStates.EDGE) {                                                                         // 9745
        this._edgeSpringPosition = position;                                                                         // 9746
        springOptions = {                                                                                            // 9747
            anchor: [                                                                                                // 9748
                this._edgeSpringPosition,                                                                            // 9749
                0,                                                                                                   // 9750
                0                                                                                                    // 9751
            ],                                                                                                       // 9752
            period: this.options.edgePeriod,                                                                         // 9753
            dampingRatio: this.options.edgeDamp                                                                      // 9754
        };                                                                                                           // 9755
    } else if (springState === SpringStates.PAGE) {                                                                  // 9756
        this._pageSpringPosition = position;                                                                         // 9757
        springOptions = {                                                                                            // 9758
            anchor: [                                                                                                // 9759
                this._pageSpringPosition,                                                                            // 9760
                0,                                                                                                   // 9761
                0                                                                                                    // 9762
            ],                                                                                                       // 9763
            period: this.options.pagePeriod,                                                                         // 9764
            dampingRatio: this.options.pageDamp                                                                      // 9765
        };                                                                                                           // 9766
    }                                                                                                                // 9767
    this.spring.setOptions(springOptions);                                                                           // 9768
    if (springState && !this._springState) {                                                                         // 9769
        _detachAgents.call(this);                                                                                    // 9770
        this._springState = springState;                                                                             // 9771
        _attachAgents.call(this);                                                                                    // 9772
    }                                                                                                                // 9773
    this._springState = springState;                                                                                 // 9774
}                                                                                                                    // 9775
function _normalizeState() {                                                                                         // 9776
    var offset = 0;                                                                                                  // 9777
    var position = this.getPosition();                                                                               // 9778
    position += (position < 0 ? -0.5 : 0.5) >> 0;                                                                    // 9779
    var nodeSize = _nodeSizeForDirection.call(this, this._node);                                                     // 9780
    var nextNode = this._node.getNext();                                                                             // 9781
    while (offset + position >= nodeSize && nextNode) {                                                              // 9782
        offset -= nodeSize;                                                                                          // 9783
        this._scroller.sequenceFrom(nextNode);                                                                       // 9784
        this._node = nextNode;                                                                                       // 9785
        nextNode = this._node.getNext();                                                                             // 9786
        nodeSize = _nodeSizeForDirection.call(this, this._node);                                                     // 9787
    }                                                                                                                // 9788
    var previousNode = this._node.getPrevious();                                                                     // 9789
    var previousNodeSize;                                                                                            // 9790
    while (offset + position <= 0 && previousNode) {                                                                 // 9791
        previousNodeSize = _nodeSizeForDirection.call(this, previousNode);                                           // 9792
        this._scroller.sequenceFrom(previousNode);                                                                   // 9793
        this._node = previousNode;                                                                                   // 9794
        offset += previousNodeSize;                                                                                  // 9795
        previousNode = this._node.getPrevious();                                                                     // 9796
    }                                                                                                                // 9797
    if (offset)                                                                                                      // 9798
        _shiftOrigin.call(this, offset);                                                                             // 9799
    if (this._node) {                                                                                                // 9800
        if (this._node.index !== this._cachedIndex) {                                                                // 9801
            if (this.getPosition() < 0.5 * nodeSize) {                                                               // 9802
                this._cachedIndex = this._node.index;                                                                // 9803
                this._eventOutput.emit('pageChange', {                                                               // 9804
                    direction: -1,                                                                                   // 9805
                    index: this._cachedIndex                                                                         // 9806
                });                                                                                                  // 9807
            }                                                                                                        // 9808
        } else {                                                                                                     // 9809
            if (this.getPosition() > 0.5 * nodeSize) {                                                               // 9810
                this._cachedIndex = this._node.index + 1;                                                            // 9811
                this._eventOutput.emit('pageChange', {                                                               // 9812
                    direction: 1,                                                                                    // 9813
                    index: this._cachedIndex                                                                         // 9814
                });                                                                                                  // 9815
            }                                                                                                        // 9816
        }                                                                                                            // 9817
    }                                                                                                                // 9818
}                                                                                                                    // 9819
function _shiftOrigin(amount) {                                                                                      // 9820
    this._edgeSpringPosition += amount;                                                                              // 9821
    this._pageSpringPosition += amount;                                                                              // 9822
    this.setPosition(this.getPosition() + amount);                                                                   // 9823
    this._totalShift += amount;                                                                                      // 9824
    if (this._springState === SpringStates.EDGE) {                                                                   // 9825
        this.spring.setOptions({                                                                                     // 9826
            anchor: [                                                                                                // 9827
                this._edgeSpringPosition,                                                                            // 9828
                0,                                                                                                   // 9829
                0                                                                                                    // 9830
            ]                                                                                                        // 9831
        });                                                                                                          // 9832
    } else if (this._springState === SpringStates.PAGE) {                                                            // 9833
        this.spring.setOptions({                                                                                     // 9834
            anchor: [                                                                                                // 9835
                this._pageSpringPosition,                                                                            // 9836
                0,                                                                                                   // 9837
                0                                                                                                    // 9838
            ]                                                                                                        // 9839
        });                                                                                                          // 9840
    }                                                                                                                // 9841
}                                                                                                                    // 9842
Scrollview.prototype.getCurrentIndex = function getCurrentIndex() {                                                  // 9843
    return this._node.index;                                                                                         // 9844
};                                                                                                                   // 9845
Scrollview.prototype.goToPreviousPage = function goToPreviousPage() {                                                // 9846
    if (!this._node || this._onEdge === EdgeStates.TOP)                                                              // 9847
        return null;                                                                                                 // 9848
    if (this.getPosition() > 1 && this._springState === SpringStates.NONE) {                                         // 9849
        _setSpring.call(this, 0, SpringStates.PAGE);                                                                 // 9850
        return this._node;                                                                                           // 9851
    }                                                                                                                // 9852
    var previousNode = this._node.getPrevious();                                                                     // 9853
    if (previousNode) {                                                                                              // 9854
        var previousNodeSize = _nodeSizeForDirection.call(this, previousNode);                                       // 9855
        this._scroller.sequenceFrom(previousNode);                                                                   // 9856
        this._node = previousNode;                                                                                   // 9857
        _shiftOrigin.call(this, previousNodeSize);                                                                   // 9858
        _setSpring.call(this, 0, SpringStates.PAGE);                                                                 // 9859
    }                                                                                                                // 9860
    return previousNode;                                                                                             // 9861
};                                                                                                                   // 9862
Scrollview.prototype.goToNextPage = function goToNextPage() {                                                        // 9863
    if (!this._node || this._onEdge === EdgeStates.BOTTOM)                                                           // 9864
        return null;                                                                                                 // 9865
    var nextNode = this._node.getNext();                                                                             // 9866
    if (nextNode) {                                                                                                  // 9867
        var currentNodeSize = _nodeSizeForDirection.call(this, this._node);                                          // 9868
        this._scroller.sequenceFrom(nextNode);                                                                       // 9869
        this._node = nextNode;                                                                                       // 9870
        _shiftOrigin.call(this, -currentNodeSize);                                                                   // 9871
        _setSpring.call(this, 0, SpringStates.PAGE);                                                                 // 9872
    }                                                                                                                // 9873
    return nextNode;                                                                                                 // 9874
};                                                                                                                   // 9875
Scrollview.prototype.goToPage = function goToPage(index) {                                                           // 9876
    var currentIndex = this.getCurrentIndex();                                                                       // 9877
    var i;                                                                                                           // 9878
    if (currentIndex > index) {                                                                                      // 9879
        for (i = 0; i < currentIndex - index; i++)                                                                   // 9880
            this.goToPreviousPage();                                                                                 // 9881
    }                                                                                                                // 9882
    if (currentIndex < index) {                                                                                      // 9883
        for (i = 0; i < index - currentIndex; i++)                                                                   // 9884
            this.goToNextPage();                                                                                     // 9885
    }                                                                                                                // 9886
};                                                                                                                   // 9887
Scrollview.prototype.outputFrom = function outputFrom() {                                                            // 9888
    return this._scroller.outputFrom.apply(this._scroller, arguments);                                               // 9889
};                                                                                                                   // 9890
Scrollview.prototype.getPosition = function getPosition() {                                                          // 9891
    return this._particle.getPosition1D();                                                                           // 9892
};                                                                                                                   // 9893
Scrollview.prototype.getAbsolutePosition = function getAbsolutePosition() {                                          // 9894
    return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction] + this.getPosition();    // 9895
};                                                                                                                   // 9896
Scrollview.prototype.getOffset = Scrollview.prototype.getPosition;                                                   // 9897
Scrollview.prototype.setPosition = function setPosition(x) {                                                         // 9898
    this._particle.setPosition1D(x);                                                                                 // 9899
};                                                                                                                   // 9900
Scrollview.prototype.setOffset = Scrollview.prototype.setPosition;                                                   // 9901
Scrollview.prototype.getVelocity = function getVelocity() {                                                          // 9902
    return this._touchCount ? this._touchVelocity : this._particle.getVelocity1D();                                  // 9903
};                                                                                                                   // 9904
Scrollview.prototype.setVelocity = function setVelocity(v) {                                                         // 9905
    this._particle.setVelocity1D(v);                                                                                 // 9906
};                                                                                                                   // 9907
Scrollview.prototype.setOptions = function setOptions(options) {                                                     // 9908
    if (options.direction !== undefined) {                                                                           // 9909
        if (options.direction === 'x')                                                                               // 9910
            options.direction = Utility.Direction.X;                                                                 // 9911
        else if (options.direction === 'y')                                                                          // 9912
            options.direction = Utility.Direction.Y;                                                                 // 9913
    }                                                                                                                // 9914
    if (options.groupScroll !== this.options.groupScroll) {                                                          // 9915
        if (options.groupScroll)                                                                                     // 9916
            this.subscribe(this._scroller);                                                                          // 9917
        else                                                                                                         // 9918
            this.unsubscribe(this._scroller);                                                                        // 9919
    }                                                                                                                // 9920
    this._optionsManager.setOptions(options);                                                                        // 9921
    this._scroller.setOptions(options);                                                                              // 9922
    if (options.drag !== undefined)                                                                                  // 9923
        this.drag.setOptions({ strength: this.options.drag });                                                       // 9924
    if (options.friction !== undefined)                                                                              // 9925
        this.friction.setOptions({ strength: this.options.friction });                                               // 9926
    if (options.edgePeriod !== undefined || options.edgeDamp !== undefined) {                                        // 9927
        this.spring.setOptions({                                                                                     // 9928
            period: this.options.edgePeriod,                                                                         // 9929
            dampingRatio: this.options.edgeDamp                                                                      // 9930
        });                                                                                                          // 9931
    }                                                                                                                // 9932
    if (options.rails || options.direction !== undefined || options.syncScale !== undefined || options.preventDefault) {
        this.sync.setOptions({                                                                                       // 9934
            rails: this.options.rails,                                                                               // 9935
            direction: this.options.direction === Utility.Direction.X ? GenericSync.DIRECTION_X : GenericSync.DIRECTION_Y,
            scale: this.options.syncScale,                                                                           // 9937
            preventDefault: this.options.preventDefault                                                              // 9938
        });                                                                                                          // 9939
    }                                                                                                                // 9940
};                                                                                                                   // 9941
Scrollview.prototype.sequenceFrom = function sequenceFrom(node) {                                                    // 9942
    if (node instanceof Array)                                                                                       // 9943
        node = new ViewSequence({                                                                                    // 9944
            array: node,                                                                                             // 9945
            trackSize: true                                                                                          // 9946
        });                                                                                                          // 9947
    this._node = node;                                                                                               // 9948
    return this._scroller.sequenceFrom(node);                                                                        // 9949
};                                                                                                                   // 9950
Scrollview.prototype.getSize = function getSize() {                                                                  // 9951
    return this._scroller.getSize.apply(this._scroller, arguments);                                                  // 9952
};                                                                                                                   // 9953
Scrollview.prototype.render = function render() {                                                                    // 9954
    if (this.options.paginated && this._needsPaginationCheck)                                                        // 9955
        _handlePagination.call(this);                                                                                // 9956
    return this._scroller.render();                                                                                  // 9957
};                                                                                                                   // 9958
module.exports = Scrollview;                                                                                         // 9959
},{"famous/core/EventHandler":12,"famous/core/OptionsManager":15,"famous/core/ViewSequence":22,"famous/inputs/GenericSync":28,"famous/inputs/ScrollSync":33,"famous/inputs/TouchSync":34,"famous/physics/PhysicsEngine":46,"famous/physics/bodies/Particle":49,"famous/physics/forces/Drag":59,"famous/physics/forces/Spring":64,"famous/utilities/Utility":86,"famous/views/Scroller":97}],99:[function(require,module,exports){
var OptionsManager = require('famous/core/OptionsManager');                                                          // 9961
var Transform = require('famous/core/Transform');                                                                    // 9962
var ViewSequence = require('famous/core/ViewSequence');                                                              // 9963
var Utility = require('famous/utilities/Utility');                                                                   // 9964
function SequentialLayout(options) {                                                                                 // 9965
    this._items = null;                                                                                              // 9966
    this._size = null;                                                                                               // 9967
    this._outputFunction = SequentialLayout.DEFAULT_OUTPUT_FUNCTION;                                                 // 9968
    this.options = Object.create(this.constructor.DEFAULT_OPTIONS);                                                  // 9969
    this.optionsManager = new OptionsManager(this.options);                                                          // 9970
    if (options)                                                                                                     // 9971
        this.setOptions(options);                                                                                    // 9972
}                                                                                                                    // 9973
SequentialLayout.DEFAULT_OPTIONS = { direction: Utility.Direction.Y };                                               // 9974
SequentialLayout.DEFAULT_OUTPUT_FUNCTION = function DEFAULT_OUTPUT_FUNCTION(input, offset, index) {                  // 9975
    var transform = this.options.direction === Utility.Direction.X ? Transform.translate(offset, 0) : Transform.translate(0, offset);
    return {                                                                                                         // 9977
        transform: transform,                                                                                        // 9978
        target: input.render()                                                                                       // 9979
    };                                                                                                               // 9980
};                                                                                                                   // 9981
SequentialLayout.prototype.getSize = function getSize() {                                                            // 9982
    if (!this._size)                                                                                                 // 9983
        this.render();                                                                                               // 9984
    return this._size;                                                                                               // 9985
};                                                                                                                   // 9986
SequentialLayout.prototype.sequenceFrom = function sequenceFrom(items) {                                             // 9987
    if (items instanceof Array)                                                                                      // 9988
        items = new ViewSequence(items);                                                                             // 9989
    this._items = items;                                                                                             // 9990
    return this;                                                                                                     // 9991
};                                                                                                                   // 9992
SequentialLayout.prototype.setOptions = function setOptions(options) {                                               // 9993
    this.optionsManager.setOptions.apply(this.optionsManager, arguments);                                            // 9994
    return this;                                                                                                     // 9995
};                                                                                                                   // 9996
SequentialLayout.prototype.setOutputFunction = function setOutputFunction(outputFunction) {                          // 9997
    this._outputFunction = outputFunction;                                                                           // 9998
    return this;                                                                                                     // 9999
};                                                                                                                   // 10000
SequentialLayout.prototype.render = function render() {                                                              // 10001
    var length = 0;                                                                                                  // 10002
    var secondaryDirection = this.options.direction ^ 1;                                                             // 10003
    var currentNode = this._items;                                                                                   // 10004
    var item = null;                                                                                                 // 10005
    var itemSize = [];                                                                                               // 10006
    var output = {};                                                                                                 // 10007
    var result = [];                                                                                                 // 10008
    var i = 0;                                                                                                       // 10009
    this._size = [                                                                                                   // 10010
        0,                                                                                                           // 10011
        0                                                                                                            // 10012
    ];                                                                                                               // 10013
    while (currentNode) {                                                                                            // 10014
        item = currentNode.get();                                                                                    // 10015
        if (!item)                                                                                                   // 10016
            break;                                                                                                   // 10017
        if (item.getSize)                                                                                            // 10018
            itemSize = item.getSize();                                                                               // 10019
        output = this._outputFunction.call(this, item, length, i++);                                                 // 10020
        result.push(output);                                                                                         // 10021
        if (itemSize) {                                                                                              // 10022
            if (itemSize[this.options.direction])                                                                    // 10023
                length += itemSize[this.options.direction];                                                          // 10024
            if (itemSize[secondaryDirection] > this._size[secondaryDirection])                                       // 10025
                this._size[secondaryDirection] = itemSize[secondaryDirection];                                       // 10026
        }                                                                                                            // 10027
        currentNode = currentNode.getNext();                                                                         // 10028
    }                                                                                                                // 10029
    this._size[this.options.direction] = length;                                                                     // 10030
    return result;                                                                                                   // 10031
};                                                                                                                   // 10032
module.exports = SequentialLayout;                                                                                   // 10033
},{"famous/core/OptionsManager":15,"famous/core/Transform":20,"famous/core/ViewSequence":22,"famous/utilities/Utility":86}],100:[function(require,module,exports){
var Scene = require('famous/core/Scene');                                                                            // 10035
var Surface = require('famous/core/Surface');                                                                        // 10036
var Transform = require('famous/core/Transform');                                                                    // 10037
var View = require('famous/core/View');                                                                              // 10038
function NavigationBar(options) {                                                                                    // 10039
    View.apply(this, arguments);                                                                                     // 10040
    this.title = new Surface({                                                                                       // 10041
        classes: this.options.classes,                                                                               // 10042
        content: this.options.content                                                                                // 10043
    });                                                                                                              // 10044
    this.back = new Surface({                                                                                        // 10045
        size: [                                                                                                      // 10046
            this.options.size[1],                                                                                    // 10047
            this.options.size[1]                                                                                     // 10048
        ],                                                                                                           // 10049
        classes: this.options.classes,                                                                               // 10050
        content: this.options.backContent                                                                            // 10051
    });                                                                                                              // 10052
    this.back.on('click', function () {                                                                              // 10053
        this._eventOutput.emit('back', {});                                                                          // 10054
    }.bind(this));                                                                                                   // 10055
    this.more = new Surface({                                                                                        // 10056
        size: [                                                                                                      // 10057
            this.options.size[1],                                                                                    // 10058
            this.options.size[1]                                                                                     // 10059
        ],                                                                                                           // 10060
        classes: this.options.classes,                                                                               // 10061
        content: this.options.moreContent                                                                            // 10062
    });                                                                                                              // 10063
    this.more.on('click', function () {                                                                              // 10064
        this._eventOutput.emit('more', {});                                                                          // 10065
    }.bind(this));                                                                                                   // 10066
    this.layout = new Scene({                                                                                        // 10067
        id: 'master',                                                                                                // 10068
        size: this.options.size,                                                                                     // 10069
        target: [                                                                                                    // 10070
            {                                                                                                        // 10071
                transform: Transform.inFront,                                                                        // 10072
                origin: [                                                                                            // 10073
                    0,                                                                                               // 10074
                    0.5                                                                                              // 10075
                ],                                                                                                   // 10076
                target: this.back                                                                                    // 10077
            },                                                                                                       // 10078
            {                                                                                                        // 10079
                origin: [                                                                                            // 10080
                    0.5,                                                                                             // 10081
                    0.5                                                                                              // 10082
                ],                                                                                                   // 10083
                target: this.title                                                                                   // 10084
            },                                                                                                       // 10085
            {                                                                                                        // 10086
                transform: Transform.inFront,                                                                        // 10087
                origin: [                                                                                            // 10088
                    1,                                                                                               // 10089
                    0.5                                                                                              // 10090
                ],                                                                                                   // 10091
                target: this.more                                                                                    // 10092
            }                                                                                                        // 10093
        ]                                                                                                            // 10094
    });                                                                                                              // 10095
    this._add(this.layout);                                                                                          // 10096
    this._optionsManager.on('change', function (event) {                                                             // 10097
        var key = event.id;                                                                                          // 10098
        var data = event.value;                                                                                      // 10099
        if (key === 'size') {                                                                                        // 10100
            this.layout.id.master.setSize(data);                                                                     // 10101
            this.title.setSize(data);                                                                                // 10102
            this.back.setSize([                                                                                      // 10103
                data[1],                                                                                             // 10104
                data[1]                                                                                              // 10105
            ]);                                                                                                      // 10106
            this.more.setSize([                                                                                      // 10107
                data[1],                                                                                             // 10108
                data[1]                                                                                              // 10109
            ]);                                                                                                      // 10110
        } else if (key === 'backClasses') {                                                                          // 10111
            this.back.setOptions({ classes: this.options.classes.concat(this.options.backClasses) });                // 10112
        } else if (key === 'backContent') {                                                                          // 10113
            this.back.setContent(this.options.backContent);                                                          // 10114
        } else if (key === 'classes') {                                                                              // 10115
            this.title.setOptions({ classes: this.options.classes });                                                // 10116
            this.back.setOptions({ classes: this.options.classes.concat(this.options.backClasses) });                // 10117
            this.more.setOptions({ classes: this.options.classes.concat(this.options.moreClasses) });                // 10118
        } else if (key === 'content') {                                                                              // 10119
            this.setContent(this.options.content);                                                                   // 10120
        } else if (key === 'moreClasses') {                                                                          // 10121
            this.more.setOptions({ classes: this.options.classes.concat(this.options.moreClasses) });                // 10122
        } else if (key === 'moreContent') {                                                                          // 10123
            this.more.setContent(this.options.content);                                                              // 10124
        }                                                                                                            // 10125
    }.bind(this));                                                                                                   // 10126
}                                                                                                                    // 10127
NavigationBar.prototype = Object.create(View.prototype);                                                             // 10128
NavigationBar.prototype.constructor = NavigationBar;                                                                 // 10129
NavigationBar.DEFAULT_OPTIONS = {                                                                                    // 10130
    size: [                                                                                                          // 10131
        undefined,                                                                                                   // 10132
        50                                                                                                           // 10133
    ],                                                                                                               // 10134
    backClasses: ['back'],                                                                                           // 10135
    backContent: '&#x25c0;',                                                                                         // 10136
    classes: ['navigation'],                                                                                         // 10137
    content: '',                                                                                                     // 10138
    moreClasses: ['more'],                                                                                           // 10139
    moreContent: '&#x271a;'                                                                                          // 10140
};                                                                                                                   // 10141
NavigationBar.prototype.setContent = function setContent(content) {                                                  // 10142
    return this.title.setContent(content);                                                                           // 10143
};                                                                                                                   // 10144
module.exports = NavigationBar;                                                                                      // 10145
},{"famous/core/Scene":17,"famous/core/Surface":19,"famous/core/Transform":20,"famous/core/View":21}],101:[function(require,module,exports){
var Surface = require('famous/core/Surface');                                                                        // 10147
var CanvasSurface = require('famous/surfaces/CanvasSurface');                                                        // 10148
var Transform = require('famous/core/Transform');                                                                    // 10149
var EventHandler = require('famous/core/EventHandler');                                                              // 10150
var Utilities = require('famous/math/Utilities');                                                                    // 10151
var OptionsManager = require('famous/core/OptionsManager');                                                          // 10152
var MouseSync = require('famous/inputs/MouseSync');                                                                  // 10153
var TouchSync = require('famous/inputs/TouchSync');                                                                  // 10154
var GenericSync = require('famous/inputs/GenericSync');                                                              // 10155
GenericSync.register({                                                                                               // 10156
    mouse: MouseSync,                                                                                                // 10157
    touch: TouchSync                                                                                                 // 10158
});                                                                                                                  // 10159
function Slider(options) {                                                                                           // 10160
    this.options = Object.create(Slider.DEFAULT_OPTIONS);                                                            // 10161
    this.optionsManager = new OptionsManager(this.options);                                                          // 10162
    if (options)                                                                                                     // 10163
        this.setOptions(options);                                                                                    // 10164
    this.indicator = new CanvasSurface({                                                                             // 10165
        size: this.options.indicatorSize,                                                                            // 10166
        classes: ['slider-back']                                                                                     // 10167
    });                                                                                                              // 10168
    this.label = new Surface({                                                                                       // 10169
        size: this.options.labelSize,                                                                                // 10170
        content: this.options.label,                                                                                 // 10171
        properties: { pointerEvents: 'none' },                                                                       // 10172
        classes: ['slider-label']                                                                                    // 10173
    });                                                                                                              // 10174
    this.eventOutput = new EventHandler();                                                                           // 10175
    this.eventInput = new EventHandler();                                                                            // 10176
    EventHandler.setInputHandler(this, this.eventInput);                                                             // 10177
    EventHandler.setOutputHandler(this, this.eventOutput);                                                           // 10178
    var scale = (this.options.range[1] - this.options.range[0]) / this.options.indicatorSize[0];                     // 10179
    this.sync = new GenericSync([                                                                                    // 10180
        'mouse',                                                                                                     // 10181
        'touch'                                                                                                      // 10182
    ], {                                                                                                             // 10183
        scale: scale,                                                                                                // 10184
        direction: GenericSync.DIRECTION_X                                                                           // 10185
    });                                                                                                              // 10186
    this.indicator.pipe(this.sync);                                                                                  // 10187
    this.sync.pipe(this);                                                                                            // 10188
    this.eventInput.on('update', function (data) {                                                                   // 10189
        this.set(data.position);                                                                                     // 10190
    }.bind(this));                                                                                                   // 10191
    this._drawPos = 0;                                                                                               // 10192
    _updateLabel.call(this);                                                                                         // 10193
}                                                                                                                    // 10194
Slider.DEFAULT_OPTIONS = {                                                                                           // 10195
    size: [                                                                                                          // 10196
        200,                                                                                                         // 10197
        60                                                                                                           // 10198
    ],                                                                                                               // 10199
    indicatorSize: [                                                                                                 // 10200
        200,                                                                                                         // 10201
        30                                                                                                           // 10202
    ],                                                                                                               // 10203
    labelSize: [                                                                                                     // 10204
        200,                                                                                                         // 10205
        30                                                                                                           // 10206
    ],                                                                                                               // 10207
    range: [                                                                                                         // 10208
        0,                                                                                                           // 10209
        1                                                                                                            // 10210
    ],                                                                                                               // 10211
    precision: 2,                                                                                                    // 10212
    value: 0,                                                                                                        // 10213
    label: '',                                                                                                       // 10214
    fillColor: 'rgba(170, 170, 170, 1)'                                                                              // 10215
};                                                                                                                   // 10216
function _updateLabel() {                                                                                            // 10217
    this.label.setContent(this.options.label + '<span style="float: right">' + this.get().toFixed(this.options.precision) + '</span>');
}                                                                                                                    // 10219
Slider.prototype.setOptions = function setOptions(options) {                                                         // 10220
    return this.optionsManager.setOptions(options);                                                                  // 10221
};                                                                                                                   // 10222
Slider.prototype.get = function get() {                                                                              // 10223
    return this.options.value;                                                                                       // 10224
};                                                                                                                   // 10225
Slider.prototype.set = function set(value) {                                                                         // 10226
    if (value === this.options.value)                                                                                // 10227
        return;                                                                                                      // 10228
    this.options.value = Utilities.clamp(value, this.options.range);                                                 // 10229
    _updateLabel.call(this);                                                                                         // 10230
    this.eventOutput.emit('change', { value: value });                                                               // 10231
};                                                                                                                   // 10232
Slider.prototype.getSize = function getSize() {                                                                      // 10233
    return this.options.size;                                                                                        // 10234
};                                                                                                                   // 10235
Slider.prototype.render = function render() {                                                                        // 10236
    var range = this.options.range;                                                                                  // 10237
    var fillSize = Math.floor((this.get() - range[0]) / (range[1] - range[0]) * this.options.indicatorSize[0]);      // 10238
    if (fillSize < this._drawPos) {                                                                                  // 10239
        this.indicator.getContext('2d').clearRect(fillSize, 0, this._drawPos - fillSize + 1, this.options.indicatorSize[1]);
    } else if (fillSize > this._drawPos) {                                                                           // 10241
        var ctx = this.indicator.getContext('2d');                                                                   // 10242
        ctx.fillStyle = this.options.fillColor;                                                                      // 10243
        ctx.fillRect(this._drawPos - 1, 0, fillSize - this._drawPos + 1, this.options.indicatorSize[1]);             // 10244
    }                                                                                                                // 10245
    this._drawPos = fillSize;                                                                                        // 10246
    return {                                                                                                         // 10247
        size: this.options.size,                                                                                     // 10248
        target: [                                                                                                    // 10249
            {                                                                                                        // 10250
                origin: [                                                                                            // 10251
                    0,                                                                                               // 10252
                    0                                                                                                // 10253
                ],                                                                                                   // 10254
                target: this.indicator.render()                                                                      // 10255
            },                                                                                                       // 10256
            {                                                                                                        // 10257
                transform: Transform.translate(0, 0, 1),                                                             // 10258
                origin: [                                                                                            // 10259
                    0,                                                                                               // 10260
                    0                                                                                                // 10261
                ],                                                                                                   // 10262
                target: this.label.render()                                                                          // 10263
            }                                                                                                        // 10264
        ]                                                                                                            // 10265
    };                                                                                                               // 10266
};                                                                                                                   // 10267
module.exports = Slider;                                                                                             // 10268
},{"famous/core/EventHandler":12,"famous/core/OptionsManager":15,"famous/core/Surface":19,"famous/core/Transform":20,"famous/inputs/GenericSync":28,"famous/inputs/MouseSync":29,"famous/inputs/TouchSync":34,"famous/math/Utilities":40,"famous/surfaces/CanvasSurface":67}],102:[function(require,module,exports){
var Utility = require('famous/utilities/Utility');                                                                   // 10270
var View = require('famous/core/View');                                                                              // 10271
var GridLayout = require('famous/views/GridLayout');                                                                 // 10272
var ToggleButton = require('./ToggleButton');                                                                        // 10273
function TabBar(options) {                                                                                           // 10274
    View.apply(this, arguments);                                                                                     // 10275
    this.layout = new GridLayout();                                                                                  // 10276
    this.buttons = [];                                                                                               // 10277
    this._buttonIds = {};                                                                                            // 10278
    this._buttonCallbacks = {};                                                                                      // 10279
    this.layout.sequenceFrom(this.buttons);                                                                          // 10280
    this._add(this.layout);                                                                                          // 10281
    this._optionsManager.on('change', _updateOptions.bind(this));                                                    // 10282
}                                                                                                                    // 10283
TabBar.prototype = Object.create(View.prototype);                                                                    // 10284
TabBar.prototype.constructor = TabBar;                                                                               // 10285
TabBar.DEFAULT_OPTIONS = {                                                                                           // 10286
    sections: [],                                                                                                    // 10287
    widget: ToggleButton,                                                                                            // 10288
    size: [                                                                                                          // 10289
        undefined,                                                                                                   // 10290
        50                                                                                                           // 10291
    ],                                                                                                               // 10292
    direction: Utility.Direction.X,                                                                                  // 10293
    buttons: { toggleMode: ToggleButton.ON }                                                                         // 10294
};                                                                                                                   // 10295
function _updateOptions(data) {                                                                                      // 10296
    var id = data.id;                                                                                                // 10297
    var value = data.value;                                                                                          // 10298
    if (id === 'direction') {                                                                                        // 10299
        this.layout.setOptions({ dimensions: _resolveGridDimensions.call(this.buttons.length, this.options.direction) });
    } else if (id === 'buttons') {                                                                                   // 10301
        for (var i in this.buttons) {                                                                                // 10302
            this.buttons[i].setOptions(value);                                                                       // 10303
        }                                                                                                            // 10304
    } else if (id === 'sections') {                                                                                  // 10305
        for (var sectionId in this.options.sections) {                                                               // 10306
            this.defineSection(sectionId, this.options.sections[sectionId]);                                         // 10307
        }                                                                                                            // 10308
    }                                                                                                                // 10309
}                                                                                                                    // 10310
function _resolveGridDimensions(count, direction) {                                                                  // 10311
    if (direction === Utility.Direction.X)                                                                           // 10312
        return [                                                                                                     // 10313
            count,                                                                                                   // 10314
            1                                                                                                        // 10315
        ];                                                                                                           // 10316
    else                                                                                                             // 10317
        return [                                                                                                     // 10318
            1,                                                                                                       // 10319
            count                                                                                                    // 10320
        ];                                                                                                           // 10321
}                                                                                                                    // 10322
TabBar.prototype.defineSection = function defineSection(id, content) {                                               // 10323
    var button;                                                                                                      // 10324
    var i = this._buttonIds[id];                                                                                     // 10325
    if (i === undefined) {                                                                                           // 10326
        i = this.buttons.length;                                                                                     // 10327
        this._buttonIds[id] = i;                                                                                     // 10328
        var widget = this.options.widget;                                                                            // 10329
        button = new widget();                                                                                       // 10330
        this.buttons[i] = button;                                                                                    // 10331
        this.layout.setOptions({ dimensions: _resolveGridDimensions(this.buttons.length, this.options.direction) }); // 10332
    } else {                                                                                                         // 10333
        button = this.buttons[i];                                                                                    // 10334
        button.unbind('select', this._buttonCallbacks[id]);                                                          // 10335
    }                                                                                                                // 10336
    if (this.options.buttons)                                                                                        // 10337
        button.setOptions(this.options.buttons);                                                                     // 10338
    button.setOptions(content);                                                                                      // 10339
    this._buttonCallbacks[id] = this.select.bind(this, id);                                                          // 10340
    button.on('select', this._buttonCallbacks[id]);                                                                  // 10341
};                                                                                                                   // 10342
TabBar.prototype.select = function select(id) {                                                                      // 10343
    var btn = this._buttonIds[id];                                                                                   // 10344
    if (this.buttons[btn] && this.buttons[btn].isSelected()) {                                                       // 10345
        this._eventOutput.emit('select', { id: id });                                                                // 10346
    } else if (this.buttons[btn]) {                                                                                  // 10347
        this.buttons[btn].select();                                                                                  // 10348
    }                                                                                                                // 10349
    for (var i = 0; i < this.buttons.length; i++) {                                                                  // 10350
        if (i !== btn)                                                                                               // 10351
            this.buttons[i].deselect();                                                                              // 10352
    }                                                                                                                // 10353
};                                                                                                                   // 10354
module.exports = TabBar;                                                                                             // 10355
},{"./ToggleButton":103,"famous/core/View":21,"famous/utilities/Utility":86,"famous/views/GridLayout":92}],103:[function(require,module,exports){
var Surface = require('famous/core/Surface');                                                                        // 10357
var EventHandler = require('famous/core/EventHandler');                                                              // 10358
var RenderController = require('famous/views/RenderController');                                                     // 10359
function ToggleButton(options) {                                                                                     // 10360
    this.options = {                                                                                                 // 10361
        content: '',                                                                                                 // 10362
        offClasses: ['off'],                                                                                         // 10363
        onClasses: ['on'],                                                                                           // 10364
        size: undefined,                                                                                             // 10365
        outTransition: {                                                                                             // 10366
            curve: 'easeInOut',                                                                                      // 10367
            duration: 300                                                                                            // 10368
        },                                                                                                           // 10369
        inTransition: {                                                                                              // 10370
            curve: 'easeInOut',                                                                                      // 10371
            duration: 300                                                                                            // 10372
        },                                                                                                           // 10373
        toggleMode: ToggleButton.TOGGLE,                                                                             // 10374
        crossfade: true                                                                                              // 10375
    };                                                                                                               // 10376
    this._eventOutput = new EventHandler();                                                                          // 10377
    EventHandler.setOutputHandler(this, this._eventOutput);                                                          // 10378
    this.offSurface = new Surface();                                                                                 // 10379
    this.offSurface.on('click', function () {                                                                        // 10380
        if (this.options.toggleMode !== ToggleButton.OFF)                                                            // 10381
            this.select();                                                                                           // 10382
    }.bind(this));                                                                                                   // 10383
    this.offSurface.pipe(this._eventOutput);                                                                         // 10384
    this.onSurface = new Surface();                                                                                  // 10385
    this.onSurface.on('click', function () {                                                                         // 10386
        if (this.options.toggleMode !== ToggleButton.ON)                                                             // 10387
            this.deselect();                                                                                         // 10388
    }.bind(this));                                                                                                   // 10389
    this.onSurface.pipe(this._eventOutput);                                                                          // 10390
    this.arbiter = new RenderController({ overlap: this.options.crossfade });                                        // 10391
    this.deselect();                                                                                                 // 10392
    if (options)                                                                                                     // 10393
        this.setOptions(options);                                                                                    // 10394
}                                                                                                                    // 10395
ToggleButton.OFF = 0;                                                                                                // 10396
ToggleButton.ON = 1;                                                                                                 // 10397
ToggleButton.TOGGLE = 2;                                                                                             // 10398
ToggleButton.prototype.select = function select() {                                                                  // 10399
    this.selected = true;                                                                                            // 10400
    this.arbiter.show(this.onSurface, this.options.inTransition);                                                    // 10401
    this._eventOutput.emit('select');                                                                                // 10402
};                                                                                                                   // 10403
ToggleButton.prototype.deselect = function deselect() {                                                              // 10404
    this.selected = false;                                                                                           // 10405
    this.arbiter.show(this.offSurface, this.options.outTransition);                                                  // 10406
    this._eventOutput.emit('deselect');                                                                              // 10407
};                                                                                                                   // 10408
ToggleButton.prototype.isSelected = function isSelected() {                                                          // 10409
    return this.selected;                                                                                            // 10410
};                                                                                                                   // 10411
ToggleButton.prototype.setOptions = function setOptions(options) {                                                   // 10412
    if (options.content !== undefined) {                                                                             // 10413
        this.options.content = options.content;                                                                      // 10414
        this.offSurface.setContent(this.options.content);                                                            // 10415
        this.onSurface.setContent(this.options.content);                                                             // 10416
    }                                                                                                                // 10417
    if (options.offClasses) {                                                                                        // 10418
        this.options.offClasses = options.offClasses;                                                                // 10419
        this.offSurface.setClasses(this.options.offClasses);                                                         // 10420
    }                                                                                                                // 10421
    if (options.onClasses) {                                                                                         // 10422
        this.options.onClasses = options.onClasses;                                                                  // 10423
        this.onSurface.setClasses(this.options.onClasses);                                                           // 10424
    }                                                                                                                // 10425
    if (options.size !== undefined) {                                                                                // 10426
        this.options.size = options.size;                                                                            // 10427
        this.onSurface.setSize(this.options.size);                                                                   // 10428
        this.offSurface.setSize(this.options.size);                                                                  // 10429
    }                                                                                                                // 10430
    if (options.toggleMode !== undefined)                                                                            // 10431
        this.options.toggleMode = options.toggleMode;                                                                // 10432
    if (options.outTransition !== undefined)                                                                         // 10433
        this.options.outTransition = options.outTransition;                                                          // 10434
    if (options.inTransition !== undefined)                                                                          // 10435
        this.options.inTransition = options.inTransition;                                                            // 10436
    if (options.crossfade !== undefined) {                                                                           // 10437
        this.options.crossfade = options.crossfade;                                                                  // 10438
        this.arbiter.setOptions({ overlap: this.options.crossfade });                                                // 10439
    }                                                                                                                // 10440
};                                                                                                                   // 10441
ToggleButton.prototype.getSize = function getSize() {                                                                // 10442
    return this.options.size;                                                                                        // 10443
};                                                                                                                   // 10444
ToggleButton.prototype.render = function render() {                                                                  // 10445
    return this.arbiter.render();                                                                                    // 10446
};                                                                                                                   // 10447
module.exports = ToggleButton;                                                                                       // 10448
},{"famous/core/EventHandler":12,"famous/core/Surface":19,"famous/views/RenderController":95}],104:[function(require,module,exports){
// load css                                                                                                          // 10450
require('./styles');                                                                                                 // 10451
                                                                                                                     // 10452
// Load polyfills                                                                                                    // 10453
require('famous-polyfills');                                                                                         // 10454
                                                                                                                     // 10455
famous = {                                                                                                           // 10456
  core: {                                                                                                            // 10457
    Context: require('famous/core/Context'),                                                                         // 10458
    ElementAllocator: require('famous/core/ElementAllocator'),                                                       // 10459
    Engine: require('famous/core/Engine'),                                                                           // 10460
    Entity: require('famous/core/Entity'),                                                                           // 10461
    EventEmitter: require('famous/core/EventEmitter'),                                                               // 10462
    EventHandler: require('famous/core/EventHandler'),                                                               // 10463
    Group: require('famous/core/Group'),                                                                             // 10464
    Modifier: require('famous/core/Modifier'),                                                                       // 10465
    OptionsManager: require('famous/core/OptionsManager'),                                                           // 10466
    RenderNode: require('famous/core/RenderNode'),                                                                   // 10467
    Scene: require('famous/core/Scene'),                                                                             // 10468
    SpecParser: require('famous/core/SpecParser'),                                                                   // 10469
    Surface: require('famous/core/Surface'),                                                                         // 10470
    Transform: require('famous/core/Transform'),                                                                     // 10471
    View: require('famous/core/View'),                                                                               // 10472
    ViewSequence: require('famous/core/ViewSequence')                                                                // 10473
  },                                                                                                                 // 10474
  events: {                                                                                                          // 10475
    EventArbiter: require('famous/events/EventArbiter'),                                                             // 10476
    EventFilter: require('famous/events/EventFilter'),                                                               // 10477
    EventMapper: require('famous/events/EventMapper')                                                                // 10478
  },                                                                                                                 // 10479
  inputs: {                                                                                                          // 10480
    Accumulator: require('famous/inputs/Accumulator'),                                                               // 10481
    FastClick: require('famous/inputs/FastClick'),                                                                   // 10482
    GenericSync: require('famous/inputs/GenericSync'),                                                               // 10483
    MouseSync: require('famous/inputs/MouseSync'),                                                                   // 10484
    PinchSync: require('famous/inputs/PinchSync'),                                                                   // 10485
    RotateSync: require('famous/inputs/RotateSync'),                                                                 // 10486
    ScaleSync: require('famous/inputs/ScaleSync'),                                                                   // 10487
    ScrollSync: require('famous/inputs/ScrollSync'),                                                                 // 10488
    TouchSync: require('famous/inputs/TouchSync'),                                                                   // 10489
    TouchTracker: require('famous/inputs/TouchTracker'),                                                             // 10490
    TwoFingerSync: require('famous/inputs/TwoFingerSync')                                                            // 10491
  },                                                                                                                 // 10492
  math: {                                                                                                            // 10493
    Matrix: require('famous/math/Matrix'),                                                                           // 10494
    Quaternion: require('famous/math/Quaternion'),                                                                   // 10495
    Random: require('famous/math/Random'),                                                                           // 10496
    Utilities: require('famous/math/Utilities'),                                                                     // 10497
    Vector: require('famous/math/Vector')                                                                            // 10498
  },                                                                                                                 // 10499
  modifiers: {                                                                                                       // 10500
    Draggable: require('famous/modifiers/Draggable'),                                                                // 10501
    Fader: require('famous/modifiers/Fader'),                                                                        // 10502
    ModifierChain: require('famous/modifiers/ModifierChain'),                                                        // 10503
    StateModifier: require('famous/modifiers/StateModifier')                                                         // 10504
  },                                                                                                                 // 10505
  physics: {                                                                                                         // 10506
    bodies: {                                                                                                        // 10507
      Body: require('famous/physics/bodies/Body'),                                                                   // 10508
      Circle: require('famous/physics/bodies/Circle'),                                                               // 10509
      Particle: require('famous/physics/bodies/Particle'),                                                           // 10510
      Rectangle: require('famous/physics/bodies/Rectangle')                                                          // 10511
    },                                                                                                               // 10512
    constraints: {                                                                                                   // 10513
      Collision: require('famous/physics/constraints/Collision'),                                                    // 10514
      Constraint: require('famous/physics/constraints/Constraint'),                                                  // 10515
      Curve: require('famous/physics/constraints/Curve'),                                                            // 10516
      Distance: require('famous/physics/constraints/Distance'),                                                      // 10517
      Snap: require('famous/physics/constraints/Snap'),                                                              // 10518
      Surface: require('famous/physics/constraints/Surface'),                                                        // 10519
      Wall: require('famous/physics/constraints/Wall'),                                                              // 10520
      Walls: require('famous/physics/constraints/Walls')                                                             // 10521
    },                                                                                                               // 10522
    forces: {                                                                                                        // 10523
      Drag: require('famous/physics/forces/Drag'),                                                                   // 10524
      Force: require('famous/physics/forces/Force'),                                                                 // 10525
      Repulsion: require('famous/physics/forces/Repulsion'),                                                         // 10526
      RotationalDrag: require('famous/physics/forces/RotationalDrag'),                                               // 10527
      RotationalSpring: require('famous/physics/forces/RotationalSpring'),                                           // 10528
      Spring: require('famous/physics/forces/Spring'),                                                               // 10529
      VectorField: require('famous/physics/forces/VectorField')                                                      // 10530
    },                                                                                                               // 10531
    integrators: {                                                                                                   // 10532
      SymplecticEuler: require('famous/physics/integrators/SymplecticEuler')                                         // 10533
    },                                                                                                               // 10534
    PhysicsEngine: require('famous/physics/PhysicsEngine')                                                           // 10535
  },                                                                                                                 // 10536
  surfaces: {                                                                                                        // 10537
    CanvasSurface: require('famous/surfaces/CanvasSurface'),                                                         // 10538
    ContainerSurface: require('famous/surfaces/ContainerSurface'),                                                   // 10539
    FormContainerSurface: require('famous/surfaces/FormContainerSurface'),                                           // 10540
    ImageSurface: require('famous/surfaces/ImageSurface'),                                                           // 10541
    InputSurface: require('famous/surfaces/InputSurface'),                                                           // 10542
    SubmitInputSurface: require('famous/surfaces/SubmitInputSurface'),                                               // 10543
    TextareaSurface: require('famous/surfaces/TextareaSurface'),                                                     // 10544
    VideoSurface: require('famous/surfaces/VideoSurface')                                                            // 10545
  },                                                                                                                 // 10546
  transitions: {                                                                                                     // 10547
    CachedMap: require('famous/transitions/CachedMap'),                                                              // 10548
    Easing: require('famous/transitions/Easing'),                                                                    // 10549
    MultipleTransition: require('famous/transitions/MultipleTransition'),                                            // 10550
    SnapTransition: require('famous/transitions/SnapTransition'),                                                    // 10551
    SpringTransition: require('famous/transitions/SpringTransition'),                                                // 10552
    Transitionable: require('famous/transitions/Transitionable'),                                                    // 10553
    TransitionableTransform: require('famous/transitions/TransitionableTransform'),                                  // 10554
    TweenTransition: require('famous/transitions/TweenTransition'),                                                  // 10555
    WallTransition: require('famous/transitions/WallTransition')                                                     // 10556
  },                                                                                                                 // 10557
  utilities: {                                                                                                       // 10558
    KeyCodes: require('famous/utilities/KeyCodes'),                                                                  // 10559
    Timer: require('famous/utilities/Timer'),                                                                        // 10560
    Utility: require('famous/utilities/Utility')                                                                     // 10561
  },                                                                                                                 // 10562
  views: {                                                                                                           // 10563
    ContextualView: require('famous/views/ContextualView'),                                                          // 10564
    Deck: require('famous/views/Deck'),                                                                              // 10565
    EdgeSwapper: require('famous/views/EdgeSwapper'),                                                                // 10566
    FlexibleLayout: require('famous/views/FlexibleLayout'),                                                          // 10567
    Flipper: require('famous/views/Flipper'),                                                                        // 10568
    GridLayout: require('famous/views/GridLayout'),                                                                  // 10569
    HeaderFooterLayout: require('famous/views/HeaderFooterLayout'),                                                  // 10570
    Lightbox: require('famous/views/Lightbox'),                                                                      // 10571
    RenderController: require('famous/views/RenderController'),                                                      // 10572
    ScrollContainer: require('famous/views/ScrollContainer'),                                                        // 10573
    Scroller: require('famous/views/Scroller'),                                                                      // 10574
    Scrollview: require('famous/views/Scrollview'),                                                                  // 10575
    SequentialLayout: require('famous/views/SequentialLayout')                                                       // 10576
  },                                                                                                                 // 10577
  widgets: {                                                                                                         // 10578
    NavigationBar: require('famous/widgets/NavigationBar'),                                                          // 10579
    Slider: require('famous/widgets/Slider'),                                                                        // 10580
    TabBar: require('famous/widgets/TabBar'),                                                                        // 10581
    ToggleButton: require('famous/widgets/ToggleButton')                                                             // 10582
  }                                                                                                                  // 10583
};                                                                                                                   // 10584
                                                                                                                     // 10585
},{"./styles":107,"famous-polyfills":4,"famous/core/Context":6,"famous/core/ElementAllocator":7,"famous/core/Engine":9,"famous/core/Entity":10,"famous/core/EventEmitter":11,"famous/core/EventHandler":12,"famous/core/Group":13,"famous/core/Modifier":14,"famous/core/OptionsManager":15,"famous/core/RenderNode":16,"famous/core/Scene":17,"famous/core/SpecParser":18,"famous/core/Surface":19,"famous/core/Transform":20,"famous/core/View":21,"famous/core/ViewSequence":22,"famous/events/EventArbiter":23,"famous/events/EventFilter":24,"famous/events/EventMapper":25,"famous/inputs/Accumulator":26,"famous/inputs/FastClick":27,"famous/inputs/GenericSync":28,"famous/inputs/MouseSync":29,"famous/inputs/PinchSync":30,"famous/inputs/RotateSync":31,"famous/inputs/ScaleSync":32,"famous/inputs/ScrollSync":33,"famous/inputs/TouchSync":34,"famous/inputs/TouchTracker":35,"famous/inputs/TwoFingerSync":36,"famous/math/Matrix":37,"famous/math/Quaternion":38,"famous/math/Random":39,"famous/math/Utilities":40,"famous/math/Vector":41,"famous/modifiers/Draggable":42,"famous/modifiers/Fader":43,"famous/modifiers/ModifierChain":44,"famous/modifiers/StateModifier":45,"famous/physics/PhysicsEngine":46,"famous/physics/bodies/Body":47,"famous/physics/bodies/Circle":48,"famous/physics/bodies/Particle":49,"famous/physics/bodies/Rectangle":50,"famous/physics/constraints/Collision":51,"famous/physics/constraints/Constraint":52,"famous/physics/constraints/Curve":53,"famous/physics/constraints/Distance":54,"famous/physics/constraints/Snap":55,"famous/physics/constraints/Surface":56,"famous/physics/constraints/Wall":57,"famous/physics/constraints/Walls":58,"famous/physics/forces/Drag":59,"famous/physics/forces/Force":60,"famous/physics/forces/Repulsion":61,"famous/physics/forces/RotationalDrag":62,"famous/physics/forces/RotationalSpring":63,"famous/physics/forces/Spring":64,"famous/physics/forces/VectorField":65,"famous/physics/integrators/SymplecticEuler":66,"famous/surfaces/CanvasSurface":67,"famous/surfaces/ContainerSurface":68,"famous/surfaces/FormContainerSurface":69,"famous/surfaces/ImageSurface":70,"famous/surfaces/InputSurface":71,"famous/surfaces/SubmitInputSurface":72,"famous/surfaces/TextareaSurface":73,"famous/surfaces/VideoSurface":74,"famous/transitions/CachedMap":75,"famous/transitions/Easing":76,"famous/transitions/MultipleTransition":77,"famous/transitions/SnapTransition":78,"famous/transitions/SpringTransition":79,"famous/transitions/Transitionable":80,"famous/transitions/TransitionableTransform":81,"famous/transitions/TweenTransition":82,"famous/transitions/WallTransition":83,"famous/utilities/KeyCodes":84,"famous/utilities/Timer":85,"famous/utilities/Utility":86,"famous/views/ContextualView":87,"famous/views/Deck":88,"famous/views/EdgeSwapper":89,"famous/views/FlexibleLayout":90,"famous/views/Flipper":91,"famous/views/GridLayout":92,"famous/views/HeaderFooterLayout":93,"famous/views/Lightbox":94,"famous/views/RenderController":95,"famous/views/ScrollContainer":96,"famous/views/Scroller":97,"famous/views/Scrollview":98,"famous/views/SequentialLayout":99,"famous/widgets/NavigationBar":100,"famous/widgets/Slider":101,"famous/widgets/TabBar":102,"famous/widgets/ToggleButton":103}],105:[function(require,module,exports){
var css = "html {\n  background: #fff;\n}\n\n.backfaceVisibility {\n  -webkit-backface-visibility: visible;\n  backface-visibility: visible;\n}\n"; (require("/home/jens/mjn-famous/node_modules/cssify"))(css); module.exports = css;
},{"/home/jens/mjn-famous/node_modules/cssify":1}],106:[function(require,module,exports){                            // 10588
var css = "/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Owner: mark@famo.us\n * @license MPL 2.0\n * @copyright Famous Industries, Inc. 2014\n */\n\n\nhtml {\n    width: 100%;\n    height: 100%;\n    margin: 0px;\n    padding: 0px;\n    overflow: hidden;\n    -webkit-transform-style: preserve-3d;\n    transform-style: preserve-3d;\n}\n\nbody {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    margin: 0px;\n    padding: 0px;\n    -webkit-transform-style: preserve-3d;\n    transform-style: preserve-3d;\n    -webkit-font-smoothing: antialiased;\n    -webkit-tap-highlight-color: transparent;\n    -webkit-perspective: 0;\n    perspective: none;\n    overflow: hidden;\n}\n\n.famous-container, .famous-group {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    bottom: 0px;\n    right: 0px;\n    overflow: visible;\n    -webkit-transform-style: preserve-3d;\n    transform-style: preserve-3d;\n    -webkit-backface-visibility: visible;\n    backface-visibility: visible;\n    pointer-events: none;\n}\n\n.famous-group {\n    width: 0px;\n    height: 0px;\n    margin: 0px;\n    padding: 0px;\n    -webkit-transform-style: preserve-3d;\n    transform-style: preserve-3d;\n}\n\n.famous-surface {\n    position: absolute;\n    -webkit-transform-origin: center center;\n    transform-origin: center center;\n    -webkit-backface-visibility: hidden;\n    backface-visibility: hidden;\n    -webkit-transform-style: flat;\n    transform-style: preserve-3d; /* performance */\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-tap-highlight-color: transparent;\n    pointer-events: auto;\n}\n\n.famous-container-group {\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\n"; (require("/home/jens/mjn-famous/node_modules/cssify"))(css); module.exports = css;
},{"/home/jens/mjn-famous/node_modules/cssify":1}],107:[function(require,module,exports){                            // 10590
// load css                                                                                                          // 10591
require('./famous.css');                                                                                             // 10592
require('./app.css');                                                                                                // 10593
                                                                                                                     // 10594
},{"./app.css":105,"./famous.css":106}]},{},[104])                                                                   // 10595
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9jc3NpZnkvYnJvd3Nlci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzLXBvbHlmaWxscy9jbGFzc0xpc3QuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy1wb2x5ZmlsbHMvZnVuY3Rpb25Qcm90b3R5cGVCaW5kLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMtcG9seWZpbGxzL2luZGV4LmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMtcG9seWZpbGxzL3JlcXVlc3RBbmltYXRpb25GcmFtZS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2NvcmUvQ29udGV4dC5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2NvcmUvRWxlbWVudEFsbG9jYXRvci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2NvcmUvRWxlbWVudE91dHB1dC5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2NvcmUvRW5naW5lLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvY29yZS9FbnRpdHkuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9jb3JlL0V2ZW50RW1pdHRlci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvY29yZS9Hcm91cC5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2NvcmUvTW9kaWZpZXIuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9jb3JlL09wdGlvbnNNYW5hZ2VyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvY29yZS9SZW5kZXJOb2RlLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvY29yZS9TY2VuZS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2NvcmUvU3BlY1BhcnNlci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2NvcmUvU3VyZmFjZS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2NvcmUvVHJhbnNmb3JtLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvY29yZS9WaWV3LmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvY29yZS9WaWV3U2VxdWVuY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9ldmVudHMvRXZlbnRBcmJpdGVyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvZXZlbnRzL0V2ZW50RmlsdGVyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvZXZlbnRzL0V2ZW50TWFwcGVyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvaW5wdXRzL0FjY3VtdWxhdG9yLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvaW5wdXRzL0Zhc3RDbGljay5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2lucHV0cy9HZW5lcmljU3luYy5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2lucHV0cy9Nb3VzZVN5bmMuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9pbnB1dHMvUGluY2hTeW5jLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvaW5wdXRzL1JvdGF0ZVN5bmMuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9pbnB1dHMvU2NhbGVTeW5jLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvaW5wdXRzL1Njcm9sbFN5bmMuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9pbnB1dHMvVG91Y2hTeW5jLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvaW5wdXRzL1RvdWNoVHJhY2tlci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL2lucHV0cy9Ud29GaW5nZXJTeW5jLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvbWF0aC9NYXRyaXguanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9tYXRoL1F1YXRlcm5pb24uanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9tYXRoL1JhbmRvbS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL21hdGgvVXRpbGl0aWVzLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvbWF0aC9WZWN0b3IuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9tb2RpZmllcnMvRHJhZ2dhYmxlLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvbW9kaWZpZXJzL0ZhZGVyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvbW9kaWZpZXJzL01vZGlmaWVyQ2hhaW4uanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9tb2RpZmllcnMvU3RhdGVNb2RpZmllci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3BoeXNpY3MvUGh5c2ljc0VuZ2luZS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3BoeXNpY3MvYm9kaWVzL0JvZHkuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9waHlzaWNzL2JvZGllcy9DaXJjbGUuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3BoeXNpY3MvYm9kaWVzL1JlY3RhbmdsZS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvQ29sbGlzaW9uLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvcGh5c2ljcy9jb25zdHJhaW50cy9Db25zdHJhaW50LmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvcGh5c2ljcy9jb25zdHJhaW50cy9DdXJ2ZS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvRGlzdGFuY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1NuYXAuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1N1cmZhY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1dhbGwuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1dhbGxzLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvcGh5c2ljcy9mb3JjZXMvRHJhZy5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3BoeXNpY3MvZm9yY2VzL0ZvcmNlLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvcGh5c2ljcy9mb3JjZXMvUmVwdWxzaW9uLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvcGh5c2ljcy9mb3JjZXMvUm90YXRpb25hbERyYWcuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9waHlzaWNzL2ZvcmNlcy9Sb3RhdGlvbmFsU3ByaW5nLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvcGh5c2ljcy9mb3JjZXMvU3ByaW5nLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvcGh5c2ljcy9mb3JjZXMvVmVjdG9yRmllbGQuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9waHlzaWNzL2ludGVncmF0b3JzL1N5bXBsZWN0aWNFdWxlci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3N1cmZhY2VzL0NhbnZhc1N1cmZhY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9zdXJmYWNlcy9Db250YWluZXJTdXJmYWNlLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvc3VyZmFjZXMvRm9ybUNvbnRhaW5lclN1cmZhY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9zdXJmYWNlcy9JbWFnZVN1cmZhY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9zdXJmYWNlcy9JbnB1dFN1cmZhY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9zdXJmYWNlcy9TdWJtaXRJbnB1dFN1cmZhY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9zdXJmYWNlcy9UZXh0YXJlYVN1cmZhY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy9zdXJmYWNlcy9WaWRlb1N1cmZhY2UuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy90cmFuc2l0aW9ucy9DYWNoZWRNYXAuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy90cmFuc2l0aW9ucy9FYXNpbmcuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy90cmFuc2l0aW9ucy9NdWx0aXBsZVRyYW5zaXRpb24uanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy90cmFuc2l0aW9ucy9TbmFwVHJhbnNpdGlvbi5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3RyYW5zaXRpb25zL1NwcmluZ1RyYW5zaXRpb24uanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvdHJhbnNpdGlvbnMvVHdlZW5UcmFuc2l0aW9uLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvdHJhbnNpdGlvbnMvV2FsbFRyYW5zaXRpb24uanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy91dGlsaXRpZXMvS2V5Q29kZXMuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy91dGlsaXRpZXMvVGltZXIuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy91dGlsaXRpZXMvVXRpbGl0eS5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3ZpZXdzL0NvbnRleHR1YWxWaWV3LmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvdmlld3MvRGVjay5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3ZpZXdzL0VkZ2VTd2FwcGVyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvdmlld3MvRmxleGlibGVMYXlvdXQuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy92aWV3cy9GbGlwcGVyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvdmlld3MvR3JpZExheW91dC5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3ZpZXdzL0hlYWRlckZvb3RlckxheW91dC5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3ZpZXdzL0xpZ2h0Ym94LmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvdmlld3MvUmVuZGVyQ29udHJvbGxlci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3ZpZXdzL1Njcm9sbENvbnRhaW5lci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3ZpZXdzL1Njcm9sbGVyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvdmlld3MvU2Nyb2xsdmlldy5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3ZpZXdzL1NlcXVlbnRpYWxMYXlvdXQuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy93aWRnZXRzL05hdmlnYXRpb25CYXIuanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2ZhbW91cy93aWRnZXRzL1NsaWRlci5qcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9ub2RlX21vZHVsZXMvZmFtb3VzL3dpZGdldHMvVGFiQmFyLmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL25vZGVfbW9kdWxlcy9mYW1vdXMvd2lkZ2V0cy9Ub2dnbGVCdXR0b24uanMiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvc3JjL2luZGV4LmpzIiwiL2hvbWUvamVucy9tam4tZmFtb3VzL3NyYy9zdHlsZXMvYXBwLmNzcyIsIi9ob21lL2plbnMvbWpuLWZhbW91cy9zcmMvc3R5bGVzL2ZhbW91cy5jc3MiLCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvc3JjL3N0eWxlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeHJCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0tBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2UUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25JQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SUE7O0FDQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzLCBjdXN0b21Eb2N1bWVudCkge1xuICB2YXIgZG9jID0gY3VzdG9tRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG4gIGlmIChkb2MuY3JlYXRlU3R5bGVTaGVldCkge1xuICAgIGRvYy5jcmVhdGVTdHlsZVNoZWV0KCkuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB2YXIgaGVhZCA9IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLFxuICAgICAgICBzdHlsZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gICAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gIFxuICAgIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvYy5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgICB9XG4gICAgXG4gICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7IFxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5ieVVybCA9IGZ1bmN0aW9uKHVybCkge1xuICBpZiAoZG9jdW1lbnQuY3JlYXRlU3R5bGVTaGVldCkge1xuICAgIGRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQodXJsKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0sXG4gICAgICAgIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG5cbiAgICBsaW5rLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICBsaW5rLmhyZWYgPSB1cmw7XG4gIFxuICAgIGhlYWQuYXBwZW5kQ2hpbGQobGluayk7IFxuICB9XG59O1xuIiwiXG4vKlxuICogY2xhc3NMaXN0LmpzOiBDcm9zcy1icm93c2VyIGZ1bGwgZWxlbWVudC5jbGFzc0xpc3QgaW1wbGVtZW50YXRpb24uXG4gKiAyMDExLTA2LTE1XG4gKlxuICogQnkgRWxpIEdyZXksIGh0dHA6Ly9lbGlncmV5LmNvbVxuICogUHVibGljIERvbWFpbi5cbiAqIE5PIFdBUlJBTlRZIEVYUFJFU1NFRCBPUiBJTVBMSUVELiBVU0UgQVQgWU9VUiBPV04gUklTSy5cbiAqL1xuXG4vKmdsb2JhbCBzZWxmLCBkb2N1bWVudCwgRE9NRXhjZXB0aW9uICovXG5cbi8qISBAc291cmNlIGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9jbGFzc0xpc3QuanMvYmxvYi9tYXN0ZXIvY2xhc3NMaXN0LmpzKi9cblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhKFwiY2xhc3NMaXN0XCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIikpKSB7XG5cbihmdW5jdGlvbiAodmlldykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyXG4gICAgICBjbGFzc0xpc3RQcm9wID0gXCJjbGFzc0xpc3RcIlxuICAgICwgcHJvdG9Qcm9wID0gXCJwcm90b3R5cGVcIlxuICAgICwgZWxlbUN0clByb3RvID0gKHZpZXcuSFRNTEVsZW1lbnQgfHwgdmlldy5FbGVtZW50KVtwcm90b1Byb3BdXG4gICAgLCBvYmpDdHIgPSBPYmplY3RcbiAgICAsIHN0clRyaW0gPSBTdHJpbmdbcHJvdG9Qcm9wXS50cmltIHx8IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgXCJcIik7XG4gICAgfVxuICAgICwgYXJySW5kZXhPZiA9IEFycmF5W3Byb3RvUHJvcF0uaW5kZXhPZiB8fCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgICAgaSA9IDBcbiAgICAgICAgICAgICwgbGVuID0gdGhpcy5sZW5ndGhcbiAgICAgICAgO1xuICAgICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIC8vIFZlbmRvcnM6IHBsZWFzZSBhbGxvdyBjb250ZW50IGNvZGUgdG8gaW5zdGFudGlhdGUgRE9NRXhjZXB0aW9uc1xuICAgICwgRE9NRXggPSBmdW5jdGlvbiAodHlwZSwgbWVzc2FnZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSB0eXBlO1xuICAgICAgICB0aGlzLmNvZGUgPSBET01FeGNlcHRpb25bdHlwZV07XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuICAgICwgY2hlY2tUb2tlbkFuZEdldEluZGV4ID0gZnVuY3Rpb24gKGNsYXNzTGlzdCwgdG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuID09PSBcIlwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXgoXG4gICAgICAgICAgICAgICAgICBcIlNZTlRBWF9FUlJcIlxuICAgICAgICAgICAgICAgICwgXCJBbiBpbnZhbGlkIG9yIGlsbGVnYWwgc3RyaW5nIHdhcyBzcGVjaWZpZWRcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoL1xccy8udGVzdCh0b2tlbikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBET01FeChcbiAgICAgICAgICAgICAgICAgIFwiSU5WQUxJRF9DSEFSQUNURVJfRVJSXCJcbiAgICAgICAgICAgICAgICAsIFwiU3RyaW5nIGNvbnRhaW5zIGFuIGludmFsaWQgY2hhcmFjdGVyXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyckluZGV4T2YuY2FsbChjbGFzc0xpc3QsIHRva2VuKTtcbiAgICB9XG4gICAgLCBDbGFzc0xpc3QgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICAgICAgdHJpbW1lZENsYXNzZXMgPSBzdHJUcmltLmNhbGwoZWxlbS5jbGFzc05hbWUpXG4gICAgICAgICAgICAsIGNsYXNzZXMgPSB0cmltbWVkQ2xhc3NlcyA/IHRyaW1tZWRDbGFzc2VzLnNwbGl0KC9cXHMrLykgOiBbXVxuICAgICAgICAgICAgLCBpID0gMFxuICAgICAgICAgICAgLCBsZW4gPSBjbGFzc2VzLmxlbmd0aFxuICAgICAgICA7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMucHVzaChjbGFzc2VzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91cGRhdGVDbGFzc05hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTmFtZSA9IHRoaXMudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLCBjbGFzc0xpc3RQcm90byA9IENsYXNzTGlzdFtwcm90b1Byb3BdID0gW11cbiAgICAsIGNsYXNzTGlzdEdldHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDbGFzc0xpc3QodGhpcyk7XG4gICAgfVxuO1xuLy8gTW9zdCBET01FeGNlcHRpb24gaW1wbGVtZW50YXRpb25zIGRvbid0IGFsbG93IGNhbGxpbmcgRE9NRXhjZXB0aW9uJ3MgdG9TdHJpbmcoKVxuLy8gb24gbm9uLURPTUV4Y2VwdGlvbnMuIEVycm9yJ3MgdG9TdHJpbmcoKSBpcyBzdWZmaWNpZW50IGhlcmUuXG5ET01FeFtwcm90b1Byb3BdID0gRXJyb3JbcHJvdG9Qcm9wXTtcbmNsYXNzTGlzdFByb3RvLml0ZW0gPSBmdW5jdGlvbiAoaSkge1xuICAgIHJldHVybiB0aGlzW2ldIHx8IG51bGw7XG59O1xuY2xhc3NMaXN0UHJvdG8uY29udGFpbnMgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICB0b2tlbiArPSBcIlwiO1xuICAgIHJldHVybiBjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pICE9PSAtMTtcbn07XG5jbGFzc0xpc3RQcm90by5hZGQgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICB0b2tlbiArPSBcIlwiO1xuICAgIGlmIChjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pID09PSAtMSkge1xuICAgICAgICB0aGlzLnB1c2godG9rZW4pO1xuICAgICAgICB0aGlzLl91cGRhdGVDbGFzc05hbWUoKTtcbiAgICB9XG59O1xuY2xhc3NMaXN0UHJvdG8ucmVtb3ZlID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgdG9rZW4gKz0gXCJcIjtcbiAgICB2YXIgaW5kZXggPSBjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLl91cGRhdGVDbGFzc05hbWUoKTtcbiAgICB9XG59O1xuY2xhc3NMaXN0UHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgdG9rZW4gKz0gXCJcIjtcbiAgICBpZiAoY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKSA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5hZGQodG9rZW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtb3ZlKHRva2VuKTtcbiAgICB9XG59O1xuY2xhc3NMaXN0UHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuam9pbihcIiBcIik7XG59O1xuXG5pZiAob2JqQ3RyLmRlZmluZVByb3BlcnR5KSB7XG4gICAgdmFyIGNsYXNzTGlzdFByb3BEZXNjID0ge1xuICAgICAgICAgIGdldDogY2xhc3NMaXN0R2V0dGVyXG4gICAgICAgICwgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICAsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgICAgb2JqQ3RyLmRlZmluZVByb3BlcnR5KGVsZW1DdHJQcm90bywgY2xhc3NMaXN0UHJvcCwgY2xhc3NMaXN0UHJvcERlc2MpO1xuICAgIH0gY2F0Y2ggKGV4KSB7IC8vIElFIDggZG9lc24ndCBzdXBwb3J0IGVudW1lcmFibGU6dHJ1ZVxuICAgICAgICBpZiAoZXgubnVtYmVyID09PSAtMHg3RkY1RUM1NCkge1xuICAgICAgICAgICAgY2xhc3NMaXN0UHJvcERlc2MuZW51bWVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgb2JqQ3RyLmRlZmluZVByb3BlcnR5KGVsZW1DdHJQcm90bywgY2xhc3NMaXN0UHJvcCwgY2xhc3NMaXN0UHJvcERlc2MpO1xuICAgICAgICB9XG4gICAgfVxufSBlbHNlIGlmIChvYmpDdHJbcHJvdG9Qcm9wXS5fX2RlZmluZUdldHRlcl9fKSB7XG4gICAgZWxlbUN0clByb3RvLl9fZGVmaW5lR2V0dGVyX18oY2xhc3NMaXN0UHJvcCwgY2xhc3NMaXN0R2V0dGVyKTtcbn1cblxufShzZWxmKSk7XG5cbn1cbiIsImlmICghRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpIHtcbiAgICBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChvVGhpcykge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgLy8gY2xvc2VzdCB0aGluZyBwb3NzaWJsZSB0byB0aGUgRUNNQVNjcmlwdCA1IGludGVybmFsIElzQ2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbi5wcm90b3R5cGUuYmluZCAtIHdoYXQgaXMgdHJ5aW5nIHRvIGJlIGJvdW5kIGlzIG5vdCBjYWxsYWJsZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhQXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG4gICAgICAgIGZUb0JpbmQgPSB0aGlzLFxuICAgICAgICBmTk9QID0gZnVuY3Rpb24gKCkge30sXG4gICAgICAgIGZCb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmVG9CaW5kLmFwcGx5KHRoaXMgaW5zdGFuY2VvZiBmTk9QICYmIG9UaGlzXG4gICAgICAgICAgICAgICAgPyB0aGlzXG4gICAgICAgICAgICAgICAgOiBvVGhpcyxcbiAgICAgICAgICAgICAgICBhQXJncy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZOT1AucHJvdG90eXBlID0gdGhpcy5wcm90b3R5cGU7XG4gICAgICAgIGZCb3VuZC5wcm90b3R5cGUgPSBuZXcgZk5PUCgpO1xuXG4gICAgICAgIHJldHVybiBmQm91bmQ7XG4gICAgfTtcbn1cbiIsInJlcXVpcmUoJy4vY2xhc3NMaXN0LmpzJyk7XG5yZXF1aXJlKCcuL2Z1bmN0aW9uUHJvdG90eXBlQmluZC5qcycpO1xucmVxdWlyZSgnLi9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMnKTsiLCIvLyBhZGRzIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmdW5jdGlvbmFsaXR5XG4vLyBTb3VyY2U6IGh0dHA6Ly9zdHJkNi5jb20vMjAxMS8wNS9iZXR0ZXItd2luZG93LXJlcXVlc3RhbmltYXRpb25mcmFtZS1zaGltL1xuXG53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8ICh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID1cbiAgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgIHx8XG4gIHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgICAgfHxcbiAgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgICB8fFxuICBmdW5jdGlvbihjYWxsYmFjaywgZWxlbWVudCkge1xuICAgIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGNhbGxiYWNrKCtuZXcgRGF0ZSgpKTtcbiAgfSwgMTAwMCAvIDYwKTtcbn0pO1xuIiwidmFyIFJlbmRlck5vZGUgPSByZXF1aXJlKCcuL1JlbmRlck5vZGUnKTtcbnZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCcuL0V2ZW50SGFuZGxlcicpO1xudmFyIEVsZW1lbnRBbGxvY2F0b3IgPSByZXF1aXJlKCcuL0VsZW1lbnRBbGxvY2F0b3InKTtcbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCcuL1RyYW5zZm9ybScpO1xudmFyIFRyYW5zaXRpb25hYmxlID0gcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlJyk7XG52YXIgX3plcm9aZXJvID0gW1xuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXTtcbnZhciB1c2VQcmVmaXggPSAhKCdwZXJzcGVjdGl2ZScgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlKTtcbmZ1bmN0aW9uIF9nZXRFbGVtZW50U2l6ZShlbGVtZW50KSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgZWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAgICAgZWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICBdO1xufVxudmFyIF9zZXRQZXJzcGVjdGl2ZSA9IHVzZVByZWZpeCA/IGZ1bmN0aW9uIChlbGVtZW50LCBwZXJzcGVjdGl2ZSkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLndlYmtpdFBlcnNwZWN0aXZlID0gcGVyc3BlY3RpdmUgPyBwZXJzcGVjdGl2ZS50b0ZpeGVkKCkgKyAncHgnIDogJyc7XG4gICAgfSA6IGZ1bmN0aW9uIChlbGVtZW50LCBwZXJzcGVjdGl2ZSkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLnBlcnNwZWN0aXZlID0gcGVyc3BlY3RpdmUgPyBwZXJzcGVjdGl2ZS50b0ZpeGVkKCkgKyAncHgnIDogJyc7XG4gICAgfTtcbmZ1bmN0aW9uIENvbnRleHQoY29udGFpbmVyKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5fYWxsb2NhdG9yID0gbmV3IEVsZW1lbnRBbGxvY2F0b3IoY29udGFpbmVyKTtcbiAgICB0aGlzLl9ub2RlID0gbmV3IFJlbmRlck5vZGUoKTtcbiAgICB0aGlzLl9ldmVudE91dHB1dCA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgICB0aGlzLl9zaXplID0gX2dldEVsZW1lbnRTaXplKHRoaXMuY29udGFpbmVyKTtcbiAgICB0aGlzLl9wZXJzcGVjdGl2ZVN0YXRlID0gbmV3IFRyYW5zaXRpb25hYmxlKDApO1xuICAgIHRoaXMuX3BlcnNwZWN0aXZlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX25vZGVDb250ZXh0ID0ge1xuICAgICAgICBhbGxvY2F0b3I6IHRoaXMuX2FsbG9jYXRvcixcbiAgICAgICAgdHJhbnNmb3JtOiBUcmFuc2Zvcm0uaWRlbnRpdHksXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIG9yaWdpbjogX3plcm9aZXJvLFxuICAgICAgICBhbGlnbjogX3plcm9aZXJvLFxuICAgICAgICBzaXplOiB0aGlzLl9zaXplXG4gICAgfTtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFNpemUoX2dldEVsZW1lbnRTaXplKHRoaXMuY29udGFpbmVyKSk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbn1cbkNvbnRleHQucHJvdG90eXBlLmdldEFsbG9jYXRvciA9IGZ1bmN0aW9uIGdldEFsbG9jYXRvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fYWxsb2NhdG9yO1xufTtcbkNvbnRleHQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChvYmopIHtcbiAgICByZXR1cm4gdGhpcy5fbm9kZS5hZGQob2JqKTtcbn07XG5Db250ZXh0LnByb3RvdHlwZS5taWdyYXRlID0gZnVuY3Rpb24gbWlncmF0ZShjb250YWluZXIpIHtcbiAgICBpZiAoY29udGFpbmVyID09PSB0aGlzLmNvbnRhaW5lcilcbiAgICAgICAgcmV0dXJuO1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuX2FsbG9jYXRvci5taWdyYXRlKGNvbnRhaW5lcik7XG59O1xuQ29udGV4dC5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uIGdldFNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NpemU7XG59O1xuQ29udGV4dC5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIHNldFNpemUoc2l6ZSkge1xuICAgIGlmICghc2l6ZSlcbiAgICAgICAgc2l6ZSA9IF9nZXRFbGVtZW50U2l6ZSh0aGlzLmNvbnRhaW5lcik7XG4gICAgdGhpcy5fc2l6ZVswXSA9IHNpemVbMF07XG4gICAgdGhpcy5fc2l6ZVsxXSA9IHNpemVbMV07XG59O1xuQ29udGV4dC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGNvbnRleHRQYXJhbWV0ZXJzKSB7XG4gICAgaWYgKGNvbnRleHRQYXJhbWV0ZXJzKSB7XG4gICAgICAgIGlmIChjb250ZXh0UGFyYW1ldGVycy50cmFuc2Zvcm0pXG4gICAgICAgICAgICB0aGlzLl9ub2RlQ29udGV4dC50cmFuc2Zvcm0gPSBjb250ZXh0UGFyYW1ldGVycy50cmFuc2Zvcm07XG4gICAgICAgIGlmIChjb250ZXh0UGFyYW1ldGVycy5vcGFjaXR5KVxuICAgICAgICAgICAgdGhpcy5fbm9kZUNvbnRleHQub3BhY2l0eSA9IGNvbnRleHRQYXJhbWV0ZXJzLm9wYWNpdHk7XG4gICAgICAgIGlmIChjb250ZXh0UGFyYW1ldGVycy5vcmlnaW4pXG4gICAgICAgICAgICB0aGlzLl9ub2RlQ29udGV4dC5vcmlnaW4gPSBjb250ZXh0UGFyYW1ldGVycy5vcmlnaW47XG4gICAgICAgIGlmIChjb250ZXh0UGFyYW1ldGVycy5hbGlnbilcbiAgICAgICAgICAgIHRoaXMuX25vZGVDb250ZXh0LmFsaWduID0gY29udGV4dFBhcmFtZXRlcnMuYWxpZ247XG4gICAgICAgIGlmIChjb250ZXh0UGFyYW1ldGVycy5zaXplKVxuICAgICAgICAgICAgdGhpcy5fbm9kZUNvbnRleHQuc2l6ZSA9IGNvbnRleHRQYXJhbWV0ZXJzLnNpemU7XG4gICAgfVxuICAgIHZhciBwZXJzcGVjdGl2ZSA9IHRoaXMuX3BlcnNwZWN0aXZlU3RhdGUuZ2V0KCk7XG4gICAgaWYgKHBlcnNwZWN0aXZlICE9PSB0aGlzLl9wZXJzcGVjdGl2ZSkge1xuICAgICAgICBfc2V0UGVyc3BlY3RpdmUodGhpcy5jb250YWluZXIsIHBlcnNwZWN0aXZlKTtcbiAgICAgICAgdGhpcy5fcGVyc3BlY3RpdmUgPSBwZXJzcGVjdGl2ZTtcbiAgICB9XG4gICAgdGhpcy5fbm9kZS5jb21taXQodGhpcy5fbm9kZUNvbnRleHQpO1xufTtcbkNvbnRleHQucHJvdG90eXBlLmdldFBlcnNwZWN0aXZlID0gZnVuY3Rpb24gZ2V0UGVyc3BlY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BlcnNwZWN0aXZlU3RhdGUuZ2V0KCk7XG59O1xuQ29udGV4dC5wcm90b3R5cGUuc2V0UGVyc3BlY3RpdmUgPSBmdW5jdGlvbiBzZXRQZXJzcGVjdGl2ZShwZXJzcGVjdGl2ZSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5fcGVyc3BlY3RpdmVTdGF0ZS5zZXQocGVyc3BlY3RpdmUsIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbn07XG5Db250ZXh0LnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlLCBldmVudCkge1xuICAgIHJldHVybiB0aGlzLl9ldmVudE91dHB1dC5lbWl0KHR5cGUsIGV2ZW50KTtcbn07XG5Db250ZXh0LnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKHR5cGUsIGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fZXZlbnRPdXRwdXQub24odHlwZSwgaGFuZGxlcik7XG59O1xuQ29udGV4dC5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX2V2ZW50T3V0cHV0LnJlbW92ZUxpc3RlbmVyKHR5cGUsIGhhbmRsZXIpO1xufTtcbkNvbnRleHQucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiBwaXBlKHRhcmdldCkge1xuICAgIHJldHVybiB0aGlzLl9ldmVudE91dHB1dC5waXBlKHRhcmdldCk7XG59O1xuQ29udGV4dC5wcm90b3R5cGUudW5waXBlID0gZnVuY3Rpb24gdW5waXBlKHRhcmdldCkge1xuICAgIHJldHVybiB0aGlzLl9ldmVudE91dHB1dC51bnBpcGUodGFyZ2V0KTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IENvbnRleHQ7IiwiZnVuY3Rpb24gRWxlbWVudEFsbG9jYXRvcihjb250YWluZXIpIHtcbiAgICBpZiAoIWNvbnRhaW5lcilcbiAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuZGV0YWNoZWROb2RlcyA9IHt9O1xuICAgIHRoaXMubm9kZUNvdW50ID0gMDtcbn1cbkVsZW1lbnRBbGxvY2F0b3IucHJvdG90eXBlLm1pZ3JhdGUgPSBmdW5jdGlvbiBtaWdyYXRlKGNvbnRhaW5lcikge1xuICAgIHZhciBvbGRDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICBpZiAoY29udGFpbmVyID09PSBvbGRDb250YWluZXIpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAob2xkQ29udGFpbmVyIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCkge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQob2xkQ29udGFpbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAob2xkQ29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG9sZENvbnRhaW5lci5yZW1vdmVDaGlsZChvbGRDb250YWluZXIuZmlyc3RDaGlsZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xufTtcbkVsZW1lbnRBbGxvY2F0b3IucHJvdG90eXBlLmFsbG9jYXRlID0gZnVuY3Rpb24gYWxsb2NhdGUodHlwZSkge1xuICAgIHR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCEodHlwZSBpbiB0aGlzLmRldGFjaGVkTm9kZXMpKVxuICAgICAgICB0aGlzLmRldGFjaGVkTm9kZXNbdHlwZV0gPSBbXTtcbiAgICB2YXIgbm9kZVN0b3JlID0gdGhpcy5kZXRhY2hlZE5vZGVzW3R5cGVdO1xuICAgIHZhciByZXN1bHQ7XG4gICAgaWYgKG5vZGVTdG9yZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdCA9IG5vZGVTdG9yZS5wb3AoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChyZXN1bHQpO1xuICAgIH1cbiAgICB0aGlzLm5vZGVDb3VudCsrO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuRWxlbWVudEFsbG9jYXRvci5wcm90b3R5cGUuZGVhbGxvY2F0ZSA9IGZ1bmN0aW9uIGRlYWxsb2NhdGUoZWxlbWVudCkge1xuICAgIHZhciBub2RlVHlwZSA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgbm9kZVN0b3JlID0gdGhpcy5kZXRhY2hlZE5vZGVzW25vZGVUeXBlXTtcbiAgICBub2RlU3RvcmUucHVzaChlbGVtZW50KTtcbiAgICB0aGlzLm5vZGVDb3VudC0tO1xufTtcbkVsZW1lbnRBbGxvY2F0b3IucHJvdG90eXBlLmdldE5vZGVDb3VudCA9IGZ1bmN0aW9uIGdldE5vZGVDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlQ291bnQ7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBFbGVtZW50QWxsb2NhdG9yOyIsInZhciBFbnRpdHkgPSByZXF1aXJlKCcuL0VudGl0eScpO1xudmFyIEV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJy4vRXZlbnRIYW5kbGVyJyk7XG52YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9UcmFuc2Zvcm0nKTtcbnZhciB1c2VQcmVmaXggPSAhKCd0cmFuc2Zvcm0nIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSk7XG52YXIgZGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG5mdW5jdGlvbiBFbGVtZW50T3V0cHV0KGVsZW1lbnQpIHtcbiAgICB0aGlzLl9tYXRyaXggPSBudWxsO1xuICAgIHRoaXMuX29wYWNpdHkgPSAxO1xuICAgIHRoaXMuX29yaWdpbiA9IG51bGw7XG4gICAgdGhpcy5fc2l6ZSA9IG51bGw7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQuYmluZFRoaXModGhpcyk7XG4gICAgdGhpcy5ldmVudEZvcndhcmRlciA9IGZ1bmN0aW9uIGV2ZW50Rm9yd2FyZGVyKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoZXZlbnQudHlwZSwgZXZlbnQpO1xuICAgIH0uYmluZCh0aGlzKTtcbiAgICB0aGlzLmlkID0gRW50aXR5LnJlZ2lzdGVyKHRoaXMpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuX3NpemVEaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMuX29yaWdpbkRpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy5fdHJhbnNmb3JtRGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLl9pbnZpc2libGUgPSBmYWxzZTtcbiAgICBpZiAoZWxlbWVudClcbiAgICAgICAgdGhpcy5hdHRhY2goZWxlbWVudCk7XG59XG5FbGVtZW50T3V0cHV0LnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKHR5cGUsIGZuKSB7XG4gICAgaWYgKHRoaXMuX2VsZW1lbnQpXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCB0aGlzLmV2ZW50Rm9yd2FyZGVyKTtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5vbih0eXBlLCBmbik7XG59O1xuRWxlbWVudE91dHB1dC5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBmbikge1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0LnJlbW92ZUxpc3RlbmVyKHR5cGUsIGZuKTtcbn07XG5FbGVtZW50T3V0cHV0LnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlLCBldmVudCkge1xuICAgIGlmIChldmVudCAmJiAhZXZlbnQub3JpZ2luKVxuICAgICAgICBldmVudC5vcmlnaW4gPSB0aGlzO1xuICAgIHZhciBoYW5kbGVkID0gdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCh0eXBlLCBldmVudCk7XG4gICAgaWYgKGhhbmRsZWQgJiYgZXZlbnQgJiYgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKVxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm4gaGFuZGxlZDtcbn07XG5FbGVtZW50T3V0cHV0LnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gcGlwZSh0YXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy5fZXZlbnRPdXRwdXQucGlwZSh0YXJnZXQpO1xufTtcbkVsZW1lbnRPdXRwdXQucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIHVucGlwZSh0YXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy5fZXZlbnRPdXRwdXQudW5waXBlKHRhcmdldCk7XG59O1xuRWxlbWVudE91dHB1dC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmlkO1xufTtcbmZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycyh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpIGluIHRoaXMuX2V2ZW50T3V0cHV0Lmxpc3RlbmVycykge1xuICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihpLCB0aGlzLmV2ZW50Rm9yd2FyZGVyKTtcbiAgICB9XG59XG5mdW5jdGlvbiBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSBpbiB0aGlzLl9ldmVudE91dHB1dC5saXN0ZW5lcnMpIHtcbiAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoaSwgdGhpcy5ldmVudEZvcndhcmRlcik7XG4gICAgfVxufVxuZnVuY3Rpb24gX2Zvcm1hdENTU1RyYW5zZm9ybShtKSB7XG4gICAgbVsxMl0gPSBNYXRoLnJvdW5kKG1bMTJdICogZGV2aWNlUGl4ZWxSYXRpbykgLyBkZXZpY2VQaXhlbFJhdGlvO1xuICAgIG1bMTNdID0gTWF0aC5yb3VuZChtWzEzXSAqIGRldmljZVBpeGVsUmF0aW8pIC8gZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB2YXIgcmVzdWx0ID0gJ21hdHJpeDNkKCc7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNTsgaSsrKSB7XG4gICAgICAgIHJlc3VsdCArPSBtW2ldIDwgMC4wMDAwMDEgJiYgbVtpXSA+IC0wLjAwMDAwMSA/ICcwLCcgOiBtW2ldICsgJywnO1xuICAgIH1cbiAgICByZXN1bHQgKz0gbVsxNV0gKyAnKSc7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbnZhciBfc2V0TWF0cml4O1xuaWYgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdmaXJlZm94JykgPiAtMSkge1xuICAgIF9zZXRNYXRyaXggPSBmdW5jdGlvbiAoZWxlbWVudCwgbWF0cml4KSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuekluZGV4ID0gbWF0cml4WzE0XSAqIDEwMDAwMDAgfCAwO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IF9mb3JtYXRDU1NUcmFuc2Zvcm0obWF0cml4KTtcbiAgICB9O1xufSBlbHNlIGlmICh1c2VQcmVmaXgpIHtcbiAgICBfc2V0TWF0cml4ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG1hdHJpeCkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IF9mb3JtYXRDU1NUcmFuc2Zvcm0obWF0cml4KTtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBfc2V0TWF0cml4ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG1hdHJpeCkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IF9mb3JtYXRDU1NUcmFuc2Zvcm0obWF0cml4KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gX2Zvcm1hdENTU09yaWdpbihvcmlnaW4pIHtcbiAgICByZXR1cm4gMTAwICogb3JpZ2luWzBdICsgJyUgJyArIDEwMCAqIG9yaWdpblsxXSArICclJztcbn1cbnZhciBfc2V0T3JpZ2luID0gdXNlUHJlZml4ID8gZnVuY3Rpb24gKGVsZW1lbnQsIG9yaWdpbikge1xuICAgICAgICBlbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybU9yaWdpbiA9IF9mb3JtYXRDU1NPcmlnaW4ob3JpZ2luKTtcbiAgICB9IDogZnVuY3Rpb24gKGVsZW1lbnQsIG9yaWdpbikge1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IF9mb3JtYXRDU1NPcmlnaW4ob3JpZ2luKTtcbiAgICB9O1xudmFyIF9zZXRJbnZpc2libGUgPSB1c2VQcmVmaXggPyBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9ICdzY2FsZTNkKDAuMDAwMSwwLjAwMDEsMC4wMDAxKSc7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgfSA6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlM2QoMC4wMDAxLDAuMDAwMSwwLjAwMDEpJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICB9O1xuZnVuY3Rpb24gX3h5Tm90RXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gYSAmJiBiID8gYVswXSAhPT0gYlswXSB8fCBhWzFdICE9PSBiWzFdIDogYSAhPT0gYjtcbn1cbkVsZW1lbnRPdXRwdXQucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uIGNvbW1pdChjb250ZXh0KSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX2VsZW1lbnQ7XG4gICAgaWYgKCF0YXJnZXQpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgbWF0cml4ID0gY29udGV4dC50cmFuc2Zvcm07XG4gICAgdmFyIG9wYWNpdHkgPSBjb250ZXh0Lm9wYWNpdHk7XG4gICAgdmFyIG9yaWdpbiA9IGNvbnRleHQub3JpZ2luO1xuICAgIHZhciBzaXplID0gY29udGV4dC5zaXplO1xuICAgIGlmICghbWF0cml4ICYmIHRoaXMuX21hdHJpeCkge1xuICAgICAgICB0aGlzLl9tYXRyaXggPSBudWxsO1xuICAgICAgICB0aGlzLl9vcGFjaXR5ID0gMDtcbiAgICAgICAgX3NldEludmlzaWJsZSh0YXJnZXQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChfeHlOb3RFcXVhbHModGhpcy5fb3JpZ2luLCBvcmlnaW4pKVxuICAgICAgICB0aGlzLl9vcmlnaW5EaXJ0eSA9IHRydWU7XG4gICAgaWYgKFRyYW5zZm9ybS5ub3RFcXVhbHModGhpcy5fbWF0cml4LCBtYXRyaXgpKVxuICAgICAgICB0aGlzLl90cmFuc2Zvcm1EaXJ0eSA9IHRydWU7XG4gICAgaWYgKHRoaXMuX2ludmlzaWJsZSkge1xuICAgICAgICB0aGlzLl9pbnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgfVxuICAgIGlmICh0aGlzLl9vcGFjaXR5ICE9PSBvcGFjaXR5KSB7XG4gICAgICAgIHRoaXMuX29wYWNpdHkgPSBvcGFjaXR5O1xuICAgICAgICB0YXJnZXQuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgPj0gMSA/ICcwLjk5OTk5OScgOiBvcGFjaXR5O1xuICAgIH1cbiAgICBpZiAodGhpcy5fdHJhbnNmb3JtRGlydHkgfHwgdGhpcy5fb3JpZ2luRGlydHkgfHwgdGhpcy5fc2l6ZURpcnR5KSB7XG4gICAgICAgIGlmICh0aGlzLl9zaXplRGlydHkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fc2l6ZSlcbiAgICAgICAgICAgICAgICB0aGlzLl9zaXplID0gW1xuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRoaXMuX3NpemVbMF0gPSBzaXplWzBdO1xuICAgICAgICAgICAgdGhpcy5fc2l6ZVsxXSA9IHNpemVbMV07XG4gICAgICAgICAgICB0aGlzLl9zaXplRGlydHkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fb3JpZ2luRGlydHkpIHtcbiAgICAgICAgICAgIGlmIChvcmlnaW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX29yaWdpbilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3JpZ2luID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vcmlnaW5bMF0gPSBvcmlnaW5bMF07XG4gICAgICAgICAgICAgICAgdGhpcy5fb3JpZ2luWzFdID0gb3JpZ2luWzFdO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5fb3JpZ2luID0gbnVsbDtcbiAgICAgICAgICAgIF9zZXRPcmlnaW4odGFyZ2V0LCB0aGlzLl9vcmlnaW4pO1xuICAgICAgICAgICAgdGhpcy5fb3JpZ2luRGlydHkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1hdHJpeClcbiAgICAgICAgICAgIG1hdHJpeCA9IFRyYW5zZm9ybS5pZGVudGl0eTtcbiAgICAgICAgdGhpcy5fbWF0cml4ID0gbWF0cml4O1xuICAgICAgICB2YXIgYWFNYXRyaXggPSB0aGlzLl9zaXplID8gVHJhbnNmb3JtLnRoZW5Nb3ZlKG1hdHJpeCwgW1xuICAgICAgICAgICAgICAgIC10aGlzLl9zaXplWzBdICogb3JpZ2luWzBdLFxuICAgICAgICAgICAgICAgIC10aGlzLl9zaXplWzFdICogb3JpZ2luWzFdLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF0pIDogbWF0cml4O1xuICAgICAgICBfc2V0TWF0cml4KHRhcmdldCwgYWFNYXRyaXgpO1xuICAgICAgICB0aGlzLl90cmFuc2Zvcm1EaXJ0eSA9IGZhbHNlO1xuICAgIH1cbn07XG5FbGVtZW50T3V0cHV0LnByb3RvdHlwZS5jbGVhbnVwID0gZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBpZiAodGhpcy5fZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9pbnZpc2libGUgPSB0cnVlO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxufTtcbkVsZW1lbnRPdXRwdXQucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uIGF0dGFjaCh0YXJnZXQpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGFyZ2V0O1xuICAgIF9hZGRFdmVudExpc3RlbmVycy5jYWxsKHRoaXMsIHRhcmdldCk7XG59O1xuRWxlbWVudE91dHB1dC5wcm90b3R5cGUuZGV0YWNoID0gZnVuY3Rpb24gZGV0YWNoKCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLl9lbGVtZW50O1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgX3JlbW92ZUV2ZW50TGlzdGVuZXJzLmNhbGwodGhpcywgdGFyZ2V0KTtcbiAgICAgICAgaWYgKHRoaXMuX2ludmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5faW52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICByZXR1cm4gdGFyZ2V0O1xufTtcbm1vZHVsZS5leHBvcnRzID0gRWxlbWVudE91dHB1dDsiLCJ2YXIgQ29udGV4dCA9IHJlcXVpcmUoJy4vQ29udGV4dCcpO1xudmFyIEV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJy4vRXZlbnRIYW5kbGVyJyk7XG52YXIgT3B0aW9uc01hbmFnZXIgPSByZXF1aXJlKCcuL09wdGlvbnNNYW5hZ2VyJyk7XG52YXIgRW5naW5lID0ge307XG52YXIgY29udGV4dHMgPSBbXTtcbnZhciBuZXh0VGlja1F1ZXVlID0gW107XG52YXIgZGVmZXJRdWV1ZSA9IFtdO1xudmFyIGxhc3RUaW1lID0gRGF0ZS5ub3coKTtcbnZhciBmcmFtZVRpbWU7XG52YXIgZnJhbWVUaW1lTGltaXQ7XG52YXIgbG9vcEVuYWJsZWQgPSB0cnVlO1xudmFyIGV2ZW50Rm9yd2FyZGVycyA9IHt9O1xudmFyIGV2ZW50SGFuZGxlciA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbnZhciBvcHRpb25zID0ge1xuICAgICAgICBjb250YWluZXJUeXBlOiAnZGl2JyxcbiAgICAgICAgY29udGFpbmVyQ2xhc3M6ICdmYW1vdXMtY29udGFpbmVyJyxcbiAgICAgICAgZnBzQ2FwOiB1bmRlZmluZWQsXG4gICAgICAgIHJ1bkxvb3A6IHRydWUsXG4gICAgICAgIGFwcE1vZGU6IHRydWVcbiAgICB9O1xudmFyIG9wdGlvbnNNYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKG9wdGlvbnMpO1xudmFyIE1BWF9ERUZFUl9GUkFNRV9USU1FID0gMTA7XG5FbmdpbmUuc3RlcCA9IGZ1bmN0aW9uIHN0ZXAoKSB7XG4gICAgdmFyIGN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoZnJhbWVUaW1lTGltaXQgJiYgY3VycmVudFRpbWUgLSBsYXN0VGltZSA8IGZyYW1lVGltZUxpbWl0KVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIGkgPSAwO1xuICAgIGZyYW1lVGltZSA9IGN1cnJlbnRUaW1lIC0gbGFzdFRpbWU7XG4gICAgbGFzdFRpbWUgPSBjdXJyZW50VGltZTtcbiAgICBldmVudEhhbmRsZXIuZW1pdCgncHJlcmVuZGVyJyk7XG4gICAgZm9yIChpID0gMDsgaSA8IG5leHRUaWNrUXVldWUubGVuZ3RoOyBpKyspXG4gICAgICAgIG5leHRUaWNrUXVldWVbaV0uY2FsbCh0aGlzKTtcbiAgICBuZXh0VGlja1F1ZXVlLnNwbGljZSgwKTtcbiAgICB3aGlsZSAoZGVmZXJRdWV1ZS5sZW5ndGggJiYgRGF0ZS5ub3coKSAtIGN1cnJlbnRUaW1lIDwgTUFYX0RFRkVSX0ZSQU1FX1RJTUUpIHtcbiAgICAgICAgZGVmZXJRdWV1ZS5zaGlmdCgpLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCBjb250ZXh0cy5sZW5ndGg7IGkrKylcbiAgICAgICAgY29udGV4dHNbaV0udXBkYXRlKCk7XG4gICAgZXZlbnRIYW5kbGVyLmVtaXQoJ3Bvc3RyZW5kZXInKTtcbn07XG5mdW5jdGlvbiBsb29wKCkge1xuICAgIGlmIChvcHRpb25zLnJ1bkxvb3ApIHtcbiAgICAgICAgRW5naW5lLnN0ZXAoKTtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcbiAgICB9IGVsc2VcbiAgICAgICAgbG9vcEVuYWJsZWQgPSBmYWxzZTtcbn1cbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG5mdW5jdGlvbiBoYW5kbGVSZXNpemUoZXZlbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRleHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnRleHRzW2ldLmVtaXQoJ3Jlc2l6ZScpO1xuICAgIH1cbiAgICBldmVudEhhbmRsZXIuZW1pdCgncmVzaXplJyk7XG59XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlUmVzaXplLCBmYWxzZSk7XG5oYW5kbGVSZXNpemUoKTtcbmZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sIHRydWUpO1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZmFtb3VzLXJvb3QnKTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZmFtb3VzLXJvb3QnKTtcbn1cbnZhciBpbml0aWFsaXplZCA9IGZhbHNlO1xuRW5naW5lLnBpcGUgPSBmdW5jdGlvbiBwaXBlKHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQuc3Vic2NyaWJlIGluc3RhbmNlb2YgRnVuY3Rpb24pXG4gICAgICAgIHJldHVybiB0YXJnZXQuc3Vic2NyaWJlKEVuZ2luZSk7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gZXZlbnRIYW5kbGVyLnBpcGUodGFyZ2V0KTtcbn07XG5FbmdpbmUudW5waXBlID0gZnVuY3Rpb24gdW5waXBlKHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQudW5zdWJzY3JpYmUgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgcmV0dXJuIHRhcmdldC51bnN1YnNjcmliZShFbmdpbmUpO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGV2ZW50SGFuZGxlci51bnBpcGUodGFyZ2V0KTtcbn07XG5FbmdpbmUub24gPSBmdW5jdGlvbiBvbih0eXBlLCBoYW5kbGVyKSB7XG4gICAgaWYgKCEodHlwZSBpbiBldmVudEZvcndhcmRlcnMpKSB7XG4gICAgICAgIGV2ZW50Rm9yd2FyZGVyc1t0eXBlXSA9IGV2ZW50SGFuZGxlci5lbWl0LmJpbmQoZXZlbnRIYW5kbGVyLCB0eXBlKTtcbiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBldmVudEZvcndhcmRlcnNbdHlwZV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgRW5naW5lLm5leHRUaWNrKGZ1bmN0aW9uICh0eXBlLCBmb3J3YXJkZXIpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm9yd2FyZGVyKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzLCB0eXBlLCBldmVudEZvcndhcmRlcnNbdHlwZV0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXZlbnRIYW5kbGVyLm9uKHR5cGUsIGhhbmRsZXIpO1xufTtcbkVuZ2luZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlLCBldmVudCkge1xuICAgIHJldHVybiBldmVudEhhbmRsZXIuZW1pdCh0eXBlLCBldmVudCk7XG59O1xuRW5naW5lLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgaGFuZGxlcikge1xuICAgIHJldHVybiBldmVudEhhbmRsZXIucmVtb3ZlTGlzdGVuZXIodHlwZSwgaGFuZGxlcik7XG59O1xuRW5naW5lLmdldEZQUyA9IGZ1bmN0aW9uIGdldEZQUygpIHtcbiAgICByZXR1cm4gMTAwMCAvIGZyYW1lVGltZTtcbn07XG5FbmdpbmUuc2V0RlBTQ2FwID0gZnVuY3Rpb24gc2V0RlBTQ2FwKGZwcykge1xuICAgIGZyYW1lVGltZUxpbWl0ID0gTWF0aC5mbG9vcigxMDAwIC8gZnBzKTtcbn07XG5FbmdpbmUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoa2V5KSB7XG4gICAgcmV0dXJuIG9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoa2V5KTtcbn07XG5FbmdpbmUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiBvcHRpb25zTWFuYWdlci5zZXRPcHRpb25zLmFwcGx5KG9wdGlvbnNNYW5hZ2VyLCBhcmd1bWVudHMpO1xufTtcbkVuZ2luZS5jcmVhdGVDb250ZXh0ID0gZnVuY3Rpb24gY3JlYXRlQ29udGV4dChlbCkge1xuICAgIGlmICghaW5pdGlhbGl6ZWQgJiYgb3B0aW9ucy5hcHBNb2RlKVxuICAgICAgICBFbmdpbmUubmV4dFRpY2soaW5pdGlhbGl6ZSk7XG4gICAgdmFyIG5lZWRNb3VudENvbnRhaW5lciA9IGZhbHNlO1xuICAgIGlmICghZWwpIHtcbiAgICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG9wdGlvbnMuY29udGFpbmVyVHlwZSk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQob3B0aW9ucy5jb250YWluZXJDbGFzcyk7XG4gICAgICAgIG5lZWRNb3VudENvbnRhaW5lciA9IHRydWU7XG4gICAgfVxuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQoZWwpO1xuICAgIEVuZ2luZS5yZWdpc3RlckNvbnRleHQoY29udGV4dCk7XG4gICAgaWYgKG5lZWRNb3VudENvbnRhaW5lcikge1xuICAgICAgICBFbmdpbmUubmV4dFRpY2soZnVuY3Rpb24gKGNvbnRleHQsIGVsKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgIGNvbnRleHQuZW1pdCgncmVzaXplJyk7XG4gICAgICAgIH0uYmluZCh0aGlzLCBjb250ZXh0LCBlbCkpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dDtcbn07XG5FbmdpbmUucmVnaXN0ZXJDb250ZXh0ID0gZnVuY3Rpb24gcmVnaXN0ZXJDb250ZXh0KGNvbnRleHQpIHtcbiAgICBjb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuICAgIHJldHVybiBjb250ZXh0O1xufTtcbkVuZ2luZS5nZXRDb250ZXh0cyA9IGZ1bmN0aW9uIGdldENvbnRleHRzKCkge1xuICAgIHJldHVybiBjb250ZXh0cztcbn07XG5FbmdpbmUuZGVyZWdpc3RlckNvbnRleHQgPSBmdW5jdGlvbiBkZXJlZ2lzdGVyQ29udGV4dChjb250ZXh0KSB7XG4gICAgdmFyIGkgPSBjb250ZXh0cy5pbmRleE9mKGNvbnRleHQpO1xuICAgIGlmIChpID49IDApXG4gICAgICAgIGNvbnRleHRzLnNwbGljZShpLCAxKTtcbn07XG5FbmdpbmUubmV4dFRpY2sgPSBmdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgIG5leHRUaWNrUXVldWUucHVzaChmbik7XG59O1xuRW5naW5lLmRlZmVyID0gZnVuY3Rpb24gZGVmZXIoZm4pIHtcbiAgICBkZWZlclF1ZXVlLnB1c2goZm4pO1xufTtcbm9wdGlvbnNNYW5hZ2VyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgIGlmIChkYXRhLmlkID09PSAnZnBzQ2FwJylcbiAgICAgICAgRW5naW5lLnNldEZQU0NhcChkYXRhLnZhbHVlKTtcbiAgICBlbHNlIGlmIChkYXRhLmlkID09PSAncnVuTG9vcCcpIHtcbiAgICAgICAgaWYgKCFsb29wRW5hYmxlZCAmJiBkYXRhLnZhbHVlKSB7XG4gICAgICAgICAgICBsb29wRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IEVuZ2luZTsiLCJ2YXIgZW50aXRpZXMgPSBbXTtcbmZ1bmN0aW9uIGdldChpZCkge1xuICAgIHJldHVybiBlbnRpdGllc1tpZF07XG59XG5mdW5jdGlvbiBzZXQoaWQsIGVudGl0eSkge1xuICAgIGVudGl0aWVzW2lkXSA9IGVudGl0eTtcbn1cbmZ1bmN0aW9uIHJlZ2lzdGVyKGVudGl0eSkge1xuICAgIHZhciBpZCA9IGVudGl0aWVzLmxlbmd0aDtcbiAgICBzZXQoaWQsIGVudGl0eSk7XG4gICAgcmV0dXJuIGlkO1xufVxuZnVuY3Rpb24gdW5yZWdpc3RlcihpZCkge1xuICAgIHNldChpZCwgbnVsbCk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICByZWdpc3RlcjogcmVnaXN0ZXIsXG4gICAgdW5yZWdpc3RlcjogdW5yZWdpc3RlcixcbiAgICBnZXQ6IGdldCxcbiAgICBzZXQ6IHNldFxufTsiLCJmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcbiAgICB0aGlzLl9vd25lciA9IHRoaXM7XG59XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KHR5cGUsIGV2ZW50KSB7XG4gICAgdmFyIGhhbmRsZXJzID0gdGhpcy5saXN0ZW5lcnNbdHlwZV07XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcy5fb3duZXIsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24odHlwZSwgaGFuZGxlcikge1xuICAgIGlmICghKHR5cGUgaW4gdGhpcy5saXN0ZW5lcnMpKVxuICAgICAgICB0aGlzLmxpc3RlbmVyc1t0eXBlXSA9IFtdO1xuICAgIHZhciBpbmRleCA9IHRoaXMubGlzdGVuZXJzW3R5cGVdLmluZGV4T2YoaGFuZGxlcik7XG4gICAgaWYgKGluZGV4IDwgMClcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0ucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKSB7XG4gICAgdmFyIGxpc3RlbmVyID0gdGhpcy5saXN0ZW5lcnNbdHlwZV07XG4gICAgaWYgKGxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gbGlzdGVuZXIuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApXG4gICAgICAgICAgICBsaXN0ZW5lci5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmJpbmRUaGlzID0gZnVuY3Rpb24gYmluZFRoaXMob3duZXIpIHtcbiAgICB0aGlzLl9vd25lciA9IG93bmVyO1xufTtcbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyOyIsInZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL0V2ZW50RW1pdHRlcicpO1xuZnVuY3Rpb24gRXZlbnRIYW5kbGVyKCkge1xuICAgIEV2ZW50RW1pdHRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuZG93bnN0cmVhbSA9IFtdO1xuICAgIHRoaXMuZG93bnN0cmVhbUZuID0gW107XG4gICAgdGhpcy51cHN0cmVhbSA9IFtdO1xuICAgIHRoaXMudXBzdHJlYW1MaXN0ZW5lcnMgPSB7fTtcbn1cbkV2ZW50SGFuZGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEV2ZW50SGFuZGxlcjtcbkV2ZW50SGFuZGxlci5zZXRJbnB1dEhhbmRsZXIgPSBmdW5jdGlvbiBzZXRJbnB1dEhhbmRsZXIob2JqZWN0LCBoYW5kbGVyKSB7XG4gICAgb2JqZWN0LnRyaWdnZXIgPSBoYW5kbGVyLnRyaWdnZXIuYmluZChoYW5kbGVyKTtcbiAgICBpZiAoaGFuZGxlci5zdWJzY3JpYmUgJiYgaGFuZGxlci51bnN1YnNjcmliZSkge1xuICAgICAgICBvYmplY3Quc3Vic2NyaWJlID0gaGFuZGxlci5zdWJzY3JpYmUuYmluZChoYW5kbGVyKTtcbiAgICAgICAgb2JqZWN0LnVuc3Vic2NyaWJlID0gaGFuZGxlci51bnN1YnNjcmliZS5iaW5kKGhhbmRsZXIpO1xuICAgIH1cbn07XG5FdmVudEhhbmRsZXIuc2V0T3V0cHV0SGFuZGxlciA9IGZ1bmN0aW9uIHNldE91dHB1dEhhbmRsZXIob2JqZWN0LCBoYW5kbGVyKSB7XG4gICAgaWYgKGhhbmRsZXIgaW5zdGFuY2VvZiBFdmVudEhhbmRsZXIpXG4gICAgICAgIGhhbmRsZXIuYmluZFRoaXMob2JqZWN0KTtcbiAgICBvYmplY3QucGlwZSA9IGhhbmRsZXIucGlwZS5iaW5kKGhhbmRsZXIpO1xuICAgIG9iamVjdC51bnBpcGUgPSBoYW5kbGVyLnVucGlwZS5iaW5kKGhhbmRsZXIpO1xuICAgIG9iamVjdC5vbiA9IGhhbmRsZXIub24uYmluZChoYW5kbGVyKTtcbiAgICBvYmplY3QuYWRkTGlzdGVuZXIgPSBvYmplY3Qub247XG4gICAgb2JqZWN0LnJlbW92ZUxpc3RlbmVyID0gaGFuZGxlci5yZW1vdmVMaXN0ZW5lci5iaW5kKGhhbmRsZXIpO1xufTtcbkV2ZW50SGFuZGxlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSwgZXZlbnQpIHtcbiAgICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZG93bnN0cmVhbS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5kb3duc3RyZWFtW2ldLnRyaWdnZXIpXG4gICAgICAgICAgICB0aGlzLmRvd25zdHJlYW1baV0udHJpZ2dlcih0eXBlLCBldmVudCk7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmRvd25zdHJlYW1Gbi5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmRvd25zdHJlYW1GbltpXSh0eXBlLCBldmVudCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbkV2ZW50SGFuZGxlci5wcm90b3R5cGUudHJpZ2dlciA9IEV2ZW50SGFuZGxlci5wcm90b3R5cGUuZW1pdDtcbkV2ZW50SGFuZGxlci5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uIHBpcGUodGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldC5zdWJzY3JpYmUgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgcmV0dXJuIHRhcmdldC5zdWJzY3JpYmUodGhpcyk7XG4gICAgdmFyIGRvd25zdHJlYW1DdHggPSB0YXJnZXQgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IHRoaXMuZG93bnN0cmVhbUZuIDogdGhpcy5kb3duc3RyZWFtO1xuICAgIHZhciBpbmRleCA9IGRvd25zdHJlYW1DdHguaW5kZXhPZih0YXJnZXQpO1xuICAgIGlmIChpbmRleCA8IDApXG4gICAgICAgIGRvd25zdHJlYW1DdHgucHVzaCh0YXJnZXQpO1xuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgdGFyZ2V0KCdwaXBlJywgbnVsbCk7XG4gICAgZWxzZSBpZiAodGFyZ2V0LnRyaWdnZXIpXG4gICAgICAgIHRhcmdldC50cmlnZ2VyKCdwaXBlJywgbnVsbCk7XG4gICAgcmV0dXJuIHRhcmdldDtcbn07XG5FdmVudEhhbmRsZXIucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIHVucGlwZSh0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0LnVuc3Vic2NyaWJlIGluc3RhbmNlb2YgRnVuY3Rpb24pXG4gICAgICAgIHJldHVybiB0YXJnZXQudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgdmFyIGRvd25zdHJlYW1DdHggPSB0YXJnZXQgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IHRoaXMuZG93bnN0cmVhbUZuIDogdGhpcy5kb3duc3RyZWFtO1xuICAgIHZhciBpbmRleCA9IGRvd25zdHJlYW1DdHguaW5kZXhPZih0YXJnZXQpO1xuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIGRvd25zdHJlYW1DdHguc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEZ1bmN0aW9uKVxuICAgICAgICAgICAgdGFyZ2V0KCd1bnBpcGUnLCBudWxsKTtcbiAgICAgICAgZWxzZSBpZiAodGFyZ2V0LnRyaWdnZXIpXG4gICAgICAgICAgICB0YXJnZXQudHJpZ2dlcigndW5waXBlJywgbnVsbCk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfSBlbHNlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbn07XG5FdmVudEhhbmRsZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24odHlwZSwgaGFuZGxlcikge1xuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUub24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoISh0eXBlIGluIHRoaXMudXBzdHJlYW1MaXN0ZW5lcnMpKSB7XG4gICAgICAgIHZhciB1cHN0cmVhbUxpc3RlbmVyID0gdGhpcy50cmlnZ2VyLmJpbmQodGhpcywgdHlwZSk7XG4gICAgICAgIHRoaXMudXBzdHJlYW1MaXN0ZW5lcnNbdHlwZV0gPSB1cHN0cmVhbUxpc3RlbmVyO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudXBzdHJlYW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudXBzdHJlYW1baV0ub24odHlwZSwgdXBzdHJlYW1MaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IEV2ZW50SGFuZGxlci5wcm90b3R5cGUub247XG5FdmVudEhhbmRsZXIucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZShzb3VyY2UpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLnVwc3RyZWFtLmluZGV4T2Yoc291cmNlKTtcbiAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIHRoaXMudXBzdHJlYW0ucHVzaChzb3VyY2UpO1xuICAgICAgICBmb3IgKHZhciB0eXBlIGluIHRoaXMudXBzdHJlYW1MaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHNvdXJjZS5vbih0eXBlLCB0aGlzLnVwc3RyZWFtTGlzdGVuZXJzW3R5cGVdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5FdmVudEhhbmRsZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gdW5zdWJzY3JpYmUoc291cmNlKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy51cHN0cmVhbS5pbmRleE9mKHNvdXJjZSk7XG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgdGhpcy51cHN0cmVhbS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBmb3IgKHZhciB0eXBlIGluIHRoaXMudXBzdHJlYW1MaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcih0eXBlLCB0aGlzLnVwc3RyZWFtTGlzdGVuZXJzW3R5cGVdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50SGFuZGxlcjsiLCJ2YXIgQ29udGV4dCA9IHJlcXVpcmUoJy4vQ29udGV4dCcpO1xudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vVHJhbnNmb3JtJyk7XG52YXIgU3VyZmFjZSA9IHJlcXVpcmUoJy4vU3VyZmFjZScpO1xuZnVuY3Rpb24gR3JvdXAob3B0aW9ucykge1xuICAgIFN1cmZhY2UuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB0aGlzLl9zaG91bGRSZWNhbGN1bGF0ZVNpemUgPSBmYWxzZTtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdGhpcy5jb250ZXh0ID0gbmV3IENvbnRleHQodGhpcy5fY29udGFpbmVyKTtcbiAgICB0aGlzLnNldENvbnRlbnQodGhpcy5fY29udGFpbmVyKTtcbiAgICB0aGlzLl9ncm91cFNpemUgPSBbXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkXG4gICAgXTtcbn1cbkdyb3VwLlNJWkVfWkVSTyA9IFtcbiAgICAwLFxuICAgIDBcbl07XG5Hcm91cC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cmZhY2UucHJvdG90eXBlKTtcbkdyb3VwLnByb3RvdHlwZS5lbGVtZW50VHlwZSA9ICdkaXYnO1xuR3JvdXAucHJvdG90eXBlLmVsZW1lbnRDbGFzcyA9ICdmYW1vdXMtZ3JvdXAnO1xuR3JvdXAucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmFkZC5hcHBseSh0aGlzLmNvbnRleHQsIGFyZ3VtZW50cyk7XG59O1xuR3JvdXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gU3VyZmFjZS5wcm90b3R5cGUucmVuZGVyLmNhbGwodGhpcyk7XG59O1xuR3JvdXAucHJvdG90eXBlLmRlcGxveSA9IGZ1bmN0aW9uIGRlcGxveSh0YXJnZXQpIHtcbiAgICB0aGlzLmNvbnRleHQubWlncmF0ZSh0YXJnZXQpO1xufTtcbkdyb3VwLnByb3RvdHlwZS5yZWNhbGwgPSBmdW5jdGlvbiByZWNhbGwodGFyZ2V0KSB7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHRoaXMuY29udGV4dC5taWdyYXRlKHRoaXMuX2NvbnRhaW5lcik7XG59O1xuR3JvdXAucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uIGNvbW1pdChjb250ZXh0KSB7XG4gICAgdmFyIHRyYW5zZm9ybSA9IGNvbnRleHQudHJhbnNmb3JtO1xuICAgIHZhciBvcmlnaW4gPSBjb250ZXh0Lm9yaWdpbjtcbiAgICB2YXIgb3BhY2l0eSA9IGNvbnRleHQub3BhY2l0eTtcbiAgICB2YXIgc2l6ZSA9IGNvbnRleHQuc2l6ZTtcbiAgICB2YXIgcmVzdWx0ID0gU3VyZmFjZS5wcm90b3R5cGUuY29tbWl0LmNhbGwodGhpcywge1xuICAgICAgICAgICAgYWxsb2NhdG9yOiBjb250ZXh0LmFsbG9jYXRvcixcbiAgICAgICAgICAgIHRyYW5zZm9ybTogVHJhbnNmb3JtLnRoZW5Nb3ZlKHRyYW5zZm9ybSwgW1xuICAgICAgICAgICAgICAgIC1vcmlnaW5bMF0gKiBzaXplWzBdLFxuICAgICAgICAgICAgICAgIC1vcmlnaW5bMV0gKiBzaXplWzFdLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgb3BhY2l0eTogb3BhY2l0eSxcbiAgICAgICAgICAgIG9yaWdpbjogb3JpZ2luLFxuICAgICAgICAgICAgc2l6ZTogR3JvdXAuU0laRV9aRVJPXG4gICAgICAgIH0pO1xuICAgIGlmIChzaXplWzBdICE9PSB0aGlzLl9ncm91cFNpemVbMF0gfHwgc2l6ZVsxXSAhPT0gdGhpcy5fZ3JvdXBTaXplWzFdKSB7XG4gICAgICAgIHRoaXMuX2dyb3VwU2l6ZVswXSA9IHNpemVbMF07XG4gICAgICAgIHRoaXMuX2dyb3VwU2l6ZVsxXSA9IHNpemVbMV07XG4gICAgICAgIHRoaXMuY29udGV4dC5zZXRTaXplKHNpemUpO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHQudXBkYXRlKHtcbiAgICAgICAgdHJhbnNmb3JtOiBUcmFuc2Zvcm0udHJhbnNsYXRlKC1vcmlnaW5bMF0gKiBzaXplWzBdLCAtb3JpZ2luWzFdICogc2l6ZVsxXSwgMCksXG4gICAgICAgIG9yaWdpbjogb3JpZ2luLFxuICAgICAgICBzaXplOiBzaXplXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEdyb3VwOyIsInZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCcuL1RyYW5zZm9ybScpO1xudmFyIFRyYW5zaXRpb25hYmxlID0gcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlJyk7XG52YXIgVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0gPSByZXF1aXJlKCdmYW1vdXMvdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0nKTtcbmZ1bmN0aW9uIE1vZGlmaWVyKG9wdGlvbnMpIHtcbiAgICB0aGlzLl90cmFuc2Zvcm1HZXR0ZXIgPSBudWxsO1xuICAgIHRoaXMuX29wYWNpdHlHZXR0ZXIgPSBudWxsO1xuICAgIHRoaXMuX29yaWdpbkdldHRlciA9IG51bGw7XG4gICAgdGhpcy5fYWxpZ25HZXR0ZXIgPSBudWxsO1xuICAgIHRoaXMuX3NpemVHZXR0ZXIgPSBudWxsO1xuICAgIHRoaXMuX3Byb3BvcnRpb25HZXR0ZXIgPSBudWxsO1xuICAgIHRoaXMuX2xlZ2FjeVN0YXRlcyA9IHt9O1xuICAgIHRoaXMuX291dHB1dCA9IHtcbiAgICAgICAgdHJhbnNmb3JtOiBUcmFuc2Zvcm0uaWRlbnRpdHksXG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIG9yaWdpbjogbnVsbCxcbiAgICAgICAgYWxpZ246IG51bGwsXG4gICAgICAgIHNpemU6IG51bGwsXG4gICAgICAgIHByb3BvcnRpb25zOiBudWxsLFxuICAgICAgICB0YXJnZXQ6IG51bGxcbiAgICB9O1xuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zLnRyYW5zZm9ybSlcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtRnJvbShvcHRpb25zLnRyYW5zZm9ybSk7XG4gICAgICAgIGlmIChvcHRpb25zLm9wYWNpdHkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eUZyb20ob3B0aW9ucy5vcGFjaXR5KTtcbiAgICAgICAgaWYgKG9wdGlvbnMub3JpZ2luKVxuICAgICAgICAgICAgdGhpcy5vcmlnaW5Gcm9tKG9wdGlvbnMub3JpZ2luKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWxpZ24pXG4gICAgICAgICAgICB0aGlzLmFsaWduRnJvbShvcHRpb25zLmFsaWduKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuc2l6ZSlcbiAgICAgICAgICAgIHRoaXMuc2l6ZUZyb20ob3B0aW9ucy5zaXplKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucHJvcG9ydGlvbnMpXG4gICAgICAgICAgICB0aGlzLnByb3BvcnRpb25zRnJvbShvcHRpb25zLnByb3BvcnRpb25zKTtcbiAgICB9XG59XG5Nb2RpZmllci5wcm90b3R5cGUudHJhbnNmb3JtRnJvbSA9IGZ1bmN0aW9uIHRyYW5zZm9ybUZyb20odHJhbnNmb3JtKSB7XG4gICAgaWYgKHRyYW5zZm9ybSBpbnN0YW5jZW9mIEZ1bmN0aW9uKVxuICAgICAgICB0aGlzLl90cmFuc2Zvcm1HZXR0ZXIgPSB0cmFuc2Zvcm07XG4gICAgZWxzZSBpZiAodHJhbnNmb3JtIGluc3RhbmNlb2YgT2JqZWN0ICYmIHRyYW5zZm9ybS5nZXQpXG4gICAgICAgIHRoaXMuX3RyYW5zZm9ybUdldHRlciA9IHRyYW5zZm9ybS5nZXQuYmluZCh0cmFuc2Zvcm0pO1xuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl90cmFuc2Zvcm1HZXR0ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl9vdXRwdXQudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5Nb2RpZmllci5wcm90b3R5cGUub3BhY2l0eUZyb20gPSBmdW5jdGlvbiBvcGFjaXR5RnJvbShvcGFjaXR5KSB7XG4gICAgaWYgKG9wYWNpdHkgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgdGhpcy5fb3BhY2l0eUdldHRlciA9IG9wYWNpdHk7XG4gICAgZWxzZSBpZiAob3BhY2l0eSBpbnN0YW5jZW9mIE9iamVjdCAmJiBvcGFjaXR5LmdldClcbiAgICAgICAgdGhpcy5fb3BhY2l0eUdldHRlciA9IG9wYWNpdHkuZ2V0LmJpbmQob3BhY2l0eSk7XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuX29wYWNpdHlHZXR0ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl9vdXRwdXQub3BhY2l0eSA9IG9wYWNpdHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5vcmlnaW5Gcm9tID0gZnVuY3Rpb24gb3JpZ2luRnJvbShvcmlnaW4pIHtcbiAgICBpZiAob3JpZ2luIGluc3RhbmNlb2YgRnVuY3Rpb24pXG4gICAgICAgIHRoaXMuX29yaWdpbkdldHRlciA9IG9yaWdpbjtcbiAgICBlbHNlIGlmIChvcmlnaW4gaW5zdGFuY2VvZiBPYmplY3QgJiYgb3JpZ2luLmdldClcbiAgICAgICAgdGhpcy5fb3JpZ2luR2V0dGVyID0gb3JpZ2luLmdldC5iaW5kKG9yaWdpbik7XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuX29yaWdpbkdldHRlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX291dHB1dC5vcmlnaW4gPSBvcmlnaW47XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5hbGlnbkZyb20gPSBmdW5jdGlvbiBhbGlnbkZyb20oYWxpZ24pIHtcbiAgICBpZiAoYWxpZ24gaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgdGhpcy5fYWxpZ25HZXR0ZXIgPSBhbGlnbjtcbiAgICBlbHNlIGlmIChhbGlnbiBpbnN0YW5jZW9mIE9iamVjdCAmJiBhbGlnbi5nZXQpXG4gICAgICAgIHRoaXMuX2FsaWduR2V0dGVyID0gYWxpZ24uZ2V0LmJpbmQoYWxpZ24pO1xuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl9hbGlnbkdldHRlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX291dHB1dC5hbGlnbiA9IGFsaWduO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5Nb2RpZmllci5wcm90b3R5cGUuc2l6ZUZyb20gPSBmdW5jdGlvbiBzaXplRnJvbShzaXplKSB7XG4gICAgaWYgKHNpemUgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgdGhpcy5fc2l6ZUdldHRlciA9IHNpemU7XG4gICAgZWxzZSBpZiAoc2l6ZSBpbnN0YW5jZW9mIE9iamVjdCAmJiBzaXplLmdldClcbiAgICAgICAgdGhpcy5fc2l6ZUdldHRlciA9IHNpemUuZ2V0LmJpbmQoc2l6ZSk7XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuX3NpemVHZXR0ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl9vdXRwdXQuc2l6ZSA9IHNpemU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5wcm9wb3J0aW9uc0Zyb20gPSBmdW5jdGlvbiBwcm9wb3J0aW9uc0Zyb20ocHJvcG9ydGlvbnMpIHtcbiAgICBpZiAocHJvcG9ydGlvbnMgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgdGhpcy5fcHJvcG9ydGlvbkdldHRlciA9IHByb3BvcnRpb25zO1xuICAgIGVsc2UgaWYgKHByb3BvcnRpb25zIGluc3RhbmNlb2YgT2JqZWN0ICYmIHByb3BvcnRpb25zLmdldClcbiAgICAgICAgdGhpcy5fcHJvcG9ydGlvbkdldHRlciA9IHByb3BvcnRpb25zLmdldC5iaW5kKHByb3BvcnRpb25zKTtcbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fcHJvcG9ydGlvbkdldHRlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX291dHB1dC5wcm9wb3J0aW9ucyA9IHByb3BvcnRpb25zO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5Nb2RpZmllci5wcm90b3R5cGUuc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICBpZiAodHJhbnNpdGlvbiB8fCB0aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtKSB7XG4gICAgICAgIGlmICghdGhpcy5fbGVnYWN5U3RhdGVzLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgdGhpcy5fbGVnYWN5U3RhdGVzLnRyYW5zZm9ybSA9IG5ldyBUcmFuc2l0aW9uYWJsZVRyYW5zZm9ybSh0aGlzLl9vdXRwdXQudHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX3RyYW5zZm9ybUdldHRlcilcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtRnJvbSh0aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy5fbGVnYWN5U3RhdGVzLnRyYW5zZm9ybS5zZXQodHJhbnNmb3JtLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZVxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Gcm9tKHRyYW5zZm9ybSk7XG59O1xuTW9kaWZpZXIucHJvdG90eXBlLnNldE9wYWNpdHkgPSBmdW5jdGlvbiBzZXRPcGFjaXR5KG9wYWNpdHksIHRyYW5zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRyYW5zaXRpb24gfHwgdGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHkpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9sZWdhY3lTdGF0ZXMub3BhY2l0eSkge1xuICAgICAgICAgICAgdGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHkgPSBuZXcgVHJhbnNpdGlvbmFibGUodGhpcy5fb3V0cHV0Lm9wYWNpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fb3BhY2l0eUdldHRlcilcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eUZyb20odGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHkpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHkuc2V0KG9wYWNpdHksIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbiAgICB9IGVsc2VcbiAgICAgICAgcmV0dXJuIHRoaXMub3BhY2l0eUZyb20ob3BhY2l0eSk7XG59O1xuTW9kaWZpZXIucHJvdG90eXBlLnNldE9yaWdpbiA9IGZ1bmN0aW9uIHNldE9yaWdpbihvcmlnaW4sIHRyYW5zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRyYW5zaXRpb24gfHwgdGhpcy5fbGVnYWN5U3RhdGVzLm9yaWdpbikge1xuICAgICAgICBpZiAoIXRoaXMuX2xlZ2FjeVN0YXRlcy5vcmlnaW4pIHtcbiAgICAgICAgICAgIHRoaXMuX2xlZ2FjeVN0YXRlcy5vcmlnaW4gPSBuZXcgVHJhbnNpdGlvbmFibGUodGhpcy5fb3V0cHV0Lm9yaWdpbiB8fCBbXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX29yaWdpbkdldHRlcilcbiAgICAgICAgICAgIHRoaXMub3JpZ2luRnJvbSh0aGlzLl9sZWdhY3lTdGF0ZXMub3JpZ2luKTtcbiAgICAgICAgdGhpcy5fbGVnYWN5U3RhdGVzLm9yaWdpbi5zZXQob3JpZ2luLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZVxuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5Gcm9tKG9yaWdpbik7XG59O1xuTW9kaWZpZXIucHJvdG90eXBlLnNldEFsaWduID0gZnVuY3Rpb24gc2V0QWxpZ24oYWxpZ24sIHRyYW5zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRyYW5zaXRpb24gfHwgdGhpcy5fbGVnYWN5U3RhdGVzLmFsaWduKSB7XG4gICAgICAgIGlmICghdGhpcy5fbGVnYWN5U3RhdGVzLmFsaWduKSB7XG4gICAgICAgICAgICB0aGlzLl9sZWdhY3lTdGF0ZXMuYWxpZ24gPSBuZXcgVHJhbnNpdGlvbmFibGUodGhpcy5fb3V0cHV0LmFsaWduIHx8IFtcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fYWxpZ25HZXR0ZXIpXG4gICAgICAgICAgICB0aGlzLmFsaWduRnJvbSh0aGlzLl9sZWdhY3lTdGF0ZXMuYWxpZ24pO1xuICAgICAgICB0aGlzLl9sZWdhY3lTdGF0ZXMuYWxpZ24uc2V0KGFsaWduLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZVxuICAgICAgICByZXR1cm4gdGhpcy5hbGlnbkZyb20oYWxpZ24pO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gc2V0U2l6ZShzaXplLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmIChzaXplICYmICh0cmFuc2l0aW9uIHx8IHRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplKSkge1xuICAgICAgICBpZiAoIXRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplKSB7XG4gICAgICAgICAgICB0aGlzLl9sZWdhY3lTdGF0ZXMuc2l6ZSA9IG5ldyBUcmFuc2l0aW9uYWJsZSh0aGlzLl9vdXRwdXQuc2l6ZSB8fCBbXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX3NpemVHZXR0ZXIpXG4gICAgICAgICAgICB0aGlzLnNpemVGcm9tKHRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplKTtcbiAgICAgICAgdGhpcy5fbGVnYWN5U3RhdGVzLnNpemUuc2V0KHNpemUsIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlXG4gICAgICAgIHJldHVybiB0aGlzLnNpemVGcm9tKHNpemUpO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5zZXRQcm9wb3J0aW9ucyA9IGZ1bmN0aW9uIHNldFByb3BvcnRpb25zKHByb3BvcnRpb25zLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmIChwcm9wb3J0aW9ucyAmJiAodHJhbnNpdGlvbiB8fCB0aGlzLl9sZWdhY3lTdGF0ZXMucHJvcG9ydGlvbnMpKSB7XG4gICAgICAgIGlmICghdGhpcy5fbGVnYWN5U3RhdGVzLnByb3BvcnRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLl9sZWdhY3lTdGF0ZXMucHJvcG9ydGlvbnMgPSBuZXcgVHJhbnNpdGlvbmFibGUodGhpcy5fb3V0cHV0LnByb3BvcnRpb25zIHx8IFtcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fcHJvcG9ydGlvbkdldHRlcilcbiAgICAgICAgICAgIHRoaXMucHJvcG9ydGlvbnNGcm9tKHRoaXMuX2xlZ2FjeVN0YXRlcy5wcm9wb3J0aW9ucyk7XG4gICAgICAgIHRoaXMuX2xlZ2FjeVN0YXRlcy5wcm9wb3J0aW9ucy5zZXQocHJvcG9ydGlvbnMsIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlXG4gICAgICAgIHJldHVybiB0aGlzLnByb3BvcnRpb25zRnJvbShwcm9wb3J0aW9ucyk7XG59O1xuTW9kaWZpZXIucHJvdG90eXBlLmhhbHQgPSBmdW5jdGlvbiBoYWx0KCkge1xuICAgIGlmICh0aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtKVxuICAgICAgICB0aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtLmhhbHQoKTtcbiAgICBpZiAodGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHkpXG4gICAgICAgIHRoaXMuX2xlZ2FjeVN0YXRlcy5vcGFjaXR5LmhhbHQoKTtcbiAgICBpZiAodGhpcy5fbGVnYWN5U3RhdGVzLm9yaWdpbilcbiAgICAgICAgdGhpcy5fbGVnYWN5U3RhdGVzLm9yaWdpbi5oYWx0KCk7XG4gICAgaWYgKHRoaXMuX2xlZ2FjeVN0YXRlcy5hbGlnbilcbiAgICAgICAgdGhpcy5fbGVnYWN5U3RhdGVzLmFsaWduLmhhbHQoKTtcbiAgICBpZiAodGhpcy5fbGVnYWN5U3RhdGVzLnNpemUpXG4gICAgICAgIHRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplLmhhbHQoKTtcbiAgICBpZiAodGhpcy5fbGVnYWN5U3RhdGVzLnByb3BvcnRpb25zKVxuICAgICAgICB0aGlzLl9sZWdhY3lTdGF0ZXMucHJvcG9ydGlvbnMuaGFsdCgpO1xuICAgIHRoaXMuX3RyYW5zZm9ybUdldHRlciA9IG51bGw7XG4gICAgdGhpcy5fb3BhY2l0eUdldHRlciA9IG51bGw7XG4gICAgdGhpcy5fb3JpZ2luR2V0dGVyID0gbnVsbDtcbiAgICB0aGlzLl9hbGlnbkdldHRlciA9IG51bGw7XG4gICAgdGhpcy5fc2l6ZUdldHRlciA9IG51bGw7XG4gICAgdGhpcy5fcHJvcG9ydGlvbkdldHRlciA9IG51bGw7XG59O1xuTW9kaWZpZXIucHJvdG90eXBlLmdldFRyYW5zZm9ybSA9IGZ1bmN0aW9uIGdldFRyYW5zZm9ybSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtR2V0dGVyKCk7XG59O1xuTW9kaWZpZXIucHJvdG90eXBlLmdldEZpbmFsVHJhbnNmb3JtID0gZnVuY3Rpb24gZ2V0RmluYWxUcmFuc2Zvcm0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlZ2FjeVN0YXRlcy50cmFuc2Zvcm0gPyB0aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtLmdldEZpbmFsKCkgOiB0aGlzLl9vdXRwdXQudHJhbnNmb3JtO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5nZXRPcGFjaXR5ID0gZnVuY3Rpb24gZ2V0T3BhY2l0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5fb3BhY2l0eUdldHRlcigpO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5nZXRPcmlnaW4gPSBmdW5jdGlvbiBnZXRPcmlnaW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuX29yaWdpbkdldHRlcigpO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5nZXRBbGlnbiA9IGZ1bmN0aW9uIGdldEFsaWduKCkge1xuICAgIHJldHVybiB0aGlzLl9hbGlnbkdldHRlcigpO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2l6ZUdldHRlciA/IHRoaXMuX3NpemVHZXR0ZXIoKSA6IHRoaXMuX291dHB1dC5zaXplO1xufTtcbk1vZGlmaWVyLnByb3RvdHlwZS5nZXRQcm9wb3J0aW9ucyA9IGZ1bmN0aW9uIGdldFByb3BvcnRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9wb3J0aW9uR2V0dGVyID8gdGhpcy5fcHJvcG9ydGlvbkdldHRlcigpIDogdGhpcy5fb3V0cHV0LnByb3BvcnRpb25zO1xufTtcbmZ1bmN0aW9uIF91cGRhdGUoKSB7XG4gICAgaWYgKHRoaXMuX3RyYW5zZm9ybUdldHRlcilcbiAgICAgICAgdGhpcy5fb3V0cHV0LnRyYW5zZm9ybSA9IHRoaXMuX3RyYW5zZm9ybUdldHRlcigpO1xuICAgIGlmICh0aGlzLl9vcGFjaXR5R2V0dGVyKVxuICAgICAgICB0aGlzLl9vdXRwdXQub3BhY2l0eSA9IHRoaXMuX29wYWNpdHlHZXR0ZXIoKTtcbiAgICBpZiAodGhpcy5fb3JpZ2luR2V0dGVyKVxuICAgICAgICB0aGlzLl9vdXRwdXQub3JpZ2luID0gdGhpcy5fb3JpZ2luR2V0dGVyKCk7XG4gICAgaWYgKHRoaXMuX2FsaWduR2V0dGVyKVxuICAgICAgICB0aGlzLl9vdXRwdXQuYWxpZ24gPSB0aGlzLl9hbGlnbkdldHRlcigpO1xuICAgIGlmICh0aGlzLl9zaXplR2V0dGVyKVxuICAgICAgICB0aGlzLl9vdXRwdXQuc2l6ZSA9IHRoaXMuX3NpemVHZXR0ZXIoKTtcbiAgICBpZiAodGhpcy5fcHJvcG9ydGlvbkdldHRlcilcbiAgICAgICAgdGhpcy5fb3V0cHV0LnByb3BvcnRpb25zID0gdGhpcy5fcHJvcG9ydGlvbkdldHRlcigpO1xufVxuTW9kaWZpZXIucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIG1vZGlmeSh0YXJnZXQpIHtcbiAgICBfdXBkYXRlLmNhbGwodGhpcyk7XG4gICAgdGhpcy5fb3V0cHV0LnRhcmdldCA9IHRhcmdldDtcbiAgICByZXR1cm4gdGhpcy5fb3V0cHV0O1xufTtcbm1vZHVsZS5leHBvcnRzID0gTW9kaWZpZXI7IiwidmFyIEV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJy4vRXZlbnRIYW5kbGVyJyk7XG5mdW5jdGlvbiBPcHRpb25zTWFuYWdlcih2YWx1ZSkge1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5ldmVudE91dHB1dCA9IG51bGw7XG59XG5PcHRpb25zTWFuYWdlci5wYXRjaCA9IGZ1bmN0aW9uIHBhdGNoT2JqZWN0KHNvdXJjZSwgZGF0YSkge1xuICAgIHZhciBtYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHNvdXJjZSk7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXG4gICAgICAgIG1hbmFnZXIucGF0Y2goYXJndW1lbnRzW2ldKTtcbiAgICByZXR1cm4gc291cmNlO1xufTtcbmZ1bmN0aW9uIF9jcmVhdGVFdmVudE91dHB1dCgpIHtcbiAgICB0aGlzLmV2ZW50T3V0cHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIHRoaXMuZXZlbnRPdXRwdXQuYmluZFRoaXModGhpcyk7XG4gICAgRXZlbnRIYW5kbGVyLnNldE91dHB1dEhhbmRsZXIodGhpcywgdGhpcy5ldmVudE91dHB1dCk7XG59XG5PcHRpb25zTWFuYWdlci5wcm90b3R5cGUucGF0Y2ggPSBmdW5jdGlvbiBwYXRjaCgpIHtcbiAgICB2YXIgbXlTdGF0ZSA9IHRoaXMuX3ZhbHVlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBkYXRhID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBmb3IgKHZhciBrIGluIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChrIGluIG15U3RhdGUgJiYgKGRhdGFba10gJiYgZGF0YVtrXS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSAmJiAobXlTdGF0ZVtrXSAmJiBteVN0YXRlW2tdLmNvbnN0cnVjdG9yID09PSBPYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFteVN0YXRlLmhhc093blByb3BlcnR5KGspKVxuICAgICAgICAgICAgICAgICAgICBteVN0YXRlW2tdID0gT2JqZWN0LmNyZWF0ZShteVN0YXRlW2tdKTtcbiAgICAgICAgICAgICAgICB0aGlzLmtleShrKS5wYXRjaChkYXRhW2tdKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ldmVudE91dHB1dClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudE91dHB1dC5lbWl0KCdjaGFuZ2UnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmtleShrKS52YWx1ZSgpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoaywgZGF0YVtrXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuT3B0aW9uc01hbmFnZXIucHJvdG90eXBlLnNldE9wdGlvbnMgPSBPcHRpb25zTWFuYWdlci5wcm90b3R5cGUucGF0Y2g7XG5PcHRpb25zTWFuYWdlci5wcm90b3R5cGUua2V5ID0gZnVuY3Rpb24ga2V5KGlkZW50aWZpZXIpIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHRoaXMuX3ZhbHVlW2lkZW50aWZpZXJdKTtcbiAgICBpZiAoIShyZXN1bHQuX3ZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB8fCByZXN1bHQuX3ZhbHVlIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgIHJlc3VsdC5fdmFsdWUgPSB7fTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9wdGlvbnNNYW5hZ2VyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgcmV0dXJuIGtleSA/IHRoaXMuX3ZhbHVlW2tleV0gOiB0aGlzLl92YWx1ZTtcbn07XG5PcHRpb25zTWFuYWdlci5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IE9wdGlvbnNNYW5hZ2VyLnByb3RvdHlwZS5nZXQ7XG5PcHRpb25zTWFuYWdlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHtcbiAgICB2YXIgb3JpZ2luYWxWYWx1ZSA9IHRoaXMuZ2V0KGtleSk7XG4gICAgdGhpcy5fdmFsdWVba2V5XSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmV2ZW50T3V0cHV0ICYmIHZhbHVlICE9PSBvcmlnaW5hbFZhbHVlKVxuICAgICAgICB0aGlzLmV2ZW50T3V0cHV0LmVtaXQoJ2NoYW5nZScsIHtcbiAgICAgICAgICAgIGlkOiBrZXksXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuT3B0aW9uc01hbmFnZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24oKSB7XG4gICAgX2NyZWF0ZUV2ZW50T3V0cHV0LmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMub24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5PcHRpb25zTWFuYWdlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcigpIHtcbiAgICBfY3JlYXRlRXZlbnRPdXRwdXQuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbk9wdGlvbnNNYW5hZ2VyLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gcGlwZSgpIHtcbiAgICBfY3JlYXRlRXZlbnRPdXRwdXQuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5waXBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuT3B0aW9uc01hbmFnZXIucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIHVucGlwZSgpIHtcbiAgICBfY3JlYXRlRXZlbnRPdXRwdXQuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy51bnBpcGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IE9wdGlvbnNNYW5hZ2VyOyIsInZhciBFbnRpdHkgPSByZXF1aXJlKCcuL0VudGl0eScpO1xudmFyIFNwZWNQYXJzZXIgPSByZXF1aXJlKCcuL1NwZWNQYXJzZXInKTtcbmZ1bmN0aW9uIFJlbmRlck5vZGUob2JqZWN0KSB7XG4gICAgdGhpcy5fb2JqZWN0ID0gbnVsbDtcbiAgICB0aGlzLl9jaGlsZCA9IG51bGw7XG4gICAgdGhpcy5faGFzTXVsdGlwbGVDaGlsZHJlbiA9IGZhbHNlO1xuICAgIHRoaXMuX2lzUmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuX2lzTW9kaWZpZXIgPSBmYWxzZTtcbiAgICB0aGlzLl9yZXN1bHRDYWNoZSA9IHt9O1xuICAgIHRoaXMuX3ByZXZSZXN1bHRzID0ge307XG4gICAgdGhpcy5fY2hpbGRSZXN1bHQgPSBudWxsO1xuICAgIGlmIChvYmplY3QpXG4gICAgICAgIHRoaXMuc2V0KG9iamVjdCk7XG59XG5SZW5kZXJOb2RlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQoY2hpbGQpIHtcbiAgICB2YXIgY2hpbGROb2RlID0gY2hpbGQgaW5zdGFuY2VvZiBSZW5kZXJOb2RlID8gY2hpbGQgOiBuZXcgUmVuZGVyTm9kZShjaGlsZCk7XG4gICAgaWYgKHRoaXMuX2NoaWxkIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgIHRoaXMuX2NoaWxkLnB1c2goY2hpbGROb2RlKTtcbiAgICBlbHNlIGlmICh0aGlzLl9jaGlsZCkge1xuICAgICAgICB0aGlzLl9jaGlsZCA9IFtcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkLFxuICAgICAgICAgICAgY2hpbGROb2RlXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuX2hhc011bHRpcGxlQ2hpbGRyZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLl9jaGlsZFJlc3VsdCA9IFtdO1xuICAgIH0gZWxzZVxuICAgICAgICB0aGlzLl9jaGlsZCA9IGNoaWxkTm9kZTtcbiAgICByZXR1cm4gY2hpbGROb2RlO1xufTtcblJlbmRlck5vZGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5fb2JqZWN0IHx8ICh0aGlzLl9oYXNNdWx0aXBsZUNoaWxkcmVuID8gbnVsbCA6IHRoaXMuX2NoaWxkID8gdGhpcy5fY2hpbGQuZ2V0KCkgOiBudWxsKTtcbn07XG5SZW5kZXJOb2RlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQoY2hpbGQpIHtcbiAgICB0aGlzLl9jaGlsZFJlc3VsdCA9IG51bGw7XG4gICAgdGhpcy5faGFzTXVsdGlwbGVDaGlsZHJlbiA9IGZhbHNlO1xuICAgIHRoaXMuX2lzUmVuZGVyYWJsZSA9IGNoaWxkLnJlbmRlciA/IHRydWUgOiBmYWxzZTtcbiAgICB0aGlzLl9pc01vZGlmaWVyID0gY2hpbGQubW9kaWZ5ID8gdHJ1ZSA6IGZhbHNlO1xuICAgIHRoaXMuX29iamVjdCA9IGNoaWxkO1xuICAgIHRoaXMuX2NoaWxkID0gbnVsbDtcbiAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBSZW5kZXJOb2RlKVxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gdGhpcztcbn07XG5SZW5kZXJOb2RlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5nZXQoKTtcbiAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5nZXRTaXplKVxuICAgICAgICByZXN1bHQgPSB0YXJnZXQuZ2V0U2l6ZSgpO1xuICAgIGlmICghcmVzdWx0ICYmIHRoaXMuX2NoaWxkICYmIHRoaXMuX2NoaWxkLmdldFNpemUpXG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2NoaWxkLmdldFNpemUoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbmZ1bmN0aW9uIF9hcHBseUNvbW1pdChzcGVjLCBjb250ZXh0LCBjYWNoZVN0b3JhZ2UpIHtcbiAgICB2YXIgcmVzdWx0ID0gU3BlY1BhcnNlci5wYXJzZShzcGVjLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHJlc3VsdCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBpZCA9IGtleXNbaV07XG4gICAgICAgIHZhciBjaGlsZE5vZGUgPSBFbnRpdHkuZ2V0KGlkKTtcbiAgICAgICAgdmFyIGNvbW1pdFBhcmFtcyA9IHJlc3VsdFtpZF07XG4gICAgICAgIGNvbW1pdFBhcmFtcy5hbGxvY2F0b3IgPSBjb250ZXh0LmFsbG9jYXRvcjtcbiAgICAgICAgdmFyIGNvbW1pdFJlc3VsdCA9IGNoaWxkTm9kZS5jb21taXQoY29tbWl0UGFyYW1zKTtcbiAgICAgICAgaWYgKGNvbW1pdFJlc3VsdClcbiAgICAgICAgICAgIF9hcHBseUNvbW1pdChjb21taXRSZXN1bHQsIGNvbnRleHQsIGNhY2hlU3RvcmFnZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNhY2hlU3RvcmFnZVtpZF0gPSBjb21taXRQYXJhbXM7XG4gICAgfVxufVxuUmVuZGVyTm9kZS5wcm90b3R5cGUuY29tbWl0ID0gZnVuY3Rpb24gY29tbWl0KGNvbnRleHQpIHtcbiAgICB2YXIgcHJldktleXMgPSBPYmplY3Qua2V5cyh0aGlzLl9wcmV2UmVzdWx0cyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmV2S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgaWQgPSBwcmV2S2V5c1tpXTtcbiAgICAgICAgaWYgKHRoaXMuX3Jlc3VsdENhY2hlW2lkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0gRW50aXR5LmdldChpZCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LmNsZWFudXApXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNsZWFudXAoY29udGV4dC5hbGxvY2F0b3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3ByZXZSZXN1bHRzID0gdGhpcy5fcmVzdWx0Q2FjaGU7XG4gICAgdGhpcy5fcmVzdWx0Q2FjaGUgPSB7fTtcbiAgICBfYXBwbHlDb21taXQodGhpcy5yZW5kZXIoKSwgY29udGV4dCwgdGhpcy5fcmVzdWx0Q2FjaGUpO1xufTtcblJlbmRlck5vZGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5faXNSZW5kZXJhYmxlKVxuICAgICAgICByZXR1cm4gdGhpcy5fb2JqZWN0LnJlbmRlcigpO1xuICAgIHZhciByZXN1bHQgPSBudWxsO1xuICAgIGlmICh0aGlzLl9oYXNNdWx0aXBsZUNoaWxkcmVuKSB7XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2NoaWxkUmVzdWx0O1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLl9jaGlsZDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0W2ldID0gY2hpbGRyZW5baV0ucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2NoaWxkKVxuICAgICAgICByZXN1bHQgPSB0aGlzLl9jaGlsZC5yZW5kZXIoKTtcbiAgICByZXR1cm4gdGhpcy5faXNNb2RpZmllciA/IHRoaXMuX29iamVjdC5tb2RpZnkocmVzdWx0KSA6IHJlc3VsdDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFJlbmRlck5vZGU7IiwidmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vVHJhbnNmb3JtJyk7XG52YXIgTW9kaWZpZXIgPSByZXF1aXJlKCcuL01vZGlmaWVyJyk7XG52YXIgUmVuZGVyTm9kZSA9IHJlcXVpcmUoJy4vUmVuZGVyTm9kZScpO1xuZnVuY3Rpb24gU2NlbmUoZGVmaW5pdGlvbikge1xuICAgIHRoaXMuaWQgPSBudWxsO1xuICAgIHRoaXMuX29iamVjdHMgPSBudWxsO1xuICAgIHRoaXMubm9kZSA9IG5ldyBSZW5kZXJOb2RlKCk7XG4gICAgdGhpcy5fZGVmaW5pdGlvbiA9IG51bGw7XG4gICAgaWYgKGRlZmluaXRpb24pXG4gICAgICAgIHRoaXMubG9hZChkZWZpbml0aW9uKTtcbn1cbnZhciBfTUFUUklYX0dFTkVSQVRPUlMgPSB7XG4gICAgICAgICd0cmFuc2xhdGUnOiBUcmFuc2Zvcm0udHJhbnNsYXRlLFxuICAgICAgICAncm90YXRlJzogVHJhbnNmb3JtLnJvdGF0ZSxcbiAgICAgICAgJ3JvdGF0ZVgnOiBUcmFuc2Zvcm0ucm90YXRlWCxcbiAgICAgICAgJ3JvdGF0ZVknOiBUcmFuc2Zvcm0ucm90YXRlWSxcbiAgICAgICAgJ3JvdGF0ZVonOiBUcmFuc2Zvcm0ucm90YXRlWixcbiAgICAgICAgJ3JvdGF0ZUF4aXMnOiBUcmFuc2Zvcm0ucm90YXRlQXhpcyxcbiAgICAgICAgJ3NjYWxlJzogVHJhbnNmb3JtLnNjYWxlLFxuICAgICAgICAnc2tldyc6IFRyYW5zZm9ybS5za2V3LFxuICAgICAgICAnbWF0cml4M2QnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzO1xuICAgICAgICB9XG4gICAgfTtcblNjZW5lLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIG5ldyBTY2VuZSh0aGlzLl9kZWZpbml0aW9uKTtcbn07XG5mdW5jdGlvbiBfcmVzb2x2ZVRyYW5zZm9ybU1hdHJpeChtYXRyaXhEZWZpbml0aW9uKSB7XG4gICAgZm9yICh2YXIgdHlwZSBpbiBfTUFUUklYX0dFTkVSQVRPUlMpIHtcbiAgICAgICAgaWYgKHR5cGUgaW4gbWF0cml4RGVmaW5pdGlvbikge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBtYXRyaXhEZWZpbml0aW9uW3R5cGVdO1xuICAgICAgICAgICAgaWYgKCEoYXJncyBpbnN0YW5jZW9mIEFycmF5KSlcbiAgICAgICAgICAgICAgICBhcmdzID0gW2FyZ3NdO1xuICAgICAgICAgICAgcmV0dXJuIF9NQVRSSVhfR0VORVJBVE9SU1t0eXBlXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIF9wYXJzZVRyYW5zZm9ybShkZWZpbml0aW9uKSB7XG4gICAgdmFyIHRyYW5zZm9ybURlZmluaXRpb24gPSBkZWZpbml0aW9uLnRyYW5zZm9ybTtcbiAgICB2YXIgb3BhY2l0eSA9IGRlZmluaXRpb24ub3BhY2l0eTtcbiAgICB2YXIgb3JpZ2luID0gZGVmaW5pdGlvbi5vcmlnaW47XG4gICAgdmFyIGFsaWduID0gZGVmaW5pdGlvbi5hbGlnbjtcbiAgICB2YXIgc2l6ZSA9IGRlZmluaXRpb24uc2l6ZTtcbiAgICB2YXIgdHJhbnNmb3JtID0gVHJhbnNmb3JtLmlkZW50aXR5O1xuICAgIGlmICh0cmFuc2Zvcm1EZWZpbml0aW9uIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgaWYgKHRyYW5zZm9ybURlZmluaXRpb24ubGVuZ3RoID09PSAxNiAmJiB0eXBlb2YgdHJhbnNmb3JtRGVmaW5pdGlvblswXSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IHRyYW5zZm9ybURlZmluaXRpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYW5zZm9ybURlZmluaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gPSBUcmFuc2Zvcm0ubXVsdGlwbHkodHJhbnNmb3JtLCBfcmVzb2x2ZVRyYW5zZm9ybU1hdHJpeCh0cmFuc2Zvcm1EZWZpbml0aW9uW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRyYW5zZm9ybURlZmluaXRpb24gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1EZWZpbml0aW9uO1xuICAgIH0gZWxzZSBpZiAodHJhbnNmb3JtRGVmaW5pdGlvbiBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICB0cmFuc2Zvcm0gPSBfcmVzb2x2ZVRyYW5zZm9ybU1hdHJpeCh0cmFuc2Zvcm1EZWZpbml0aW9uKTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBNb2RpZmllcih7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgICAgICAgICAgIG9wYWNpdHk6IG9wYWNpdHksXG4gICAgICAgICAgICBvcmlnaW46IG9yaWdpbixcbiAgICAgICAgICAgIGFsaWduOiBhbGlnbixcbiAgICAgICAgICAgIHNpemU6IHNpemVcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIF9wYXJzZUFycmF5KGRlZmluaXRpb24pIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IFJlbmRlck5vZGUoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlZmluaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG9iaiA9IF9wYXJzZS5jYWxsKHRoaXMsIGRlZmluaXRpb25baV0pO1xuICAgICAgICBpZiAob2JqKVxuICAgICAgICAgICAgcmVzdWx0LmFkZChvYmopO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gX3BhcnNlKGRlZmluaXRpb24pIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIHZhciBpZDtcbiAgICBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHJlc3VsdCA9IF9wYXJzZUFycmF5LmNhbGwodGhpcywgZGVmaW5pdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWQgPSB0aGlzLl9vYmplY3RzLmxlbmd0aDtcbiAgICAgICAgaWYgKGRlZmluaXRpb24ucmVuZGVyICYmIGRlZmluaXRpb24ucmVuZGVyIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGRlZmluaXRpb247XG4gICAgICAgIH0gZWxzZSBpZiAoZGVmaW5pdGlvbi50YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRPYmogPSBfcGFyc2UuY2FsbCh0aGlzLCBkZWZpbml0aW9uLnRhcmdldCk7XG4gICAgICAgICAgICB2YXIgb2JqID0gX3BhcnNlVHJhbnNmb3JtLmNhbGwodGhpcywgZGVmaW5pdGlvbik7XG4gICAgICAgICAgICByZXN1bHQgPSBuZXcgUmVuZGVyTm9kZShvYmopO1xuICAgICAgICAgICAgcmVzdWx0LmFkZCh0YXJnZXRPYmopO1xuICAgICAgICAgICAgaWYgKGRlZmluaXRpb24uaWQpXG4gICAgICAgICAgICAgICAgdGhpcy5pZFtkZWZpbml0aW9uLmlkXSA9IG9iajtcbiAgICAgICAgfSBlbHNlIGlmIChkZWZpbml0aW9uLmlkKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBuZXcgUmVuZGVyTm9kZSgpO1xuICAgICAgICAgICAgdGhpcy5pZFtkZWZpbml0aW9uLmlkXSA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9vYmplY3RzW2lkXSA9IHJlc3VsdDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuU2NlbmUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiBsb2FkKGRlZmluaXRpb24pIHtcbiAgICB0aGlzLl9kZWZpbml0aW9uID0gZGVmaW5pdGlvbjtcbiAgICB0aGlzLmlkID0ge307XG4gICAgdGhpcy5fb2JqZWN0cyA9IFtdO1xuICAgIHRoaXMubm9kZS5zZXQoX3BhcnNlLmNhbGwodGhpcywgZGVmaW5pdGlvbikpO1xufTtcblNjZW5lLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQoKSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZS5hZGQuYXBwbHkodGhpcy5ub2RlLCBhcmd1bWVudHMpO1xufTtcblNjZW5lLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZS5yZW5kZXIuYXBwbHkodGhpcy5ub2RlLCBhcmd1bWVudHMpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gU2NlbmU7IiwidmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vVHJhbnNmb3JtJyk7XG5mdW5jdGlvbiBTcGVjUGFyc2VyKCkge1xuICAgIHRoaXMucmVzdWx0ID0ge307XG59XG5TcGVjUGFyc2VyLl9pbnN0YW5jZSA9IG5ldyBTcGVjUGFyc2VyKCk7XG5TcGVjUGFyc2VyLnBhcnNlID0gZnVuY3Rpb24gcGFyc2Uoc3BlYywgY29udGV4dCkge1xuICAgIHJldHVybiBTcGVjUGFyc2VyLl9pbnN0YW5jZS5wYXJzZShzcGVjLCBjb250ZXh0KTtcbn07XG5TcGVjUGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKHNwZWMsIGNvbnRleHQpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5fcGFyc2VTcGVjKHNwZWMsIGNvbnRleHQsIFRyYW5zZm9ybS5pZGVudGl0eSk7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0O1xufTtcblNwZWNQYXJzZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgdGhpcy5yZXN1bHQgPSB7fTtcbn07XG5mdW5jdGlvbiBfdmVjSW5Db250ZXh0KHYsIG0pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICB2WzBdICogbVswXSArIHZbMV0gKiBtWzRdICsgdlsyXSAqIG1bOF0sXG4gICAgICAgIHZbMF0gKiBtWzFdICsgdlsxXSAqIG1bNV0gKyB2WzJdICogbVs5XSxcbiAgICAgICAgdlswXSAqIG1bMl0gKyB2WzFdICogbVs2XSArIHZbMl0gKiBtWzEwXVxuICAgIF07XG59XG52YXIgX3plcm9aZXJvID0gW1xuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXTtcblNwZWNQYXJzZXIucHJvdG90eXBlLl9wYXJzZVNwZWMgPSBmdW5jdGlvbiBfcGFyc2VTcGVjKHNwZWMsIHBhcmVudENvbnRleHQsIHNpemVDb250ZXh0KSB7XG4gICAgdmFyIGlkO1xuICAgIHZhciB0YXJnZXQ7XG4gICAgdmFyIHRyYW5zZm9ybTtcbiAgICB2YXIgb3BhY2l0eTtcbiAgICB2YXIgb3JpZ2luO1xuICAgIHZhciBhbGlnbjtcbiAgICB2YXIgc2l6ZTtcbiAgICBpZiAodHlwZW9mIHNwZWMgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlkID0gc3BlYztcbiAgICAgICAgdHJhbnNmb3JtID0gcGFyZW50Q29udGV4dC50cmFuc2Zvcm07XG4gICAgICAgIGFsaWduID0gcGFyZW50Q29udGV4dC5hbGlnbiB8fCBfemVyb1plcm87XG4gICAgICAgIGlmIChwYXJlbnRDb250ZXh0LnNpemUgJiYgYWxpZ24gJiYgKGFsaWduWzBdIHx8IGFsaWduWzFdKSkge1xuICAgICAgICAgICAgdmFyIGFsaWduQWRqdXN0ID0gW1xuICAgICAgICAgICAgICAgICAgICBhbGlnblswXSAqIHBhcmVudENvbnRleHQuc2l6ZVswXSxcbiAgICAgICAgICAgICAgICAgICAgYWxpZ25bMV0gKiBwYXJlbnRDb250ZXh0LnNpemVbMV0sXG4gICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgdHJhbnNmb3JtID0gVHJhbnNmb3JtLnRoZW5Nb3ZlKHRyYW5zZm9ybSwgX3ZlY0luQ29udGV4dChhbGlnbkFkanVzdCwgc2l6ZUNvbnRleHQpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc3VsdFtpZF0gPSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgICAgICAgICAgIG9wYWNpdHk6IHBhcmVudENvbnRleHQub3BhY2l0eSxcbiAgICAgICAgICAgIG9yaWdpbjogcGFyZW50Q29udGV4dC5vcmlnaW4gfHwgX3plcm9aZXJvLFxuICAgICAgICAgICAgYWxpZ246IHBhcmVudENvbnRleHQuYWxpZ24gfHwgX3plcm9aZXJvLFxuICAgICAgICAgICAgc2l6ZTogcGFyZW50Q29udGV4dC5zaXplXG4gICAgICAgIH07XG4gICAgfSBlbHNlIGlmICghc3BlYykge1xuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChzcGVjIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGVjLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZVNwZWMoc3BlY1tpXSwgcGFyZW50Q29udGV4dCwgc2l6ZUNvbnRleHQpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0ID0gc3BlYy50YXJnZXQ7XG4gICAgICAgIHRyYW5zZm9ybSA9IHBhcmVudENvbnRleHQudHJhbnNmb3JtO1xuICAgICAgICBvcGFjaXR5ID0gcGFyZW50Q29udGV4dC5vcGFjaXR5O1xuICAgICAgICBvcmlnaW4gPSBwYXJlbnRDb250ZXh0Lm9yaWdpbjtcbiAgICAgICAgYWxpZ24gPSBwYXJlbnRDb250ZXh0LmFsaWduO1xuICAgICAgICBzaXplID0gcGFyZW50Q29udGV4dC5zaXplO1xuICAgICAgICB2YXIgbmV4dFNpemVDb250ZXh0ID0gc2l6ZUNvbnRleHQ7XG4gICAgICAgIGlmIChzcGVjLm9wYWNpdHkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIG9wYWNpdHkgPSBwYXJlbnRDb250ZXh0Lm9wYWNpdHkgKiBzcGVjLm9wYWNpdHk7XG4gICAgICAgIGlmIChzcGVjLnRyYW5zZm9ybSlcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IFRyYW5zZm9ybS5tdWx0aXBseShwYXJlbnRDb250ZXh0LnRyYW5zZm9ybSwgc3BlYy50cmFuc2Zvcm0pO1xuICAgICAgICBpZiAoc3BlYy5vcmlnaW4pIHtcbiAgICAgICAgICAgIG9yaWdpbiA9IHNwZWMub3JpZ2luO1xuICAgICAgICAgICAgbmV4dFNpemVDb250ZXh0ID0gcGFyZW50Q29udGV4dC50cmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwZWMuYWxpZ24pXG4gICAgICAgICAgICBhbGlnbiA9IHNwZWMuYWxpZ247XG4gICAgICAgIGlmIChzcGVjLnNpemUgfHwgc3BlYy5wcm9wb3J0aW9ucykge1xuICAgICAgICAgICAgdmFyIHBhcmVudFNpemUgPSBzaXplO1xuICAgICAgICAgICAgc2l6ZSA9IFtcbiAgICAgICAgICAgICAgICBzaXplWzBdLFxuICAgICAgICAgICAgICAgIHNpemVbMV1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBpZiAoc3BlYy5zaXplKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNwZWMuc2l6ZVswXSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBzaXplWzBdID0gc3BlYy5zaXplWzBdO1xuICAgICAgICAgICAgICAgIGlmIChzcGVjLnNpemVbMV0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgc2l6ZVsxXSA9IHNwZWMuc2l6ZVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzcGVjLnByb3BvcnRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNwZWMucHJvcG9ydGlvbnNbMF0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgc2l6ZVswXSA9IHNpemVbMF0gKiBzcGVjLnByb3BvcnRpb25zWzBdO1xuICAgICAgICAgICAgICAgIGlmIChzcGVjLnByb3BvcnRpb25zWzFdICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHNpemVbMV0gPSBzaXplWzFdICogc3BlYy5wcm9wb3J0aW9uc1sxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJlbnRTaXplKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFsaWduICYmIChhbGlnblswXSB8fCBhbGlnblsxXSkpXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybSA9IFRyYW5zZm9ybS50aGVuTW92ZSh0cmFuc2Zvcm0sIF92ZWNJbkNvbnRleHQoW1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25bMF0gKiBwYXJlbnRTaXplWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25bMV0gKiBwYXJlbnRTaXplWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICBdLCBzaXplQ29udGV4dCkpO1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW4gJiYgKG9yaWdpblswXSB8fCBvcmlnaW5bMV0pKVxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gPSBUcmFuc2Zvcm0ubW92ZVRoZW4oW1xuICAgICAgICAgICAgICAgICAgICAgICAgLW9yaWdpblswXSAqIHNpemVbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAtb3JpZ2luWzFdICogc2l6ZVsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgXSwgdHJhbnNmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHRTaXplQ29udGV4dCA9IHBhcmVudENvbnRleHQudHJhbnNmb3JtO1xuICAgICAgICAgICAgb3JpZ2luID0gbnVsbDtcbiAgICAgICAgICAgIGFsaWduID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wYXJzZVNwZWModGFyZ2V0LCB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgICAgICAgICAgIG9wYWNpdHk6IG9wYWNpdHksXG4gICAgICAgICAgICBvcmlnaW46IG9yaWdpbixcbiAgICAgICAgICAgIGFsaWduOiBhbGlnbixcbiAgICAgICAgICAgIHNpemU6IHNpemVcbiAgICAgICAgfSwgbmV4dFNpemVDb250ZXh0KTtcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBTcGVjUGFyc2VyOyIsInZhciBFbGVtZW50T3V0cHV0ID0gcmVxdWlyZSgnLi9FbGVtZW50T3V0cHV0Jyk7XG5mdW5jdGlvbiBTdXJmYWNlKG9wdGlvbnMpIHtcbiAgICBFbGVtZW50T3V0cHV0LmNhbGwodGhpcyk7XG4gICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0ge307XG4gICAgdGhpcy5hdHRyaWJ1dGVzID0ge307XG4gICAgdGhpcy5jb250ZW50ID0gJyc7XG4gICAgdGhpcy5jbGFzc0xpc3QgPSBbXTtcbiAgICB0aGlzLnNpemUgPSBudWxsO1xuICAgIHRoaXMuX2NsYXNzZXNEaXJ0eSA9IHRydWU7XG4gICAgdGhpcy5fc3R5bGVzRGlydHkgPSB0cnVlO1xuICAgIHRoaXMuX2F0dHJpYnV0ZXNEaXJ0eSA9IHRydWU7XG4gICAgdGhpcy5fc2l6ZURpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLl9jb250ZW50RGlydHkgPSB0cnVlO1xuICAgIHRoaXMuX3RydWVTaXplQ2hlY2sgPSB0cnVlO1xuICAgIHRoaXMuX2RpcnR5Q2xhc3NlcyA9IFtdO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5fY3VycmVudFRhcmdldCA9IG51bGw7XG59XG5TdXJmYWNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRWxlbWVudE91dHB1dC5wcm90b3R5cGUpO1xuU3VyZmFjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdXJmYWNlO1xuU3VyZmFjZS5wcm90b3R5cGUuZWxlbWVudFR5cGUgPSAnZGl2JztcblN1cmZhY2UucHJvdG90eXBlLmVsZW1lbnRDbGFzcyA9ICdmYW1vdXMtc3VyZmFjZSc7XG5TdXJmYWNlLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGVzKSB7XG4gICAgZm9yICh2YXIgbiBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChuID09PSAnc3R5bGUnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc2V0IHN0eWxlcyB2aWEgXCJzZXRBdHRyaWJ1dGVzXCIgYXMgaXQgd2lsbCBicmVhayBGYW1vLnVzLiAgVXNlIFwic2V0UHJvcGVydGllc1wiIGluc3RlYWQuJyk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlc1tuXSA9IGF0dHJpYnV0ZXNbbl07XG4gICAgfVxuICAgIHRoaXMuX2F0dHJpYnV0ZXNEaXJ0eSA9IHRydWU7XG59O1xuU3VyZmFjZS5wcm90b3R5cGUuZ2V0QXR0cmlidXRlcyA9IGZ1bmN0aW9uIGdldEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlcztcbn07XG5TdXJmYWNlLnByb3RvdHlwZS5zZXRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKSB7XG4gICAgZm9yICh2YXIgbiBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllc1tuXSA9IHByb3BlcnRpZXNbbl07XG4gICAgfVxuICAgIHRoaXMuX3N0eWxlc0RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5TdXJmYWNlLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZ2V0UHJvcGVydGllcygpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzO1xufTtcblN1cmZhY2UucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24gYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgaWYgKHRoaXMuY2xhc3NMaXN0LmluZGV4T2YoY2xhc3NOYW1lKSA8IDApIHtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QucHVzaChjbGFzc05hbWUpO1xuICAgICAgICB0aGlzLl9jbGFzc2VzRGlydHkgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5TdXJmYWNlLnByb3RvdHlwZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5jbGFzc0xpc3QuaW5kZXhPZihjbGFzc05hbWUpO1xuICAgIGlmIChpID49IDApIHtcbiAgICAgICAgdGhpcy5fZGlydHlDbGFzc2VzLnB1c2godGhpcy5jbGFzc0xpc3Quc3BsaWNlKGksIDEpWzBdKTtcbiAgICAgICAgdGhpcy5fY2xhc3Nlc0RpcnR5ID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuU3VyZmFjZS5wcm90b3R5cGUudG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbiB0b2dnbGVDbGFzcyhjbGFzc05hbWUpIHtcbiAgICB2YXIgaSA9IHRoaXMuY2xhc3NMaXN0LmluZGV4T2YoY2xhc3NOYW1lKTtcbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFkZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblN1cmZhY2UucHJvdG90eXBlLnNldENsYXNzZXMgPSBmdW5jdGlvbiBzZXRDbGFzc2VzKGNsYXNzTGlzdCkge1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgcmVtb3ZhbCA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNsYXNzTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoY2xhc3NMaXN0LmluZGV4T2YodGhpcy5jbGFzc0xpc3RbaV0pIDwgMClcbiAgICAgICAgICAgIHJlbW92YWwucHVzaCh0aGlzLmNsYXNzTGlzdFtpXSk7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCByZW1vdmFsLmxlbmd0aDsgaSsrKVxuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKHJlbW92YWxbaV0pO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjbGFzc0xpc3QubGVuZ3RoOyBpKyspXG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoY2xhc3NMaXN0W2ldKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5TdXJmYWNlLnByb3RvdHlwZS5nZXRDbGFzc0xpc3QgPSBmdW5jdGlvbiBnZXRDbGFzc0xpc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xhc3NMaXN0O1xufTtcblN1cmZhY2UucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiBzZXRDb250ZW50KGNvbnRlbnQpIHtcbiAgICBpZiAodGhpcy5jb250ZW50ICE9PSBjb250ZW50KSB7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuX2NvbnRlbnREaXJ0eSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblN1cmZhY2UucHJvdG90eXBlLmdldENvbnRlbnQgPSBmdW5jdGlvbiBnZXRDb250ZW50KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnQ7XG59O1xuU3VyZmFjZS5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLnNpemUpXG4gICAgICAgIHRoaXMuc2V0U2l6ZShvcHRpb25zLnNpemUpO1xuICAgIGlmIChvcHRpb25zLmNsYXNzZXMpXG4gICAgICAgIHRoaXMuc2V0Q2xhc3NlcyhvcHRpb25zLmNsYXNzZXMpO1xuICAgIGlmIChvcHRpb25zLnByb3BlcnRpZXMpXG4gICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyhvcHRpb25zLnByb3BlcnRpZXMpO1xuICAgIGlmIChvcHRpb25zLmF0dHJpYnV0ZXMpXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhvcHRpb25zLmF0dHJpYnV0ZXMpO1xuICAgIGlmIChvcHRpb25zLmNvbnRlbnQpXG4gICAgICAgIHRoaXMuc2V0Q29udGVudChvcHRpb25zLmNvbnRlbnQpO1xuICAgIHJldHVybiB0aGlzO1xufTtcbmZ1bmN0aW9uIF9jbGVhbnVwQ2xhc3Nlcyh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2RpcnR5Q2xhc3Nlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGlydHlDbGFzc2VzW2ldKTtcbiAgICB0aGlzLl9kaXJ0eUNsYXNzZXMgPSBbXTtcbn1cbmZ1bmN0aW9uIF9hcHBseVN0eWxlcyh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBuIGluIHRoaXMucHJvcGVydGllcykge1xuICAgICAgICB0YXJnZXQuc3R5bGVbbl0gPSB0aGlzLnByb3BlcnRpZXNbbl07XG4gICAgfVxufVxuZnVuY3Rpb24gX2NsZWFudXBTdHlsZXModGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgbiBpbiB0aGlzLnByb3BlcnRpZXMpIHtcbiAgICAgICAgdGFyZ2V0LnN0eWxlW25dID0gJyc7XG4gICAgfVxufVxuZnVuY3Rpb24gX2FwcGx5QXR0cmlidXRlcyh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBuIGluIHRoaXMuYXR0cmlidXRlcykge1xuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKG4sIHRoaXMuYXR0cmlidXRlc1tuXSk7XG4gICAgfVxufVxuZnVuY3Rpb24gX2NsZWFudXBBdHRyaWJ1dGVzKHRhcmdldCkge1xuICAgIGZvciAodmFyIG4gaW4gdGhpcy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUobik7XG4gICAgfVxufVxuZnVuY3Rpb24gX3h5Tm90RXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gYSAmJiBiID8gYVswXSAhPT0gYlswXSB8fCBhWzFdICE9PSBiWzFdIDogYSAhPT0gYjtcbn1cblN1cmZhY2UucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24gc2V0dXAoYWxsb2NhdG9yKSB7XG4gICAgdmFyIHRhcmdldCA9IGFsbG9jYXRvci5hbGxvY2F0ZSh0aGlzLmVsZW1lbnRUeXBlKTtcbiAgICBpZiAodGhpcy5lbGVtZW50Q2xhc3MpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudENsYXNzIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50Q2xhc3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCh0aGlzLmVsZW1lbnRDbGFzc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCh0aGlzLmVsZW1lbnRDbGFzcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICB0aGlzLmF0dGFjaCh0YXJnZXQpO1xuICAgIHRoaXMuX29wYWNpdHkgPSBudWxsO1xuICAgIHRoaXMuX2N1cnJlbnRUYXJnZXQgPSB0YXJnZXQ7XG4gICAgdGhpcy5fc3R5bGVzRGlydHkgPSB0cnVlO1xuICAgIHRoaXMuX2NsYXNzZXNEaXJ0eSA9IHRydWU7XG4gICAgdGhpcy5fYXR0cmlidXRlc0RpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLl9zaXplRGlydHkgPSB0cnVlO1xuICAgIHRoaXMuX2NvbnRlbnREaXJ0eSA9IHRydWU7XG4gICAgdGhpcy5fb3JpZ2luRGlydHkgPSB0cnVlO1xuICAgIHRoaXMuX3RyYW5zZm9ybURpcnR5ID0gdHJ1ZTtcbn07XG5TdXJmYWNlLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiBjb21taXQoY29udGV4dCkge1xuICAgIGlmICghdGhpcy5fY3VycmVudFRhcmdldClcbiAgICAgICAgdGhpcy5zZXR1cChjb250ZXh0LmFsbG9jYXRvcik7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX2N1cnJlbnRUYXJnZXQ7XG4gICAgdmFyIHNpemUgPSBjb250ZXh0LnNpemU7XG4gICAgaWYgKHRoaXMuX2NsYXNzZXNEaXJ0eSkge1xuICAgICAgICBfY2xlYW51cENsYXNzZXMuY2FsbCh0aGlzLCB0YXJnZXQpO1xuICAgICAgICB2YXIgY2xhc3NMaXN0ID0gdGhpcy5nZXRDbGFzc0xpc3QoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGFzc0xpc3QubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChjbGFzc0xpc3RbaV0pO1xuICAgICAgICB0aGlzLl9jbGFzc2VzRGlydHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fdHJ1ZVNpemVDaGVjayA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLl9zdHlsZXNEaXJ0eSkge1xuICAgICAgICBfYXBwbHlTdHlsZXMuY2FsbCh0aGlzLCB0YXJnZXQpO1xuICAgICAgICB0aGlzLl9zdHlsZXNEaXJ0eSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl90cnVlU2l6ZUNoZWNrID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2F0dHJpYnV0ZXNEaXJ0eSkge1xuICAgICAgICBfYXBwbHlBdHRyaWJ1dGVzLmNhbGwodGhpcywgdGFyZ2V0KTtcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlc0RpcnR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3RydWVTaXplQ2hlY2sgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5zaXplKSB7XG4gICAgICAgIHZhciBvcmlnU2l6ZSA9IGNvbnRleHQuc2l6ZTtcbiAgICAgICAgc2l6ZSA9IFtcbiAgICAgICAgICAgIHRoaXMuc2l6ZVswXSxcbiAgICAgICAgICAgIHRoaXMuc2l6ZVsxXVxuICAgICAgICBdO1xuICAgICAgICBpZiAoc2l6ZVswXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgc2l6ZVswXSA9IG9yaWdTaXplWzBdO1xuICAgICAgICBpZiAoc2l6ZVsxXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgc2l6ZVsxXSA9IG9yaWdTaXplWzFdO1xuICAgICAgICBpZiAoc2l6ZVswXSA9PT0gdHJ1ZSB8fCBzaXplWzFdID09PSB0cnVlKSB7XG4gICAgICAgICAgICBpZiAoc2l6ZVswXSA9PT0gdHJ1ZSAmJiAodGhpcy5fdHJ1ZVNpemVDaGVjayB8fCB0aGlzLl9zaXplWzBdID09PSAwKSkge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHRhcmdldC5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2l6ZSAmJiB0aGlzLl9zaXplWzBdICE9PSB3aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaXplWzBdID0gd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NpemVEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNpemVbMF0gPSB3aWR0aDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NpemUpXG4gICAgICAgICAgICAgICAgICAgIHNpemVbMF0gPSB0aGlzLl9zaXplWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNpemVbMV0gPT09IHRydWUgJiYgKHRoaXMuX3RydWVTaXplQ2hlY2sgfHwgdGhpcy5fc2l6ZVsxXSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGFyZ2V0LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2l6ZSAmJiB0aGlzLl9zaXplWzFdICE9PSBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2l6ZVsxXSA9IGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2l6ZURpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2l6ZVsxXSA9IGhlaWdodDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NpemUpXG4gICAgICAgICAgICAgICAgICAgIHNpemVbMV0gPSB0aGlzLl9zaXplWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fdHJ1ZVNpemVDaGVjayA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChfeHlOb3RFcXVhbHModGhpcy5fc2l6ZSwgc2l6ZSkpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9zaXplKVxuICAgICAgICAgICAgdGhpcy5fc2l6ZSA9IFtcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF07XG4gICAgICAgIHRoaXMuX3NpemVbMF0gPSBzaXplWzBdO1xuICAgICAgICB0aGlzLl9zaXplWzFdID0gc2l6ZVsxXTtcbiAgICAgICAgdGhpcy5fc2l6ZURpcnR5ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3NpemVEaXJ0eSkge1xuICAgICAgICBpZiAodGhpcy5fc2l6ZSkge1xuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLndpZHRoID0gdGhpcy5zaXplICYmIHRoaXMuc2l6ZVswXSA9PT0gdHJ1ZSA/ICcnIDogdGhpcy5fc2l6ZVswXSArICdweCc7XG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5zaXplICYmIHRoaXMuc2l6ZVsxXSA9PT0gdHJ1ZSA/ICcnIDogdGhpcy5fc2l6ZVsxXSArICdweCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgncmVzaXplJyk7XG4gICAgICAgIHRoaXMuX3NpemVEaXJ0eSA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5fY29udGVudERpcnR5KSB7XG4gICAgICAgIHRoaXMuZGVwbG95KHRhcmdldCk7XG4gICAgICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ2RlcGxveScpO1xuICAgICAgICB0aGlzLl9jb250ZW50RGlydHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fdHJ1ZVNpemVDaGVjayA9IHRydWU7XG4gICAgfVxuICAgIEVsZW1lbnRPdXRwdXQucHJvdG90eXBlLmNvbW1pdC5jYWxsKHRoaXMsIGNvbnRleHQpO1xufTtcblN1cmZhY2UucHJvdG90eXBlLmNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwKGFsbG9jYXRvcikge1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fY3VycmVudFRhcmdldDtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdyZWNhbGwnKTtcbiAgICB0aGlzLnJlY2FsbCh0YXJnZXQpO1xuICAgIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRhcmdldC5zdHlsZS5vcGFjaXR5ID0gJyc7XG4gICAgdGFyZ2V0LnN0eWxlLndpZHRoID0gJyc7XG4gICAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9ICcnO1xuICAgIF9jbGVhbnVwU3R5bGVzLmNhbGwodGhpcywgdGFyZ2V0KTtcbiAgICBfY2xlYW51cEF0dHJpYnV0ZXMuY2FsbCh0aGlzLCB0YXJnZXQpO1xuICAgIHZhciBjbGFzc0xpc3QgPSB0aGlzLmdldENsYXNzTGlzdCgpO1xuICAgIF9jbGVhbnVwQ2xhc3Nlcy5jYWxsKHRoaXMsIHRhcmdldCk7XG4gICAgZm9yIChpID0gMDsgaSA8IGNsYXNzTGlzdC5sZW5ndGg7IGkrKylcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NMaXN0W2ldKTtcbiAgICBpZiAodGhpcy5lbGVtZW50Q2xhc3MpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudENsYXNzIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRDbGFzcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZWxlbWVudENsYXNzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZWxlbWVudENsYXNzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRldGFjaCh0YXJnZXQpO1xuICAgIHRoaXMuX2N1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgIGFsbG9jYXRvci5kZWFsbG9jYXRlKHRhcmdldCk7XG59O1xuU3VyZmFjZS5wcm90b3R5cGUuZGVwbG95ID0gZnVuY3Rpb24gZGVwbG95KHRhcmdldCkge1xuICAgIHZhciBjb250ZW50ID0gdGhpcy5nZXRDb250ZW50KCk7XG4gICAgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgIHdoaWxlICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKVxuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUNoaWxkKHRhcmdldC5maXJzdENoaWxkKTtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgIH0gZWxzZVxuICAgICAgICB0YXJnZXQuaW5uZXJIVE1MID0gY29udGVudDtcbn07XG5TdXJmYWNlLnByb3RvdHlwZS5yZWNhbGwgPSBmdW5jdGlvbiByZWNhbGwodGFyZ2V0KSB7XG4gICAgdmFyIGRmID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHdoaWxlICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKVxuICAgICAgICBkZi5hcHBlbmRDaGlsZCh0YXJnZXQuZmlyc3RDaGlsZCk7XG4gICAgdGhpcy5zZXRDb250ZW50KGRmKTtcbn07XG5TdXJmYWNlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2l6ZSA/IHRoaXMuX3NpemUgOiB0aGlzLnNpemU7XG59O1xuU3VyZmFjZS5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIHNldFNpemUoc2l6ZSkge1xuICAgIHRoaXMuc2l6ZSA9IHNpemUgPyBbXG4gICAgICAgIHNpemVbMF0sXG4gICAgICAgIHNpemVbMV1cbiAgICBdIDogbnVsbDtcbiAgICB0aGlzLl9zaXplRGlydHkgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xufTtcbm1vZHVsZS5leHBvcnRzID0gU3VyZmFjZTsiLCJ2YXIgVHJhbnNmb3JtID0ge307XG5UcmFuc2Zvcm0ucHJlY2lzaW9uID0gMC4wMDAwMDE7XG5UcmFuc2Zvcm0uaWRlbnRpdHkgPSBbXG4gICAgMSxcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICAwLFxuICAgIDEsXG4gICAgMCxcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICAxLFxuICAgIDAsXG4gICAgMCxcbiAgICAwLFxuICAgIDAsXG4gICAgMVxuXTtcblRyYW5zZm9ybS5tdWx0aXBseTR4NCA9IGZ1bmN0aW9uIG11bHRpcGx5NHg0KGEsIGIpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBhWzBdICogYlswXSArIGFbNF0gKiBiWzFdICsgYVs4XSAqIGJbMl0gKyBhWzEyXSAqIGJbM10sXG4gICAgICAgIGFbMV0gKiBiWzBdICsgYVs1XSAqIGJbMV0gKyBhWzldICogYlsyXSArIGFbMTNdICogYlszXSxcbiAgICAgICAgYVsyXSAqIGJbMF0gKyBhWzZdICogYlsxXSArIGFbMTBdICogYlsyXSArIGFbMTRdICogYlszXSxcbiAgICAgICAgYVszXSAqIGJbMF0gKyBhWzddICogYlsxXSArIGFbMTFdICogYlsyXSArIGFbMTVdICogYlszXSxcbiAgICAgICAgYVswXSAqIGJbNF0gKyBhWzRdICogYls1XSArIGFbOF0gKiBiWzZdICsgYVsxMl0gKiBiWzddLFxuICAgICAgICBhWzFdICogYls0XSArIGFbNV0gKiBiWzVdICsgYVs5XSAqIGJbNl0gKyBhWzEzXSAqIGJbN10sXG4gICAgICAgIGFbMl0gKiBiWzRdICsgYVs2XSAqIGJbNV0gKyBhWzEwXSAqIGJbNl0gKyBhWzE0XSAqIGJbN10sXG4gICAgICAgIGFbM10gKiBiWzRdICsgYVs3XSAqIGJbNV0gKyBhWzExXSAqIGJbNl0gKyBhWzE1XSAqIGJbN10sXG4gICAgICAgIGFbMF0gKiBiWzhdICsgYVs0XSAqIGJbOV0gKyBhWzhdICogYlsxMF0gKyBhWzEyXSAqIGJbMTFdLFxuICAgICAgICBhWzFdICogYls4XSArIGFbNV0gKiBiWzldICsgYVs5XSAqIGJbMTBdICsgYVsxM10gKiBiWzExXSxcbiAgICAgICAgYVsyXSAqIGJbOF0gKyBhWzZdICogYls5XSArIGFbMTBdICogYlsxMF0gKyBhWzE0XSAqIGJbMTFdLFxuICAgICAgICBhWzNdICogYls4XSArIGFbN10gKiBiWzldICsgYVsxMV0gKiBiWzEwXSArIGFbMTVdICogYlsxMV0sXG4gICAgICAgIGFbMF0gKiBiWzEyXSArIGFbNF0gKiBiWzEzXSArIGFbOF0gKiBiWzE0XSArIGFbMTJdICogYlsxNV0sXG4gICAgICAgIGFbMV0gKiBiWzEyXSArIGFbNV0gKiBiWzEzXSArIGFbOV0gKiBiWzE0XSArIGFbMTNdICogYlsxNV0sXG4gICAgICAgIGFbMl0gKiBiWzEyXSArIGFbNl0gKiBiWzEzXSArIGFbMTBdICogYlsxNF0gKyBhWzE0XSAqIGJbMTVdLFxuICAgICAgICBhWzNdICogYlsxMl0gKyBhWzddICogYlsxM10gKyBhWzExXSAqIGJbMTRdICsgYVsxNV0gKiBiWzE1XVxuICAgIF07XG59O1xuVHJhbnNmb3JtLm11bHRpcGx5ID0gZnVuY3Rpb24gbXVsdGlwbHkoYSwgYikge1xuICAgIHJldHVybiBbXG4gICAgICAgIGFbMF0gKiBiWzBdICsgYVs0XSAqIGJbMV0gKyBhWzhdICogYlsyXSxcbiAgICAgICAgYVsxXSAqIGJbMF0gKyBhWzVdICogYlsxXSArIGFbOV0gKiBiWzJdLFxuICAgICAgICBhWzJdICogYlswXSArIGFbNl0gKiBiWzFdICsgYVsxMF0gKiBiWzJdLFxuICAgICAgICAwLFxuICAgICAgICBhWzBdICogYls0XSArIGFbNF0gKiBiWzVdICsgYVs4XSAqIGJbNl0sXG4gICAgICAgIGFbMV0gKiBiWzRdICsgYVs1XSAqIGJbNV0gKyBhWzldICogYls2XSxcbiAgICAgICAgYVsyXSAqIGJbNF0gKyBhWzZdICogYls1XSArIGFbMTBdICogYls2XSxcbiAgICAgICAgMCxcbiAgICAgICAgYVswXSAqIGJbOF0gKyBhWzRdICogYls5XSArIGFbOF0gKiBiWzEwXSxcbiAgICAgICAgYVsxXSAqIGJbOF0gKyBhWzVdICogYls5XSArIGFbOV0gKiBiWzEwXSxcbiAgICAgICAgYVsyXSAqIGJbOF0gKyBhWzZdICogYls5XSArIGFbMTBdICogYlsxMF0sXG4gICAgICAgIDAsXG4gICAgICAgIGFbMF0gKiBiWzEyXSArIGFbNF0gKiBiWzEzXSArIGFbOF0gKiBiWzE0XSArIGFbMTJdLFxuICAgICAgICBhWzFdICogYlsxMl0gKyBhWzVdICogYlsxM10gKyBhWzldICogYlsxNF0gKyBhWzEzXSxcbiAgICAgICAgYVsyXSAqIGJbMTJdICsgYVs2XSAqIGJbMTNdICsgYVsxMF0gKiBiWzE0XSArIGFbMTRdLFxuICAgICAgICAxXG4gICAgXTtcbn07XG5UcmFuc2Zvcm0udGhlbk1vdmUgPSBmdW5jdGlvbiB0aGVuTW92ZShtLCB0KSB7XG4gICAgaWYgKCF0WzJdKVxuICAgICAgICB0WzJdID0gMDtcbiAgICByZXR1cm4gW1xuICAgICAgICBtWzBdLFxuICAgICAgICBtWzFdLFxuICAgICAgICBtWzJdLFxuICAgICAgICAwLFxuICAgICAgICBtWzRdLFxuICAgICAgICBtWzVdLFxuICAgICAgICBtWzZdLFxuICAgICAgICAwLFxuICAgICAgICBtWzhdLFxuICAgICAgICBtWzldLFxuICAgICAgICBtWzEwXSxcbiAgICAgICAgMCxcbiAgICAgICAgbVsxMl0gKyB0WzBdLFxuICAgICAgICBtWzEzXSArIHRbMV0sXG4gICAgICAgIG1bMTRdICsgdFsyXSxcbiAgICAgICAgMVxuICAgIF07XG59O1xuVHJhbnNmb3JtLm1vdmVUaGVuID0gZnVuY3Rpb24gbW92ZVRoZW4odiwgbSkge1xuICAgIGlmICghdlsyXSlcbiAgICAgICAgdlsyXSA9IDA7XG4gICAgdmFyIHQwID0gdlswXSAqIG1bMF0gKyB2WzFdICogbVs0XSArIHZbMl0gKiBtWzhdO1xuICAgIHZhciB0MSA9IHZbMF0gKiBtWzFdICsgdlsxXSAqIG1bNV0gKyB2WzJdICogbVs5XTtcbiAgICB2YXIgdDIgPSB2WzBdICogbVsyXSArIHZbMV0gKiBtWzZdICsgdlsyXSAqIG1bMTBdO1xuICAgIHJldHVybiBUcmFuc2Zvcm0udGhlbk1vdmUobSwgW1xuICAgICAgICB0MCxcbiAgICAgICAgdDEsXG4gICAgICAgIHQyXG4gICAgXSk7XG59O1xuVHJhbnNmb3JtLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIHRyYW5zbGF0ZSh4LCB5LCB6KSB7XG4gICAgaWYgKHogPT09IHVuZGVmaW5lZClcbiAgICAgICAgeiA9IDA7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgMSxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMSxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMSxcbiAgICAgICAgMCxcbiAgICAgICAgeCxcbiAgICAgICAgeSxcbiAgICAgICAgeixcbiAgICAgICAgMVxuICAgIF07XG59O1xuVHJhbnNmb3JtLnRoZW5TY2FsZSA9IGZ1bmN0aW9uIHRoZW5TY2FsZShtLCBzKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgc1swXSAqIG1bMF0sXG4gICAgICAgIHNbMV0gKiBtWzFdLFxuICAgICAgICBzWzJdICogbVsyXSxcbiAgICAgICAgMCxcbiAgICAgICAgc1swXSAqIG1bNF0sXG4gICAgICAgIHNbMV0gKiBtWzVdLFxuICAgICAgICBzWzJdICogbVs2XSxcbiAgICAgICAgMCxcbiAgICAgICAgc1swXSAqIG1bOF0sXG4gICAgICAgIHNbMV0gKiBtWzldLFxuICAgICAgICBzWzJdICogbVsxMF0sXG4gICAgICAgIDAsXG4gICAgICAgIHNbMF0gKiBtWzEyXSxcbiAgICAgICAgc1sxXSAqIG1bMTNdLFxuICAgICAgICBzWzJdICogbVsxNF0sXG4gICAgICAgIDFcbiAgICBdO1xufTtcblRyYW5zZm9ybS5zY2FsZSA9IGZ1bmN0aW9uIHNjYWxlKHgsIHksIHopIHtcbiAgICBpZiAoeiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICB6ID0gMTtcbiAgICBpZiAoeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICB5ID0geDtcbiAgICByZXR1cm4gW1xuICAgICAgICB4LFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICB5LFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICB6LFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAxXG4gICAgXTtcbn07XG5UcmFuc2Zvcm0ucm90YXRlWCA9IGZ1bmN0aW9uIHJvdGF0ZVgodGhldGEpIHtcbiAgICB2YXIgY29zVGhldGEgPSBNYXRoLmNvcyh0aGV0YSk7XG4gICAgdmFyIHNpblRoZXRhID0gTWF0aC5zaW4odGhldGEpO1xuICAgIHJldHVybiBbXG4gICAgICAgIDEsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIGNvc1RoZXRhLFxuICAgICAgICBzaW5UaGV0YSxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgLXNpblRoZXRhLFxuICAgICAgICBjb3NUaGV0YSxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMVxuICAgIF07XG59O1xuVHJhbnNmb3JtLnJvdGF0ZVkgPSBmdW5jdGlvbiByb3RhdGVZKHRoZXRhKSB7XG4gICAgdmFyIGNvc1RoZXRhID0gTWF0aC5jb3ModGhldGEpO1xuICAgIHZhciBzaW5UaGV0YSA9IE1hdGguc2luKHRoZXRhKTtcbiAgICByZXR1cm4gW1xuICAgICAgICBjb3NUaGV0YSxcbiAgICAgICAgMCxcbiAgICAgICAgLXNpblRoZXRhLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAxLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICBzaW5UaGV0YSxcbiAgICAgICAgMCxcbiAgICAgICAgY29zVGhldGEsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDFcbiAgICBdO1xufTtcblRyYW5zZm9ybS5yb3RhdGVaID0gZnVuY3Rpb24gcm90YXRlWih0aGV0YSkge1xuICAgIHZhciBjb3NUaGV0YSA9IE1hdGguY29zKHRoZXRhKTtcbiAgICB2YXIgc2luVGhldGEgPSBNYXRoLnNpbih0aGV0YSk7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgY29zVGhldGEsXG4gICAgICAgIHNpblRoZXRhLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAtc2luVGhldGEsXG4gICAgICAgIGNvc1RoZXRhLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAxLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAxXG4gICAgXTtcbn07XG5UcmFuc2Zvcm0ucm90YXRlID0gZnVuY3Rpb24gcm90YXRlKHBoaSwgdGhldGEsIHBzaSkge1xuICAgIHZhciBjb3NQaGkgPSBNYXRoLmNvcyhwaGkpO1xuICAgIHZhciBzaW5QaGkgPSBNYXRoLnNpbihwaGkpO1xuICAgIHZhciBjb3NUaGV0YSA9IE1hdGguY29zKHRoZXRhKTtcbiAgICB2YXIgc2luVGhldGEgPSBNYXRoLnNpbih0aGV0YSk7XG4gICAgdmFyIGNvc1BzaSA9IE1hdGguY29zKHBzaSk7XG4gICAgdmFyIHNpblBzaSA9IE1hdGguc2luKHBzaSk7XG4gICAgdmFyIHJlc3VsdCA9IFtcbiAgICAgICAgICAgIGNvc1RoZXRhICogY29zUHNpLFxuICAgICAgICAgICAgY29zUGhpICogc2luUHNpICsgc2luUGhpICogc2luVGhldGEgKiBjb3NQc2ksXG4gICAgICAgICAgICBzaW5QaGkgKiBzaW5Qc2kgLSBjb3NQaGkgKiBzaW5UaGV0YSAqIGNvc1BzaSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAtY29zVGhldGEgKiBzaW5Qc2ksXG4gICAgICAgICAgICBjb3NQaGkgKiBjb3NQc2kgLSBzaW5QaGkgKiBzaW5UaGV0YSAqIHNpblBzaSxcbiAgICAgICAgICAgIHNpblBoaSAqIGNvc1BzaSArIGNvc1BoaSAqIHNpblRoZXRhICogc2luUHNpLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIHNpblRoZXRhLFxuICAgICAgICAgICAgLXNpblBoaSAqIGNvc1RoZXRhLFxuICAgICAgICAgICAgY29zUGhpICogY29zVGhldGEsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMVxuICAgICAgICBdO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuVHJhbnNmb3JtLnJvdGF0ZUF4aXMgPSBmdW5jdGlvbiByb3RhdGVBeGlzKHYsIHRoZXRhKSB7XG4gICAgdmFyIHNpblRoZXRhID0gTWF0aC5zaW4odGhldGEpO1xuICAgIHZhciBjb3NUaGV0YSA9IE1hdGguY29zKHRoZXRhKTtcbiAgICB2YXIgdmVyVGhldGEgPSAxIC0gY29zVGhldGE7XG4gICAgdmFyIHh4ViA9IHZbMF0gKiB2WzBdICogdmVyVGhldGE7XG4gICAgdmFyIHh5ViA9IHZbMF0gKiB2WzFdICogdmVyVGhldGE7XG4gICAgdmFyIHh6ViA9IHZbMF0gKiB2WzJdICogdmVyVGhldGE7XG4gICAgdmFyIHl5ViA9IHZbMV0gKiB2WzFdICogdmVyVGhldGE7XG4gICAgdmFyIHl6ViA9IHZbMV0gKiB2WzJdICogdmVyVGhldGE7XG4gICAgdmFyIHp6ViA9IHZbMl0gKiB2WzJdICogdmVyVGhldGE7XG4gICAgdmFyIHhzID0gdlswXSAqIHNpblRoZXRhO1xuICAgIHZhciB5cyA9IHZbMV0gKiBzaW5UaGV0YTtcbiAgICB2YXIgenMgPSB2WzJdICogc2luVGhldGE7XG4gICAgdmFyIHJlc3VsdCA9IFtcbiAgICAgICAgICAgIHh4ViArIGNvc1RoZXRhLFxuICAgICAgICAgICAgeHlWICsgenMsXG4gICAgICAgICAgICB4elYgLSB5cyxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICB4eVYgLSB6cyxcbiAgICAgICAgICAgIHl5ViArIGNvc1RoZXRhLFxuICAgICAgICAgICAgeXpWICsgeHMsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgeHpWICsgeXMsXG4gICAgICAgICAgICB5elYgLSB4cyxcbiAgICAgICAgICAgIHp6ViArIGNvc1RoZXRhLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDFcbiAgICAgICAgXTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblRyYW5zZm9ybS5hYm91dE9yaWdpbiA9IGZ1bmN0aW9uIGFib3V0T3JpZ2luKHYsIG0pIHtcbiAgICB2YXIgdDAgPSB2WzBdIC0gKHZbMF0gKiBtWzBdICsgdlsxXSAqIG1bNF0gKyB2WzJdICogbVs4XSk7XG4gICAgdmFyIHQxID0gdlsxXSAtICh2WzBdICogbVsxXSArIHZbMV0gKiBtWzVdICsgdlsyXSAqIG1bOV0pO1xuICAgIHZhciB0MiA9IHZbMl0gLSAodlswXSAqIG1bMl0gKyB2WzFdICogbVs2XSArIHZbMl0gKiBtWzEwXSk7XG4gICAgcmV0dXJuIFRyYW5zZm9ybS50aGVuTW92ZShtLCBbXG4gICAgICAgIHQwLFxuICAgICAgICB0MSxcbiAgICAgICAgdDJcbiAgICBdKTtcbn07XG5UcmFuc2Zvcm0uc2tldyA9IGZ1bmN0aW9uIHNrZXcocGhpLCB0aGV0YSwgcHNpKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgMSxcbiAgICAgICAgTWF0aC50YW4odGhldGEpLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICBNYXRoLnRhbihwc2kpLFxuICAgICAgICAxLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICBNYXRoLnRhbihwaGkpLFxuICAgICAgICAxLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAxXG4gICAgXTtcbn07XG5UcmFuc2Zvcm0uc2tld1ggPSBmdW5jdGlvbiBza2V3WChhbmdsZSkge1xuICAgIHJldHVybiBbXG4gICAgICAgIDEsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIE1hdGgudGFuKGFuZ2xlKSxcbiAgICAgICAgMSxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMSxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMVxuICAgIF07XG59O1xuVHJhbnNmb3JtLnNrZXdZID0gZnVuY3Rpb24gc2tld1koYW5nbGUpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICAxLFxuICAgICAgICBNYXRoLnRhbihhbmdsZSksXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDFcbiAgICBdO1xufTtcblRyYW5zZm9ybS5wZXJzcGVjdGl2ZSA9IGZ1bmN0aW9uIHBlcnNwZWN0aXZlKGZvY3VzWikge1xuICAgIHJldHVybiBbXG4gICAgICAgIDEsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIC0xIC8gZm9jdXNaLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAxXG4gICAgXTtcbn07XG5UcmFuc2Zvcm0uZ2V0VHJhbnNsYXRlID0gZnVuY3Rpb24gZ2V0VHJhbnNsYXRlKG0pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBtWzEyXSxcbiAgICAgICAgbVsxM10sXG4gICAgICAgIG1bMTRdXG4gICAgXTtcbn07XG5UcmFuc2Zvcm0uaW52ZXJzZSA9IGZ1bmN0aW9uIGludmVyc2UobSkge1xuICAgIHZhciBjMCA9IG1bNV0gKiBtWzEwXSAtIG1bNl0gKiBtWzldO1xuICAgIHZhciBjMSA9IG1bNF0gKiBtWzEwXSAtIG1bNl0gKiBtWzhdO1xuICAgIHZhciBjMiA9IG1bNF0gKiBtWzldIC0gbVs1XSAqIG1bOF07XG4gICAgdmFyIGM0ID0gbVsxXSAqIG1bMTBdIC0gbVsyXSAqIG1bOV07XG4gICAgdmFyIGM1ID0gbVswXSAqIG1bMTBdIC0gbVsyXSAqIG1bOF07XG4gICAgdmFyIGM2ID0gbVswXSAqIG1bOV0gLSBtWzFdICogbVs4XTtcbiAgICB2YXIgYzggPSBtWzFdICogbVs2XSAtIG1bMl0gKiBtWzVdO1xuICAgIHZhciBjOSA9IG1bMF0gKiBtWzZdIC0gbVsyXSAqIG1bNF07XG4gICAgdmFyIGMxMCA9IG1bMF0gKiBtWzVdIC0gbVsxXSAqIG1bNF07XG4gICAgdmFyIGRldE0gPSBtWzBdICogYzAgLSBtWzFdICogYzEgKyBtWzJdICogYzI7XG4gICAgdmFyIGludkQgPSAxIC8gZGV0TTtcbiAgICB2YXIgcmVzdWx0ID0gW1xuICAgICAgICAgICAgaW52RCAqIGMwLFxuICAgICAgICAgICAgLWludkQgKiBjNCxcbiAgICAgICAgICAgIGludkQgKiBjOCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAtaW52RCAqIGMxLFxuICAgICAgICAgICAgaW52RCAqIGM1LFxuICAgICAgICAgICAgLWludkQgKiBjOSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBpbnZEICogYzIsXG4gICAgICAgICAgICAtaW52RCAqIGM2LFxuICAgICAgICAgICAgaW52RCAqIGMxMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAxXG4gICAgICAgIF07XG4gICAgcmVzdWx0WzEyXSA9IC1tWzEyXSAqIHJlc3VsdFswXSAtIG1bMTNdICogcmVzdWx0WzRdIC0gbVsxNF0gKiByZXN1bHRbOF07XG4gICAgcmVzdWx0WzEzXSA9IC1tWzEyXSAqIHJlc3VsdFsxXSAtIG1bMTNdICogcmVzdWx0WzVdIC0gbVsxNF0gKiByZXN1bHRbOV07XG4gICAgcmVzdWx0WzE0XSA9IC1tWzEyXSAqIHJlc3VsdFsyXSAtIG1bMTNdICogcmVzdWx0WzZdIC0gbVsxNF0gKiByZXN1bHRbMTBdO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuVHJhbnNmb3JtLnRyYW5zcG9zZSA9IGZ1bmN0aW9uIHRyYW5zcG9zZShtKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgbVswXSxcbiAgICAgICAgbVs0XSxcbiAgICAgICAgbVs4XSxcbiAgICAgICAgbVsxMl0sXG4gICAgICAgIG1bMV0sXG4gICAgICAgIG1bNV0sXG4gICAgICAgIG1bOV0sXG4gICAgICAgIG1bMTNdLFxuICAgICAgICBtWzJdLFxuICAgICAgICBtWzZdLFxuICAgICAgICBtWzEwXSxcbiAgICAgICAgbVsxNF0sXG4gICAgICAgIG1bM10sXG4gICAgICAgIG1bN10sXG4gICAgICAgIG1bMTFdLFxuICAgICAgICBtWzE1XVxuICAgIF07XG59O1xuZnVuY3Rpb24gX25vcm1TcXVhcmVkKHYpIHtcbiAgICByZXR1cm4gdi5sZW5ndGggPT09IDIgPyB2WzBdICogdlswXSArIHZbMV0gKiB2WzFdIDogdlswXSAqIHZbMF0gKyB2WzFdICogdlsxXSArIHZbMl0gKiB2WzJdO1xufVxuZnVuY3Rpb24gX25vcm0odikge1xuICAgIHJldHVybiBNYXRoLnNxcnQoX25vcm1TcXVhcmVkKHYpKTtcbn1cbmZ1bmN0aW9uIF9zaWduKG4pIHtcbiAgICByZXR1cm4gbiA8IDAgPyAtMSA6IDE7XG59XG5UcmFuc2Zvcm0uaW50ZXJwcmV0ID0gZnVuY3Rpb24gaW50ZXJwcmV0KE0pIHtcbiAgICB2YXIgeCA9IFtcbiAgICAgICAgICAgIE1bMF0sXG4gICAgICAgICAgICBNWzFdLFxuICAgICAgICAgICAgTVsyXVxuICAgICAgICBdO1xuICAgIHZhciBzZ24gPSBfc2lnbih4WzBdKTtcbiAgICB2YXIgeE5vcm0gPSBfbm9ybSh4KTtcbiAgICB2YXIgdiA9IFtcbiAgICAgICAgICAgIHhbMF0gKyBzZ24gKiB4Tm9ybSxcbiAgICAgICAgICAgIHhbMV0sXG4gICAgICAgICAgICB4WzJdXG4gICAgICAgIF07XG4gICAgdmFyIG11bHQgPSAyIC8gX25vcm1TcXVhcmVkKHYpO1xuICAgIGlmIChtdWx0ID49IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0cmFuc2xhdGU6IFRyYW5zZm9ybS5nZXRUcmFuc2xhdGUoTSksXG4gICAgICAgICAgICByb3RhdGU6IFtcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHNjYWxlOiBbXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBza2V3OiBbXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIFExID0gW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMVxuICAgICAgICBdO1xuICAgIFExWzBdID0gMSAtIG11bHQgKiB2WzBdICogdlswXTtcbiAgICBRMVs1XSA9IDEgLSBtdWx0ICogdlsxXSAqIHZbMV07XG4gICAgUTFbMTBdID0gMSAtIG11bHQgKiB2WzJdICogdlsyXTtcbiAgICBRMVsxXSA9IC1tdWx0ICogdlswXSAqIHZbMV07XG4gICAgUTFbMl0gPSAtbXVsdCAqIHZbMF0gKiB2WzJdO1xuICAgIFExWzZdID0gLW11bHQgKiB2WzFdICogdlsyXTtcbiAgICBRMVs0XSA9IFExWzFdO1xuICAgIFExWzhdID0gUTFbMl07XG4gICAgUTFbOV0gPSBRMVs2XTtcbiAgICB2YXIgTVExID0gVHJhbnNmb3JtLm11bHRpcGx5KFExLCBNKTtcbiAgICB2YXIgeDIgPSBbXG4gICAgICAgICAgICBNUTFbNV0sXG4gICAgICAgICAgICBNUTFbNl1cbiAgICAgICAgXTtcbiAgICB2YXIgc2duMiA9IF9zaWduKHgyWzBdKTtcbiAgICB2YXIgeDJOb3JtID0gX25vcm0oeDIpO1xuICAgIHZhciB2MiA9IFtcbiAgICAgICAgICAgIHgyWzBdICsgc2duMiAqIHgyTm9ybSxcbiAgICAgICAgICAgIHgyWzFdXG4gICAgICAgIF07XG4gICAgdmFyIG11bHQyID0gMiAvIF9ub3JtU3F1YXJlZCh2Mik7XG4gICAgdmFyIFEyID0gW1xuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMVxuICAgICAgICBdO1xuICAgIFEyWzVdID0gMSAtIG11bHQyICogdjJbMF0gKiB2MlswXTtcbiAgICBRMlsxMF0gPSAxIC0gbXVsdDIgKiB2MlsxXSAqIHYyWzFdO1xuICAgIFEyWzZdID0gLW11bHQyICogdjJbMF0gKiB2MlsxXTtcbiAgICBRMls5XSA9IFEyWzZdO1xuICAgIHZhciBRID0gVHJhbnNmb3JtLm11bHRpcGx5KFEyLCBRMSk7XG4gICAgdmFyIFIgPSBUcmFuc2Zvcm0ubXVsdGlwbHkoUSwgTSk7XG4gICAgdmFyIHJlbW92ZXIgPSBUcmFuc2Zvcm0uc2NhbGUoUlswXSA8IDAgPyAtMSA6IDEsIFJbNV0gPCAwID8gLTEgOiAxLCBSWzEwXSA8IDAgPyAtMSA6IDEpO1xuICAgIFIgPSBUcmFuc2Zvcm0ubXVsdGlwbHkoUiwgcmVtb3Zlcik7XG4gICAgUSA9IFRyYW5zZm9ybS5tdWx0aXBseShyZW1vdmVyLCBRKTtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgcmVzdWx0LnRyYW5zbGF0ZSA9IFRyYW5zZm9ybS5nZXRUcmFuc2xhdGUoTSk7XG4gICAgcmVzdWx0LnJvdGF0ZSA9IFtcbiAgICAgICAgTWF0aC5hdGFuMigtUVs2XSwgUVsxMF0pLFxuICAgICAgICBNYXRoLmFzaW4oUVsyXSksXG4gICAgICAgIE1hdGguYXRhbjIoLVFbMV0sIFFbMF0pXG4gICAgXTtcbiAgICBpZiAoIXJlc3VsdC5yb3RhdGVbMF0pIHtcbiAgICAgICAgcmVzdWx0LnJvdGF0ZVswXSA9IDA7XG4gICAgICAgIHJlc3VsdC5yb3RhdGVbMl0gPSBNYXRoLmF0YW4yKFFbNF0sIFFbNV0pO1xuICAgIH1cbiAgICByZXN1bHQuc2NhbGUgPSBbXG4gICAgICAgIFJbMF0sXG4gICAgICAgIFJbNV0sXG4gICAgICAgIFJbMTBdXG4gICAgXTtcbiAgICByZXN1bHQuc2tldyA9IFtcbiAgICAgICAgTWF0aC5hdGFuMihSWzldLCByZXN1bHQuc2NhbGVbMl0pLFxuICAgICAgICBNYXRoLmF0YW4yKFJbOF0sIHJlc3VsdC5zY2FsZVsyXSksXG4gICAgICAgIE1hdGguYXRhbjIoUls0XSwgcmVzdWx0LnNjYWxlWzBdKVxuICAgIF07XG4gICAgaWYgKE1hdGguYWJzKHJlc3VsdC5yb3RhdGVbMF0pICsgTWF0aC5hYnMocmVzdWx0LnJvdGF0ZVsyXSkgPiAxLjUgKiBNYXRoLlBJKSB7XG4gICAgICAgIHJlc3VsdC5yb3RhdGVbMV0gPSBNYXRoLlBJIC0gcmVzdWx0LnJvdGF0ZVsxXTtcbiAgICAgICAgaWYgKHJlc3VsdC5yb3RhdGVbMV0gPiBNYXRoLlBJKVxuICAgICAgICAgICAgcmVzdWx0LnJvdGF0ZVsxXSAtPSAyICogTWF0aC5QSTtcbiAgICAgICAgaWYgKHJlc3VsdC5yb3RhdGVbMV0gPCAtTWF0aC5QSSlcbiAgICAgICAgICAgIHJlc3VsdC5yb3RhdGVbMV0gKz0gMiAqIE1hdGguUEk7XG4gICAgICAgIGlmIChyZXN1bHQucm90YXRlWzBdIDwgMClcbiAgICAgICAgICAgIHJlc3VsdC5yb3RhdGVbMF0gKz0gTWF0aC5QSTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmVzdWx0LnJvdGF0ZVswXSAtPSBNYXRoLlBJO1xuICAgICAgICBpZiAocmVzdWx0LnJvdGF0ZVsyXSA8IDApXG4gICAgICAgICAgICByZXN1bHQucm90YXRlWzJdICs9IE1hdGguUEk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJlc3VsdC5yb3RhdGVbMl0gLT0gTWF0aC5QSTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5UcmFuc2Zvcm0uYXZlcmFnZSA9IGZ1bmN0aW9uIGF2ZXJhZ2UoTTEsIE0yLCB0KSB7XG4gICAgdCA9IHQgPT09IHVuZGVmaW5lZCA/IDAuNSA6IHQ7XG4gICAgdmFyIHNwZWNNMSA9IFRyYW5zZm9ybS5pbnRlcnByZXQoTTEpO1xuICAgIHZhciBzcGVjTTIgPSBUcmFuc2Zvcm0uaW50ZXJwcmV0KE0yKTtcbiAgICB2YXIgc3BlY0F2ZyA9IHtcbiAgICAgICAgICAgIHRyYW5zbGF0ZTogW1xuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgcm90YXRlOiBbXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzY2FsZTogW1xuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc2tldzogW1xuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICBdXG4gICAgICAgIH07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgc3BlY0F2Zy50cmFuc2xhdGVbaV0gPSAoMSAtIHQpICogc3BlY00xLnRyYW5zbGF0ZVtpXSArIHQgKiBzcGVjTTIudHJhbnNsYXRlW2ldO1xuICAgICAgICBzcGVjQXZnLnJvdGF0ZVtpXSA9ICgxIC0gdCkgKiBzcGVjTTEucm90YXRlW2ldICsgdCAqIHNwZWNNMi5yb3RhdGVbaV07XG4gICAgICAgIHNwZWNBdmcuc2NhbGVbaV0gPSAoMSAtIHQpICogc3BlY00xLnNjYWxlW2ldICsgdCAqIHNwZWNNMi5zY2FsZVtpXTtcbiAgICAgICAgc3BlY0F2Zy5za2V3W2ldID0gKDEgLSB0KSAqIHNwZWNNMS5za2V3W2ldICsgdCAqIHNwZWNNMi5za2V3W2ldO1xuICAgIH1cbiAgICByZXR1cm4gVHJhbnNmb3JtLmJ1aWxkKHNwZWNBdmcpO1xufTtcblRyYW5zZm9ybS5idWlsZCA9IGZ1bmN0aW9uIGJ1aWxkKHNwZWMpIHtcbiAgICB2YXIgc2NhbGVNYXRyaXggPSBUcmFuc2Zvcm0uc2NhbGUoc3BlYy5zY2FsZVswXSwgc3BlYy5zY2FsZVsxXSwgc3BlYy5zY2FsZVsyXSk7XG4gICAgdmFyIHNrZXdNYXRyaXggPSBUcmFuc2Zvcm0uc2tldyhzcGVjLnNrZXdbMF0sIHNwZWMuc2tld1sxXSwgc3BlYy5za2V3WzJdKTtcbiAgICB2YXIgcm90YXRlTWF0cml4ID0gVHJhbnNmb3JtLnJvdGF0ZShzcGVjLnJvdGF0ZVswXSwgc3BlYy5yb3RhdGVbMV0sIHNwZWMucm90YXRlWzJdKTtcbiAgICByZXR1cm4gVHJhbnNmb3JtLnRoZW5Nb3ZlKFRyYW5zZm9ybS5tdWx0aXBseShUcmFuc2Zvcm0ubXVsdGlwbHkocm90YXRlTWF0cml4LCBza2V3TWF0cml4KSwgc2NhbGVNYXRyaXgpLCBzcGVjLnRyYW5zbGF0ZSk7XG59O1xuVHJhbnNmb3JtLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuICFUcmFuc2Zvcm0ubm90RXF1YWxzKGEsIGIpO1xufTtcblRyYW5zZm9ybS5ub3RFcXVhbHMgPSBmdW5jdGlvbiBub3RFcXVhbHMoYSwgYikge1xuICAgIGlmIChhID09PSBiKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICEoYSAmJiBiKSB8fCBhWzEyXSAhPT0gYlsxMl0gfHwgYVsxM10gIT09IGJbMTNdIHx8IGFbMTRdICE9PSBiWzE0XSB8fCBhWzBdICE9PSBiWzBdIHx8IGFbMV0gIT09IGJbMV0gfHwgYVsyXSAhPT0gYlsyXSB8fCBhWzRdICE9PSBiWzRdIHx8IGFbNV0gIT09IGJbNV0gfHwgYVs2XSAhPT0gYls2XSB8fCBhWzhdICE9PSBiWzhdIHx8IGFbOV0gIT09IGJbOV0gfHwgYVsxMF0gIT09IGJbMTBdO1xufTtcblRyYW5zZm9ybS5ub3JtYWxpemVSb3RhdGlvbiA9IGZ1bmN0aW9uIG5vcm1hbGl6ZVJvdGF0aW9uKHJvdGF0aW9uKSB7XG4gICAgdmFyIHJlc3VsdCA9IHJvdGF0aW9uLnNsaWNlKDApO1xuICAgIGlmIChyZXN1bHRbMF0gPT09IE1hdGguUEkgKiAwLjUgfHwgcmVzdWx0WzBdID09PSAtTWF0aC5QSSAqIDAuNSkge1xuICAgICAgICByZXN1bHRbMF0gPSAtcmVzdWx0WzBdO1xuICAgICAgICByZXN1bHRbMV0gPSBNYXRoLlBJIC0gcmVzdWx0WzFdO1xuICAgICAgICByZXN1bHRbMl0gLT0gTWF0aC5QSTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdFswXSA+IE1hdGguUEkgKiAwLjUpIHtcbiAgICAgICAgcmVzdWx0WzBdID0gcmVzdWx0WzBdIC0gTWF0aC5QSTtcbiAgICAgICAgcmVzdWx0WzFdID0gTWF0aC5QSSAtIHJlc3VsdFsxXTtcbiAgICAgICAgcmVzdWx0WzJdIC09IE1hdGguUEk7XG4gICAgfVxuICAgIGlmIChyZXN1bHRbMF0gPCAtTWF0aC5QSSAqIDAuNSkge1xuICAgICAgICByZXN1bHRbMF0gPSByZXN1bHRbMF0gKyBNYXRoLlBJO1xuICAgICAgICByZXN1bHRbMV0gPSAtTWF0aC5QSSAtIHJlc3VsdFsxXTtcbiAgICAgICAgcmVzdWx0WzJdIC09IE1hdGguUEk7XG4gICAgfVxuICAgIHdoaWxlIChyZXN1bHRbMV0gPCAtTWF0aC5QSSlcbiAgICAgICAgcmVzdWx0WzFdICs9IDIgKiBNYXRoLlBJO1xuICAgIHdoaWxlIChyZXN1bHRbMV0gPj0gTWF0aC5QSSlcbiAgICAgICAgcmVzdWx0WzFdIC09IDIgKiBNYXRoLlBJO1xuICAgIHdoaWxlIChyZXN1bHRbMl0gPCAtTWF0aC5QSSlcbiAgICAgICAgcmVzdWx0WzJdICs9IDIgKiBNYXRoLlBJO1xuICAgIHdoaWxlIChyZXN1bHRbMl0gPj0gTWF0aC5QSSlcbiAgICAgICAgcmVzdWx0WzJdIC09IDIgKiBNYXRoLlBJO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuVHJhbnNmb3JtLmluRnJvbnQgPSBbXG4gICAgMSxcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICAwLFxuICAgIDEsXG4gICAgMCxcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICAxLFxuICAgIDAsXG4gICAgMCxcbiAgICAwLFxuICAgIDAuMDAxLFxuICAgIDFcbl07XG5UcmFuc2Zvcm0uYmVoaW5kID0gW1xuICAgIDEsXG4gICAgMCxcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICAxLFxuICAgIDAsXG4gICAgMCxcbiAgICAwLFxuICAgIDAsXG4gICAgMSxcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICAtMC4wMDEsXG4gICAgMVxuXTtcbm1vZHVsZS5leHBvcnRzID0gVHJhbnNmb3JtOyIsInZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCcuL0V2ZW50SGFuZGxlcicpO1xudmFyIE9wdGlvbnNNYW5hZ2VyID0gcmVxdWlyZSgnLi9PcHRpb25zTWFuYWdlcicpO1xudmFyIFJlbmRlck5vZGUgPSByZXF1aXJlKCcuL1JlbmRlck5vZGUnKTtcbnZhciBVdGlsaXR5ID0gcmVxdWlyZSgnZmFtb3VzL3V0aWxpdGllcy9VdGlsaXR5Jyk7XG5mdW5jdGlvbiBWaWV3KG9wdGlvbnMpIHtcbiAgICB0aGlzLl9ub2RlID0gbmV3IFJlbmRlck5vZGUoKTtcbiAgICB0aGlzLl9ldmVudElucHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRJbnB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRJbnB1dCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldE91dHB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRPdXRwdXQpO1xuICAgIHRoaXMub3B0aW9ucyA9IFV0aWxpdHkuY2xvbmUodGhpcy5jb25zdHJ1Y3Rvci5ERUZBVUxUX09QVElPTlMgfHwgVmlldy5ERUZBVUxUX09QVElPTlMpO1xuICAgIHRoaXMuX29wdGlvbnNNYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHRoaXMub3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn1cblZpZXcuREVGQVVMVF9PUFRJT05TID0ge307XG5WaWV3LnByb3RvdHlwZS5nZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucyhrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhrZXkpO1xufTtcblZpZXcucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9vcHRpb25zTWFuYWdlci5wYXRjaChvcHRpb25zKTtcbn07XG5WaWV3LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25vZGUuYWRkLmFwcGx5KHRoaXMuX25vZGUsIGFyZ3VtZW50cyk7XG59O1xuVmlldy5wcm90b3R5cGUuX2FkZCA9IFZpZXcucHJvdG90eXBlLmFkZDtcblZpZXcucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fbm9kZS5yZW5kZXIoKTtcbn07XG5WaWV3LnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcbiAgICBpZiAodGhpcy5fbm9kZSAmJiB0aGlzLl9ub2RlLmdldFNpemUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25vZGUuZ2V0U2l6ZS5hcHBseSh0aGlzLl9ub2RlLCBhcmd1bWVudHMpIHx8IHRoaXMub3B0aW9ucy5zaXplO1xuICAgIH0gZWxzZVxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNpemU7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBWaWV3OyIsImZ1bmN0aW9uIFZpZXdTZXF1ZW5jZShvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKVxuICAgICAgICBvcHRpb25zID0gW107XG4gICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgb3B0aW9ucyA9IHsgYXJyYXk6IG9wdGlvbnMgfTtcbiAgICB0aGlzLl8gPSBudWxsO1xuICAgIHRoaXMuaW5kZXggPSBvcHRpb25zLmluZGV4IHx8IDA7XG4gICAgaWYgKG9wdGlvbnMuYXJyYXkpXG4gICAgICAgIHRoaXMuXyA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yLkJhY2tpbmcob3B0aW9ucy5hcnJheSk7XG4gICAgZWxzZSBpZiAob3B0aW9ucy5fKVxuICAgICAgICB0aGlzLl8gPSBvcHRpb25zLl87XG4gICAgaWYgKHRoaXMuaW5kZXggPT09IHRoaXMuXy5maXJzdEluZGV4KVxuICAgICAgICB0aGlzLl8uZmlyc3ROb2RlID0gdGhpcztcbiAgICBpZiAodGhpcy5pbmRleCA9PT0gdGhpcy5fLmZpcnN0SW5kZXggKyB0aGlzLl8uYXJyYXkubGVuZ3RoIC0gMSlcbiAgICAgICAgdGhpcy5fLmxhc3ROb2RlID0gdGhpcztcbiAgICBpZiAob3B0aW9ucy5sb29wICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMuXy5sb29wID0gb3B0aW9ucy5sb29wO1xuICAgIGlmIChvcHRpb25zLnRyYWNrU2l6ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLl8udHJhY2tTaXplID0gb3B0aW9ucy50cmFja1NpemU7XG4gICAgdGhpcy5fcHJldmlvdXNOb2RlID0gbnVsbDtcbiAgICB0aGlzLl9uZXh0Tm9kZSA9IG51bGw7XG59XG5WaWV3U2VxdWVuY2UuQmFja2luZyA9IGZ1bmN0aW9uIEJhY2tpbmcoYXJyYXkpIHtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG4gICAgdGhpcy5maXJzdEluZGV4ID0gMDtcbiAgICB0aGlzLmxvb3AgPSBmYWxzZTtcbiAgICB0aGlzLmZpcnN0Tm9kZSA9IG51bGw7XG4gICAgdGhpcy5sYXN0Tm9kZSA9IG51bGw7XG4gICAgdGhpcy5jdW11bGF0aXZlU2l6ZXMgPSBbW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXV07XG4gICAgdGhpcy5zaXplRGlydHkgPSB0cnVlO1xuICAgIHRoaXMudHJhY2tTaXplID0gZmFsc2U7XG59O1xuVmlld1NlcXVlbmNlLkJhY2tpbmcucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gZ2V0VmFsdWUoaSkge1xuICAgIHZhciBfaSA9IGkgLSB0aGlzLmZpcnN0SW5kZXg7XG4gICAgaWYgKF9pIDwgMCB8fCBfaSA+PSB0aGlzLmFycmF5Lmxlbmd0aClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXlbX2ldO1xufTtcblZpZXdTZXF1ZW5jZS5CYWNraW5nLnByb3RvdHlwZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uIHNldFZhbHVlKGksIHZhbHVlKSB7XG4gICAgdGhpcy5hcnJheVtpIC0gdGhpcy5maXJzdEluZGV4XSA9IHZhbHVlO1xufTtcblZpZXdTZXF1ZW5jZS5CYWNraW5nLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZShpbmRleCkge1xuICAgIHJldHVybiB0aGlzLmN1bXVsYXRpdmVTaXplc1tpbmRleF07XG59O1xuVmlld1NlcXVlbmNlLkJhY2tpbmcucHJvdG90eXBlLmNhbGN1bGF0ZVNpemUgPSBmdW5jdGlvbiBjYWxjdWxhdGVTaXplKGluZGV4KSB7XG4gICAgaW5kZXggPSBpbmRleCB8fCB0aGlzLmFycmF5Lmxlbmd0aDtcbiAgICB2YXIgc2l6ZSA9IFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwXG4gICAgICAgIF07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRleDsgaSsrKSB7XG4gICAgICAgIHZhciBub2RlU2l6ZSA9IHRoaXMuYXJyYXlbaV0uZ2V0U2l6ZSgpO1xuICAgICAgICBpZiAoIW5vZGVTaXplKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHNpemVbMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKG5vZGVTaXplWzBdID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgc2l6ZVswXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBzaXplWzBdICs9IG5vZGVTaXplWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaXplWzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChub2RlU2l6ZVsxXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHNpemVbMV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2l6ZVsxXSArPSBub2RlU2l6ZVsxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1bXVsYXRpdmVTaXplc1tpICsgMV0gPSBzaXplLnNsaWNlKCk7XG4gICAgfVxuICAgIHRoaXMuc2l6ZURpcnR5ID0gZmFsc2U7XG4gICAgcmV0dXJuIHNpemU7XG59O1xuVmlld1NlcXVlbmNlLkJhY2tpbmcucHJvdG90eXBlLnJlaW5kZXggPSBmdW5jdGlvbiByZWluZGV4KHN0YXJ0LCByZW1vdmVDb3VudCwgaW5zZXJ0Q291bnQpIHtcbiAgICBpZiAoIXRoaXMuYXJyYXlbMF0pXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5maXJzdEluZGV4O1xuICAgIHZhciBpbmRleFNoaWZ0QW1vdW50ID0gaW5zZXJ0Q291bnQgLSByZW1vdmVDb3VudDtcbiAgICB2YXIgbm9kZSA9IHRoaXMuZmlyc3ROb2RlO1xuICAgIHdoaWxlIChpbmRleCA8IHN0YXJ0IC0gMSkge1xuICAgICAgICBub2RlID0gbm9kZS5nZXROZXh0KCk7XG4gICAgICAgIGluZGV4Kys7XG4gICAgfVxuICAgIHZhciBzcGxpY2VTdGFydE5vZGUgPSBub2RlO1xuICAgIGZvciAoaSA9IDA7IGkgPCByZW1vdmVDb3VudDsgaSsrKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLmdldE5leHQoKTtcbiAgICAgICAgaWYgKG5vZGUpXG4gICAgICAgICAgICBub2RlLl9wcmV2aW91c05vZGUgPSBzcGxpY2VTdGFydE5vZGU7XG4gICAgfVxuICAgIHZhciBzcGxpY2VSZXN1bWVOb2RlID0gbm9kZSA/IG5vZGUuZ2V0TmV4dCgpIDogbnVsbDtcbiAgICBzcGxpY2VTdGFydE5vZGUuX25leHROb2RlID0gbnVsbDtcbiAgICBub2RlID0gc3BsaWNlU3RhcnROb2RlO1xuICAgIGZvciAoaSA9IDA7IGkgPCBpbnNlcnRDb3VudDsgaSsrKVxuICAgICAgICBub2RlID0gbm9kZS5nZXROZXh0KCk7XG4gICAgaW5kZXggKz0gaW5zZXJ0Q291bnQ7XG4gICAgaWYgKG5vZGUgIT09IHNwbGljZVJlc3VtZU5vZGUpIHtcbiAgICAgICAgbm9kZS5fbmV4dE5vZGUgPSBzcGxpY2VSZXN1bWVOb2RlO1xuICAgICAgICBpZiAoc3BsaWNlUmVzdW1lTm9kZSlcbiAgICAgICAgICAgIHNwbGljZVJlc3VtZU5vZGUuX3ByZXZpb3VzTm9kZSA9IG5vZGU7XG4gICAgfVxuICAgIGlmIChzcGxpY2VSZXN1bWVOb2RlKSB7XG4gICAgICAgIG5vZGUgPSBzcGxpY2VSZXN1bWVOb2RlO1xuICAgICAgICBpbmRleCsrO1xuICAgICAgICB3aGlsZSAobm9kZSAmJiBpbmRleCA8IHRoaXMuYXJyYXkubGVuZ3RoICsgdGhpcy5maXJzdEluZGV4KSB7XG4gICAgICAgICAgICBpZiAobm9kZS5fbmV4dE5vZGUpXG4gICAgICAgICAgICAgICAgbm9kZS5pbmRleCArPSBpbmRleFNoaWZ0QW1vdW50O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG5vZGUuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmdldE5leHQoKTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuXy50cmFja1NpemUpXG4gICAgICAgIHRoaXMuXy5zaXplRGlydHkgPSB0cnVlO1xufTtcblZpZXdTZXF1ZW5jZS5wcm90b3R5cGUuZ2V0UHJldmlvdXMgPSBmdW5jdGlvbiBnZXRQcmV2aW91cygpIHtcbiAgICBpZiAodGhpcy5pbmRleCA9PT0gdGhpcy5fLmZpcnN0SW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuXy5sb29wKSB7XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c05vZGUgPSB0aGlzLl8ubGFzdE5vZGUgfHwgbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgICAgIF86IHRoaXMuXyxcbiAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5fLmZpcnN0SW5kZXggKyB0aGlzLl8uYXJyYXkubGVuZ3RoIC0gMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c05vZGUuX25leHROb2RlID0gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzTm9kZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCF0aGlzLl9wcmV2aW91c05vZGUpIHtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNOb2RlID0gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgXzogdGhpcy5fLFxuICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXggLSAxXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9wcmV2aW91c05vZGUuX25leHROb2RlID0gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzTm9kZTtcbn07XG5WaWV3U2VxdWVuY2UucHJvdG90eXBlLmdldE5leHQgPSBmdW5jdGlvbiBnZXROZXh0KCkge1xuICAgIGlmICh0aGlzLmluZGV4ID09PSB0aGlzLl8uZmlyc3RJbmRleCArIHRoaXMuXy5hcnJheS5sZW5ndGggLSAxKSB7XG4gICAgICAgIGlmICh0aGlzLl8ubG9vcCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dE5vZGUgPSB0aGlzLl8uZmlyc3ROb2RlIHx8IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgICAgICBfOiB0aGlzLl8sXG4gICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuXy5maXJzdEluZGV4XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX25leHROb2RlLl9wcmV2aW91c05vZGUgPSB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbmV4dE5vZGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICghdGhpcy5fbmV4dE5vZGUpIHtcbiAgICAgICAgdGhpcy5fbmV4dE5vZGUgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBfOiB0aGlzLl8sXG4gICAgICAgICAgICBpbmRleDogdGhpcy5pbmRleCArIDFcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX25leHROb2RlLl9wcmV2aW91c05vZGUgPSB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbmV4dE5vZGU7XG59O1xuVmlld1NlcXVlbmNlLnByb3RvdHlwZS5nZXRJbmRleCA9IGZ1bmN0aW9uIGdldEluZGV4KCkge1xuICAgIHJldHVybiB0aGlzLmluZGV4O1xufTtcblZpZXdTZXF1ZW5jZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gJycgKyB0aGlzLmluZGV4O1xufTtcblZpZXdTZXF1ZW5jZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uIHVuc2hpZnQodmFsdWUpIHtcbiAgICB0aGlzLl8uYXJyYXkudW5zaGlmdC5hcHBseSh0aGlzLl8uYXJyYXksIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5fLmZpcnN0SW5kZXggLT0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAodGhpcy5fLnRyYWNrU2l6ZSlcbiAgICAgICAgdGhpcy5fLnNpemVEaXJ0eSA9IHRydWU7XG59O1xuVmlld1NlcXVlbmNlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCh2YWx1ZSkge1xuICAgIHRoaXMuXy5hcnJheS5wdXNoLmFwcGx5KHRoaXMuXy5hcnJheSwgYXJndW1lbnRzKTtcbiAgICBpZiAodGhpcy5fLnRyYWNrU2l6ZSlcbiAgICAgICAgdGhpcy5fLnNpemVEaXJ0eSA9IHRydWU7XG59O1xuVmlld1NlcXVlbmNlLnByb3RvdHlwZS5zcGxpY2UgPSBmdW5jdGlvbiBzcGxpY2UoaW5kZXgsIGhvd01hbnkpIHtcbiAgICB2YXIgdmFsdWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB0aGlzLl8uYXJyYXkuc3BsaWNlLmFwcGx5KHRoaXMuXy5hcnJheSwgW1xuICAgICAgICBpbmRleCAtIHRoaXMuXy5maXJzdEluZGV4LFxuICAgICAgICBob3dNYW55XG4gICAgXS5jb25jYXQodmFsdWVzKSk7XG4gICAgdGhpcy5fLnJlaW5kZXgoaW5kZXgsIGhvd01hbnksIHZhbHVlcy5sZW5ndGgpO1xufTtcblZpZXdTZXF1ZW5jZS5wcm90b3R5cGUuc3dhcCA9IGZ1bmN0aW9uIHN3YXAob3RoZXIpIHtcbiAgICB2YXIgb3RoZXJWYWx1ZSA9IG90aGVyLmdldCgpO1xuICAgIHZhciBteVZhbHVlID0gdGhpcy5nZXQoKTtcbiAgICB0aGlzLl8uc2V0VmFsdWUodGhpcy5pbmRleCwgb3RoZXJWYWx1ZSk7XG4gICAgdGhpcy5fLnNldFZhbHVlKG90aGVyLmluZGV4LCBteVZhbHVlKTtcbiAgICB2YXIgbXlQcmV2aW91cyA9IHRoaXMuX3ByZXZpb3VzTm9kZTtcbiAgICB2YXIgbXlOZXh0ID0gdGhpcy5fbmV4dE5vZGU7XG4gICAgdmFyIG15SW5kZXggPSB0aGlzLmluZGV4O1xuICAgIHZhciBvdGhlclByZXZpb3VzID0gb3RoZXIuX3ByZXZpb3VzTm9kZTtcbiAgICB2YXIgb3RoZXJOZXh0ID0gb3RoZXIuX25leHROb2RlO1xuICAgIHZhciBvdGhlckluZGV4ID0gb3RoZXIuaW5kZXg7XG4gICAgdGhpcy5pbmRleCA9IG90aGVySW5kZXg7XG4gICAgdGhpcy5fcHJldmlvdXNOb2RlID0gb3RoZXJQcmV2aW91cyA9PT0gdGhpcyA/IG90aGVyIDogb3RoZXJQcmV2aW91cztcbiAgICBpZiAodGhpcy5fcHJldmlvdXNOb2RlKVxuICAgICAgICB0aGlzLl9wcmV2aW91c05vZGUuX25leHROb2RlID0gdGhpcztcbiAgICB0aGlzLl9uZXh0Tm9kZSA9IG90aGVyTmV4dCA9PT0gdGhpcyA/IG90aGVyIDogb3RoZXJOZXh0O1xuICAgIGlmICh0aGlzLl9uZXh0Tm9kZSlcbiAgICAgICAgdGhpcy5fbmV4dE5vZGUuX3ByZXZpb3VzTm9kZSA9IHRoaXM7XG4gICAgb3RoZXIuaW5kZXggPSBteUluZGV4O1xuICAgIG90aGVyLl9wcmV2aW91c05vZGUgPSBteVByZXZpb3VzID09PSBvdGhlciA/IHRoaXMgOiBteVByZXZpb3VzO1xuICAgIGlmIChvdGhlci5fcHJldmlvdXNOb2RlKVxuICAgICAgICBvdGhlci5fcHJldmlvdXNOb2RlLl9uZXh0Tm9kZSA9IG90aGVyO1xuICAgIG90aGVyLl9uZXh0Tm9kZSA9IG15TmV4dCA9PT0gb3RoZXIgPyB0aGlzIDogbXlOZXh0O1xuICAgIGlmIChvdGhlci5fbmV4dE5vZGUpXG4gICAgICAgIG90aGVyLl9uZXh0Tm9kZS5fcHJldmlvdXNOb2RlID0gb3RoZXI7XG4gICAgaWYgKHRoaXMuaW5kZXggPT09IHRoaXMuXy5maXJzdEluZGV4KVxuICAgICAgICB0aGlzLl8uZmlyc3ROb2RlID0gdGhpcztcbiAgICBlbHNlIGlmICh0aGlzLmluZGV4ID09PSB0aGlzLl8uZmlyc3RJbmRleCArIHRoaXMuXy5hcnJheS5sZW5ndGggLSAxKVxuICAgICAgICB0aGlzLl8ubGFzdE5vZGUgPSB0aGlzO1xuICAgIGlmIChvdGhlci5pbmRleCA9PT0gdGhpcy5fLmZpcnN0SW5kZXgpXG4gICAgICAgIHRoaXMuXy5maXJzdE5vZGUgPSBvdGhlcjtcbiAgICBlbHNlIGlmIChvdGhlci5pbmRleCA9PT0gdGhpcy5fLmZpcnN0SW5kZXggKyB0aGlzLl8uYXJyYXkubGVuZ3RoIC0gMSlcbiAgICAgICAgdGhpcy5fLmxhc3ROb2RlID0gb3RoZXI7XG4gICAgaWYgKHRoaXMuXy50cmFja1NpemUpXG4gICAgICAgIHRoaXMuXy5zaXplRGlydHkgPSB0cnVlO1xufTtcblZpZXdTZXF1ZW5jZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl8uZ2V0VmFsdWUodGhpcy5pbmRleCk7XG59O1xuVmlld1NlcXVlbmNlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5nZXQoKTtcbiAgICByZXR1cm4gdGFyZ2V0ID8gdGFyZ2V0LmdldFNpemUoKSA6IG51bGw7XG59O1xuVmlld1NlcXVlbmNlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMuXy50cmFja1NpemUgJiYgdGhpcy5fLnNpemVEaXJ0eSlcbiAgICAgICAgdGhpcy5fLmNhbGN1bGF0ZVNpemUoKTtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5nZXQoKTtcbiAgICByZXR1cm4gdGFyZ2V0ID8gdGFyZ2V0LnJlbmRlci5hcHBseSh0YXJnZXQsIGFyZ3VtZW50cykgOiBudWxsO1xufTtcbm1vZHVsZS5leHBvcnRzID0gVmlld1NlcXVlbmNlOyIsInZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FdmVudEhhbmRsZXInKTtcbmZ1bmN0aW9uIEV2ZW50QXJiaXRlcihzdGFydE1vZGUpIHtcbiAgICB0aGlzLmRpc3BhdGNoZXJzID0ge307XG4gICAgdGhpcy5jdXJyTW9kZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNldE1vZGUoc3RhcnRNb2RlKTtcbn1cbkV2ZW50QXJiaXRlci5wcm90b3R5cGUuc2V0TW9kZSA9IGZ1bmN0aW9uIHNldE1vZGUobW9kZSkge1xuICAgIGlmIChtb2RlICE9PSB0aGlzLmN1cnJNb2RlKSB7XG4gICAgICAgIHZhciBzdGFydE1vZGUgPSB0aGlzLmN1cnJNb2RlO1xuICAgICAgICBpZiAodGhpcy5kaXNwYXRjaGVyc1t0aGlzLmN1cnJNb2RlXSlcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hlcnNbdGhpcy5jdXJyTW9kZV0udHJpZ2dlcigndW5waXBlJyk7XG4gICAgICAgIHRoaXMuY3Vyck1vZGUgPSBtb2RlO1xuICAgICAgICBpZiAodGhpcy5kaXNwYXRjaGVyc1ttb2RlXSlcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hlcnNbbW9kZV0uZW1pdCgncGlwZScpO1xuICAgICAgICB0aGlzLmVtaXQoJ2NoYW5nZScsIHtcbiAgICAgICAgICAgIGZyb206IHN0YXJ0TW9kZSxcbiAgICAgICAgICAgIHRvOiBtb2RlXG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5FdmVudEFyYml0ZXIucHJvdG90eXBlLmZvck1vZGUgPSBmdW5jdGlvbiBmb3JNb2RlKG1vZGUpIHtcbiAgICBpZiAoIXRoaXMuZGlzcGF0Y2hlcnNbbW9kZV0pXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hlcnNbbW9kZV0gPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2hlcnNbbW9kZV07XG59O1xuRXZlbnRBcmJpdGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudFR5cGUsIGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuY3Vyck1vZGUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghZXZlbnQpXG4gICAgICAgIGV2ZW50ID0ge307XG4gICAgdmFyIGRpc3BhdGNoZXIgPSB0aGlzLmRpc3BhdGNoZXJzW3RoaXMuY3Vyck1vZGVdO1xuICAgIGlmIChkaXNwYXRjaGVyKVxuICAgICAgICByZXR1cm4gZGlzcGF0Y2hlci50cmlnZ2VyKGV2ZW50VHlwZSwgZXZlbnQpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gRXZlbnRBcmJpdGVyOyIsInZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FdmVudEhhbmRsZXInKTtcbmZ1bmN0aW9uIEV2ZW50RmlsdGVyKGNvbmRpdGlvbikge1xuICAgIEV2ZW50SGFuZGxlci5jYWxsKHRoaXMpO1xuICAgIHRoaXMuX2NvbmRpdGlvbiA9IGNvbmRpdGlvbjtcbn1cbkV2ZW50RmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRIYW5kbGVyLnByb3RvdHlwZSk7XG5FdmVudEZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBFdmVudEZpbHRlcjtcbkV2ZW50RmlsdGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlLCBkYXRhKSB7XG4gICAgaWYgKHRoaXMuX2NvbmRpdGlvbih0eXBlLCBkYXRhKSlcbiAgICAgICAgcmV0dXJuIEV2ZW50SGFuZGxlci5wcm90b3R5cGUuZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbkV2ZW50RmlsdGVyLnByb3RvdHlwZS50cmlnZ2VyID0gRXZlbnRGaWx0ZXIucHJvdG90eXBlLmVtaXQ7XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RmlsdGVyOyIsInZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FdmVudEhhbmRsZXInKTtcbmZ1bmN0aW9uIEV2ZW50TWFwcGVyKG1hcHBpbmdGdW5jdGlvbikge1xuICAgIEV2ZW50SGFuZGxlci5jYWxsKHRoaXMpO1xuICAgIHRoaXMuX21hcHBpbmdGdW5jdGlvbiA9IG1hcHBpbmdGdW5jdGlvbjtcbn1cbkV2ZW50TWFwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRIYW5kbGVyLnByb3RvdHlwZSk7XG5FdmVudE1hcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBFdmVudE1hcHBlcjtcbkV2ZW50TWFwcGVyLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBudWxsO1xuRXZlbnRNYXBwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gbnVsbDtcbkV2ZW50TWFwcGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlLCBkYXRhKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX21hcHBpbmdGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0LmVtaXQgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgdGFyZ2V0LmVtaXQodHlwZSwgZGF0YSk7XG59O1xuRXZlbnRNYXBwZXIucHJvdG90eXBlLnRyaWdnZXIgPSBFdmVudE1hcHBlci5wcm90b3R5cGUuZW1pdDtcbm1vZHVsZS5leHBvcnRzID0gRXZlbnRNYXBwZXI7IiwidmFyIEV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL0V2ZW50SGFuZGxlcicpO1xudmFyIFRyYW5zaXRpb25hYmxlID0gcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlJyk7XG5mdW5jdGlvbiBBY2N1bXVsYXRvcih2YWx1ZSwgZXZlbnROYW1lKSB7XG4gICAgaWYgKGV2ZW50TmFtZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBldmVudE5hbWUgPSAndXBkYXRlJztcbiAgICB0aGlzLl9zdGF0ZSA9IHZhbHVlICYmIHZhbHVlLmdldCAmJiB2YWx1ZS5zZXQgPyB2YWx1ZSA6IG5ldyBUcmFuc2l0aW9uYWJsZSh2YWx1ZSB8fCAwKTtcbiAgICB0aGlzLl9ldmVudElucHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRJbnB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRJbnB1dCk7XG4gICAgdGhpcy5fZXZlbnRJbnB1dC5vbihldmVudE5hbWUsIF9oYW5kbGVVcGRhdGUuYmluZCh0aGlzKSk7XG59XG5mdW5jdGlvbiBfaGFuZGxlVXBkYXRlKGRhdGEpIHtcbiAgICB2YXIgZGVsdGEgPSBkYXRhLmRlbHRhO1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuZ2V0KCk7XG4gICAgaWYgKGRlbHRhLmNvbnN0cnVjdG9yID09PSBzdGF0ZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICB2YXIgbmV3U3RhdGUgPSBkZWx0YSBpbnN0YW5jZW9mIEFycmF5ID8gW1xuICAgICAgICAgICAgICAgIHN0YXRlWzBdICsgZGVsdGFbMF0sXG4gICAgICAgICAgICAgICAgc3RhdGVbMV0gKyBkZWx0YVsxXVxuICAgICAgICAgICAgXSA6IHN0YXRlICsgZGVsdGE7XG4gICAgICAgIHRoaXMuc2V0KG5ld1N0YXRlKTtcbiAgICB9XG59XG5BY2N1bXVsYXRvci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0ZS5nZXQoKTtcbn07XG5BY2N1bXVsYXRvci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgdGhpcy5fc3RhdGUuc2V0KHZhbHVlKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEFjY3VtdWxhdG9yOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF3aW5kb3cuQ3VzdG9tRXZlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgY2xpY2tUaHJlc2hvbGQgPSAzMDA7XG4gICAgdmFyIGNsaWNrV2luZG93ID0gNTAwO1xuICAgIHZhciBwb3RlbnRpYWxDbGlja3MgPSB7fTtcbiAgICB2YXIgcmVjZW50bHlEaXNwYXRjaGVkID0ge307XG4gICAgdmFyIF9ub3cgPSBEYXRlLm5vdztcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdGltZXN0YW1wID0gX25vdygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcbiAgICAgICAgICAgIHBvdGVudGlhbENsaWNrc1t0b3VjaC5pZGVudGlmaWVyXSA9IHRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XG4gICAgICAgICAgICBkZWxldGUgcG90ZW50aWFsQ2xpY2tzW3RvdWNoLmlkZW50aWZpZXJdO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBjdXJyVGltZSA9IF9ub3coKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lID0gcG90ZW50aWFsQ2xpY2tzW3RvdWNoLmlkZW50aWZpZXJdO1xuICAgICAgICAgICAgaWYgKHN0YXJ0VGltZSAmJiBjdXJyVGltZSAtIHN0YXJ0VGltZSA8IGNsaWNrVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsaWNrRXZ0ID0gbmV3IHdpbmRvdy5DdXN0b21FdmVudCgnY2xpY2snLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnYnViYmxlcyc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGV0YWlsJzogdG91Y2hcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVjZW50bHlEaXNwYXRjaGVkW2N1cnJUaW1lXSA9IGV2ZW50O1xuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5kaXNwYXRjaEV2ZW50KGNsaWNrRXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlbGV0ZSBwb3RlbnRpYWxDbGlja3NbdG91Y2guaWRlbnRpZmllcl07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGN1cnJUaW1lID0gX25vdygpO1xuICAgICAgICBmb3IgKHZhciBpIGluIHJlY2VudGx5RGlzcGF0Y2hlZCkge1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzRXZlbnQgPSByZWNlbnRseURpc3BhdGNoZWRbaV07XG4gICAgICAgICAgICBpZiAoY3VyclRpbWUgLSBpIDwgY2xpY2tXaW5kb3cpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiB3aW5kb3cuTW91c2VFdmVudCAmJiBldmVudC50YXJnZXQgPT09IHByZXZpb3VzRXZlbnQudGFyZ2V0KVxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIGRlbGV0ZSByZWNlbnRseURpc3BhdGNoZWRbaV07XG4gICAgICAgIH1cbiAgICB9LCB0cnVlKTtcbn0oKSk7IiwidmFyIEV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJy4uL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG5mdW5jdGlvbiBHZW5lcmljU3luYyhzeW5jcywgb3B0aW9ucykge1xuICAgIHRoaXMuX2V2ZW50SW5wdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldElucHV0SGFuZGxlcih0aGlzLCB0aGlzLl9ldmVudElucHV0KTtcbiAgICBFdmVudEhhbmRsZXIuc2V0T3V0cHV0SGFuZGxlcih0aGlzLCB0aGlzLl9ldmVudE91dHB1dCk7XG4gICAgdGhpcy5fc3luY3MgPSB7fTtcbiAgICBpZiAoc3luY3MpXG4gICAgICAgIHRoaXMuYWRkU3luYyhzeW5jcyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn1cbkdlbmVyaWNTeW5jLkRJUkVDVElPTl9YID0gMDtcbkdlbmVyaWNTeW5jLkRJUkVDVElPTl9ZID0gMTtcbkdlbmVyaWNTeW5jLkRJUkVDVElPTl9aID0gMjtcbnZhciByZWdpc3RyeSA9IHt9O1xuR2VuZXJpY1N5bmMucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3RlcihzeW5jT2JqZWN0KSB7XG4gICAgZm9yICh2YXIga2V5IGluIHN5bmNPYmplY3QpIHtcbiAgICAgICAgaWYgKHJlZ2lzdHJ5W2tleV0pIHtcbiAgICAgICAgICAgIGlmIChyZWdpc3RyeVtrZXldID09PSBzeW5jT2JqZWN0W2tleV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGhpcyBrZXkgaXMgcmVnaXN0ZXJlZCB0byBhIGRpZmZlcmVudCBzeW5jIGNsYXNzJyk7XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgcmVnaXN0cnlba2V5XSA9IHN5bmNPYmplY3Rba2V5XTtcbiAgICB9XG59O1xuR2VuZXJpY1N5bmMucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl9zeW5jcykge1xuICAgICAgICB0aGlzLl9zeW5jc1trZXldLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgfVxufTtcbkdlbmVyaWNTeW5jLnByb3RvdHlwZS5waXBlU3luYyA9IGZ1bmN0aW9uIHBpcGVUb1N5bmMoa2V5KSB7XG4gICAgdmFyIHN5bmMgPSB0aGlzLl9zeW5jc1trZXldO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQucGlwZShzeW5jKTtcbiAgICBzeW5jLnBpcGUodGhpcy5fZXZlbnRPdXRwdXQpO1xufTtcbkdlbmVyaWNTeW5jLnByb3RvdHlwZS51bnBpcGVTeW5jID0gZnVuY3Rpb24gdW5waXBlRnJvbVN5bmMoa2V5KSB7XG4gICAgdmFyIHN5bmMgPSB0aGlzLl9zeW5jc1trZXldO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQudW5waXBlKHN5bmMpO1xuICAgIHN5bmMudW5waXBlKHRoaXMuX2V2ZW50T3V0cHV0KTtcbn07XG5mdW5jdGlvbiBfYWRkU2luZ2xlU3luYyhrZXksIG9wdGlvbnMpIHtcbiAgICBpZiAoIXJlZ2lzdHJ5W2tleV0pXG4gICAgICAgIHJldHVybjtcbiAgICB0aGlzLl9zeW5jc1trZXldID0gbmV3IHJlZ2lzdHJ5W2tleV0ob3B0aW9ucyk7XG4gICAgdGhpcy5waXBlU3luYyhrZXkpO1xufVxuR2VuZXJpY1N5bmMucHJvdG90eXBlLmFkZFN5bmMgPSBmdW5jdGlvbiBhZGRTeW5jKHN5bmNzKSB7XG4gICAgaWYgKHN5bmNzIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3luY3MubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBfYWRkU2luZ2xlU3luYy5jYWxsKHRoaXMsIHN5bmNzW2ldKTtcbiAgICBlbHNlIGlmIChzeW5jcyBpbnN0YW5jZW9mIE9iamVjdClcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHN5bmNzKVxuICAgICAgICAgICAgX2FkZFNpbmdsZVN5bmMuY2FsbCh0aGlzLCBrZXksIHN5bmNzW2tleV0pO1xufTtcbm1vZHVsZS5leHBvcnRzID0gR2VuZXJpY1N5bmM7IiwidmFyIEV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJy4uL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG52YXIgT3B0aW9uc01hbmFnZXIgPSByZXF1aXJlKCcuLi9jb3JlL09wdGlvbnNNYW5hZ2VyJyk7XG5mdW5jdGlvbiBNb3VzZVN5bmMob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoTW91c2VTeW5jLkRFRkFVTFRfT1BUSU9OUyk7XG4gICAgdGhpcy5fb3B0aW9uc01hbmFnZXIgPSBuZXcgT3B0aW9uc01hbmFnZXIodGhpcy5vcHRpb25zKTtcbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldElucHV0SGFuZGxlcih0aGlzLCB0aGlzLl9ldmVudElucHV0KTtcbiAgICBFdmVudEhhbmRsZXIuc2V0T3V0cHV0SGFuZGxlcih0aGlzLCB0aGlzLl9ldmVudE91dHB1dCk7XG4gICAgdGhpcy5fZXZlbnRJbnB1dC5vbignbW91c2Vkb3duJywgX2hhbmRsZVN0YXJ0LmJpbmQodGhpcykpO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQub24oJ21vdXNlbW92ZScsIF9oYW5kbGVNb3ZlLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQub24oJ21vdXNldXAnLCBfaGFuZGxlRW5kLmJpbmQodGhpcykpO1xuICAgIGlmICh0aGlzLm9wdGlvbnMucHJvcG9nYXRlKVxuICAgICAgICB0aGlzLl9ldmVudElucHV0Lm9uKCdtb3VzZWxlYXZlJywgX2hhbmRsZUxlYXZlLmJpbmQodGhpcykpO1xuICAgIGVsc2VcbiAgICAgICAgdGhpcy5fZXZlbnRJbnB1dC5vbignbW91c2VsZWF2ZScsIF9oYW5kbGVFbmQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fcGF5bG9hZCA9IHtcbiAgICAgICAgZGVsdGE6IG51bGwsXG4gICAgICAgIHBvc2l0aW9uOiBudWxsLFxuICAgICAgICB2ZWxvY2l0eTogbnVsbCxcbiAgICAgICAgY2xpZW50WDogMCxcbiAgICAgICAgY2xpZW50WTogMCxcbiAgICAgICAgb2Zmc2V0WDogMCxcbiAgICAgICAgb2Zmc2V0WTogMFxuICAgIH07XG4gICAgdGhpcy5fcG9zaXRpb24gPSBudWxsO1xuICAgIHRoaXMuX3ByZXZDb29yZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9wcmV2VGltZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9kb3duID0gZmFsc2U7XG4gICAgdGhpcy5fbW92ZWQgPSBmYWxzZTtcbn1cbk1vdXNlU3luYy5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgZGlyZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgcmFpbHM6IGZhbHNlLFxuICAgIHNjYWxlOiAxLFxuICAgIHByb3BvZ2F0ZTogdHJ1ZSxcbiAgICBwcmV2ZW50RGVmYXVsdDogdHJ1ZVxufTtcbk1vdXNlU3luYy5ESVJFQ1RJT05fWCA9IDA7XG5Nb3VzZVN5bmMuRElSRUNUSU9OX1kgPSAxO1xudmFyIE1JTklNVU1fVElDS19USU1FID0gODtcbnZhciBfbm93ID0gRGF0ZS5ub3c7XG5mdW5jdGlvbiBfaGFuZGxlU3RhcnQoZXZlbnQpIHtcbiAgICB2YXIgZGVsdGE7XG4gICAgdmFyIHZlbG9jaXR5O1xuICAgIGlmICh0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQpXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIHggPSBldmVudC5jbGllbnRYO1xuICAgIHZhciB5ID0gZXZlbnQuY2xpZW50WTtcbiAgICB0aGlzLl9wcmV2Q29vcmQgPSBbXG4gICAgICAgIHgsXG4gICAgICAgIHlcbiAgICBdO1xuICAgIHRoaXMuX3ByZXZUaW1lID0gX25vdygpO1xuICAgIHRoaXMuX2Rvd24gPSB0cnVlO1xuICAgIHRoaXMuX21vdmUgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmRpcmVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gMDtcbiAgICAgICAgZGVsdGEgPSAwO1xuICAgICAgICB2ZWxvY2l0eSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBbXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMFxuICAgICAgICBdO1xuICAgICAgICBkZWx0YSA9IFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwXG4gICAgICAgIF07XG4gICAgICAgIHZlbG9jaXR5ID0gW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXTtcbiAgICB9XG4gICAgdmFyIHBheWxvYWQgPSB0aGlzLl9wYXlsb2FkO1xuICAgIHBheWxvYWQuZGVsdGEgPSBkZWx0YTtcbiAgICBwYXlsb2FkLnBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XG4gICAgcGF5bG9hZC52ZWxvY2l0eSA9IHZlbG9jaXR5O1xuICAgIHBheWxvYWQuY2xpZW50WCA9IHg7XG4gICAgcGF5bG9hZC5jbGllbnRZID0geTtcbiAgICBwYXlsb2FkLm9mZnNldFggPSBldmVudC5vZmZzZXRYO1xuICAgIHBheWxvYWQub2Zmc2V0WSA9IGV2ZW50Lm9mZnNldFk7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgnc3RhcnQnLCBwYXlsb2FkKTtcbn1cbmZ1bmN0aW9uIF9oYW5kbGVNb3ZlKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLl9wcmV2Q29vcmQpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgcHJldkNvb3JkID0gdGhpcy5fcHJldkNvb3JkO1xuICAgIHZhciBwcmV2VGltZSA9IHRoaXMuX3ByZXZUaW1lO1xuICAgIHZhciB4ID0gZXZlbnQuY2xpZW50WDtcbiAgICB2YXIgeSA9IGV2ZW50LmNsaWVudFk7XG4gICAgdmFyIGN1cnJUaW1lID0gX25vdygpO1xuICAgIHZhciBkaWZmWCA9IHggLSBwcmV2Q29vcmRbMF07XG4gICAgdmFyIGRpZmZZID0geSAtIHByZXZDb29yZFsxXTtcbiAgICBpZiAodGhpcy5vcHRpb25zLnJhaWxzKSB7XG4gICAgICAgIGlmIChNYXRoLmFicyhkaWZmWCkgPiBNYXRoLmFicyhkaWZmWSkpXG4gICAgICAgICAgICBkaWZmWSA9IDA7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRpZmZYID0gMDtcbiAgICB9XG4gICAgdmFyIGRpZmZUaW1lID0gTWF0aC5tYXgoY3VyclRpbWUgLSBwcmV2VGltZSwgTUlOSU1VTV9USUNLX1RJTUUpO1xuICAgIHZhciB2ZWxYID0gZGlmZlggLyBkaWZmVGltZTtcbiAgICB2YXIgdmVsWSA9IGRpZmZZIC8gZGlmZlRpbWU7XG4gICAgdmFyIHNjYWxlID0gdGhpcy5vcHRpb25zLnNjYWxlO1xuICAgIHZhciBuZXh0VmVsO1xuICAgIHZhciBuZXh0RGVsdGE7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gPT09IE1vdXNlU3luYy5ESVJFQ1RJT05fWCkge1xuICAgICAgICBuZXh0RGVsdGEgPSBzY2FsZSAqIGRpZmZYO1xuICAgICAgICBuZXh0VmVsID0gc2NhbGUgKiB2ZWxYO1xuICAgICAgICB0aGlzLl9wb3NpdGlvbiArPSBuZXh0RGVsdGE7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uID09PSBNb3VzZVN5bmMuRElSRUNUSU9OX1kpIHtcbiAgICAgICAgbmV4dERlbHRhID0gc2NhbGUgKiBkaWZmWTtcbiAgICAgICAgbmV4dFZlbCA9IHNjYWxlICogdmVsWTtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gKz0gbmV4dERlbHRhO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHREZWx0YSA9IFtcbiAgICAgICAgICAgIHNjYWxlICogZGlmZlgsXG4gICAgICAgICAgICBzY2FsZSAqIGRpZmZZXG4gICAgICAgIF07XG4gICAgICAgIG5leHRWZWwgPSBbXG4gICAgICAgICAgICBzY2FsZSAqIHZlbFgsXG4gICAgICAgICAgICBzY2FsZSAqIHZlbFlcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5fcG9zaXRpb25bMF0gKz0gbmV4dERlbHRhWzBdO1xuICAgICAgICB0aGlzLl9wb3NpdGlvblsxXSArPSBuZXh0RGVsdGFbMV07XG4gICAgfVxuICAgIHZhciBwYXlsb2FkID0gdGhpcy5fcGF5bG9hZDtcbiAgICBwYXlsb2FkLmRlbHRhID0gbmV4dERlbHRhO1xuICAgIHBheWxvYWQucG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbjtcbiAgICBwYXlsb2FkLnZlbG9jaXR5ID0gbmV4dFZlbDtcbiAgICBwYXlsb2FkLmNsaWVudFggPSB4O1xuICAgIHBheWxvYWQuY2xpZW50WSA9IHk7XG4gICAgcGF5bG9hZC5vZmZzZXRYID0gZXZlbnQub2Zmc2V0WDtcbiAgICBwYXlsb2FkLm9mZnNldFkgPSBldmVudC5vZmZzZXRZO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ3VwZGF0ZScsIHBheWxvYWQpO1xuICAgIHRoaXMuX3ByZXZDb29yZCA9IFtcbiAgICAgICAgeCxcbiAgICAgICAgeVxuICAgIF07XG4gICAgdGhpcy5fcHJldlRpbWUgPSBjdXJyVGltZTtcbiAgICB0aGlzLl9tb3ZlID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIF9oYW5kbGVFbmQoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuX2Rvd24pXG4gICAgICAgIHJldHVybjtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdlbmQnLCB0aGlzLl9wYXlsb2FkKTtcbiAgICB0aGlzLl9wcmV2Q29vcmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJldlRpbWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZG93biA9IGZhbHNlO1xuICAgIHRoaXMuX21vdmUgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIF9oYW5kbGVMZWF2ZShldmVudCkge1xuICAgIGlmICghdGhpcy5fZG93biB8fCAhdGhpcy5fbW92ZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBib3VuZE1vdmUgPSBfaGFuZGxlTW92ZS5iaW5kKHRoaXMpO1xuICAgIHZhciBib3VuZEVuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX2hhbmRsZUVuZC5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGJvdW5kTW92ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgYm91bmRFbmQpO1xuICAgICAgICB9LmJpbmQodGhpcywgZXZlbnQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGJvdW5kTW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGJvdW5kRW5kKTtcbn1cbk1vdXNlU3luYy5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucztcbn07XG5Nb3VzZVN5bmMucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IE1vdXNlU3luYzsiLCJ2YXIgVHdvRmluZ2VyU3luYyA9IHJlcXVpcmUoJy4vVHdvRmluZ2VyU3luYycpO1xudmFyIE9wdGlvbnNNYW5hZ2VyID0gcmVxdWlyZSgnLi4vY29yZS9PcHRpb25zTWFuYWdlcicpO1xuZnVuY3Rpb24gUGluY2hTeW5jKG9wdGlvbnMpIHtcbiAgICBUd29GaW5nZXJTeW5jLmNhbGwodGhpcyk7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZShQaW5jaFN5bmMuREVGQVVMVF9PUFRJT05TKTtcbiAgICB0aGlzLl9vcHRpb25zTWFuYWdlciA9IG5ldyBPcHRpb25zTWFuYWdlcih0aGlzLm9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5fZGlzcGxhY2VtZW50ID0gMDtcbiAgICB0aGlzLl9wcmV2aW91c0Rpc3RhbmNlID0gMDtcbn1cblBpbmNoU3luYy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFR3b0ZpbmdlclN5bmMucHJvdG90eXBlKTtcblBpbmNoU3luYy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQaW5jaFN5bmM7XG5QaW5jaFN5bmMuREVGQVVMVF9PUFRJT05TID0geyBzY2FsZTogMSB9O1xuUGluY2hTeW5jLnByb3RvdHlwZS5fc3RhcnRVcGRhdGUgPSBmdW5jdGlvbiBfc3RhcnRVcGRhdGUoZXZlbnQpIHtcbiAgICB0aGlzLl9wcmV2aW91c0Rpc3RhbmNlID0gVHdvRmluZ2VyU3luYy5jYWxjdWxhdGVEaXN0YW5jZSh0aGlzLnBvc0EsIHRoaXMucG9zQik7XG4gICAgdGhpcy5fZGlzcGxhY2VtZW50ID0gMDtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdzdGFydCcsIHtcbiAgICAgICAgY291bnQ6IGV2ZW50LnRvdWNoZXMubGVuZ3RoLFxuICAgICAgICB0b3VjaGVzOiBbXG4gICAgICAgICAgICB0aGlzLnRvdWNoQUlkLFxuICAgICAgICAgICAgdGhpcy50b3VjaEJJZFxuICAgICAgICBdLFxuICAgICAgICBkaXN0YW5jZTogdGhpcy5fZGlzdCxcbiAgICAgICAgY2VudGVyOiBUd29GaW5nZXJTeW5jLmNhbGN1bGF0ZUNlbnRlcih0aGlzLnBvc0EsIHRoaXMucG9zQilcbiAgICB9KTtcbn07XG5QaW5jaFN5bmMucHJvdG90eXBlLl9tb3ZlVXBkYXRlID0gZnVuY3Rpb24gX21vdmVVcGRhdGUoZGlmZlRpbWUpIHtcbiAgICB2YXIgY3VyckRpc3QgPSBUd29GaW5nZXJTeW5jLmNhbGN1bGF0ZURpc3RhbmNlKHRoaXMucG9zQSwgdGhpcy5wb3NCKTtcbiAgICB2YXIgY2VudGVyID0gVHdvRmluZ2VyU3luYy5jYWxjdWxhdGVDZW50ZXIodGhpcy5wb3NBLCB0aGlzLnBvc0IpO1xuICAgIHZhciBzY2FsZSA9IHRoaXMub3B0aW9ucy5zY2FsZTtcbiAgICB2YXIgZGVsdGEgPSBzY2FsZSAqIChjdXJyRGlzdCAtIHRoaXMuX3ByZXZpb3VzRGlzdGFuY2UpO1xuICAgIHZhciB2ZWxvY2l0eSA9IGRlbHRhIC8gZGlmZlRpbWU7XG4gICAgdGhpcy5fcHJldmlvdXNEaXN0YW5jZSA9IGN1cnJEaXN0O1xuICAgIHRoaXMuX2Rpc3BsYWNlbWVudCArPSBkZWx0YTtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCd1cGRhdGUnLCB7XG4gICAgICAgIGRlbHRhOiBkZWx0YSxcbiAgICAgICAgdmVsb2NpdHk6IHZlbG9jaXR5LFxuICAgICAgICBkaXN0YW5jZTogY3VyckRpc3QsXG4gICAgICAgIGRpc3BsYWNlbWVudDogdGhpcy5fZGlzcGxhY2VtZW50LFxuICAgICAgICBjZW50ZXI6IGNlbnRlcixcbiAgICAgICAgdG91Y2hlczogW1xuICAgICAgICAgICAgdGhpcy50b3VjaEFJZCxcbiAgICAgICAgICAgIHRoaXMudG91Y2hCSWRcbiAgICAgICAgXVxuICAgIH0pO1xufTtcblBpbmNoU3luYy5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucztcbn07XG5QaW5jaFN5bmMucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFBpbmNoU3luYzsiLCJ2YXIgVHdvRmluZ2VyU3luYyA9IHJlcXVpcmUoJy4vVHdvRmluZ2VyU3luYycpO1xudmFyIE9wdGlvbnNNYW5hZ2VyID0gcmVxdWlyZSgnLi4vY29yZS9PcHRpb25zTWFuYWdlcicpO1xuZnVuY3Rpb24gUm90YXRlU3luYyhvcHRpb25zKSB7XG4gICAgVHdvRmluZ2VyU3luYy5jYWxsKHRoaXMpO1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoUm90YXRlU3luYy5ERUZBVUxUX09QVElPTlMpO1xuICAgIHRoaXMuX29wdGlvbnNNYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHRoaXMub3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLl9hbmdsZSA9IDA7XG4gICAgdGhpcy5fcHJldmlvdXNBbmdsZSA9IDA7XG59XG5Sb3RhdGVTeW5jLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoVHdvRmluZ2VyU3luYy5wcm90b3R5cGUpO1xuUm90YXRlU3luYy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSb3RhdGVTeW5jO1xuUm90YXRlU3luYy5ERUZBVUxUX09QVElPTlMgPSB7IHNjYWxlOiAxIH07XG5Sb3RhdGVTeW5jLnByb3RvdHlwZS5fc3RhcnRVcGRhdGUgPSBmdW5jdGlvbiBfc3RhcnRVcGRhdGUoZXZlbnQpIHtcbiAgICB0aGlzLl9hbmdsZSA9IDA7XG4gICAgdGhpcy5fcHJldmlvdXNBbmdsZSA9IFR3b0ZpbmdlclN5bmMuY2FsY3VsYXRlQW5nbGUodGhpcy5wb3NBLCB0aGlzLnBvc0IpO1xuICAgIHZhciBjZW50ZXIgPSBUd29GaW5nZXJTeW5jLmNhbGN1bGF0ZUNlbnRlcih0aGlzLnBvc0EsIHRoaXMucG9zQik7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgnc3RhcnQnLCB7XG4gICAgICAgIGNvdW50OiBldmVudC50b3VjaGVzLmxlbmd0aCxcbiAgICAgICAgYW5nbGU6IHRoaXMuX2FuZ2xlLFxuICAgICAgICBjZW50ZXI6IGNlbnRlcixcbiAgICAgICAgdG91Y2hlczogW1xuICAgICAgICAgICAgdGhpcy50b3VjaEFJZCxcbiAgICAgICAgICAgIHRoaXMudG91Y2hCSWRcbiAgICAgICAgXVxuICAgIH0pO1xufTtcblJvdGF0ZVN5bmMucHJvdG90eXBlLl9tb3ZlVXBkYXRlID0gZnVuY3Rpb24gX21vdmVVcGRhdGUoZGlmZlRpbWUpIHtcbiAgICB2YXIgc2NhbGUgPSB0aGlzLm9wdGlvbnMuc2NhbGU7XG4gICAgdmFyIGN1cnJBbmdsZSA9IFR3b0ZpbmdlclN5bmMuY2FsY3VsYXRlQW5nbGUodGhpcy5wb3NBLCB0aGlzLnBvc0IpO1xuICAgIHZhciBjZW50ZXIgPSBUd29GaW5nZXJTeW5jLmNhbGN1bGF0ZUNlbnRlcih0aGlzLnBvc0EsIHRoaXMucG9zQik7XG4gICAgdmFyIGRpZmZUaGV0YSA9IHNjYWxlICogKGN1cnJBbmdsZSAtIHRoaXMuX3ByZXZpb3VzQW5nbGUpO1xuICAgIHZhciB2ZWxUaGV0YSA9IGRpZmZUaGV0YSAvIGRpZmZUaW1lO1xuICAgIHRoaXMuX2FuZ2xlICs9IGRpZmZUaGV0YTtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCd1cGRhdGUnLCB7XG4gICAgICAgIGRlbHRhOiBkaWZmVGhldGEsXG4gICAgICAgIHZlbG9jaXR5OiB2ZWxUaGV0YSxcbiAgICAgICAgYW5nbGU6IHRoaXMuX2FuZ2xlLFxuICAgICAgICBjZW50ZXI6IGNlbnRlcixcbiAgICAgICAgdG91Y2hlczogW1xuICAgICAgICAgICAgdGhpcy50b3VjaEFJZCxcbiAgICAgICAgICAgIHRoaXMudG91Y2hCSWRcbiAgICAgICAgXVxuICAgIH0pO1xuICAgIHRoaXMuX3ByZXZpb3VzQW5nbGUgPSBjdXJyQW5nbGU7XG59O1xuUm90YXRlU3luYy5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucztcbn07XG5Sb3RhdGVTeW5jLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnMob3B0aW9ucyk7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBSb3RhdGVTeW5jOyIsInZhciBUd29GaW5nZXJTeW5jID0gcmVxdWlyZSgnLi9Ud29GaW5nZXJTeW5jJyk7XG52YXIgT3B0aW9uc01hbmFnZXIgPSByZXF1aXJlKCcuLi9jb3JlL09wdGlvbnNNYW5hZ2VyJyk7XG5mdW5jdGlvbiBTY2FsZVN5bmMob3B0aW9ucykge1xuICAgIFR3b0ZpbmdlclN5bmMuY2FsbCh0aGlzKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFNjYWxlU3luYy5ERUZBVUxUX09QVElPTlMpO1xuICAgIHRoaXMuX29wdGlvbnNNYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHRoaXMub3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLl9zY2FsZUZhY3RvciA9IDE7XG4gICAgdGhpcy5fc3RhcnREaXN0ID0gMDtcbiAgICB0aGlzLl9ldmVudElucHV0Lm9uKCdwaXBlJywgX3Jlc2V0LmJpbmQodGhpcykpO1xufVxuU2NhbGVTeW5jLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoVHdvRmluZ2VyU3luYy5wcm90b3R5cGUpO1xuU2NhbGVTeW5jLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFNjYWxlU3luYztcblNjYWxlU3luYy5ERUZBVUxUX09QVElPTlMgPSB7IHNjYWxlOiAxIH07XG5mdW5jdGlvbiBfcmVzZXQoKSB7XG4gICAgdGhpcy50b3VjaEFJZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnRvdWNoQklkID0gdW5kZWZpbmVkO1xufVxuU2NhbGVTeW5jLnByb3RvdHlwZS5fc3RhcnRVcGRhdGUgPSBmdW5jdGlvbiBfc3RhcnRVcGRhdGUoZXZlbnQpIHtcbiAgICB0aGlzLl9zY2FsZUZhY3RvciA9IDE7XG4gICAgdGhpcy5fc3RhcnREaXN0ID0gVHdvRmluZ2VyU3luYy5jYWxjdWxhdGVEaXN0YW5jZSh0aGlzLnBvc0EsIHRoaXMucG9zQik7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgnc3RhcnQnLCB7XG4gICAgICAgIGNvdW50OiBldmVudC50b3VjaGVzLmxlbmd0aCxcbiAgICAgICAgdG91Y2hlczogW1xuICAgICAgICAgICAgdGhpcy50b3VjaEFJZCxcbiAgICAgICAgICAgIHRoaXMudG91Y2hCSWRcbiAgICAgICAgXSxcbiAgICAgICAgZGlzdGFuY2U6IHRoaXMuX3N0YXJ0RGlzdCxcbiAgICAgICAgY2VudGVyOiBUd29GaW5nZXJTeW5jLmNhbGN1bGF0ZUNlbnRlcih0aGlzLnBvc0EsIHRoaXMucG9zQilcbiAgICB9KTtcbn07XG5TY2FsZVN5bmMucHJvdG90eXBlLl9tb3ZlVXBkYXRlID0gZnVuY3Rpb24gX21vdmVVcGRhdGUoZGlmZlRpbWUpIHtcbiAgICB2YXIgc2NhbGUgPSB0aGlzLm9wdGlvbnMuc2NhbGU7XG4gICAgdmFyIGN1cnJEaXN0ID0gVHdvRmluZ2VyU3luYy5jYWxjdWxhdGVEaXN0YW5jZSh0aGlzLnBvc0EsIHRoaXMucG9zQik7XG4gICAgdmFyIGNlbnRlciA9IFR3b0ZpbmdlclN5bmMuY2FsY3VsYXRlQ2VudGVyKHRoaXMucG9zQSwgdGhpcy5wb3NCKTtcbiAgICB2YXIgZGVsdGEgPSAoY3VyckRpc3QgLSB0aGlzLl9zdGFydERpc3QpIC8gdGhpcy5fc3RhcnREaXN0O1xuICAgIHZhciBuZXdTY2FsZUZhY3RvciA9IE1hdGgubWF4KDEgKyBzY2FsZSAqIGRlbHRhLCAwKTtcbiAgICB2YXIgdmVsb1NjYWxlID0gKG5ld1NjYWxlRmFjdG9yIC0gdGhpcy5fc2NhbGVGYWN0b3IpIC8gZGlmZlRpbWU7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgndXBkYXRlJywge1xuICAgICAgICBkZWx0YTogZGVsdGEsXG4gICAgICAgIHNjYWxlOiBuZXdTY2FsZUZhY3RvcixcbiAgICAgICAgdmVsb2NpdHk6IHZlbG9TY2FsZSxcbiAgICAgICAgZGlzdGFuY2U6IGN1cnJEaXN0LFxuICAgICAgICBjZW50ZXI6IGNlbnRlcixcbiAgICAgICAgdG91Y2hlczogW1xuICAgICAgICAgICAgdGhpcy50b3VjaEFJZCxcbiAgICAgICAgICAgIHRoaXMudG91Y2hCSWRcbiAgICAgICAgXVxuICAgIH0pO1xuICAgIHRoaXMuX3NjYWxlRmFjdG9yID0gbmV3U2NhbGVGYWN0b3I7XG59O1xuU2NhbGVTeW5jLnByb3RvdHlwZS5nZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zO1xufTtcblNjYWxlU3luYy5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKG9wdGlvbnMpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gU2NhbGVTeW5jOyIsInZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCcuLi9jb3JlL0V2ZW50SGFuZGxlcicpO1xudmFyIEVuZ2luZSA9IHJlcXVpcmUoJy4uL2NvcmUvRW5naW5lJyk7XG52YXIgT3B0aW9uc01hbmFnZXIgPSByZXF1aXJlKCcuLi9jb3JlL09wdGlvbnNNYW5hZ2VyJyk7XG5mdW5jdGlvbiBTY3JvbGxTeW5jKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFNjcm9sbFN5bmMuREVGQVVMVF9PUFRJT05TKTtcbiAgICB0aGlzLl9vcHRpb25zTWFuYWdlciA9IG5ldyBPcHRpb25zTWFuYWdlcih0aGlzLm9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5fcGF5bG9hZCA9IHtcbiAgICAgICAgZGVsdGE6IG51bGwsXG4gICAgICAgIHBvc2l0aW9uOiBudWxsLFxuICAgICAgICB2ZWxvY2l0eTogbnVsbCxcbiAgICAgICAgc2xpcDogdHJ1ZVxuICAgIH07XG4gICAgdGhpcy5fZXZlbnRJbnB1dCA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgICB0aGlzLl9ldmVudE91dHB1dCA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgICBFdmVudEhhbmRsZXIuc2V0SW5wdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50SW5wdXQpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50T3V0cHV0KTtcbiAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gPT09IHVuZGVmaW5lZCA/IFtcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgIF0gOiAwO1xuICAgIHRoaXMuX3ByZXZUaW1lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3ByZXZWZWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZXZlbnRJbnB1dC5vbignbW91c2V3aGVlbCcsIF9oYW5kbGVNb3ZlLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQub24oJ3doZWVsJywgX2hhbmRsZU1vdmUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5faW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIHRoaXMuX2xvb3BCb3VuZCA9IGZhbHNlO1xufVxuU2Nyb2xsU3luYy5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgZGlyZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgbWluaW11bUVuZFNwZWVkOiBJbmZpbml0eSxcbiAgICByYWlsczogZmFsc2UsXG4gICAgc2NhbGU6IDEsXG4gICAgc3RhbGxUaW1lOiA1MCxcbiAgICBsaW5lSGVpZ2h0OiA0MCxcbiAgICBwcmV2ZW50RGVmYXVsdDogdHJ1ZVxufTtcblNjcm9sbFN5bmMuRElSRUNUSU9OX1ggPSAwO1xuU2Nyb2xsU3luYy5ESVJFQ1RJT05fWSA9IDE7XG52YXIgTUlOSU1VTV9USUNLX1RJTUUgPSA4O1xudmFyIF9ub3cgPSBEYXRlLm5vdztcbmZ1bmN0aW9uIF9uZXdGcmFtZSgpIHtcbiAgICBpZiAodGhpcy5faW5Qcm9ncmVzcyAmJiBfbm93KCkgLSB0aGlzLl9wcmV2VGltZSA+IHRoaXMub3B0aW9ucy5zdGFsbFRpbWUpIHtcbiAgICAgICAgdGhpcy5faW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB2YXIgZmluYWxWZWwgPSBNYXRoLmFicyh0aGlzLl9wcmV2VmVsKSA+PSB0aGlzLm9wdGlvbnMubWluaW11bUVuZFNwZWVkID8gdGhpcy5fcHJldlZlbCA6IDA7XG4gICAgICAgIHZhciBwYXlsb2FkID0gdGhpcy5fcGF5bG9hZDtcbiAgICAgICAgcGF5bG9hZC5wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uO1xuICAgICAgICBwYXlsb2FkLnZlbG9jaXR5ID0gZmluYWxWZWw7XG4gICAgICAgIHBheWxvYWQuc2xpcCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ2VuZCcsIHBheWxvYWQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9oYW5kbGVNb3ZlKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdClcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoIXRoaXMuX2luUHJvZ3Jlc3MpIHtcbiAgICAgICAgdGhpcy5faW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gdW5kZWZpbmVkID8gW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXSA6IDA7XG4gICAgICAgIHBheWxvYWQgPSB0aGlzLl9wYXlsb2FkO1xuICAgICAgICBwYXlsb2FkLnNsaXAgPSB0cnVlO1xuICAgICAgICBwYXlsb2FkLnBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XG4gICAgICAgIHBheWxvYWQuY2xpZW50WCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICAgIHBheWxvYWQuY2xpZW50WSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICAgIHBheWxvYWQub2Zmc2V0WCA9IGV2ZW50Lm9mZnNldFg7XG4gICAgICAgIHBheWxvYWQub2Zmc2V0WSA9IGV2ZW50Lm9mZnNldFk7XG4gICAgICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ3N0YXJ0JywgcGF5bG9hZCk7XG4gICAgICAgIGlmICghdGhpcy5fbG9vcEJvdW5kKSB7XG4gICAgICAgICAgICBFbmdpbmUub24oJ3ByZXJlbmRlcicsIF9uZXdGcmFtZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuX2xvb3BCb3VuZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGN1cnJUaW1lID0gX25vdygpO1xuICAgIHZhciBwcmV2VGltZSA9IHRoaXMuX3ByZXZUaW1lIHx8IGN1cnJUaW1lO1xuICAgIHZhciBkaWZmWCA9IGV2ZW50LndoZWVsRGVsdGFYICE9PSB1bmRlZmluZWQgPyBldmVudC53aGVlbERlbHRhWCA6IC1ldmVudC5kZWx0YVg7XG4gICAgdmFyIGRpZmZZID0gZXZlbnQud2hlZWxEZWx0YVkgIT09IHVuZGVmaW5lZCA/IGV2ZW50LndoZWVsRGVsdGFZIDogLWV2ZW50LmRlbHRhWTtcbiAgICBpZiAoZXZlbnQuZGVsdGFNb2RlID09PSAxKSB7XG4gICAgICAgIGRpZmZYICo9IHRoaXMub3B0aW9ucy5saW5lSGVpZ2h0O1xuICAgICAgICBkaWZmWSAqPSB0aGlzLm9wdGlvbnMubGluZUhlaWdodDtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5yYWlscykge1xuICAgICAgICBpZiAoTWF0aC5hYnMoZGlmZlgpID4gTWF0aC5hYnMoZGlmZlkpKVxuICAgICAgICAgICAgZGlmZlkgPSAwO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBkaWZmWCA9IDA7XG4gICAgfVxuICAgIHZhciBkaWZmVGltZSA9IE1hdGgubWF4KGN1cnJUaW1lIC0gcHJldlRpbWUsIE1JTklNVU1fVElDS19USU1FKTtcbiAgICB2YXIgdmVsWCA9IGRpZmZYIC8gZGlmZlRpbWU7XG4gICAgdmFyIHZlbFkgPSBkaWZmWSAvIGRpZmZUaW1lO1xuICAgIHZhciBzY2FsZSA9IHRoaXMub3B0aW9ucy5zY2FsZTtcbiAgICB2YXIgbmV4dFZlbDtcbiAgICB2YXIgbmV4dERlbHRhO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uID09PSBTY3JvbGxTeW5jLkRJUkVDVElPTl9YKSB7XG4gICAgICAgIG5leHREZWx0YSA9IHNjYWxlICogZGlmZlg7XG4gICAgICAgIG5leHRWZWwgPSBzY2FsZSAqIHZlbFg7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uICs9IG5leHREZWx0YTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gPT09IFNjcm9sbFN5bmMuRElSRUNUSU9OX1kpIHtcbiAgICAgICAgbmV4dERlbHRhID0gc2NhbGUgKiBkaWZmWTtcbiAgICAgICAgbmV4dFZlbCA9IHNjYWxlICogdmVsWTtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gKz0gbmV4dERlbHRhO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHREZWx0YSA9IFtcbiAgICAgICAgICAgIHNjYWxlICogZGlmZlgsXG4gICAgICAgICAgICBzY2FsZSAqIGRpZmZZXG4gICAgICAgIF07XG4gICAgICAgIG5leHRWZWwgPSBbXG4gICAgICAgICAgICBzY2FsZSAqIHZlbFgsXG4gICAgICAgICAgICBzY2FsZSAqIHZlbFlcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5fcG9zaXRpb25bMF0gKz0gbmV4dERlbHRhWzBdO1xuICAgICAgICB0aGlzLl9wb3NpdGlvblsxXSArPSBuZXh0RGVsdGFbMV07XG4gICAgfVxuICAgIHZhciBwYXlsb2FkID0gdGhpcy5fcGF5bG9hZDtcbiAgICBwYXlsb2FkLmRlbHRhID0gbmV4dERlbHRhO1xuICAgIHBheWxvYWQudmVsb2NpdHkgPSBuZXh0VmVsO1xuICAgIHBheWxvYWQucG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbjtcbiAgICBwYXlsb2FkLnNsaXAgPSB0cnVlO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ3VwZGF0ZScsIHBheWxvYWQpO1xuICAgIHRoaXMuX3ByZXZUaW1lID0gY3VyclRpbWU7XG4gICAgdGhpcy5fcHJldlZlbCA9IG5leHRWZWw7XG59XG5TY3JvbGxTeW5jLnByb3RvdHlwZS5nZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zO1xufTtcblNjcm9sbFN5bmMucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFNjcm9sbFN5bmM7IiwidmFyIFRvdWNoVHJhY2tlciA9IHJlcXVpcmUoJy4vVG91Y2hUcmFja2VyJyk7XG52YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnLi4vY29yZS9FdmVudEhhbmRsZXInKTtcbnZhciBPcHRpb25zTWFuYWdlciA9IHJlcXVpcmUoJy4uL2NvcmUvT3B0aW9uc01hbmFnZXInKTtcbmZ1bmN0aW9uIFRvdWNoU3luYyhvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZShUb3VjaFN5bmMuREVGQVVMVF9PUFRJT05TKTtcbiAgICB0aGlzLl9vcHRpb25zTWFuYWdlciA9IG5ldyBPcHRpb25zTWFuYWdlcih0aGlzLm9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5fdG91Y2hUcmFja2VyID0gbmV3IFRvdWNoVHJhY2tlcigpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50T3V0cHV0KTtcbiAgICBFdmVudEhhbmRsZXIuc2V0SW5wdXRIYW5kbGVyKHRoaXMsIHRoaXMuX3RvdWNoVHJhY2tlcik7XG4gICAgdGhpcy5fdG91Y2hUcmFja2VyLm9uKCd0cmFja3N0YXJ0JywgX2hhbmRsZVN0YXJ0LmJpbmQodGhpcykpO1xuICAgIHRoaXMuX3RvdWNoVHJhY2tlci5vbigndHJhY2ttb3ZlJywgX2hhbmRsZU1vdmUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fdG91Y2hUcmFja2VyLm9uKCd0cmFja2VuZCcsIF9oYW5kbGVFbmQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fcGF5bG9hZCA9IHtcbiAgICAgICAgZGVsdGE6IG51bGwsXG4gICAgICAgIHBvc2l0aW9uOiBudWxsLFxuICAgICAgICB2ZWxvY2l0eTogbnVsbCxcbiAgICAgICAgY2xpZW50WDogdW5kZWZpbmVkLFxuICAgICAgICBjbGllbnRZOiB1bmRlZmluZWQsXG4gICAgICAgIGNvdW50OiAwLFxuICAgICAgICB0b3VjaDogdW5kZWZpbmVkXG4gICAgfTtcbiAgICB0aGlzLl9wb3NpdGlvbiA9IG51bGw7XG59XG5Ub3VjaFN5bmMuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIGRpcmVjdGlvbjogdW5kZWZpbmVkLFxuICAgIHJhaWxzOiBmYWxzZSxcbiAgICBzY2FsZTogMVxufTtcblRvdWNoU3luYy5ESVJFQ1RJT05fWCA9IDA7XG5Ub3VjaFN5bmMuRElSRUNUSU9OX1kgPSAxO1xudmFyIE1JTklNVU1fVElDS19USU1FID0gODtcbmZ1bmN0aW9uIF9oYW5kbGVTdGFydChkYXRhKSB7XG4gICAgdmFyIHZlbG9jaXR5O1xuICAgIHZhciBkZWx0YTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmRpcmVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gMDtcbiAgICAgICAgdmVsb2NpdHkgPSAwO1xuICAgICAgICBkZWx0YSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBbXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMFxuICAgICAgICBdO1xuICAgICAgICB2ZWxvY2l0eSA9IFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwXG4gICAgICAgIF07XG4gICAgICAgIGRlbHRhID0gW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXTtcbiAgICB9XG4gICAgdmFyIHBheWxvYWQgPSB0aGlzLl9wYXlsb2FkO1xuICAgIHBheWxvYWQuZGVsdGEgPSBkZWx0YTtcbiAgICBwYXlsb2FkLnBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XG4gICAgcGF5bG9hZC52ZWxvY2l0eSA9IHZlbG9jaXR5O1xuICAgIHBheWxvYWQuY2xpZW50WCA9IGRhdGEueDtcbiAgICBwYXlsb2FkLmNsaWVudFkgPSBkYXRhLnk7XG4gICAgcGF5bG9hZC5jb3VudCA9IGRhdGEuY291bnQ7XG4gICAgcGF5bG9hZC50b3VjaCA9IGRhdGEuaWRlbnRpZmllcjtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdzdGFydCcsIHBheWxvYWQpO1xufVxuZnVuY3Rpb24gX2hhbmRsZU1vdmUoZGF0YSkge1xuICAgIHZhciBoaXN0b3J5ID0gZGF0YS5oaXN0b3J5O1xuICAgIHZhciBjdXJySGlzdG9yeSA9IGhpc3RvcnlbaGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgICB2YXIgcHJldkhpc3RvcnkgPSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoIC0gMl07XG4gICAgdmFyIHByZXZUaW1lID0gcHJldkhpc3RvcnkudGltZXN0YW1wO1xuICAgIHZhciBjdXJyVGltZSA9IGN1cnJIaXN0b3J5LnRpbWVzdGFtcDtcbiAgICB2YXIgZGlmZlggPSBjdXJySGlzdG9yeS54IC0gcHJldkhpc3RvcnkueDtcbiAgICB2YXIgZGlmZlkgPSBjdXJySGlzdG9yeS55IC0gcHJldkhpc3RvcnkueTtcbiAgICBpZiAodGhpcy5vcHRpb25zLnJhaWxzKSB7XG4gICAgICAgIGlmIChNYXRoLmFicyhkaWZmWCkgPiBNYXRoLmFicyhkaWZmWSkpXG4gICAgICAgICAgICBkaWZmWSA9IDA7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRpZmZYID0gMDtcbiAgICB9XG4gICAgdmFyIGRpZmZUaW1lID0gTWF0aC5tYXgoY3VyclRpbWUgLSBwcmV2VGltZSwgTUlOSU1VTV9USUNLX1RJTUUpO1xuICAgIHZhciB2ZWxYID0gZGlmZlggLyBkaWZmVGltZTtcbiAgICB2YXIgdmVsWSA9IGRpZmZZIC8gZGlmZlRpbWU7XG4gICAgdmFyIHNjYWxlID0gdGhpcy5vcHRpb25zLnNjYWxlO1xuICAgIHZhciBuZXh0VmVsO1xuICAgIHZhciBuZXh0RGVsdGE7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gPT09IFRvdWNoU3luYy5ESVJFQ1RJT05fWCkge1xuICAgICAgICBuZXh0RGVsdGEgPSBzY2FsZSAqIGRpZmZYO1xuICAgICAgICBuZXh0VmVsID0gc2NhbGUgKiB2ZWxYO1xuICAgICAgICB0aGlzLl9wb3NpdGlvbiArPSBuZXh0RGVsdGE7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uID09PSBUb3VjaFN5bmMuRElSRUNUSU9OX1kpIHtcbiAgICAgICAgbmV4dERlbHRhID0gc2NhbGUgKiBkaWZmWTtcbiAgICAgICAgbmV4dFZlbCA9IHNjYWxlICogdmVsWTtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gKz0gbmV4dERlbHRhO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHREZWx0YSA9IFtcbiAgICAgICAgICAgIHNjYWxlICogZGlmZlgsXG4gICAgICAgICAgICBzY2FsZSAqIGRpZmZZXG4gICAgICAgIF07XG4gICAgICAgIG5leHRWZWwgPSBbXG4gICAgICAgICAgICBzY2FsZSAqIHZlbFgsXG4gICAgICAgICAgICBzY2FsZSAqIHZlbFlcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5fcG9zaXRpb25bMF0gKz0gbmV4dERlbHRhWzBdO1xuICAgICAgICB0aGlzLl9wb3NpdGlvblsxXSArPSBuZXh0RGVsdGFbMV07XG4gICAgfVxuICAgIHZhciBwYXlsb2FkID0gdGhpcy5fcGF5bG9hZDtcbiAgICBwYXlsb2FkLmRlbHRhID0gbmV4dERlbHRhO1xuICAgIHBheWxvYWQudmVsb2NpdHkgPSBuZXh0VmVsO1xuICAgIHBheWxvYWQucG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbjtcbiAgICBwYXlsb2FkLmNsaWVudFggPSBkYXRhLng7XG4gICAgcGF5bG9hZC5jbGllbnRZID0gZGF0YS55O1xuICAgIHBheWxvYWQuY291bnQgPSBkYXRhLmNvdW50O1xuICAgIHBheWxvYWQudG91Y2ggPSBkYXRhLmlkZW50aWZpZXI7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgndXBkYXRlJywgcGF5bG9hZCk7XG59XG5mdW5jdGlvbiBfaGFuZGxlRW5kKGRhdGEpIHtcbiAgICB0aGlzLl9wYXlsb2FkLmNvdW50ID0gZGF0YS5jb3VudDtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdlbmQnLCB0aGlzLl9wYXlsb2FkKTtcbn1cblRvdWNoU3luYy5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKG9wdGlvbnMpO1xufTtcblRvdWNoU3luYy5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucztcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFRvdWNoU3luYzsiLCJ2YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnLi4vY29yZS9FdmVudEhhbmRsZXInKTtcbnZhciBfbm93ID0gRGF0ZS5ub3c7XG5mdW5jdGlvbiBfdGltZXN0YW1wVG91Y2godG91Y2gsIGV2ZW50LCBoaXN0b3J5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogdG91Y2guY2xpZW50WCxcbiAgICAgICAgeTogdG91Y2guY2xpZW50WSxcbiAgICAgICAgaWRlbnRpZmllcjogdG91Y2guaWRlbnRpZmllcixcbiAgICAgICAgb3JpZ2luOiBldmVudC5vcmlnaW4sXG4gICAgICAgIHRpbWVzdGFtcDogX25vdygpLFxuICAgICAgICBjb3VudDogZXZlbnQudG91Y2hlcy5sZW5ndGgsXG4gICAgICAgIGhpc3Rvcnk6IGhpc3RvcnlcbiAgICB9O1xufVxuZnVuY3Rpb24gX2hhbmRsZVN0YXJ0KGV2ZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcbiAgICAgICAgdmFyIGRhdGEgPSBfdGltZXN0YW1wVG91Y2godG91Y2gsIGV2ZW50LCBudWxsKTtcbiAgICAgICAgdGhpcy5ldmVudE91dHB1dC5lbWl0KCd0cmFja3N0YXJ0JywgZGF0YSk7XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RpdmUgJiYgIXRoaXMudG91Y2hIaXN0b3J5W3RvdWNoLmlkZW50aWZpZXJdKVxuICAgICAgICAgICAgdGhpcy50cmFjayhkYXRhKTtcbiAgICB9XG59XG5mdW5jdGlvbiBfaGFuZGxlTW92ZShldmVudCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XG4gICAgICAgIHZhciBoaXN0b3J5ID0gdGhpcy50b3VjaEhpc3RvcnlbdG91Y2guaWRlbnRpZmllcl07XG4gICAgICAgIGlmIChoaXN0b3J5KSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IF90aW1lc3RhbXBUb3VjaCh0b3VjaCwgZXZlbnQsIGhpc3RvcnkpO1xuICAgICAgICAgICAgdGhpcy50b3VjaEhpc3RvcnlbdG91Y2guaWRlbnRpZmllcl0ucHVzaChkYXRhKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRPdXRwdXQuZW1pdCgndHJhY2ttb3ZlJywgZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBfaGFuZGxlRW5kKGV2ZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcbiAgICAgICAgdmFyIGhpc3RvcnkgPSB0aGlzLnRvdWNoSGlzdG9yeVt0b3VjaC5pZGVudGlmaWVyXTtcbiAgICAgICAgaWYgKGhpc3RvcnkpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gX3RpbWVzdGFtcFRvdWNoKHRvdWNoLCBldmVudCwgaGlzdG9yeSk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50T3V0cHV0LmVtaXQoJ3RyYWNrZW5kJywgZGF0YSk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50b3VjaEhpc3RvcnlbdG91Y2guaWRlbnRpZmllcl07XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBfaGFuZGxlVW5waXBlKCkge1xuICAgIGZvciAodmFyIGkgaW4gdGhpcy50b3VjaEhpc3RvcnkpIHtcbiAgICAgICAgdmFyIGhpc3RvcnkgPSB0aGlzLnRvdWNoSGlzdG9yeVtpXTtcbiAgICAgICAgdGhpcy5ldmVudE91dHB1dC5lbWl0KCd0cmFja2VuZCcsIHtcbiAgICAgICAgICAgIHRvdWNoOiBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoIC0gMV0udG91Y2gsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICAgIGhpc3Rvcnk6IGhpc3RvcnlcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnRvdWNoSGlzdG9yeVtpXTtcbiAgICB9XG59XG5mdW5jdGlvbiBUb3VjaFRyYWNrZXIoc2VsZWN0aXZlKSB7XG4gICAgdGhpcy5zZWxlY3RpdmUgPSBzZWxlY3RpdmU7XG4gICAgdGhpcy50b3VjaEhpc3RvcnkgPSB7fTtcbiAgICB0aGlzLmV2ZW50SW5wdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5ldmVudE91dHB1dCA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgICBFdmVudEhhbmRsZXIuc2V0SW5wdXRIYW5kbGVyKHRoaXMsIHRoaXMuZXZlbnRJbnB1dCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldE91dHB1dEhhbmRsZXIodGhpcywgdGhpcy5ldmVudE91dHB1dCk7XG4gICAgdGhpcy5ldmVudElucHV0Lm9uKCd0b3VjaHN0YXJ0JywgX2hhbmRsZVN0YXJ0LmJpbmQodGhpcykpO1xuICAgIHRoaXMuZXZlbnRJbnB1dC5vbigndG91Y2htb3ZlJywgX2hhbmRsZU1vdmUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5ldmVudElucHV0Lm9uKCd0b3VjaGVuZCcsIF9oYW5kbGVFbmQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5ldmVudElucHV0Lm9uKCd0b3VjaGNhbmNlbCcsIF9oYW5kbGVFbmQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5ldmVudElucHV0Lm9uKCd1bnBpcGUnLCBfaGFuZGxlVW5waXBlLmJpbmQodGhpcykpO1xufVxuVG91Y2hUcmFja2VyLnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uIHRyYWNrKGRhdGEpIHtcbiAgICB0aGlzLnRvdWNoSGlzdG9yeVtkYXRhLmlkZW50aWZpZXJdID0gW2RhdGFdO1xufTtcbm1vZHVsZS5leHBvcnRzID0gVG91Y2hUcmFja2VyOyIsInZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCcuLi9jb3JlL0V2ZW50SGFuZGxlcicpO1xuZnVuY3Rpb24gVHdvRmluZ2VyU3luYygpIHtcbiAgICB0aGlzLl9ldmVudElucHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRJbnB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRJbnB1dCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldE91dHB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRPdXRwdXQpO1xuICAgIHRoaXMudG91Y2hBRW5hYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMudG91Y2hBSWQgPSAwO1xuICAgIHRoaXMucG9zQSA9IG51bGw7XG4gICAgdGhpcy50aW1lc3RhbXBBID0gMDtcbiAgICB0aGlzLnRvdWNoQkVuYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLnRvdWNoQklkID0gMDtcbiAgICB0aGlzLnBvc0IgPSBudWxsO1xuICAgIHRoaXMudGltZXN0YW1wQiA9IDA7XG4gICAgdGhpcy5fZXZlbnRJbnB1dC5vbigndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlU3RhcnQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fZXZlbnRJbnB1dC5vbigndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVNb3ZlLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQub24oJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVFbmQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fZXZlbnRJbnB1dC5vbigndG91Y2hjYW5jZWwnLCB0aGlzLmhhbmRsZUVuZC5iaW5kKHRoaXMpKTtcbn1cblR3b0ZpbmdlclN5bmMuY2FsY3VsYXRlQW5nbGUgPSBmdW5jdGlvbiAocG9zQSwgcG9zQikge1xuICAgIHZhciBkaWZmWCA9IHBvc0JbMF0gLSBwb3NBWzBdO1xuICAgIHZhciBkaWZmWSA9IHBvc0JbMV0gLSBwb3NBWzFdO1xuICAgIHJldHVybiBNYXRoLmF0YW4yKGRpZmZZLCBkaWZmWCk7XG59O1xuVHdvRmluZ2VyU3luYy5jYWxjdWxhdGVEaXN0YW5jZSA9IGZ1bmN0aW9uIChwb3NBLCBwb3NCKSB7XG4gICAgdmFyIGRpZmZYID0gcG9zQlswXSAtIHBvc0FbMF07XG4gICAgdmFyIGRpZmZZID0gcG9zQlsxXSAtIHBvc0FbMV07XG4gICAgcmV0dXJuIE1hdGguc3FydChkaWZmWCAqIGRpZmZYICsgZGlmZlkgKiBkaWZmWSk7XG59O1xuVHdvRmluZ2VyU3luYy5jYWxjdWxhdGVDZW50ZXIgPSBmdW5jdGlvbiAocG9zQSwgcG9zQikge1xuICAgIHJldHVybiBbXG4gICAgICAgIChwb3NBWzBdICsgcG9zQlswXSkgLyAyLFxuICAgICAgICAocG9zQVsxXSArIHBvc0JbMV0pIC8gMlxuICAgIF07XG59O1xudmFyIF9ub3cgPSBEYXRlLm5vdztcblR3b0ZpbmdlclN5bmMucHJvdG90eXBlLmhhbmRsZVN0YXJ0ID0gZnVuY3Rpb24gaGFuZGxlU3RhcnQoZXZlbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xuICAgICAgICBpZiAoIXRoaXMudG91Y2hBRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy50b3VjaEFJZCA9IHRvdWNoLmlkZW50aWZpZXI7XG4gICAgICAgICAgICB0aGlzLnRvdWNoQUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wb3NBID0gW1xuICAgICAgICAgICAgICAgIHRvdWNoLnBhZ2VYLFxuICAgICAgICAgICAgICAgIHRvdWNoLnBhZ2VZXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXBBID0gX25vdygpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnRvdWNoQkVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hCSWQgPSB0b3VjaC5pZGVudGlmaWVyO1xuICAgICAgICAgICAgdGhpcy50b3VjaEJFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucG9zQiA9IFtcbiAgICAgICAgICAgICAgICB0b3VjaC5wYWdlWCxcbiAgICAgICAgICAgICAgICB0b3VjaC5wYWdlWVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wQiA9IF9ub3coKTtcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0VXBkYXRlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5Ud29GaW5nZXJTeW5jLnByb3RvdHlwZS5oYW5kbGVNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW92ZShldmVudCkge1xuICAgIGlmICghKHRoaXMudG91Y2hBRW5hYmxlZCAmJiB0aGlzLnRvdWNoQkVuYWJsZWQpKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIHByZXZUaW1lQSA9IHRoaXMudGltZXN0YW1wQTtcbiAgICB2YXIgcHJldlRpbWVCID0gdGhpcy50aW1lc3RhbXBCO1xuICAgIHZhciBkaWZmVGltZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xuICAgICAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy50b3VjaEFJZCkge1xuICAgICAgICAgICAgdGhpcy5wb3NBID0gW1xuICAgICAgICAgICAgICAgIHRvdWNoLnBhZ2VYLFxuICAgICAgICAgICAgICAgIHRvdWNoLnBhZ2VZXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXBBID0gX25vdygpO1xuICAgICAgICAgICAgZGlmZlRpbWUgPSB0aGlzLnRpbWVzdGFtcEEgLSBwcmV2VGltZUE7XG4gICAgICAgIH0gZWxzZSBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy50b3VjaEJJZCkge1xuICAgICAgICAgICAgdGhpcy5wb3NCID0gW1xuICAgICAgICAgICAgICAgIHRvdWNoLnBhZ2VYLFxuICAgICAgICAgICAgICAgIHRvdWNoLnBhZ2VZXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXBCID0gX25vdygpO1xuICAgICAgICAgICAgZGlmZlRpbWUgPSB0aGlzLnRpbWVzdGFtcEIgLSBwcmV2VGltZUI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRpZmZUaW1lKVxuICAgICAgICB0aGlzLl9tb3ZlVXBkYXRlKGRpZmZUaW1lKTtcbn07XG5Ud29GaW5nZXJTeW5jLnByb3RvdHlwZS5oYW5kbGVFbmQgPSBmdW5jdGlvbiBoYW5kbGVFbmQoZXZlbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xuICAgICAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy50b3VjaEFJZCB8fCB0b3VjaC5pZGVudGlmaWVyID09PSB0aGlzLnRvdWNoQklkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50b3VjaEFFbmFibGVkICYmIHRoaXMudG91Y2hCRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ2VuZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaEFJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hCSWRcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgYW5nbGU6IHRoaXMuX2FuZ2xlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRvdWNoQUVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hBSWQgPSAwO1xuICAgICAgICAgICAgdGhpcy50b3VjaEJFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRvdWNoQklkID0gMDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IFR3b0ZpbmdlclN5bmM7IiwidmFyIFZlY3RvciA9IHJlcXVpcmUoJy4vVmVjdG9yJyk7XG5mdW5jdGlvbiBNYXRyaXgodmFsdWVzKSB7XG4gICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMgfHwgW1xuICAgICAgICBbXG4gICAgICAgICAgICAxLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAwXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMVxuICAgICAgICBdXG4gICAgXTtcbiAgICByZXR1cm4gdGhpcztcbn1cbnZhciBfcmVnaXN0ZXIgPSBuZXcgTWF0cml4KCk7XG52YXIgX3ZlY3RvclJlZ2lzdGVyID0gbmV3IFZlY3RvcigpO1xuTWF0cml4LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVzO1xufTtcbk1hdHJpeC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0KHZhbHVlcykge1xuICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xufTtcbk1hdHJpeC5wcm90b3R5cGUudmVjdG9yTXVsdGlwbHkgPSBmdW5jdGlvbiB2ZWN0b3JNdWx0aXBseSh2KSB7XG4gICAgdmFyIE0gPSB0aGlzLmdldCgpO1xuICAgIHZhciB2MCA9IHYueDtcbiAgICB2YXIgdjEgPSB2Lnk7XG4gICAgdmFyIHYyID0gdi56O1xuICAgIHZhciBNMCA9IE1bMF07XG4gICAgdmFyIE0xID0gTVsxXTtcbiAgICB2YXIgTTIgPSBNWzJdO1xuICAgIHZhciBNMDAgPSBNMFswXTtcbiAgICB2YXIgTTAxID0gTTBbMV07XG4gICAgdmFyIE0wMiA9IE0wWzJdO1xuICAgIHZhciBNMTAgPSBNMVswXTtcbiAgICB2YXIgTTExID0gTTFbMV07XG4gICAgdmFyIE0xMiA9IE0xWzJdO1xuICAgIHZhciBNMjAgPSBNMlswXTtcbiAgICB2YXIgTTIxID0gTTJbMV07XG4gICAgdmFyIE0yMiA9IE0yWzJdO1xuICAgIHJldHVybiBfdmVjdG9yUmVnaXN0ZXIuc2V0WFlaKE0wMCAqIHYwICsgTTAxICogdjEgKyBNMDIgKiB2MiwgTTEwICogdjAgKyBNMTEgKiB2MSArIE0xMiAqIHYyLCBNMjAgKiB2MCArIE0yMSAqIHYxICsgTTIyICogdjIpO1xufTtcbk1hdHJpeC5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiBtdWx0aXBseShNMikge1xuICAgIHZhciBNMSA9IHRoaXMuZ2V0KCk7XG4gICAgdmFyIHJlc3VsdCA9IFtbXV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgcmVzdWx0W2ldID0gW107XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICB2YXIgc3VtID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgMzsgaysrKSB7XG4gICAgICAgICAgICAgICAgc3VtICs9IE0xW2ldW2tdICogTTJba11bal07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHRbaV1bal0gPSBzdW07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIF9yZWdpc3Rlci5zZXQocmVzdWx0KTtcbn07XG5NYXRyaXgucHJvdG90eXBlLnRyYW5zcG9zZSA9IGZ1bmN0aW9uIHRyYW5zcG9zZSgpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIE0gPSB0aGlzLmdldCgpO1xuICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IDM7IHJvdysrKSB7XG4gICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IDM7IGNvbCsrKSB7XG4gICAgICAgICAgICByZXN1bHRbcm93XVtjb2xdID0gTVtjb2xdW3Jvd107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIF9yZWdpc3Rlci5zZXQocmVzdWx0KTtcbn07XG5NYXRyaXgucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUoKSB7XG4gICAgdmFyIHZhbHVlcyA9IHRoaXMuZ2V0KCk7XG4gICAgdmFyIE0gPSBbXTtcbiAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCAzOyByb3crKylcbiAgICAgICAgTVtyb3ddID0gdmFsdWVzW3Jvd10uc2xpY2UoKTtcbiAgICByZXR1cm4gbmV3IE1hdHJpeChNKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IE1hdHJpeDsiLCJ2YXIgTWF0cml4ID0gcmVxdWlyZSgnLi9NYXRyaXgnKTtcbmZ1bmN0aW9uIFF1YXRlcm5pb24odywgeCwgeSwgeikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKVxuICAgICAgICB0aGlzLnNldCh3KTtcbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy53ID0gdyAhPT0gdW5kZWZpbmVkID8gdyA6IDE7XG4gICAgICAgIHRoaXMueCA9IHggIT09IHVuZGVmaW5lZCA/IHggOiAwO1xuICAgICAgICB0aGlzLnkgPSB5ICE9PSB1bmRlZmluZWQgPyB5IDogMDtcbiAgICAgICAgdGhpcy56ID0geiAhPT0gdW5kZWZpbmVkID8geiA6IDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufVxudmFyIHJlZ2lzdGVyID0gbmV3IFF1YXRlcm5pb24oMSwgMCwgMCwgMCk7XG5RdWF0ZXJuaW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQocSkge1xuICAgIHJldHVybiByZWdpc3Rlci5zZXRXWFlaKHRoaXMudyArIHEudywgdGhpcy54ICsgcS54LCB0aGlzLnkgKyBxLnksIHRoaXMueiArIHEueik7XG59O1xuUXVhdGVybmlvbi5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24gc3ViKHEpIHtcbiAgICByZXR1cm4gcmVnaXN0ZXIuc2V0V1hZWih0aGlzLncgLSBxLncsIHRoaXMueCAtIHEueCwgdGhpcy55IC0gcS55LCB0aGlzLnogLSBxLnopO1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLnNjYWxhckRpdmlkZSA9IGZ1bmN0aW9uIHNjYWxhckRpdmlkZShzKSB7XG4gICAgcmV0dXJuIHRoaXMuc2NhbGFyTXVsdGlwbHkoMSAvIHMpO1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLnNjYWxhck11bHRpcGx5ID0gZnVuY3Rpb24gc2NhbGFyTXVsdGlwbHkocykge1xuICAgIHJldHVybiByZWdpc3Rlci5zZXRXWFlaKHRoaXMudyAqIHMsIHRoaXMueCAqIHMsIHRoaXMueSAqIHMsIHRoaXMueiAqIHMpO1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gbXVsdGlwbHkocSkge1xuICAgIHZhciB4MSA9IHRoaXMueDtcbiAgICB2YXIgeTEgPSB0aGlzLnk7XG4gICAgdmFyIHoxID0gdGhpcy56O1xuICAgIHZhciB3MSA9IHRoaXMudztcbiAgICB2YXIgeDIgPSBxLng7XG4gICAgdmFyIHkyID0gcS55O1xuICAgIHZhciB6MiA9IHEuejtcbiAgICB2YXIgdzIgPSBxLncgfHwgMDtcbiAgICByZXR1cm4gcmVnaXN0ZXIuc2V0V1hZWih3MSAqIHcyIC0geDEgKiB4MiAtIHkxICogeTIgLSB6MSAqIHoyLCB4MSAqIHcyICsgeDIgKiB3MSArIHkyICogejEgLSB5MSAqIHoyLCB5MSAqIHcyICsgeTIgKiB3MSArIHgxICogejIgLSB4MiAqIHoxLCB6MSAqIHcyICsgejIgKiB3MSArIHgyICogeTEgLSB4MSAqIHkyKTtcbn07XG52YXIgY29uaiA9IG5ldyBRdWF0ZXJuaW9uKDEsIDAsIDAsIDApO1xuUXVhdGVybmlvbi5wcm90b3R5cGUucm90YXRlVmVjdG9yID0gZnVuY3Rpb24gcm90YXRlVmVjdG9yKHYpIHtcbiAgICBjb25qLnNldCh0aGlzLmNvbmooKSk7XG4gICAgcmV0dXJuIHJlZ2lzdGVyLnNldCh0aGlzLm11bHRpcGx5KHYpLm11bHRpcGx5KGNvbmopKTtcbn07XG5RdWF0ZXJuaW9uLnByb3RvdHlwZS5pbnZlcnNlID0gZnVuY3Rpb24gaW52ZXJzZSgpIHtcbiAgICByZXR1cm4gcmVnaXN0ZXIuc2V0KHRoaXMuY29uaigpLnNjYWxhckRpdmlkZSh0aGlzLm5vcm1TcXVhcmVkKCkpKTtcbn07XG5RdWF0ZXJuaW9uLnByb3RvdHlwZS5uZWdhdGUgPSBmdW5jdGlvbiBuZWdhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2NhbGFyTXVsdGlwbHkoLTEpO1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLmNvbmogPSBmdW5jdGlvbiBjb25qKCkge1xuICAgIHJldHVybiByZWdpc3Rlci5zZXRXWFlaKHRoaXMudywgLXRoaXMueCwgLXRoaXMueSwgLXRoaXMueik7XG59O1xuUXVhdGVybmlvbi5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24gbm9ybWFsaXplKGxlbmd0aCkge1xuICAgIGxlbmd0aCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gMSA6IGxlbmd0aDtcbiAgICByZXR1cm4gdGhpcy5zY2FsYXJEaXZpZGUobGVuZ3RoICogdGhpcy5ub3JtKCkpO1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLm1ha2VGcm9tQW5nbGVBbmRBeGlzID0gZnVuY3Rpb24gbWFrZUZyb21BbmdsZUFuZEF4aXMoYW5nbGUsIHYpIHtcbiAgICB2YXIgbiA9IHYubm9ybWFsaXplKCk7XG4gICAgdmFyIGhhID0gYW5nbGUgKiAwLjU7XG4gICAgdmFyIHMgPSAtTWF0aC5zaW4oaGEpO1xuICAgIHRoaXMueCA9IHMgKiBuLng7XG4gICAgdGhpcy55ID0gcyAqIG4ueTtcbiAgICB0aGlzLnogPSBzICogbi56O1xuICAgIHRoaXMudyA9IE1hdGguY29zKGhhKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5RdWF0ZXJuaW9uLnByb3RvdHlwZS5zZXRXWFlaID0gZnVuY3Rpb24gc2V0V1hZWih3LCB4LCB5LCB6KSB7XG4gICAgcmVnaXN0ZXIuY2xlYXIoKTtcbiAgICB0aGlzLncgPSB3O1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHJldHVybiB0aGlzO1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCh2KSB7XG4gICAgaWYgKHYgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICB0aGlzLncgPSAwO1xuICAgICAgICB0aGlzLnggPSB2WzBdO1xuICAgICAgICB0aGlzLnkgPSB2WzFdO1xuICAgICAgICB0aGlzLnogPSB2WzJdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudyA9IHYudztcbiAgICAgICAgdGhpcy54ID0gdi54O1xuICAgICAgICB0aGlzLnkgPSB2Lnk7XG4gICAgICAgIHRoaXMueiA9IHYuejtcbiAgICB9XG4gICAgaWYgKHRoaXMgIT09IHJlZ2lzdGVyKVxuICAgICAgICByZWdpc3Rlci5jbGVhcigpO1xuICAgIHJldHVybiB0aGlzO1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIHB1dChxKSB7XG4gICAgcS5zZXQocmVnaXN0ZXIpO1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBRdWF0ZXJuaW9uKHRoaXMpO1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgdGhpcy53ID0gMTtcbiAgICB0aGlzLnggPSAwO1xuICAgIHRoaXMueSA9IDA7XG4gICAgdGhpcy56ID0gMDtcbiAgICByZXR1cm4gdGhpcztcbn07XG5RdWF0ZXJuaW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gaXNFcXVhbChxKSB7XG4gICAgcmV0dXJuIHEudyA9PT0gdGhpcy53ICYmIHEueCA9PT0gdGhpcy54ICYmIHEueSA9PT0gdGhpcy55ICYmIHEueiA9PT0gdGhpcy56O1xufTtcblF1YXRlcm5pb24ucHJvdG90eXBlLmRvdCA9IGZ1bmN0aW9uIGRvdChxKSB7XG4gICAgcmV0dXJuIHRoaXMudyAqIHEudyArIHRoaXMueCAqIHEueCArIHRoaXMueSAqIHEueSArIHRoaXMueiAqIHEuejtcbn07XG5RdWF0ZXJuaW9uLnByb3RvdHlwZS5ub3JtU3F1YXJlZCA9IGZ1bmN0aW9uIG5vcm1TcXVhcmVkKCkge1xuICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTtcbn07XG5RdWF0ZXJuaW9uLnByb3RvdHlwZS5ub3JtID0gZnVuY3Rpb24gbm9ybSgpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMubm9ybVNxdWFyZWQoKSk7XG59O1xuUXVhdGVybmlvbi5wcm90b3R5cGUuaXNaZXJvID0gZnVuY3Rpb24gaXNaZXJvKCkge1xuICAgIHJldHVybiAhKHRoaXMueCB8fCB0aGlzLnkgfHwgdGhpcy56KTtcbn07XG5RdWF0ZXJuaW9uLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiBnZXRUcmFuc2Zvcm0oKSB7XG4gICAgdmFyIHRlbXAgPSB0aGlzLm5vcm1hbGl6ZSgxKTtcbiAgICB2YXIgeCA9IHRlbXAueDtcbiAgICB2YXIgeSA9IHRlbXAueTtcbiAgICB2YXIgeiA9IHRlbXAuejtcbiAgICB2YXIgdyA9IHRlbXAudztcbiAgICByZXR1cm4gW1xuICAgICAgICAxIC0gMiAqIHkgKiB5IC0gMiAqIHogKiB6LFxuICAgICAgICAyICogeCAqIHkgLSAyICogeiAqIHcsXG4gICAgICAgIDIgKiB4ICogeiArIDIgKiB5ICogdyxcbiAgICAgICAgMCxcbiAgICAgICAgMiAqIHggKiB5ICsgMiAqIHogKiB3LFxuICAgICAgICAxIC0gMiAqIHggKiB4IC0gMiAqIHogKiB6LFxuICAgICAgICAyICogeSAqIHogLSAyICogeCAqIHcsXG4gICAgICAgIDAsXG4gICAgICAgIDIgKiB4ICogeiAtIDIgKiB5ICogdyxcbiAgICAgICAgMiAqIHkgKiB6ICsgMiAqIHggKiB3LFxuICAgICAgICAxIC0gMiAqIHggKiB4IC0gMiAqIHkgKiB5LFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAxXG4gICAgXTtcbn07XG52YXIgbWF0cml4UmVnaXN0ZXIgPSBuZXcgTWF0cml4KCk7XG5RdWF0ZXJuaW9uLnByb3RvdHlwZS5nZXRNYXRyaXggPSBmdW5jdGlvbiBnZXRNYXRyaXgoKSB7XG4gICAgdmFyIHRlbXAgPSB0aGlzLm5vcm1hbGl6ZSgxKTtcbiAgICB2YXIgeCA9IHRlbXAueDtcbiAgICB2YXIgeSA9IHRlbXAueTtcbiAgICB2YXIgeiA9IHRlbXAuejtcbiAgICB2YXIgdyA9IHRlbXAudztcbiAgICByZXR1cm4gbWF0cml4UmVnaXN0ZXIuc2V0KFtcbiAgICAgICAgW1xuICAgICAgICAgICAgMSAtIDIgKiB5ICogeSAtIDIgKiB6ICogeixcbiAgICAgICAgICAgIDIgKiB4ICogeSArIDIgKiB6ICogdyxcbiAgICAgICAgICAgIDIgKiB4ICogeiAtIDIgKiB5ICogd1xuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICAyICogeCAqIHkgLSAyICogeiAqIHcsXG4gICAgICAgICAgICAxIC0gMiAqIHggKiB4IC0gMiAqIHogKiB6LFxuICAgICAgICAgICAgMiAqIHkgKiB6ICsgMiAqIHggKiB3XG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIDIgKiB4ICogeiArIDIgKiB5ICogdyxcbiAgICAgICAgICAgIDIgKiB5ICogeiAtIDIgKiB4ICogdyxcbiAgICAgICAgICAgIDEgLSAyICogeCAqIHggLSAyICogeSAqIHlcbiAgICAgICAgXVxuICAgIF0pO1xufTtcbnZhciBlcHNpbG9uID0gMC4wMDAwMTtcblF1YXRlcm5pb24ucHJvdG90eXBlLnNsZXJwID0gZnVuY3Rpb24gc2xlcnAocSwgdCkge1xuICAgIHZhciBvbWVnYTtcbiAgICB2YXIgY29zb21lZ2E7XG4gICAgdmFyIHNpbm9tZWdhO1xuICAgIHZhciBzY2FsZUZyb207XG4gICAgdmFyIHNjYWxlVG87XG4gICAgY29zb21lZ2EgPSB0aGlzLmRvdChxKTtcbiAgICBpZiAoMSAtIGNvc29tZWdhID4gZXBzaWxvbikge1xuICAgICAgICBvbWVnYSA9IE1hdGguYWNvcyhjb3NvbWVnYSk7XG4gICAgICAgIHNpbm9tZWdhID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgICAgICBzY2FsZUZyb20gPSBNYXRoLnNpbigoMSAtIHQpICogb21lZ2EpIC8gc2lub21lZ2E7XG4gICAgICAgIHNjYWxlVG8gPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub21lZ2E7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2NhbGVGcm9tID0gMSAtIHQ7XG4gICAgICAgIHNjYWxlVG8gPSB0O1xuICAgIH1cbiAgICByZXR1cm4gcmVnaXN0ZXIuc2V0KHRoaXMuc2NhbGFyTXVsdGlwbHkoc2NhbGVGcm9tIC8gc2NhbGVUbykuYWRkKHEpLm11bHRpcGx5KHNjYWxlVG8pKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFF1YXRlcm5pb247IiwidmFyIFJBTkQgPSBNYXRoLnJhbmRvbTtcbmZ1bmN0aW9uIF9yYW5kb21GbG9hdChtaW4sIG1heCkge1xuICAgIHJldHVybiBtaW4gKyBSQU5EKCkgKiAobWF4IC0gbWluKTtcbn1cbmZ1bmN0aW9uIF9yYW5kb21JbnRlZ2VyKG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIG1pbiArIFJBTkQoKSAqIChtYXggLSBtaW4gKyAxKSA+PiAwO1xufVxudmFyIFJhbmRvbSA9IHt9O1xuUmFuZG9tLmludGVnZXIgPSBmdW5jdGlvbiBpbnRlZ2VyKG1pbiwgbWF4LCBkaW0pIHtcbiAgICBtaW4gPSBtaW4gIT09IHVuZGVmaW5lZCA/IG1pbiA6IDA7XG4gICAgbWF4ID0gbWF4ICE9PSB1bmRlZmluZWQgPyBtYXggOiAxO1xuICAgIGlmIChkaW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltOyBpKyspXG4gICAgICAgICAgICByZXN1bHQucHVzaChfcmFuZG9tSW50ZWdlcihtaW4sIG1heCkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZVxuICAgICAgICByZXR1cm4gX3JhbmRvbUludGVnZXIobWluLCBtYXgpO1xufTtcblJhbmRvbS5yYW5nZSA9IGZ1bmN0aW9uIHJhbmdlKG1pbiwgbWF4LCBkaW0pIHtcbiAgICBtaW4gPSBtaW4gIT09IHVuZGVmaW5lZCA/IG1pbiA6IDA7XG4gICAgbWF4ID0gbWF4ICE9PSB1bmRlZmluZWQgPyBtYXggOiAxO1xuICAgIGlmIChkaW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltOyBpKyspXG4gICAgICAgICAgICByZXN1bHQucHVzaChfcmFuZG9tRmxvYXQobWluLCBtYXgpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2VcbiAgICAgICAgcmV0dXJuIF9yYW5kb21GbG9hdChtaW4sIG1heCk7XG59O1xuUmFuZG9tLnNpZ24gPSBmdW5jdGlvbiBzaWduKHByb2IpIHtcbiAgICBwcm9iID0gcHJvYiAhPT0gdW5kZWZpbmVkID8gcHJvYiA6IDAuNTtcbiAgICByZXR1cm4gUkFORCgpIDwgcHJvYiA/IDEgOiAtMTtcbn07XG5SYW5kb20uYm9vbCA9IGZ1bmN0aW9uIGJvb2wocHJvYikge1xuICAgIHByb2IgPSBwcm9iICE9PSB1bmRlZmluZWQgPyBwcm9iIDogMC41O1xuICAgIHJldHVybiBSQU5EKCkgPCBwcm9iO1xufTtcbm1vZHVsZS5leHBvcnRzID0gUmFuZG9tOyIsInZhciBVdGlsaXRpZXMgPSB7fTtcblV0aWxpdGllcy5jbGFtcCA9IGZ1bmN0aW9uIGNsYW1wKHZhbHVlLCByYW5nZSkge1xuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbih2YWx1ZSwgcmFuZ2VbMV0pLCByYW5nZVswXSk7XG59O1xuVXRpbGl0aWVzLmxlbmd0aCA9IGZ1bmN0aW9uIGxlbmd0aChhcnJheSkge1xuICAgIHZhciBkaXN0YW5jZVNxdWFyZWQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGlzdGFuY2VTcXVhcmVkICs9IGFycmF5W2ldICogYXJyYXlbaV07XG4gICAgfVxuICAgIHJldHVybiBNYXRoLnNxcnQoZGlzdGFuY2VTcXVhcmVkKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFV0aWxpdGllczsiLCJmdW5jdGlvbiBWZWN0b3IoeCwgeSwgeikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHggIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5zZXQoeCk7XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMueCA9IHggfHwgMDtcbiAgICAgICAgdGhpcy55ID0geSB8fCAwO1xuICAgICAgICB0aGlzLnogPSB6IHx8IDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufVxudmFyIF9yZWdpc3RlciA9IG5ldyBWZWN0b3IoMCwgMCwgMCk7XG5WZWN0b3IucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCh2KSB7XG4gICAgcmV0dXJuIF9zZXRYWVouY2FsbChfcmVnaXN0ZXIsIHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55LCB0aGlzLnogKyB2LnopO1xufTtcblZlY3Rvci5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24gc3ViKHYpIHtcbiAgICByZXR1cm4gX3NldFhZWi5jYWxsKF9yZWdpc3RlciwgdGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnksIHRoaXMueiAtIHYueik7XG59O1xuVmVjdG9yLnByb3RvdHlwZS5tdWx0ID0gZnVuY3Rpb24gbXVsdChyKSB7XG4gICAgcmV0dXJuIF9zZXRYWVouY2FsbChfcmVnaXN0ZXIsIHIgKiB0aGlzLngsIHIgKiB0aGlzLnksIHIgKiB0aGlzLnopO1xufTtcblZlY3Rvci5wcm90b3R5cGUuZGl2ID0gZnVuY3Rpb24gZGl2KHIpIHtcbiAgICByZXR1cm4gdGhpcy5tdWx0KDEgLyByKTtcbn07XG5WZWN0b3IucHJvdG90eXBlLmNyb3NzID0gZnVuY3Rpb24gY3Jvc3Modikge1xuICAgIHZhciB4ID0gdGhpcy54O1xuICAgIHZhciB5ID0gdGhpcy55O1xuICAgIHZhciB6ID0gdGhpcy56O1xuICAgIHZhciB2eCA9IHYueDtcbiAgICB2YXIgdnkgPSB2Lnk7XG4gICAgdmFyIHZ6ID0gdi56O1xuICAgIHJldHVybiBfc2V0WFlaLmNhbGwoX3JlZ2lzdGVyLCB6ICogdnkgLSB5ICogdnosIHggKiB2eiAtIHogKiB2eCwgeSAqIHZ4IC0geCAqIHZ5KTtcbn07XG5WZWN0b3IucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyh2KSB7XG4gICAgcmV0dXJuIHYueCA9PT0gdGhpcy54ICYmIHYueSA9PT0gdGhpcy55ICYmIHYueiA9PT0gdGhpcy56O1xufTtcblZlY3Rvci5wcm90b3R5cGUucm90YXRlWCA9IGZ1bmN0aW9uIHJvdGF0ZVgodGhldGEpIHtcbiAgICB2YXIgeCA9IHRoaXMueDtcbiAgICB2YXIgeSA9IHRoaXMueTtcbiAgICB2YXIgeiA9IHRoaXMuejtcbiAgICB2YXIgY29zVGhldGEgPSBNYXRoLmNvcyh0aGV0YSk7XG4gICAgdmFyIHNpblRoZXRhID0gTWF0aC5zaW4odGhldGEpO1xuICAgIHJldHVybiBfc2V0WFlaLmNhbGwoX3JlZ2lzdGVyLCB4LCB5ICogY29zVGhldGEgLSB6ICogc2luVGhldGEsIHkgKiBzaW5UaGV0YSArIHogKiBjb3NUaGV0YSk7XG59O1xuVmVjdG9yLnByb3RvdHlwZS5yb3RhdGVZID0gZnVuY3Rpb24gcm90YXRlWSh0aGV0YSkge1xuICAgIHZhciB4ID0gdGhpcy54O1xuICAgIHZhciB5ID0gdGhpcy55O1xuICAgIHZhciB6ID0gdGhpcy56O1xuICAgIHZhciBjb3NUaGV0YSA9IE1hdGguY29zKHRoZXRhKTtcbiAgICB2YXIgc2luVGhldGEgPSBNYXRoLnNpbih0aGV0YSk7XG4gICAgcmV0dXJuIF9zZXRYWVouY2FsbChfcmVnaXN0ZXIsIHogKiBzaW5UaGV0YSArIHggKiBjb3NUaGV0YSwgeSwgeiAqIGNvc1RoZXRhIC0geCAqIHNpblRoZXRhKTtcbn07XG5WZWN0b3IucHJvdG90eXBlLnJvdGF0ZVogPSBmdW5jdGlvbiByb3RhdGVaKHRoZXRhKSB7XG4gICAgdmFyIHggPSB0aGlzLng7XG4gICAgdmFyIHkgPSB0aGlzLnk7XG4gICAgdmFyIHogPSB0aGlzLno7XG4gICAgdmFyIGNvc1RoZXRhID0gTWF0aC5jb3ModGhldGEpO1xuICAgIHZhciBzaW5UaGV0YSA9IE1hdGguc2luKHRoZXRhKTtcbiAgICByZXR1cm4gX3NldFhZWi5jYWxsKF9yZWdpc3RlciwgeCAqIGNvc1RoZXRhIC0geSAqIHNpblRoZXRhLCB4ICogc2luVGhldGEgKyB5ICogY29zVGhldGEsIHopO1xufTtcblZlY3Rvci5wcm90b3R5cGUuZG90ID0gZnVuY3Rpb24gZG90KHYpIHtcbiAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55ICsgdGhpcy56ICogdi56O1xufTtcblZlY3Rvci5wcm90b3R5cGUubm9ybVNxdWFyZWQgPSBmdW5jdGlvbiBub3JtU3F1YXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kb3QodGhpcyk7XG59O1xuVmVjdG9yLnByb3RvdHlwZS5ub3JtID0gZnVuY3Rpb24gbm9ybSgpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMubm9ybVNxdWFyZWQoKSk7XG59O1xuVmVjdG9yLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiBub3JtYWxpemUobGVuZ3RoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICAgIGxlbmd0aCA9IDE7XG4gICAgdmFyIG5vcm0gPSB0aGlzLm5vcm0oKTtcbiAgICBpZiAobm9ybSA+IDFlLTcpXG4gICAgICAgIHJldHVybiBfc2V0RnJvbVZlY3Rvci5jYWxsKF9yZWdpc3RlciwgdGhpcy5tdWx0KGxlbmd0aCAvIG5vcm0pKTtcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiBfc2V0WFlaLmNhbGwoX3JlZ2lzdGVyLCBsZW5ndGgsIDAsIDApO1xufTtcblZlY3Rvci5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzKTtcbn07XG5WZWN0b3IucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uIGlzWmVybygpIHtcbiAgICByZXR1cm4gISh0aGlzLnggfHwgdGhpcy55IHx8IHRoaXMueik7XG59O1xuZnVuY3Rpb24gX3NldFhZWih4LCB5LCB6KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHo7XG4gICAgcmV0dXJuIHRoaXM7XG59XG5mdW5jdGlvbiBfc2V0RnJvbUFycmF5KHYpIHtcbiAgICByZXR1cm4gX3NldFhZWi5jYWxsKHRoaXMsIHZbMF0sIHZbMV0sIHZbMl0gfHwgMCk7XG59XG5mdW5jdGlvbiBfc2V0RnJvbVZlY3Rvcih2KSB7XG4gICAgcmV0dXJuIF9zZXRYWVouY2FsbCh0aGlzLCB2LngsIHYueSwgdi56KTtcbn1cbmZ1bmN0aW9uIF9zZXRGcm9tTnVtYmVyKHgpIHtcbiAgICByZXR1cm4gX3NldFhZWi5jYWxsKHRoaXMsIHgsIDAsIDApO1xufVxuVmVjdG9yLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQodikge1xuICAgIGlmICh2IGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgIHJldHVybiBfc2V0RnJvbUFycmF5LmNhbGwodGhpcywgdik7XG4gICAgaWYgKHR5cGVvZiB2ID09PSAnbnVtYmVyJylcbiAgICAgICAgcmV0dXJuIF9zZXRGcm9tTnVtYmVyLmNhbGwodGhpcywgdik7XG4gICAgcmV0dXJuIF9zZXRGcm9tVmVjdG9yLmNhbGwodGhpcywgdik7XG59O1xuVmVjdG9yLnByb3RvdHlwZS5zZXRYWVogPSBmdW5jdGlvbiAoeCwgeSwgeikge1xuICAgIHJldHVybiBfc2V0WFlaLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuVmVjdG9yLnByb3RvdHlwZS5zZXQxRCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIF9zZXRGcm9tTnVtYmVyLmNhbGwodGhpcywgeCk7XG59O1xuVmVjdG9yLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiBwdXQodikge1xuICAgIGlmICh0aGlzID09PSBfcmVnaXN0ZXIpXG4gICAgICAgIF9zZXRGcm9tVmVjdG9yLmNhbGwodiwgX3JlZ2lzdGVyKTtcbiAgICBlbHNlXG4gICAgICAgIF9zZXRGcm9tVmVjdG9yLmNhbGwodiwgdGhpcyk7XG59O1xuVmVjdG9yLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIHJldHVybiBfc2V0WFlaLmNhbGwodGhpcywgMCwgMCwgMCk7XG59O1xuVmVjdG9yLnByb3RvdHlwZS5jYXAgPSBmdW5jdGlvbiBjYXAoY2FwKSB7XG4gICAgaWYgKGNhcCA9PT0gSW5maW5pdHkpXG4gICAgICAgIHJldHVybiBfc2V0RnJvbVZlY3Rvci5jYWxsKF9yZWdpc3RlciwgdGhpcyk7XG4gICAgdmFyIG5vcm0gPSB0aGlzLm5vcm0oKTtcbiAgICBpZiAobm9ybSA+IGNhcClcbiAgICAgICAgcmV0dXJuIF9zZXRGcm9tVmVjdG9yLmNhbGwoX3JlZ2lzdGVyLCB0aGlzLm11bHQoY2FwIC8gbm9ybSkpO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIF9zZXRGcm9tVmVjdG9yLmNhbGwoX3JlZ2lzdGVyLCB0aGlzKTtcbn07XG5WZWN0b3IucHJvdG90eXBlLnByb2plY3QgPSBmdW5jdGlvbiBwcm9qZWN0KG4pIHtcbiAgICByZXR1cm4gbi5tdWx0KHRoaXMuZG90KG4pKTtcbn07XG5WZWN0b3IucHJvdG90eXBlLnJlZmxlY3RBY3Jvc3MgPSBmdW5jdGlvbiByZWZsZWN0QWNyb3NzKG4pIHtcbiAgICBuLm5vcm1hbGl6ZSgpLnB1dChuKTtcbiAgICByZXR1cm4gX3NldEZyb21WZWN0b3IoX3JlZ2lzdGVyLCB0aGlzLnN1Yih0aGlzLnByb2plY3QobikubXVsdCgyKSkpO1xufTtcblZlY3Rvci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBbXG4gICAgICAgIHRoaXMueCxcbiAgICAgICAgdGhpcy55LFxuICAgICAgICB0aGlzLnpcbiAgICBdO1xufTtcblZlY3Rvci5wcm90b3R5cGUuZ2V0MUQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFZlY3RvcjsiLCJ2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVHJhbnNmb3JtJyk7XG52YXIgVHJhbnNpdGlvbmFibGUgPSByZXF1aXJlKCdmYW1vdXMvdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGUnKTtcbnZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FdmVudEhhbmRsZXInKTtcbnZhciBVdGlsaXRpZXMgPSByZXF1aXJlKCdmYW1vdXMvbWF0aC9VdGlsaXRpZXMnKTtcbnZhciBHZW5lcmljU3luYyA9IHJlcXVpcmUoJ2ZhbW91cy9pbnB1dHMvR2VuZXJpY1N5bmMnKTtcbnZhciBNb3VzZVN5bmMgPSByZXF1aXJlKCdmYW1vdXMvaW5wdXRzL01vdXNlU3luYycpO1xudmFyIFRvdWNoU3luYyA9IHJlcXVpcmUoJ2ZhbW91cy9pbnB1dHMvVG91Y2hTeW5jJyk7XG5HZW5lcmljU3luYy5yZWdpc3Rlcih7XG4gICAgJ21vdXNlJzogTW91c2VTeW5jLFxuICAgICd0b3VjaCc6IFRvdWNoU3luY1xufSk7XG5mdW5jdGlvbiBEcmFnZ2FibGUob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoRHJhZ2dhYmxlLkRFRkFVTFRfT1BUSU9OUyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLl9wb3NpdGlvblN0YXRlID0gbmV3IFRyYW5zaXRpb25hYmxlKFtcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgIF0pO1xuICAgIHRoaXMuX2RpZmZlcmVudGlhbCA9IFtcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgIF07XG4gICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcbiAgICB0aGlzLnN5bmMgPSBuZXcgR2VuZXJpY1N5bmMoW1xuICAgICAgICAnbW91c2UnLFxuICAgICAgICAndG91Y2gnXG4gICAgXSwgeyBzY2FsZTogdGhpcy5vcHRpb25zLnNjYWxlIH0pO1xuICAgIHRoaXMuZXZlbnRPdXRwdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldElucHV0SGFuZGxlcih0aGlzLCB0aGlzLnN5bmMpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsIHRoaXMuZXZlbnRPdXRwdXQpO1xuICAgIF9iaW5kRXZlbnRzLmNhbGwodGhpcyk7XG59XG52YXIgX2RpcmVjdGlvbiA9IHtcbiAgICAgICAgeDogMSxcbiAgICAgICAgeTogMlxuICAgIH07XG5EcmFnZ2FibGUuRElSRUNUSU9OX1ggPSBfZGlyZWN0aW9uLng7XG5EcmFnZ2FibGUuRElSRUNUSU9OX1kgPSBfZGlyZWN0aW9uLnk7XG52YXIgX2NsYW1wID0gVXRpbGl0aWVzLmNsYW1wO1xuRHJhZ2dhYmxlLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBwcm9qZWN0aW9uOiBfZGlyZWN0aW9uLnggfCBfZGlyZWN0aW9uLnksXG4gICAgc2NhbGU6IDEsXG4gICAgeFJhbmdlOiBudWxsLFxuICAgIHlSYW5nZTogbnVsbCxcbiAgICBzbmFwWDogMCxcbiAgICBzbmFwWTogMCxcbiAgICB0cmFuc2l0aW9uOiB7IGR1cmF0aW9uOiAwIH1cbn07XG5mdW5jdGlvbiBfbWFwRGlmZmVyZW50aWFsKGRpZmZlcmVudGlhbCkge1xuICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgIHZhciBwcm9qZWN0aW9uID0gb3B0cy5wcm9qZWN0aW9uO1xuICAgIHZhciBzbmFwWCA9IG9wdHMuc25hcFg7XG4gICAgdmFyIHNuYXBZID0gb3B0cy5zbmFwWTtcbiAgICB2YXIgdHggPSBwcm9qZWN0aW9uICYgX2RpcmVjdGlvbi54ID8gZGlmZmVyZW50aWFsWzBdIDogMDtcbiAgICB2YXIgdHkgPSBwcm9qZWN0aW9uICYgX2RpcmVjdGlvbi55ID8gZGlmZmVyZW50aWFsWzFdIDogMDtcbiAgICBpZiAoc25hcFggPiAwKVxuICAgICAgICB0eCAtPSB0eCAlIHNuYXBYO1xuICAgIGlmIChzbmFwWSA+IDApXG4gICAgICAgIHR5IC09IHR5ICUgc25hcFk7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgdHgsXG4gICAgICAgIHR5XG4gICAgXTtcbn1cbmZ1bmN0aW9uIF9oYW5kbGVTdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuX2FjdGl2ZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmICh0aGlzLl9wb3NpdGlvblN0YXRlLmlzQWN0aXZlKCkpXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uU3RhdGUuaGFsdCgpO1xuICAgIHRoaXMuZXZlbnRPdXRwdXQuZW1pdCgnc3RhcnQnLCB7IHBvc2l0aW9uOiB0aGlzLmdldFBvc2l0aW9uKCkgfSk7XG59XG5mdW5jdGlvbiBfaGFuZGxlTW92ZShldmVudCkge1xuICAgIGlmICghdGhpcy5fYWN0aXZlKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgdGhpcy5fZGlmZmVyZW50aWFsID0gZXZlbnQucG9zaXRpb247XG4gICAgdmFyIG5ld0RpZmZlcmVudGlhbCA9IF9tYXBEaWZmZXJlbnRpYWwuY2FsbCh0aGlzLCB0aGlzLl9kaWZmZXJlbnRpYWwpO1xuICAgIHRoaXMuX2RpZmZlcmVudGlhbFswXSAtPSBuZXdEaWZmZXJlbnRpYWxbMF07XG4gICAgdGhpcy5fZGlmZmVyZW50aWFsWzFdIC09IG5ld0RpZmZlcmVudGlhbFsxXTtcbiAgICB2YXIgcG9zID0gdGhpcy5nZXRQb3NpdGlvbigpO1xuICAgIHBvc1swXSArPSBuZXdEaWZmZXJlbnRpYWxbMF07XG4gICAgcG9zWzFdICs9IG5ld0RpZmZlcmVudGlhbFsxXTtcbiAgICBpZiAob3B0aW9ucy54UmFuZ2UpIHtcbiAgICAgICAgdmFyIHhSYW5nZSA9IFtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnhSYW5nZVswXSArIDAuNSAqIG9wdGlvbnMuc25hcFgsXG4gICAgICAgICAgICAgICAgb3B0aW9ucy54UmFuZ2VbMV0gLSAwLjUgKiBvcHRpb25zLnNuYXBYXG4gICAgICAgICAgICBdO1xuICAgICAgICBwb3NbMF0gPSBfY2xhbXAocG9zWzBdLCB4UmFuZ2UpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy55UmFuZ2UpIHtcbiAgICAgICAgdmFyIHlSYW5nZSA9IFtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnlSYW5nZVswXSArIDAuNSAqIG9wdGlvbnMuc25hcFksXG4gICAgICAgICAgICAgICAgb3B0aW9ucy55UmFuZ2VbMV0gLSAwLjUgKiBvcHRpb25zLnNuYXBZXG4gICAgICAgICAgICBdO1xuICAgICAgICBwb3NbMV0gPSBfY2xhbXAocG9zWzFdLCB5UmFuZ2UpO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50T3V0cHV0LmVtaXQoJ3VwZGF0ZScsIHsgcG9zaXRpb246IHBvcyB9KTtcbn1cbmZ1bmN0aW9uIF9oYW5kbGVFbmQoKSB7XG4gICAgaWYgKCF0aGlzLl9hY3RpdmUpXG4gICAgICAgIHJldHVybjtcbiAgICB0aGlzLmV2ZW50T3V0cHV0LmVtaXQoJ2VuZCcsIHsgcG9zaXRpb246IHRoaXMuZ2V0UG9zaXRpb24oKSB9KTtcbn1cbmZ1bmN0aW9uIF9iaW5kRXZlbnRzKCkge1xuICAgIHRoaXMuc3luYy5vbignc3RhcnQnLCBfaGFuZGxlU3RhcnQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zeW5jLm9uKCd1cGRhdGUnLCBfaGFuZGxlTW92ZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnN5bmMub24oJ2VuZCcsIF9oYW5kbGVFbmQuYmluZCh0aGlzKSk7XG59XG5EcmFnZ2FibGUucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICB2YXIgY3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBwcm9qID0gb3B0aW9ucy5wcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLm9wdGlvbnMucHJvamVjdGlvbiA9IDA7XG4gICAgICAgIFtcbiAgICAgICAgICAgICd4JyxcbiAgICAgICAgICAgICd5J1xuICAgICAgICBdLmZvckVhY2goZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgaWYgKHByb2ouaW5kZXhPZih2YWwpICE9PSAtMSlcbiAgICAgICAgICAgICAgICBjdXJyZW50T3B0aW9ucy5wcm9qZWN0aW9uIHw9IF9kaXJlY3Rpb25bdmFsXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNjYWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY3VycmVudE9wdGlvbnMuc2NhbGUgPSBvcHRpb25zLnNjYWxlO1xuICAgICAgICB0aGlzLnN5bmMuc2V0T3B0aW9ucyh7IHNjYWxlOiBvcHRpb25zLnNjYWxlIH0pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy54UmFuZ2UgIT09IHVuZGVmaW5lZClcbiAgICAgICAgY3VycmVudE9wdGlvbnMueFJhbmdlID0gb3B0aW9ucy54UmFuZ2U7XG4gICAgaWYgKG9wdGlvbnMueVJhbmdlICE9PSB1bmRlZmluZWQpXG4gICAgICAgIGN1cnJlbnRPcHRpb25zLnlSYW5nZSA9IG9wdGlvbnMueVJhbmdlO1xuICAgIGlmIChvcHRpb25zLnNuYXBYICE9PSB1bmRlZmluZWQpXG4gICAgICAgIGN1cnJlbnRPcHRpb25zLnNuYXBYID0gb3B0aW9ucy5zbmFwWDtcbiAgICBpZiAob3B0aW9ucy5zbmFwWSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBjdXJyZW50T3B0aW9ucy5zbmFwWSA9IG9wdGlvbnMuc25hcFk7XG59O1xuRHJhZ2dhYmxlLnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIGdldFBvc2l0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvblN0YXRlLmdldCgpO1xufTtcbkRyYWdnYWJsZS5wcm90b3R5cGUuc2V0UmVsYXRpdmVQb3NpdGlvbiA9IGZ1bmN0aW9uIHNldFJlbGF0aXZlUG9zaXRpb24ocG9zaXRpb24sIHRyYW5zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgdmFyIGN1cnJQb3MgPSB0aGlzLmdldFBvc2l0aW9uKCk7XG4gICAgdmFyIHJlbGF0aXZlUG9zaXRpb24gPSBbXG4gICAgICAgICAgICBjdXJyUG9zWzBdICsgcG9zaXRpb25bMF0sXG4gICAgICAgICAgICBjdXJyUG9zWzFdICsgcG9zaXRpb25bMV1cbiAgICAgICAgXTtcbiAgICB0aGlzLnNldFBvc2l0aW9uKHJlbGF0aXZlUG9zaXRpb24sIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbn07XG5EcmFnZ2FibGUucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24gc2V0UG9zaXRpb24ocG9zaXRpb24sIHRyYW5zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuX3Bvc2l0aW9uU3RhdGUuaXNBY3RpdmUoKSlcbiAgICAgICAgdGhpcy5fcG9zaXRpb25TdGF0ZS5oYWx0KCk7XG4gICAgdGhpcy5fcG9zaXRpb25TdGF0ZS5zZXQocG9zaXRpb24sIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbn07XG5EcmFnZ2FibGUucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcbn07XG5EcmFnZ2FibGUucHJvdG90eXBlLmRlYWN0aXZhdGUgPSBmdW5jdGlvbiBkZWFjdGl2YXRlKCkge1xuICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xufTtcbkRyYWdnYWJsZS5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgIHRoaXMuX2FjdGl2ZSA9ICF0aGlzLl9hY3RpdmU7XG59O1xuRHJhZ2dhYmxlLnByb3RvdHlwZS5tb2RpZnkgPSBmdW5jdGlvbiBtb2RpZnkodGFyZ2V0KSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0cmFuc2Zvcm06IFRyYW5zZm9ybS50cmFuc2xhdGUocG9zWzBdLCBwb3NbMV0pLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldFxuICAgIH07XG59O1xubW9kdWxlLmV4cG9ydHMgPSBEcmFnZ2FibGU7IiwidmFyIFRyYW5zaXRpb25hYmxlID0gcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlJyk7XG52YXIgT3B0aW9uc01hbmFnZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9PcHRpb25zTWFuYWdlcicpO1xuZnVuY3Rpb24gRmFkZXIob3B0aW9ucywgc3RhcnRTdGF0ZSkge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoRmFkZXIuREVGQVVMVF9PUFRJT05TKTtcbiAgICB0aGlzLl9vcHRpb25zTWFuYWdlciA9IG5ldyBPcHRpb25zTWFuYWdlcih0aGlzLm9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgaWYgKCFzdGFydFN0YXRlKVxuICAgICAgICBzdGFydFN0YXRlID0gMDtcbiAgICB0aGlzLnRyYW5zaXRpb25IZWxwZXIgPSBuZXcgVHJhbnNpdGlvbmFibGUoc3RhcnRTdGF0ZSk7XG59XG5GYWRlci5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgY3VsbDogZmFsc2UsXG4gICAgdHJhbnNpdGlvbjogdHJ1ZSxcbiAgICBwdWxzZUluVHJhbnNpdGlvbjogdHJ1ZSxcbiAgICBwdWxzZU91dFRyYW5zaXRpb246IHRydWVcbn07XG5GYWRlci5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKG9wdGlvbnMpO1xufTtcbkZhZGVyLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gc2hvdyh0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIHRyYW5zaXRpb24gPSB0cmFuc2l0aW9uIHx8IHRoaXMub3B0aW9ucy50cmFuc2l0aW9uO1xuICAgIHRoaXMuc2V0KDEsIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbn07XG5GYWRlci5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIGhpZGUodHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICB0cmFuc2l0aW9uID0gdHJhbnNpdGlvbiB8fCB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbjtcbiAgICB0aGlzLnNldCgwLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG59O1xuRmFkZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldChzdGF0ZSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICB0aGlzLmhhbHQoKTtcbiAgICB0aGlzLnRyYW5zaXRpb25IZWxwZXIuc2V0KHN0YXRlLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG59O1xuRmFkZXIucHJvdG90eXBlLmhhbHQgPSBmdW5jdGlvbiBoYWx0KCkge1xuICAgIHRoaXMudHJhbnNpdGlvbkhlbHBlci5oYWx0KCk7XG59O1xuRmFkZXIucHJvdG90eXBlLmlzVmlzaWJsZSA9IGZ1bmN0aW9uIGlzVmlzaWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uSGVscGVyLmdldCgpID4gMDtcbn07XG5GYWRlci5wcm90b3R5cGUubW9kaWZ5ID0gZnVuY3Rpb24gbW9kaWZ5KHRhcmdldCkge1xuICAgIHZhciBjdXJyT3BhY2l0eSA9IHRoaXMudHJhbnNpdGlvbkhlbHBlci5nZXQoKTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmN1bGwgJiYgIWN1cnJPcGFjaXR5KVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IGN1cnJPcGFjaXR5LFxuICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXRcbiAgICAgICAgfTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEZhZGVyOyIsImZ1bmN0aW9uIE1vZGlmaWVyQ2hhaW4oKSB7XG4gICAgdGhpcy5fY2hhaW4gPSBbXTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aClcbiAgICAgICAgdGhpcy5hZGRNb2RpZmllci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuTW9kaWZpZXJDaGFpbi5wcm90b3R5cGUuYWRkTW9kaWZpZXIgPSBmdW5jdGlvbiBhZGRNb2RpZmllcih2YXJhcmdzKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5fY2hhaW4sIGFyZ3VtZW50cyk7XG59O1xuTW9kaWZpZXJDaGFpbi5wcm90b3R5cGUucmVtb3ZlTW9kaWZpZXIgPSBmdW5jdGlvbiByZW1vdmVNb2RpZmllcihtb2RpZmllcikge1xuICAgIHZhciBpbmRleCA9IHRoaXMuX2NoYWluLmluZGV4T2YobW9kaWZpZXIpO1xuICAgIGlmIChpbmRleCA8IDApXG4gICAgICAgIHJldHVybjtcbiAgICB0aGlzLl9jaGFpbi5zcGxpY2UoaW5kZXgsIDEpO1xufTtcbk1vZGlmaWVyQ2hhaW4ucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIG1vZGlmeShpbnB1dCkge1xuICAgIHZhciBjaGFpbiA9IHRoaXMuX2NoYWluO1xuICAgIHZhciByZXN1bHQgPSBpbnB1dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYWluLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdCA9IGNoYWluW2ldLm1vZGlmeShyZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbm1vZHVsZS5leHBvcnRzID0gTW9kaWZpZXJDaGFpbjsiLCJ2YXIgTW9kaWZpZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9Nb2RpZmllcicpO1xudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1RyYW5zZm9ybScpO1xudmFyIFRyYW5zaXRpb25hYmxlID0gcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlJyk7XG52YXIgVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0gPSByZXF1aXJlKCdmYW1vdXMvdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0nKTtcbmZ1bmN0aW9uIFN0YXRlTW9kaWZpZXIob3B0aW9ucykge1xuICAgIHRoaXMuX3RyYW5zZm9ybVN0YXRlID0gbmV3IFRyYW5zaXRpb25hYmxlVHJhbnNmb3JtKFRyYW5zZm9ybS5pZGVudGl0eSk7XG4gICAgdGhpcy5fb3BhY2l0eVN0YXRlID0gbmV3IFRyYW5zaXRpb25hYmxlKDEpO1xuICAgIHRoaXMuX29yaWdpblN0YXRlID0gbmV3IFRyYW5zaXRpb25hYmxlKFtcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgIF0pO1xuICAgIHRoaXMuX2FsaWduU3RhdGUgPSBuZXcgVHJhbnNpdGlvbmFibGUoW1xuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXSk7XG4gICAgdGhpcy5fc2l6ZVN0YXRlID0gbmV3IFRyYW5zaXRpb25hYmxlKFtcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgIF0pO1xuICAgIHRoaXMuX3Byb3BvcnRpb25zU3RhdGUgPSBuZXcgVHJhbnNpdGlvbmFibGUoW1xuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXSk7XG4gICAgdGhpcy5fbW9kaWZpZXIgPSBuZXcgTW9kaWZpZXIoe1xuICAgICAgICB0cmFuc2Zvcm06IHRoaXMuX3RyYW5zZm9ybVN0YXRlLFxuICAgICAgICBvcGFjaXR5OiB0aGlzLl9vcGFjaXR5U3RhdGUsXG4gICAgICAgIG9yaWdpbjogbnVsbCxcbiAgICAgICAgYWxpZ246IG51bGwsXG4gICAgICAgIHNpemU6IG51bGwsXG4gICAgICAgIHByb3BvcnRpb25zOiBudWxsXG4gICAgfSk7XG4gICAgdGhpcy5faGFzT3JpZ2luID0gZmFsc2U7XG4gICAgdGhpcy5faGFzQWxpZ24gPSBmYWxzZTtcbiAgICB0aGlzLl9oYXNTaXplID0gZmFsc2U7XG4gICAgdGhpcy5faGFzUHJvcG9ydGlvbnMgPSBmYWxzZTtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucy50cmFuc2Zvcm0pXG4gICAgICAgICAgICB0aGlzLnNldFRyYW5zZm9ybShvcHRpb25zLnRyYW5zZm9ybSk7XG4gICAgICAgIGlmIChvcHRpb25zLm9wYWNpdHkgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRoaXMuc2V0T3BhY2l0eShvcHRpb25zLm9wYWNpdHkpO1xuICAgICAgICBpZiAob3B0aW9ucy5vcmlnaW4pXG4gICAgICAgICAgICB0aGlzLnNldE9yaWdpbihvcHRpb25zLm9yaWdpbik7XG4gICAgICAgIGlmIChvcHRpb25zLmFsaWduKVxuICAgICAgICAgICAgdGhpcy5zZXRBbGlnbihvcHRpb25zLmFsaWduKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuc2l6ZSlcbiAgICAgICAgICAgIHRoaXMuc2V0U2l6ZShvcHRpb25zLnNpemUpO1xuICAgICAgICBpZiAob3B0aW9ucy5wcm9wb3J0aW9ucylcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcG9ydGlvbnMob3B0aW9ucy5wcm9wb3J0aW9ucyk7XG4gICAgfVxufVxuU3RhdGVNb2RpZmllci5wcm90b3R5cGUuc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5zZXQodHJhbnNmb3JtLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuU3RhdGVNb2RpZmllci5wcm90b3R5cGUuc2V0T3BhY2l0eSA9IGZ1bmN0aW9uIHNldE9wYWNpdHkob3BhY2l0eSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICB0aGlzLl9vcGFjaXR5U3RhdGUuc2V0KG9wYWNpdHksIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5TdGF0ZU1vZGlmaWVyLnByb3RvdHlwZS5zZXRPcmlnaW4gPSBmdW5jdGlvbiBzZXRPcmlnaW4ob3JpZ2luLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmIChvcmlnaW4gPT09IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc09yaWdpbikge1xuICAgICAgICAgICAgdGhpcy5fbW9kaWZpZXIub3JpZ2luRnJvbShudWxsKTtcbiAgICAgICAgICAgIHRoaXMuX2hhc09yaWdpbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuX2hhc09yaWdpbikge1xuICAgICAgICB0aGlzLl9oYXNPcmlnaW4gPSB0cnVlO1xuICAgICAgICB0aGlzLl9tb2RpZmllci5vcmlnaW5Gcm9tKHRoaXMuX29yaWdpblN0YXRlKTtcbiAgICB9XG4gICAgdGhpcy5fb3JpZ2luU3RhdGUuc2V0KG9yaWdpbiwgdHJhbnNpdGlvbiwgY2FsbGJhY2spO1xuICAgIHJldHVybiB0aGlzO1xufTtcblN0YXRlTW9kaWZpZXIucHJvdG90eXBlLnNldEFsaWduID0gZnVuY3Rpb24gc2V0T3JpZ2luKGFsaWduLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmIChhbGlnbiA9PT0gbnVsbCkge1xuICAgICAgICBpZiAodGhpcy5faGFzQWxpZ24pIHtcbiAgICAgICAgICAgIHRoaXMuX21vZGlmaWVyLmFsaWduRnJvbShudWxsKTtcbiAgICAgICAgICAgIHRoaXMuX2hhc0FsaWduID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIGlmICghdGhpcy5faGFzQWxpZ24pIHtcbiAgICAgICAgdGhpcy5faGFzQWxpZ24gPSB0cnVlO1xuICAgICAgICB0aGlzLl9tb2RpZmllci5hbGlnbkZyb20odGhpcy5fYWxpZ25TdGF0ZSk7XG4gICAgfVxuICAgIHRoaXMuX2FsaWduU3RhdGUuc2V0KGFsaWduLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuU3RhdGVNb2RpZmllci5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIHNldFNpemUoc2l6ZSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICBpZiAoc2l6ZSA9PT0gbnVsbCkge1xuICAgICAgICBpZiAodGhpcy5faGFzU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5fbW9kaWZpZXIuc2l6ZUZyb20obnVsbCk7XG4gICAgICAgICAgICB0aGlzLl9oYXNTaXplID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIGlmICghdGhpcy5faGFzU2l6ZSkge1xuICAgICAgICB0aGlzLl9oYXNTaXplID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbW9kaWZpZXIuc2l6ZUZyb20odGhpcy5fc2l6ZVN0YXRlKTtcbiAgICB9XG4gICAgdGhpcy5fc2l6ZVN0YXRlLnNldChzaXplLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuU3RhdGVNb2RpZmllci5wcm90b3R5cGUuc2V0UHJvcG9ydGlvbnMgPSBmdW5jdGlvbiBzZXRTaXplKHByb3BvcnRpb25zLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmIChwcm9wb3J0aW9ucyA9PT0gbnVsbCkge1xuICAgICAgICBpZiAodGhpcy5faGFzUHJvcG9ydGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuX21vZGlmaWVyLnByb3BvcnRpb25zRnJvbShudWxsKTtcbiAgICAgICAgICAgIHRoaXMuX2hhc1Byb3BvcnRpb25zID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIGlmICghdGhpcy5faGFzUHJvcG9ydGlvbnMpIHtcbiAgICAgICAgdGhpcy5faGFzUHJvcG9ydGlvbnMgPSB0cnVlO1xuICAgICAgICB0aGlzLl9tb2RpZmllci5wcm9wb3J0aW9uc0Zyb20odGhpcy5fcHJvcG9ydGlvbnNTdGF0ZSk7XG4gICAgfVxuICAgIHRoaXMuX3Byb3BvcnRpb25zU3RhdGUuc2V0KHByb3BvcnRpb25zLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuU3RhdGVNb2RpZmllci5wcm90b3R5cGUuaGFsdCA9IGZ1bmN0aW9uIGhhbHQoKSB7XG4gICAgdGhpcy5fdHJhbnNmb3JtU3RhdGUuaGFsdCgpO1xuICAgIHRoaXMuX29wYWNpdHlTdGF0ZS5oYWx0KCk7XG4gICAgdGhpcy5fb3JpZ2luU3RhdGUuaGFsdCgpO1xuICAgIHRoaXMuX2FsaWduU3RhdGUuaGFsdCgpO1xuICAgIHRoaXMuX3NpemVTdGF0ZS5oYWx0KCk7XG4gICAgdGhpcy5fcHJvcG9ydGlvbnNTdGF0ZS5oYWx0KCk7XG59O1xuU3RhdGVNb2RpZmllci5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gZ2V0VHJhbnNmb3JtKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5nZXQoKTtcbn07XG5TdGF0ZU1vZGlmaWVyLnByb3RvdHlwZS5nZXRGaW5hbFRyYW5zZm9ybSA9IGZ1bmN0aW9uIGdldEZpbmFsVHJhbnNmb3JtKCkge1xuICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5nZXRGaW5hbCgpO1xufTtcblN0YXRlTW9kaWZpZXIucHJvdG90eXBlLmdldE9wYWNpdHkgPSBmdW5jdGlvbiBnZXRPcGFjaXR5KCkge1xuICAgIHJldHVybiB0aGlzLl9vcGFjaXR5U3RhdGUuZ2V0KCk7XG59O1xuU3RhdGVNb2RpZmllci5wcm90b3R5cGUuZ2V0T3JpZ2luID0gZnVuY3Rpb24gZ2V0T3JpZ2luKCkge1xuICAgIHJldHVybiB0aGlzLl9oYXNPcmlnaW4gPyB0aGlzLl9vcmlnaW5TdGF0ZS5nZXQoKSA6IG51bGw7XG59O1xuU3RhdGVNb2RpZmllci5wcm90b3R5cGUuZ2V0QWxpZ24gPSBmdW5jdGlvbiBnZXRBbGlnbigpIHtcbiAgICByZXR1cm4gdGhpcy5faGFzQWxpZ24gPyB0aGlzLl9hbGlnblN0YXRlLmdldCgpIDogbnVsbDtcbn07XG5TdGF0ZU1vZGlmaWVyLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faGFzU2l6ZSA/IHRoaXMuX3NpemVTdGF0ZS5nZXQoKSA6IG51bGw7XG59O1xuU3RhdGVNb2RpZmllci5wcm90b3R5cGUuZ2V0UHJvcG9ydGlvbnMgPSBmdW5jdGlvbiBnZXRQcm9wb3J0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5faGFzUHJvcG9ydGlvbnMgPyB0aGlzLl9wcm9wb3J0aW9uc1N0YXRlLmdldCgpIDogbnVsbDtcbn07XG5TdGF0ZU1vZGlmaWVyLnByb3RvdHlwZS5tb2RpZnkgPSBmdW5jdGlvbiBtb2RpZnkodGFyZ2V0KSB7XG4gICAgcmV0dXJuIHRoaXMuX21vZGlmaWVyLm1vZGlmeSh0YXJnZXQpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gU3RhdGVNb2RpZmllcjsiLCJ2YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG5mdW5jdGlvbiBQaHlzaWNzRW5naW5lKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFBoeXNpY3NFbmdpbmUuREVGQVVMVF9PUFRJT05TKTtcbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIHRoaXMuX3BhcnRpY2xlcyA9IFtdO1xuICAgIHRoaXMuX2JvZGllcyA9IFtdO1xuICAgIHRoaXMuX2FnZW50RGF0YSA9IHt9O1xuICAgIHRoaXMuX2ZvcmNlcyA9IFtdO1xuICAgIHRoaXMuX2NvbnN0cmFpbnRzID0gW107XG4gICAgdGhpcy5fYnVmZmVyID0gMDtcbiAgICB0aGlzLl9wcmV2VGltZSA9IG5vdygpO1xuICAgIHRoaXMuX2lzU2xlZXBpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9ldmVudEhhbmRsZXIgPSBudWxsO1xuICAgIHRoaXMuX2N1cnJBZ2VudElkID0gMDtcbiAgICB0aGlzLl9oYXNCb2RpZXMgPSBmYWxzZTtcbiAgICB0aGlzLl9ldmVudEhhbmRsZXIgPSBudWxsO1xufVxudmFyIFRJTUVTVEVQID0gMTc7XG52YXIgTUlOX1RJTUVfU1RFUCA9IDEwMDAgLyAxMjA7XG52YXIgTUFYX1RJTUVfU1RFUCA9IDE3O1xudmFyIG5vdyA9IERhdGUubm93O1xudmFyIF9ldmVudHMgPSB7XG4gICAgICAgIHN0YXJ0OiAnc3RhcnQnLFxuICAgICAgICB1cGRhdGU6ICd1cGRhdGUnLFxuICAgICAgICBlbmQ6ICdlbmQnXG4gICAgfTtcblBoeXNpY3NFbmdpbmUuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIGNvbnN0cmFpbnRTdGVwczogMSxcbiAgICBzbGVlcFRvbGVyYW5jZTogMWUtNyxcbiAgICB2ZWxvY2l0eUNhcDogdW5kZWZpbmVkLFxuICAgIGFuZ3VsYXJWZWxvY2l0eUNhcDogdW5kZWZpbmVkXG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0cykge1xuICAgIGZvciAodmFyIGtleSBpbiBvcHRzKVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zW2tleV0pXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IG9wdHNba2V5XTtcbn07XG5QaHlzaWNzRW5naW5lLnByb3RvdHlwZS5hZGRCb2R5ID0gZnVuY3Rpb24gYWRkQm9keShib2R5KSB7XG4gICAgYm9keS5fZW5naW5lID0gdGhpcztcbiAgICBpZiAoYm9keS5pc0JvZHkpIHtcbiAgICAgICAgdGhpcy5fYm9kaWVzLnB1c2goYm9keSk7XG4gICAgICAgIHRoaXMuX2hhc0JvZGllcyA9IHRydWU7XG4gICAgfSBlbHNlXG4gICAgICAgIHRoaXMuX3BhcnRpY2xlcy5wdXNoKGJvZHkpO1xuICAgIGJvZHkub24oJ3N0YXJ0JywgdGhpcy53YWtlLmJpbmQodGhpcykpO1xuICAgIHJldHVybiBib2R5O1xufTtcblBoeXNpY3NFbmdpbmUucHJvdG90eXBlLnJlbW92ZUJvZHkgPSBmdW5jdGlvbiByZW1vdmVCb2R5KGJvZHkpIHtcbiAgICB2YXIgYXJyYXkgPSBib2R5LmlzQm9keSA/IHRoaXMuX2JvZGllcyA6IHRoaXMuX3BhcnRpY2xlcztcbiAgICB2YXIgaW5kZXggPSBhcnJheS5pbmRleE9mKGJvZHkpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGZvciAodmFyIGFnZW50IGluIHRoaXMuX2FnZW50RGF0YSlcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoRnJvbShhZ2VudC5pZCwgYm9keSk7XG4gICAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmdldEJvZGllcygpLmxlbmd0aCA9PT0gMClcbiAgICAgICAgdGhpcy5faGFzQm9kaWVzID0gZmFsc2U7XG59O1xuZnVuY3Rpb24gX21hcEFnZW50QXJyYXkoYWdlbnQpIHtcbiAgICBpZiAoYWdlbnQuYXBwbHlGb3JjZSlcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvcmNlcztcbiAgICBpZiAoYWdlbnQuYXBwbHlDb25zdHJhaW50KVxuICAgICAgICByZXR1cm4gdGhpcy5fY29uc3RyYWludHM7XG59XG5mdW5jdGlvbiBfYXR0YWNoT25lKGFnZW50LCB0YXJnZXRzLCBzb3VyY2UpIHtcbiAgICBpZiAodGFyZ2V0cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICB0YXJnZXRzID0gdGhpcy5nZXRQYXJ0aWNsZXNBbmRCb2RpZXMoKTtcbiAgICBpZiAoISh0YXJnZXRzIGluc3RhbmNlb2YgQXJyYXkpKVxuICAgICAgICB0YXJnZXRzID0gW3RhcmdldHNdO1xuICAgIGFnZW50Lm9uKCdjaGFuZ2UnLCB0aGlzLndha2UuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fYWdlbnREYXRhW3RoaXMuX2N1cnJBZ2VudElkXSA9IHtcbiAgICAgICAgYWdlbnQ6IGFnZW50LFxuICAgICAgICBpZDogdGhpcy5fY3VyckFnZW50SWQsXG4gICAgICAgIHRhcmdldHM6IHRhcmdldHMsXG4gICAgICAgIHNvdXJjZTogc291cmNlXG4gICAgfTtcbiAgICBfbWFwQWdlbnRBcnJheS5jYWxsKHRoaXMsIGFnZW50KS5wdXNoKHRoaXMuX2N1cnJBZ2VudElkKTtcbiAgICByZXR1cm4gdGhpcy5fY3VyckFnZW50SWQrKztcbn1cblBoeXNpY3NFbmdpbmUucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uIGF0dGFjaChhZ2VudHMsIHRhcmdldHMsIHNvdXJjZSkge1xuICAgIHRoaXMud2FrZSgpO1xuICAgIGlmIChhZ2VudHMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICB2YXIgYWdlbnRJRHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhZ2VudHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBhZ2VudElEc1tpXSA9IF9hdHRhY2hPbmUuY2FsbCh0aGlzLCBhZ2VudHNbaV0sIHRhcmdldHMsIHNvdXJjZSk7XG4gICAgICAgIHJldHVybiBhZ2VudElEcztcbiAgICB9IGVsc2VcbiAgICAgICAgcmV0dXJuIF9hdHRhY2hPbmUuY2FsbCh0aGlzLCBhZ2VudHMsIHRhcmdldHMsIHNvdXJjZSk7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUuYXR0YWNoVG8gPSBmdW5jdGlvbiBhdHRhY2hUbyhhZ2VudElELCB0YXJnZXQpIHtcbiAgICBfZ2V0QWdlbnREYXRhLmNhbGwodGhpcywgYWdlbnRJRCkudGFyZ2V0cy5wdXNoKHRhcmdldCk7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUuZGV0YWNoID0gZnVuY3Rpb24gZGV0YWNoKGlkKSB7XG4gICAgdmFyIGFnZW50ID0gdGhpcy5nZXRBZ2VudChpZCk7XG4gICAgdmFyIGFnZW50QXJyYXkgPSBfbWFwQWdlbnRBcnJheS5jYWxsKHRoaXMsIGFnZW50KTtcbiAgICB2YXIgaW5kZXggPSBhZ2VudEFycmF5LmluZGV4T2YoaWQpO1xuICAgIGFnZW50QXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBkZWxldGUgdGhpcy5fYWdlbnREYXRhW2lkXTtcbn07XG5QaHlzaWNzRW5naW5lLnByb3RvdHlwZS5kZXRhY2hGcm9tID0gZnVuY3Rpb24gZGV0YWNoRnJvbShpZCwgdGFyZ2V0KSB7XG4gICAgdmFyIGJvdW5kQWdlbnQgPSBfZ2V0QWdlbnREYXRhLmNhbGwodGhpcywgaWQpO1xuICAgIGlmIChib3VuZEFnZW50LnNvdXJjZSA9PT0gdGFyZ2V0KVxuICAgICAgICB0aGlzLmRldGFjaChpZCk7XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB0YXJnZXRzID0gYm91bmRBZ2VudC50YXJnZXRzO1xuICAgICAgICB2YXIgaW5kZXggPSB0YXJnZXRzLmluZGV4T2YodGFyZ2V0KTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpXG4gICAgICAgICAgICB0YXJnZXRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxufTtcblBoeXNpY3NFbmdpbmUucHJvdG90eXBlLmRldGFjaEFsbCA9IGZ1bmN0aW9uIGRldGFjaEFsbCgpIHtcbiAgICB0aGlzLl9hZ2VudERhdGEgPSB7fTtcbiAgICB0aGlzLl9mb3JjZXMgPSBbXTtcbiAgICB0aGlzLl9jb25zdHJhaW50cyA9IFtdO1xuICAgIHRoaXMuX2N1cnJBZ2VudElkID0gMDtcbn07XG5mdW5jdGlvbiBfZ2V0QWdlbnREYXRhKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FnZW50RGF0YVtpZF07XG59XG5QaHlzaWNzRW5naW5lLnByb3RvdHlwZS5nZXRBZ2VudCA9IGZ1bmN0aW9uIGdldEFnZW50KGlkKSB7XG4gICAgcmV0dXJuIF9nZXRBZ2VudERhdGEuY2FsbCh0aGlzLCBpZCkuYWdlbnQ7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUuZ2V0UGFydGljbGVzID0gZnVuY3Rpb24gZ2V0UGFydGljbGVzKCkge1xuICAgIHJldHVybiB0aGlzLl9wYXJ0aWNsZXM7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUuZ2V0Qm9kaWVzID0gZnVuY3Rpb24gZ2V0Qm9kaWVzKCkge1xuICAgIHJldHVybiB0aGlzLl9ib2RpZXM7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUuZ2V0UGFydGljbGVzQW5kQm9kaWVzID0gZnVuY3Rpb24gZ2V0UGFydGljbGVzQW5kQm9kaWVzKCkge1xuICAgIHJldHVybiB0aGlzLmdldFBhcnRpY2xlcygpLmNvbmNhdCh0aGlzLmdldEJvZGllcygpKTtcbn07XG5QaHlzaWNzRW5naW5lLnByb3RvdHlwZS5mb3JFYWNoUGFydGljbGUgPSBmdW5jdGlvbiBmb3JFYWNoUGFydGljbGUoZm4sIGR0KSB7XG4gICAgdmFyIHBhcnRpY2xlcyA9IHRoaXMuZ2V0UGFydGljbGVzKCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW4gPSBwYXJ0aWNsZXMubGVuZ3RoOyBpbmRleCA8IGxlbjsgaW5kZXgrKylcbiAgICAgICAgZm4uY2FsbCh0aGlzLCBwYXJ0aWNsZXNbaW5kZXhdLCBkdCk7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUuZm9yRWFjaEJvZHkgPSBmdW5jdGlvbiBmb3JFYWNoQm9keShmbiwgZHQpIHtcbiAgICBpZiAoIXRoaXMuX2hhc0JvZGllcylcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBib2RpZXMgPSB0aGlzLmdldEJvZGllcygpO1xuICAgIGZvciAodmFyIGluZGV4ID0gMCwgbGVuID0gYm9kaWVzLmxlbmd0aDsgaW5kZXggPCBsZW47IGluZGV4KyspXG4gICAgICAgIGZuLmNhbGwodGhpcywgYm9kaWVzW2luZGV4XSwgZHQpO1xufTtcblBoeXNpY3NFbmdpbmUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZuLCBkdCkge1xuICAgIHRoaXMuZm9yRWFjaFBhcnRpY2xlKGZuLCBkdCk7XG4gICAgdGhpcy5mb3JFYWNoQm9keShmbiwgZHQpO1xufTtcbmZ1bmN0aW9uIF91cGRhdGVGb3JjZShpbmRleCkge1xuICAgIHZhciBib3VuZEFnZW50ID0gX2dldEFnZW50RGF0YS5jYWxsKHRoaXMsIHRoaXMuX2ZvcmNlc1tpbmRleF0pO1xuICAgIGJvdW5kQWdlbnQuYWdlbnQuYXBwbHlGb3JjZShib3VuZEFnZW50LnRhcmdldHMsIGJvdW5kQWdlbnQuc291cmNlKTtcbn1cbmZ1bmN0aW9uIF91cGRhdGVGb3JjZXMoKSB7XG4gICAgZm9yICh2YXIgaW5kZXggPSB0aGlzLl9mb3JjZXMubGVuZ3RoIC0gMTsgaW5kZXggPiAtMTsgaW5kZXgtLSlcbiAgICAgICAgX3VwZGF0ZUZvcmNlLmNhbGwodGhpcywgaW5kZXgpO1xufVxuZnVuY3Rpb24gX3VwZGF0ZUNvbnN0cmFpbnQoaW5kZXgsIGR0KSB7XG4gICAgdmFyIGJvdW5kQWdlbnQgPSB0aGlzLl9hZ2VudERhdGFbdGhpcy5fY29uc3RyYWludHNbaW5kZXhdXTtcbiAgICByZXR1cm4gYm91bmRBZ2VudC5hZ2VudC5hcHBseUNvbnN0cmFpbnQoYm91bmRBZ2VudC50YXJnZXRzLCBib3VuZEFnZW50LnNvdXJjZSwgZHQpO1xufVxuZnVuY3Rpb24gX3VwZGF0ZUNvbnN0cmFpbnRzKGR0KSB7XG4gICAgdmFyIGl0ZXJhdGlvbiA9IDA7XG4gICAgd2hpbGUgKGl0ZXJhdGlvbiA8IHRoaXMub3B0aW9ucy5jb25zdHJhaW50U3RlcHMpIHtcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSB0aGlzLl9jb25zdHJhaW50cy5sZW5ndGggLSAxOyBpbmRleCA+IC0xOyBpbmRleC0tKVxuICAgICAgICAgICAgX3VwZGF0ZUNvbnN0cmFpbnQuY2FsbCh0aGlzLCBpbmRleCwgZHQpO1xuICAgICAgICBpdGVyYXRpb24rKztcbiAgICB9XG59XG5mdW5jdGlvbiBfdXBkYXRlVmVsb2NpdGllcyhib2R5LCBkdCkge1xuICAgIGJvZHkuaW50ZWdyYXRlVmVsb2NpdHkoZHQpO1xuICAgIGlmICh0aGlzLm9wdGlvbnMudmVsb2NpdHlDYXApXG4gICAgICAgIGJvZHkudmVsb2NpdHkuY2FwKHRoaXMub3B0aW9ucy52ZWxvY2l0eUNhcCkucHV0KGJvZHkudmVsb2NpdHkpO1xufVxuZnVuY3Rpb24gX3VwZGF0ZUFuZ3VsYXJWZWxvY2l0aWVzKGJvZHksIGR0KSB7XG4gICAgYm9keS5pbnRlZ3JhdGVBbmd1bGFyTW9tZW50dW0oZHQpO1xuICAgIGJvZHkudXBkYXRlQW5ndWxhclZlbG9jaXR5KCk7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5hbmd1bGFyVmVsb2NpdHlDYXApXG4gICAgICAgIGJvZHkuYW5ndWxhclZlbG9jaXR5LmNhcCh0aGlzLm9wdGlvbnMuYW5ndWxhclZlbG9jaXR5Q2FwKS5wdXQoYm9keS5hbmd1bGFyVmVsb2NpdHkpO1xufVxuZnVuY3Rpb24gX3VwZGF0ZU9yaWVudGF0aW9ucyhib2R5LCBkdCkge1xuICAgIGJvZHkuaW50ZWdyYXRlT3JpZW50YXRpb24oZHQpO1xufVxuZnVuY3Rpb24gX3VwZGF0ZVBvc2l0aW9ucyhib2R5LCBkdCkge1xuICAgIGJvZHkuaW50ZWdyYXRlUG9zaXRpb24oZHQpO1xuICAgIGJvZHkuZW1pdChfZXZlbnRzLnVwZGF0ZSwgYm9keSk7XG59XG5mdW5jdGlvbiBfaW50ZWdyYXRlKGR0KSB7XG4gICAgX3VwZGF0ZUZvcmNlcy5jYWxsKHRoaXMsIGR0KTtcbiAgICB0aGlzLmZvckVhY2goX3VwZGF0ZVZlbG9jaXRpZXMsIGR0KTtcbiAgICB0aGlzLmZvckVhY2hCb2R5KF91cGRhdGVBbmd1bGFyVmVsb2NpdGllcywgZHQpO1xuICAgIF91cGRhdGVDb25zdHJhaW50cy5jYWxsKHRoaXMsIGR0KTtcbiAgICB0aGlzLmZvckVhY2hCb2R5KF91cGRhdGVPcmllbnRhdGlvbnMsIGR0KTtcbiAgICB0aGlzLmZvckVhY2goX3VwZGF0ZVBvc2l0aW9ucywgZHQpO1xufVxuZnVuY3Rpb24gX2dldFBhcnRpY2xlc0VuZXJneSgpIHtcbiAgICB2YXIgZW5lcmd5ID0gMDtcbiAgICB2YXIgcGFydGljbGVFbmVyZ3kgPSAwO1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgcGFydGljbGVFbmVyZ3kgPSBwYXJ0aWNsZS5nZXRFbmVyZ3koKTtcbiAgICAgICAgZW5lcmd5ICs9IHBhcnRpY2xlRW5lcmd5O1xuICAgIH0pO1xuICAgIHJldHVybiBlbmVyZ3k7XG59XG5mdW5jdGlvbiBfZ2V0QWdlbnRzRW5lcmd5KCkge1xuICAgIHZhciBlbmVyZ3kgPSAwO1xuICAgIGZvciAodmFyIGlkIGluIHRoaXMuX2FnZW50RGF0YSlcbiAgICAgICAgZW5lcmd5ICs9IHRoaXMuZ2V0QWdlbnRFbmVyZ3koaWQpO1xuICAgIHJldHVybiBlbmVyZ3k7XG59XG5QaHlzaWNzRW5naW5lLnByb3RvdHlwZS5nZXRBZ2VudEVuZXJneSA9IGZ1bmN0aW9uIChhZ2VudElkKSB7XG4gICAgdmFyIGFnZW50RGF0YSA9IF9nZXRBZ2VudERhdGEuY2FsbCh0aGlzLCBhZ2VudElkKTtcbiAgICByZXR1cm4gYWdlbnREYXRhLmFnZW50LmdldEVuZXJneShhZ2VudERhdGEudGFyZ2V0cywgYWdlbnREYXRhLnNvdXJjZSk7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUuZ2V0RW5lcmd5ID0gZnVuY3Rpb24gZ2V0RW5lcmd5KCkge1xuICAgIHJldHVybiBfZ2V0UGFydGljbGVzRW5lcmd5LmNhbGwodGhpcykgKyBfZ2V0QWdlbnRzRW5lcmd5LmNhbGwodGhpcyk7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uIHN0ZXAoKSB7XG4gICAgaWYgKHRoaXMuaXNTbGVlcGluZygpKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIGN1cnJUaW1lID0gbm93KCk7XG4gICAgdmFyIGR0RnJhbWUgPSBjdXJyVGltZSAtIHRoaXMuX3ByZXZUaW1lO1xuICAgIHRoaXMuX3ByZXZUaW1lID0gY3VyclRpbWU7XG4gICAgaWYgKGR0RnJhbWUgPCBNSU5fVElNRV9TVEVQKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKGR0RnJhbWUgPiBNQVhfVElNRV9TVEVQKVxuICAgICAgICBkdEZyYW1lID0gTUFYX1RJTUVfU1RFUDtcbiAgICBfaW50ZWdyYXRlLmNhbGwodGhpcywgVElNRVNURVApO1xuICAgIHRoaXMuZW1pdChfZXZlbnRzLnVwZGF0ZSwgdGhpcyk7XG4gICAgaWYgKHRoaXMuZ2V0RW5lcmd5KCkgPCB0aGlzLm9wdGlvbnMuc2xlZXBUb2xlcmFuY2UpXG4gICAgICAgIHRoaXMuc2xlZXAoKTtcbn07XG5QaHlzaWNzRW5naW5lLnByb3RvdHlwZS5pc1NsZWVwaW5nID0gZnVuY3Rpb24gaXNTbGVlcGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5faXNTbGVlcGluZztcbn07XG5QaHlzaWNzRW5naW5lLnByb3RvdHlwZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uIGlzU2xlZXBpbmcoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pc1NsZWVwaW5nO1xufTtcblBoeXNpY3NFbmdpbmUucHJvdG90eXBlLnNsZWVwID0gZnVuY3Rpb24gc2xlZXAoKSB7XG4gICAgaWYgKHRoaXMuX2lzU2xlZXBpbmcpXG4gICAgICAgIHJldHVybjtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgYm9keS5zbGVlcCgpO1xuICAgIH0pO1xuICAgIHRoaXMuZW1pdChfZXZlbnRzLmVuZCwgdGhpcyk7XG4gICAgdGhpcy5faXNTbGVlcGluZyA9IHRydWU7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUud2FrZSA9IGZ1bmN0aW9uIHdha2UoKSB7XG4gICAgaWYgKCF0aGlzLl9pc1NsZWVwaW5nKVxuICAgICAgICByZXR1cm47XG4gICAgdGhpcy5fcHJldlRpbWUgPSBub3coKTtcbiAgICB0aGlzLmVtaXQoX2V2ZW50cy5zdGFydCwgdGhpcyk7XG4gICAgdGhpcy5faXNTbGVlcGluZyA9IGZhbHNlO1xufTtcblBoeXNpY3NFbmdpbmUucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KHR5cGUsIGRhdGEpIHtcbiAgICBpZiAodGhpcy5fZXZlbnRIYW5kbGVyID09PSBudWxsKVxuICAgICAgICByZXR1cm47XG4gICAgdGhpcy5fZXZlbnRIYW5kbGVyLmVtaXQodHlwZSwgZGF0YSk7XG59O1xuUGh5c2ljc0VuZ2luZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudCwgZm4pIHtcbiAgICBpZiAodGhpcy5fZXZlbnRIYW5kbGVyID09PSBudWxsKVxuICAgICAgICB0aGlzLl9ldmVudEhhbmRsZXIgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5fZXZlbnRIYW5kbGVyLm9uKGV2ZW50LCBmbik7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBQaHlzaWNzRW5naW5lOyIsInZhciBQYXJ0aWNsZSA9IHJlcXVpcmUoJy4vUGFydGljbGUnKTtcbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdmYW1vdXMvY29yZS9UcmFuc2Zvcm0nKTtcbnZhciBWZWN0b3IgPSByZXF1aXJlKCdmYW1vdXMvbWF0aC9WZWN0b3InKTtcbnZhciBRdWF0ZXJuaW9uID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvUXVhdGVybmlvbicpO1xudmFyIE1hdHJpeCA9IHJlcXVpcmUoJ2ZhbW91cy9tYXRoL01hdHJpeCcpO1xudmFyIEludGVncmF0b3IgPSByZXF1aXJlKCcuLi9pbnRlZ3JhdG9ycy9TeW1wbGVjdGljRXVsZXInKTtcbmZ1bmN0aW9uIEJvZHkob3B0aW9ucykge1xuICAgIFBhcnRpY2xlLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdGhpcy5vcmllbnRhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5hbmd1bGFyTW9tZW50dW0gPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy50b3JxdWUgPSBuZXcgVmVjdG9yKCk7XG4gICAgaWYgKG9wdGlvbnMub3JpZW50YXRpb24pXG4gICAgICAgIHRoaXMub3JpZW50YXRpb24uc2V0KG9wdGlvbnMub3JpZW50YXRpb24pO1xuICAgIGlmIChvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSlcbiAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuc2V0KG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KTtcbiAgICBpZiAob3B0aW9ucy5hbmd1bGFyTW9tZW50dW0pXG4gICAgICAgIHRoaXMuYW5ndWxhck1vbWVudHVtLnNldChvcHRpb25zLmFuZ3VsYXJNb21lbnR1bSk7XG4gICAgaWYgKG9wdGlvbnMudG9ycXVlKVxuICAgICAgICB0aGlzLnRvcnF1ZS5zZXQob3B0aW9ucy50b3JxdWUpO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LncgPSAwO1xuICAgIHRoaXMuc2V0TW9tZW50c09mSW5lcnRpYSgpO1xuICAgIHRoaXMucFdvcmxkID0gbmV3IFZlY3RvcigpO1xufVxuQm9keS5ERUZBVUxUX09QVElPTlMgPSBQYXJ0aWNsZS5ERUZBVUxUX09QVElPTlM7XG5Cb2R5LkRFRkFVTFRfT1BUSU9OUy5vcmllbnRhdGlvbiA9IFtcbiAgICAwLFxuICAgIDAsXG4gICAgMCxcbiAgICAxXG5dO1xuQm9keS5ERUZBVUxUX09QVElPTlMuYW5ndWxhclZlbG9jaXR5ID0gW1xuICAgIDAsXG4gICAgMCxcbiAgICAwXG5dO1xuQm9keS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhcnRpY2xlLnByb3RvdHlwZSk7XG5Cb2R5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJvZHk7XG5Cb2R5LnByb3RvdHlwZS5pc0JvZHkgPSB0cnVlO1xuQm9keS5wcm90b3R5cGUuc2V0TWFzcyA9IGZ1bmN0aW9uIHNldE1hc3MoKSB7XG4gICAgUGFydGljbGUucHJvdG90eXBlLnNldE1hc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLnNldE1vbWVudHNPZkluZXJ0aWEoKTtcbn07XG5Cb2R5LnByb3RvdHlwZS5zZXRNb21lbnRzT2ZJbmVydGlhID0gZnVuY3Rpb24gc2V0TW9tZW50c09mSW5lcnRpYSgpIHtcbiAgICB0aGlzLmluZXJ0aWEgPSBuZXcgTWF0cml4KCk7XG4gICAgdGhpcy5pbnZlcnNlSW5lcnRpYSA9IG5ldyBNYXRyaXgoKTtcbn07XG5Cb2R5LnByb3RvdHlwZS51cGRhdGVBbmd1bGFyVmVsb2NpdHkgPSBmdW5jdGlvbiB1cGRhdGVBbmd1bGFyVmVsb2NpdHkoKSB7XG4gICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuc2V0KHRoaXMuaW52ZXJzZUluZXJ0aWEudmVjdG9yTXVsdGlwbHkodGhpcy5hbmd1bGFyTW9tZW50dW0pKTtcbn07XG5Cb2R5LnByb3RvdHlwZS50b1dvcmxkQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiB0b1dvcmxkQ29vcmRpbmF0ZXMobG9jYWxQb3NpdGlvbikge1xuICAgIHJldHVybiB0aGlzLnBXb3JsZC5zZXQodGhpcy5vcmllbnRhdGlvbi5yb3RhdGVWZWN0b3IobG9jYWxQb3NpdGlvbikpO1xufTtcbkJvZHkucHJvdG90eXBlLmdldEVuZXJneSA9IGZ1bmN0aW9uIGdldEVuZXJneSgpIHtcbiAgICByZXR1cm4gUGFydGljbGUucHJvdG90eXBlLmdldEVuZXJneS5jYWxsKHRoaXMpICsgMC41ICogdGhpcy5pbmVydGlhLnZlY3Rvck11bHRpcGx5KHRoaXMuYW5ndWxhclZlbG9jaXR5KS5kb3QodGhpcy5hbmd1bGFyVmVsb2NpdHkpO1xufTtcbkJvZHkucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQocCwgdiwgcSwgTCkge1xuICAgIFBhcnRpY2xlLnByb3RvdHlwZS5yZXNldC5jYWxsKHRoaXMsIHAsIHYpO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNsZWFyKCk7XG4gICAgdGhpcy5zZXRPcmllbnRhdGlvbihxIHx8IFtcbiAgICAgICAgMSxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgIF0pO1xuICAgIHRoaXMuc2V0QW5ndWxhck1vbWVudHVtKEwgfHwgW1xuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXSk7XG59O1xuQm9keS5wcm90b3R5cGUuc2V0T3JpZW50YXRpb24gPSBmdW5jdGlvbiBzZXRPcmllbnRhdGlvbihxKSB7XG4gICAgdGhpcy5vcmllbnRhdGlvbi5zZXQocSk7XG59O1xuQm9keS5wcm90b3R5cGUuc2V0QW5ndWxhclZlbG9jaXR5ID0gZnVuY3Rpb24gc2V0QW5ndWxhclZlbG9jaXR5KHcpIHtcbiAgICB0aGlzLndha2UoKTtcbiAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5zZXQodyk7XG59O1xuQm9keS5wcm90b3R5cGUuc2V0QW5ndWxhck1vbWVudHVtID0gZnVuY3Rpb24gc2V0QW5ndWxhck1vbWVudHVtKEwpIHtcbiAgICB0aGlzLndha2UoKTtcbiAgICB0aGlzLmFuZ3VsYXJNb21lbnR1bS5zZXQoTCk7XG59O1xuQm9keS5wcm90b3R5cGUuYXBwbHlGb3JjZSA9IGZ1bmN0aW9uIGFwcGx5Rm9yY2UoZm9yY2UsIGxvY2F0aW9uKSB7XG4gICAgUGFydGljbGUucHJvdG90eXBlLmFwcGx5Rm9yY2UuY2FsbCh0aGlzLCBmb3JjZSk7XG4gICAgaWYgKGxvY2F0aW9uICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMuYXBwbHlUb3JxdWUobG9jYXRpb24uY3Jvc3MoZm9yY2UpKTtcbn07XG5Cb2R5LnByb3RvdHlwZS5hcHBseVRvcnF1ZSA9IGZ1bmN0aW9uIGFwcGx5VG9ycXVlKHRvcnF1ZSkge1xuICAgIHRoaXMud2FrZSgpO1xuICAgIHRoaXMudG9ycXVlLnNldCh0aGlzLnRvcnF1ZS5hZGQodG9ycXVlKSk7XG59O1xuQm9keS5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gZ2V0VHJhbnNmb3JtKCkge1xuICAgIHJldHVybiBUcmFuc2Zvcm0udGhlbk1vdmUodGhpcy5vcmllbnRhdGlvbi5nZXRUcmFuc2Zvcm0oKSwgVHJhbnNmb3JtLmdldFRyYW5zbGF0ZShQYXJ0aWNsZS5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtLmNhbGwodGhpcykpKTtcbn07XG5Cb2R5LnByb3RvdHlwZS5faW50ZWdyYXRlID0gZnVuY3Rpb24gX2ludGVncmF0ZShkdCkge1xuICAgIFBhcnRpY2xlLnByb3RvdHlwZS5faW50ZWdyYXRlLmNhbGwodGhpcywgZHQpO1xuICAgIHRoaXMuaW50ZWdyYXRlQW5ndWxhck1vbWVudHVtKGR0KTtcbiAgICB0aGlzLnVwZGF0ZUFuZ3VsYXJWZWxvY2l0eShkdCk7XG4gICAgdGhpcy5pbnRlZ3JhdGVPcmllbnRhdGlvbihkdCk7XG59O1xuQm9keS5wcm90b3R5cGUuaW50ZWdyYXRlQW5ndWxhck1vbWVudHVtID0gZnVuY3Rpb24gaW50ZWdyYXRlQW5ndWxhck1vbWVudHVtKGR0KSB7XG4gICAgSW50ZWdyYXRvci5pbnRlZ3JhdGVBbmd1bGFyTW9tZW50dW0odGhpcywgZHQpO1xufTtcbkJvZHkucHJvdG90eXBlLmludGVncmF0ZU9yaWVudGF0aW9uID0gZnVuY3Rpb24gaW50ZWdyYXRlT3JpZW50YXRpb24oZHQpIHtcbiAgICBJbnRlZ3JhdG9yLmludGVncmF0ZU9yaWVudGF0aW9uKHRoaXMsIGR0KTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEJvZHk7IiwidmFyIEJvZHkgPSByZXF1aXJlKCcuL0JvZHknKTtcbnZhciBNYXRyaXggPSByZXF1aXJlKCdmYW1vdXMvbWF0aC9NYXRyaXgnKTtcbmZ1bmN0aW9uIENpcmNsZShvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdGhpcy5zZXRSYWRpdXMob3B0aW9ucy5yYWRpdXMgfHwgMCk7XG4gICAgQm9keS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xufVxuQ2lyY2xlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQm9keS5wcm90b3R5cGUpO1xuQ2lyY2xlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENpcmNsZTtcbkNpcmNsZS5wcm90b3R5cGUuc2V0UmFkaXVzID0gZnVuY3Rpb24gc2V0UmFkaXVzKHIpIHtcbiAgICB0aGlzLnJhZGl1cyA9IHI7XG4gICAgdGhpcy5zaXplID0gW1xuICAgICAgICAyICogdGhpcy5yYWRpdXMsXG4gICAgICAgIDIgKiB0aGlzLnJhZGl1c1xuICAgIF07XG4gICAgdGhpcy5zZXRNb21lbnRzT2ZJbmVydGlhKCk7XG59O1xuQ2lyY2xlLnByb3RvdHlwZS5zZXRNb21lbnRzT2ZJbmVydGlhID0gZnVuY3Rpb24gc2V0TW9tZW50c09mSW5lcnRpYSgpIHtcbiAgICB2YXIgbSA9IHRoaXMubWFzcztcbiAgICB2YXIgciA9IHRoaXMucmFkaXVzO1xuICAgIHRoaXMuaW5lcnRpYSA9IG5ldyBNYXRyaXgoW1xuICAgICAgICBbXG4gICAgICAgICAgICAwLjI1ICogbSAqIHIgKiByLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAuMjUgKiBtICogciAqIHIsXG4gICAgICAgICAgICAwXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMC41ICogbSAqIHIgKiByXG4gICAgICAgIF1cbiAgICBdKTtcbiAgICB0aGlzLmludmVyc2VJbmVydGlhID0gbmV3IE1hdHJpeChbXG4gICAgICAgIFtcbiAgICAgICAgICAgIDQgLyAobSAqIHIgKiByKSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICA0IC8gKG0gKiByICogciksXG4gICAgICAgICAgICAwXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMiAvIChtICogciAqIHIpXG4gICAgICAgIF1cbiAgICBdKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IENpcmNsZTsiLCJ2YXIgVmVjdG9yID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJyk7XG52YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVHJhbnNmb3JtJyk7XG52YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG52YXIgSW50ZWdyYXRvciA9IHJlcXVpcmUoJy4uL2ludGVncmF0b3JzL1N5bXBsZWN0aWNFdWxlcicpO1xuZnVuY3Rpb24gUGFydGljbGUob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHZhciBkZWZhdWx0cyA9IFBhcnRpY2xlLkRFRkFVTFRfT1BUSU9OUztcbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFZlY3RvcigpO1xuICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5mb3JjZSA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLl9lbmdpbmUgPSBudWxsO1xuICAgIHRoaXMuX2lzU2xlZXBpbmcgPSB0cnVlO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0ID0gbnVsbDtcbiAgICB0aGlzLm1hc3MgPSBvcHRpb25zLm1hc3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWFzcyA6IGRlZmF1bHRzLm1hc3M7XG4gICAgdGhpcy5pbnZlcnNlTWFzcyA9IDEgLyB0aGlzLm1hc3M7XG4gICAgdGhpcy5zZXRQb3NpdGlvbihvcHRpb25zLnBvc2l0aW9uIHx8IGRlZmF1bHRzLnBvc2l0aW9uKTtcbiAgICB0aGlzLnNldFZlbG9jaXR5KG9wdGlvbnMudmVsb2NpdHkgfHwgZGVmYXVsdHMudmVsb2NpdHkpO1xuICAgIHRoaXMuZm9yY2Uuc2V0KG9wdGlvbnMuZm9yY2UgfHwgW1xuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXSk7XG4gICAgdGhpcy50cmFuc2Zvcm0gPSBUcmFuc2Zvcm0uaWRlbnRpdHkuc2xpY2UoKTtcbiAgICB0aGlzLl9zcGVjID0ge1xuICAgICAgICBzaXplOiBbXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICBdLFxuICAgICAgICB0YXJnZXQ6IHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdGhpcy50cmFuc2Zvcm0sXG4gICAgICAgICAgICBvcmlnaW46IFtcbiAgICAgICAgICAgICAgICAwLjUsXG4gICAgICAgICAgICAgICAgMC41XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgdGFyZ2V0OiBudWxsXG4gICAgICAgIH1cbiAgICB9O1xufVxuUGFydGljbGUuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIHBvc2l0aW9uOiBbXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDBcbiAgICBdLFxuICAgIHZlbG9jaXR5OiBbXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDBcbiAgICBdLFxuICAgIG1hc3M6IDFcbn07XG52YXIgX2V2ZW50cyA9IHtcbiAgICAgICAgc3RhcnQ6ICdzdGFydCcsXG4gICAgICAgIHVwZGF0ZTogJ3VwZGF0ZScsXG4gICAgICAgIGVuZDogJ2VuZCdcbiAgICB9O1xudmFyIG5vdyA9IERhdGUubm93O1xuUGFydGljbGUucHJvdG90eXBlLmlzQm9keSA9IGZhbHNlO1xuUGFydGljbGUucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24gaXNBY3RpdmUoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pc1NsZWVwaW5nO1xufTtcblBhcnRpY2xlLnByb3RvdHlwZS5zbGVlcCA9IGZ1bmN0aW9uIHNsZWVwKCkge1xuICAgIGlmICh0aGlzLl9pc1NsZWVwaW5nKVxuICAgICAgICByZXR1cm47XG4gICAgdGhpcy5lbWl0KF9ldmVudHMuZW5kLCB0aGlzKTtcbiAgICB0aGlzLl9pc1NsZWVwaW5nID0gdHJ1ZTtcbn07XG5QYXJ0aWNsZS5wcm90b3R5cGUud2FrZSA9IGZ1bmN0aW9uIHdha2UoKSB7XG4gICAgaWYgKCF0aGlzLl9pc1NsZWVwaW5nKVxuICAgICAgICByZXR1cm47XG4gICAgdGhpcy5lbWl0KF9ldmVudHMuc3RhcnQsIHRoaXMpO1xuICAgIHRoaXMuX2lzU2xlZXBpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9wcmV2VGltZSA9IG5vdygpO1xuICAgIGlmICh0aGlzLl9lbmdpbmUpXG4gICAgICAgIHRoaXMuX2VuZ2luZS53YWtlKCk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24gc2V0UG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICB0aGlzLnBvc2l0aW9uLnNldChwb3NpdGlvbik7XG59O1xuUGFydGljbGUucHJvdG90eXBlLnNldFBvc2l0aW9uMUQgPSBmdW5jdGlvbiBzZXRQb3NpdGlvbjFEKHgpIHtcbiAgICB0aGlzLnBvc2l0aW9uLnggPSB4O1xufTtcblBhcnRpY2xlLnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIGdldFBvc2l0aW9uKCkge1xuICAgIHRoaXMuX2VuZ2luZS5zdGVwKCk7XG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24uZ2V0KCk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLmdldFBvc2l0aW9uMUQgPSBmdW5jdGlvbiBnZXRQb3NpdGlvbjFEKCkge1xuICAgIHRoaXMuX2VuZ2luZS5zdGVwKCk7XG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24ueDtcbn07XG5QYXJ0aWNsZS5wcm90b3R5cGUuc2V0VmVsb2NpdHkgPSBmdW5jdGlvbiBzZXRWZWxvY2l0eSh2ZWxvY2l0eSkge1xuICAgIHRoaXMudmVsb2NpdHkuc2V0KHZlbG9jaXR5KTtcbiAgICBpZiAoISh2ZWxvY2l0eVswXSA9PT0gMCAmJiB2ZWxvY2l0eVsxXSA9PT0gMCAmJiB2ZWxvY2l0eVsyXSA9PT0gMCkpXG4gICAgICAgIHRoaXMud2FrZSgpO1xufTtcblBhcnRpY2xlLnByb3RvdHlwZS5zZXRWZWxvY2l0eTFEID0gZnVuY3Rpb24gc2V0VmVsb2NpdHkxRCh4KSB7XG4gICAgdGhpcy52ZWxvY2l0eS54ID0geDtcbiAgICBpZiAoeCAhPT0gMClcbiAgICAgICAgdGhpcy53YWtlKCk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLmdldFZlbG9jaXR5ID0gZnVuY3Rpb24gZ2V0VmVsb2NpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMudmVsb2NpdHkuZ2V0KCk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLnNldEZvcmNlID0gZnVuY3Rpb24gc2V0Rm9yY2UoZm9yY2UpIHtcbiAgICB0aGlzLmZvcmNlLnNldChmb3JjZSk7XG4gICAgdGhpcy53YWtlKCk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLmdldFZlbG9jaXR5MUQgPSBmdW5jdGlvbiBnZXRWZWxvY2l0eTFEKCkge1xuICAgIHJldHVybiB0aGlzLnZlbG9jaXR5Lng7XG59O1xuUGFydGljbGUucHJvdG90eXBlLnNldE1hc3MgPSBmdW5jdGlvbiBzZXRNYXNzKG1hc3MpIHtcbiAgICB0aGlzLm1hc3MgPSBtYXNzO1xuICAgIHRoaXMuaW52ZXJzZU1hc3MgPSAxIC8gbWFzcztcbn07XG5QYXJ0aWNsZS5wcm90b3R5cGUuZ2V0TWFzcyA9IGZ1bmN0aW9uIGdldE1hc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFzcztcbn07XG5QYXJ0aWNsZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldChwb3NpdGlvbiwgdmVsb2NpdHkpIHtcbiAgICB0aGlzLnNldFBvc2l0aW9uKHBvc2l0aW9uIHx8IFtcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgIF0pO1xuICAgIHRoaXMuc2V0VmVsb2NpdHkodmVsb2NpdHkgfHwgW1xuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXSk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLmFwcGx5Rm9yY2UgPSBmdW5jdGlvbiBhcHBseUZvcmNlKGZvcmNlKSB7XG4gICAgaWYgKGZvcmNlLmlzWmVybygpKVxuICAgICAgICByZXR1cm47XG4gICAgdGhpcy5mb3JjZS5hZGQoZm9yY2UpLnB1dCh0aGlzLmZvcmNlKTtcbiAgICB0aGlzLndha2UoKTtcbn07XG5QYXJ0aWNsZS5wcm90b3R5cGUuYXBwbHlJbXB1bHNlID0gZnVuY3Rpb24gYXBwbHlJbXB1bHNlKGltcHVsc2UpIHtcbiAgICBpZiAoaW1wdWxzZS5pc1plcm8oKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciB2ZWxvY2l0eSA9IHRoaXMudmVsb2NpdHk7XG4gICAgdmVsb2NpdHkuYWRkKGltcHVsc2UubXVsdCh0aGlzLmludmVyc2VNYXNzKSkucHV0KHZlbG9jaXR5KTtcbn07XG5QYXJ0aWNsZS5wcm90b3R5cGUuaW50ZWdyYXRlVmVsb2NpdHkgPSBmdW5jdGlvbiBpbnRlZ3JhdGVWZWxvY2l0eShkdCkge1xuICAgIEludGVncmF0b3IuaW50ZWdyYXRlVmVsb2NpdHkodGhpcywgZHQpO1xufTtcblBhcnRpY2xlLnByb3RvdHlwZS5pbnRlZ3JhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uIGludGVncmF0ZVBvc2l0aW9uKGR0KSB7XG4gICAgSW50ZWdyYXRvci5pbnRlZ3JhdGVQb3NpdGlvbih0aGlzLCBkdCk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLl9pbnRlZ3JhdGUgPSBmdW5jdGlvbiBfaW50ZWdyYXRlKGR0KSB7XG4gICAgdGhpcy5pbnRlZ3JhdGVWZWxvY2l0eShkdCk7XG4gICAgdGhpcy5pbnRlZ3JhdGVQb3NpdGlvbihkdCk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLmdldEVuZXJneSA9IGZ1bmN0aW9uIGdldEVuZXJneSgpIHtcbiAgICByZXR1cm4gMC41ICogdGhpcy5tYXNzICogdGhpcy52ZWxvY2l0eS5ub3JtU3F1YXJlZCgpO1xufTtcblBhcnRpY2xlLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiBnZXRUcmFuc2Zvcm0oKSB7XG4gICAgdGhpcy5fZW5naW5lLnN0ZXAoKTtcbiAgICB2YXIgcG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgIHZhciB0cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybTtcbiAgICB0cmFuc2Zvcm1bMTJdID0gcG9zaXRpb24ueDtcbiAgICB0cmFuc2Zvcm1bMTNdID0gcG9zaXRpb24ueTtcbiAgICB0cmFuc2Zvcm1bMTRdID0gcG9zaXRpb24uejtcbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufTtcblBhcnRpY2xlLnByb3RvdHlwZS5tb2RpZnkgPSBmdW5jdGlvbiBtb2RpZnkodGFyZ2V0KSB7XG4gICAgdmFyIF9zcGVjID0gdGhpcy5fc3BlYy50YXJnZXQ7XG4gICAgX3NwZWMudHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oKTtcbiAgICBfc3BlYy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgcmV0dXJuIHRoaXMuX3NwZWM7XG59O1xuZnVuY3Rpb24gX2NyZWF0ZUV2ZW50T3V0cHV0KCkge1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0LmJpbmRUaGlzKHRoaXMpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50T3V0cHV0KTtcbn1cblBhcnRpY2xlLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlLCBkYXRhKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudE91dHB1dClcbiAgICAgICAgcmV0dXJuO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQodHlwZSwgZGF0YSk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24oKSB7XG4gICAgX2NyZWF0ZUV2ZW50T3V0cHV0LmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMub24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5QYXJ0aWNsZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcigpIHtcbiAgICBfY3JlYXRlRXZlbnRPdXRwdXQuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblBhcnRpY2xlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gcGlwZSgpIHtcbiAgICBfY3JlYXRlRXZlbnRPdXRwdXQuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5waXBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuUGFydGljbGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIHVucGlwZSgpIHtcbiAgICBfY3JlYXRlRXZlbnRPdXRwdXQuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy51bnBpcGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFBhcnRpY2xlOyIsInZhciBCb2R5ID0gcmVxdWlyZSgnLi9Cb2R5Jyk7XG52YXIgTWF0cml4ID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvTWF0cml4Jyk7XG5mdW5jdGlvbiBSZWN0YW5nbGUob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuc2l6ZSA9IG9wdGlvbnMuc2l6ZSB8fCBbXG4gICAgICAgIDAsXG4gICAgICAgIDBcbiAgICBdO1xuICAgIEJvZHkuY2FsbCh0aGlzLCBvcHRpb25zKTtcbn1cblJlY3RhbmdsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJvZHkucHJvdG90eXBlKTtcblJlY3RhbmdsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZWN0YW5nbGU7XG5SZWN0YW5nbGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiBzZXRTaXplKHNpemUpIHtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgIHRoaXMuc2V0TW9tZW50c09mSW5lcnRpYSgpO1xufTtcblJlY3RhbmdsZS5wcm90b3R5cGUuc2V0TW9tZW50c09mSW5lcnRpYSA9IGZ1bmN0aW9uIHNldE1vbWVudHNPZkluZXJ0aWEoKSB7XG4gICAgdmFyIG0gPSB0aGlzLm1hc3M7XG4gICAgdmFyIHcgPSB0aGlzLnNpemVbMF07XG4gICAgdmFyIGggPSB0aGlzLnNpemVbMV07XG4gICAgdGhpcy5pbmVydGlhID0gbmV3IE1hdHJpeChbXG4gICAgICAgIFtcbiAgICAgICAgICAgIG0gKiBoICogaCAvIDEyLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIG0gKiB3ICogdyAvIDEyLFxuICAgICAgICAgICAgMFxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIG0gKiAodyAqIHcgKyBoICogaCkgLyAxMlxuICAgICAgICBdXG4gICAgXSk7XG4gICAgdGhpcy5pbnZlcnNlSW5lcnRpYSA9IG5ldyBNYXRyaXgoW1xuICAgICAgICBbXG4gICAgICAgICAgICAxMiAvIChtICogaCAqIGgpLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDEyIC8gKG0gKiB3ICogdyksXG4gICAgICAgICAgICAwXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMTIgLyAobSAqICh3ICogdyArIGggKiBoKSlcbiAgICAgICAgXVxuICAgIF0pO1xufTtcbm1vZHVsZS5leHBvcnRzID0gUmVjdGFuZ2xlOyIsInZhciBDb25zdHJhaW50ID0gcmVxdWlyZSgnLi9Db25zdHJhaW50Jyk7XG52YXIgVmVjdG9yID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJyk7XG5mdW5jdGlvbiBDb2xsaXNpb24ob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoQ29sbGlzaW9uLkRFRkFVTFRfT1BUSU9OUyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLm5vcm1hbCA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLnBEaWZmID0gbmV3IFZlY3RvcigpO1xuICAgIHRoaXMudkRpZmYgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5pbXB1bHNlMSA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLmltcHVsc2UyID0gbmV3IFZlY3RvcigpO1xuICAgIENvbnN0cmFpbnQuY2FsbCh0aGlzKTtcbn1cbkNvbGxpc2lvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENvbnN0cmFpbnQucHJvdG90eXBlKTtcbkNvbGxpc2lvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb2xsaXNpb247XG5Db2xsaXNpb24uREVGQVVMVF9PUFRJT05TID0ge1xuICAgIHJlc3RpdHV0aW9uOiAwLjUsXG4gICAgZHJpZnQ6IDAuNSxcbiAgICBzbG9wOiAwXG59O1xuZnVuY3Rpb24gX25vcm1hbFZlbG9jaXR5KHBhcnRpY2xlMSwgcGFydGljbGUyKSB7XG4gICAgcmV0dXJuIHBhcnRpY2xlMS52ZWxvY2l0eS5kb3QocGFydGljbGUyLnZlbG9jaXR5KTtcbn1cbkNvbGxpc2lvbi5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKVxuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcbn07XG5Db2xsaXNpb24ucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludCA9IGZ1bmN0aW9uIGFwcGx5Q29uc3RyYWludCh0YXJnZXRzLCBzb3VyY2UsIGR0KSB7XG4gICAgaWYgKHNvdXJjZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIHYxID0gc291cmNlLnZlbG9jaXR5O1xuICAgIHZhciBwMSA9IHNvdXJjZS5wb3NpdGlvbjtcbiAgICB2YXIgdzEgPSBzb3VyY2UuaW52ZXJzZU1hc3M7XG4gICAgdmFyIHIxID0gc291cmNlLnJhZGl1cztcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICB2YXIgZHJpZnQgPSBvcHRpb25zLmRyaWZ0O1xuICAgIHZhciBzbG9wID0gLW9wdGlvbnMuc2xvcDtcbiAgICB2YXIgcmVzdGl0dXRpb24gPSBvcHRpb25zLnJlc3RpdHV0aW9uO1xuICAgIHZhciBuID0gdGhpcy5ub3JtYWw7XG4gICAgdmFyIHBEaWZmID0gdGhpcy5wRGlmZjtcbiAgICB2YXIgdkRpZmYgPSB0aGlzLnZEaWZmO1xuICAgIHZhciBpbXB1bHNlMSA9IHRoaXMuaW1wdWxzZTE7XG4gICAgdmFyIGltcHVsc2UyID0gdGhpcy5pbXB1bHNlMjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldHNbaV07XG4gICAgICAgIGlmICh0YXJnZXQgPT09IHNvdXJjZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB2YXIgdjIgPSB0YXJnZXQudmVsb2NpdHk7XG4gICAgICAgIHZhciBwMiA9IHRhcmdldC5wb3NpdGlvbjtcbiAgICAgICAgdmFyIHcyID0gdGFyZ2V0LmludmVyc2VNYXNzO1xuICAgICAgICB2YXIgcjIgPSB0YXJnZXQucmFkaXVzO1xuICAgICAgICBwRGlmZi5zZXQocDIuc3ViKHAxKSk7XG4gICAgICAgIHZEaWZmLnNldCh2Mi5zdWIodjEpKTtcbiAgICAgICAgdmFyIGRpc3QgPSBwRGlmZi5ub3JtKCk7XG4gICAgICAgIHZhciBvdmVybGFwID0gZGlzdCAtIChyMSArIHIyKTtcbiAgICAgICAgdmFyIGVmZk1hc3MgPSAxIC8gKHcxICsgdzIpO1xuICAgICAgICB2YXIgZ2FtbWEgPSAwO1xuICAgICAgICBpZiAob3ZlcmxhcCA8IDApIHtcbiAgICAgICAgICAgIG4uc2V0KHBEaWZmLm5vcm1hbGl6ZSgpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9ldmVudE91dHB1dCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xsaXNpb25EYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXA6IG92ZXJsYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWw6IG5cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdwcmVDb2xsaXNpb24nLCBjb2xsaXNpb25EYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdjb2xsaXNpb24nLCBjb2xsaXNpb25EYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsYW1iZGEgPSBvdmVybGFwIDw9IHNsb3AgPyAoKDEgKyByZXN0aXR1dGlvbikgKiBuLmRvdCh2RGlmZikgKyBkcmlmdCAvIGR0ICogKG92ZXJsYXAgLSBzbG9wKSkgLyAoZ2FtbWEgKyBkdCAvIGVmZk1hc3MpIDogKDEgKyByZXN0aXR1dGlvbikgKiBuLmRvdCh2RGlmZikgLyAoZ2FtbWEgKyBkdCAvIGVmZk1hc3MpO1xuICAgICAgICAgICAgbi5tdWx0KGR0ICogbGFtYmRhKS5wdXQoaW1wdWxzZTEpO1xuICAgICAgICAgICAgaW1wdWxzZTEubXVsdCgtMSkucHV0KGltcHVsc2UyKTtcbiAgICAgICAgICAgIHNvdXJjZS5hcHBseUltcHVsc2UoaW1wdWxzZTEpO1xuICAgICAgICAgICAgdGFyZ2V0LmFwcGx5SW1wdWxzZShpbXB1bHNlMik7XG4gICAgICAgICAgICBpZiAodGhpcy5fZXZlbnRPdXRwdXQpXG4gICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgncG9zdENvbGxpc2lvbicsIGNvbGxpc2lvbkRhdGEpO1xuICAgICAgICB9XG4gICAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gQ29sbGlzaW9uOyIsInZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FdmVudEhhbmRsZXInKTtcbmZ1bmN0aW9uIENvbnN0cmFpbnQoKSB7XG4gICAgdGhpcy5vcHRpb25zID0gdGhpcy5vcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50T3V0cHV0KTtcbn1cbkNvbnN0cmFpbnQucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdjaGFuZ2UnLCBvcHRpb25zKTtcbn07XG5Db25zdHJhaW50LnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnQgPSBmdW5jdGlvbiBhcHBseUNvbnN0cmFpbnQoKSB7XG59O1xuQ29uc3RyYWludC5wcm90b3R5cGUuZ2V0RW5lcmd5ID0gZnVuY3Rpb24gZ2V0RW5lcmd5KCkge1xuICAgIHJldHVybiAwO1xufTtcbm1vZHVsZS5leHBvcnRzID0gQ29uc3RyYWludDsiLCJ2YXIgQ29uc3RyYWludCA9IHJlcXVpcmUoJy4vQ29uc3RyYWludCcpO1xudmFyIFZlY3RvciA9IHJlcXVpcmUoJ2ZhbW91cy9tYXRoL1ZlY3RvcicpO1xuZnVuY3Rpb24gQ3VydmUob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoQ3VydmUuREVGQVVMVF9PUFRJT05TKTtcbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIHRoaXMuSiA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLmltcHVsc2UgPSBuZXcgVmVjdG9yKCk7XG4gICAgQ29uc3RyYWludC5jYWxsKHRoaXMpO1xufVxuQ3VydmUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDb25zdHJhaW50LnByb3RvdHlwZSk7XG5DdXJ2ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDdXJ2ZTtcbnZhciBlcHNpbG9uID0gMWUtNztcbnZhciBwaSA9IE1hdGguUEk7XG5DdXJ2ZS5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgZXF1YXRpb246IGZ1bmN0aW9uICh4LCB5LCB6KSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH0sXG4gICAgcGxhbmU6IGZ1bmN0aW9uICh4LCB5LCB6KSB7XG4gICAgICAgIHJldHVybiB6O1xuICAgIH0sXG4gICAgcGVyaW9kOiAwLFxuICAgIGRhbXBpbmdSYXRpbzogMFxufTtcbkN1cnZlLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpXG4gICAgICAgIHRoaXMub3B0aW9uc1trZXldID0gb3B0aW9uc1trZXldO1xufTtcbkN1cnZlLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnQgPSBmdW5jdGlvbiBhcHBseUNvbnN0cmFpbnQodGFyZ2V0cywgc291cmNlLCBkdCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIHZhciBpbXB1bHNlID0gdGhpcy5pbXB1bHNlO1xuICAgIHZhciBKID0gdGhpcy5KO1xuICAgIHZhciBmID0gb3B0aW9ucy5lcXVhdGlvbjtcbiAgICB2YXIgZyA9IG9wdGlvbnMucGxhbmU7XG4gICAgdmFyIGRhbXBpbmdSYXRpbyA9IG9wdGlvbnMuZGFtcGluZ1JhdGlvO1xuICAgIHZhciBwZXJpb2QgPSBvcHRpb25zLnBlcmlvZDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGJvZHkgPSB0YXJnZXRzW2ldO1xuICAgICAgICB2YXIgdiA9IGJvZHkudmVsb2NpdHk7XG4gICAgICAgIHZhciBwID0gYm9keS5wb3NpdGlvbjtcbiAgICAgICAgdmFyIG0gPSBib2R5Lm1hc3M7XG4gICAgICAgIHZhciBnYW1tYTtcbiAgICAgICAgdmFyIGJldGE7XG4gICAgICAgIGlmIChwZXJpb2QgPT09IDApIHtcbiAgICAgICAgICAgIGdhbW1hID0gMDtcbiAgICAgICAgICAgIGJldGEgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGMgPSA0ICogbSAqIHBpICogZGFtcGluZ1JhdGlvIC8gcGVyaW9kO1xuICAgICAgICAgICAgdmFyIGsgPSA0ICogbSAqIHBpICogcGkgLyAocGVyaW9kICogcGVyaW9kKTtcbiAgICAgICAgICAgIGdhbW1hID0gMSAvIChjICsgZHQgKiBrKTtcbiAgICAgICAgICAgIGJldGEgPSBkdCAqIGsgLyAoYyArIGR0ICogayk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHggPSBwLng7XG4gICAgICAgIHZhciB5ID0gcC55O1xuICAgICAgICB2YXIgeiA9IHAuejtcbiAgICAgICAgdmFyIGYwID0gZih4LCB5LCB6KTtcbiAgICAgICAgdmFyIGRmeCA9IChmKHggKyBlcHNpbG9uLCBwLCBwKSAtIGYwKSAvIGVwc2lsb247XG4gICAgICAgIHZhciBkZnkgPSAoZih4LCB5ICsgZXBzaWxvbiwgcCkgLSBmMCkgLyBlcHNpbG9uO1xuICAgICAgICB2YXIgZGZ6ID0gKGYoeCwgeSwgcCArIGVwc2lsb24pIC0gZjApIC8gZXBzaWxvbjtcbiAgICAgICAgdmFyIGcwID0gZyh4LCB5LCB6KTtcbiAgICAgICAgdmFyIGRneCA9IChnKHggKyBlcHNpbG9uLCB5LCB6KSAtIGcwKSAvIGVwc2lsb247XG4gICAgICAgIHZhciBkZ3kgPSAoZyh4LCB5ICsgZXBzaWxvbiwgeikgLSBnMCkgLyBlcHNpbG9uO1xuICAgICAgICB2YXIgZGd6ID0gKGcoeCwgeSwgeiArIGVwc2lsb24pIC0gZzApIC8gZXBzaWxvbjtcbiAgICAgICAgSi5zZXRYWVooZGZ4ICsgZGd4LCBkZnkgKyBkZ3ksIGRmeiArIGRneik7XG4gICAgICAgIHZhciBhbnRpRHJpZnQgPSBiZXRhIC8gZHQgKiAoZjAgKyBnMCk7XG4gICAgICAgIHZhciBsYW1iZGEgPSAtKEouZG90KHYpICsgYW50aURyaWZ0KSAvIChnYW1tYSArIGR0ICogSi5ub3JtU3F1YXJlZCgpIC8gbSk7XG4gICAgICAgIGltcHVsc2Uuc2V0KEoubXVsdChkdCAqIGxhbWJkYSkpO1xuICAgICAgICBib2R5LmFwcGx5SW1wdWxzZShpbXB1bHNlKTtcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBDdXJ2ZTsiLCJ2YXIgQ29uc3RyYWludCA9IHJlcXVpcmUoJy4vQ29uc3RyYWludCcpO1xudmFyIFZlY3RvciA9IHJlcXVpcmUoJ2ZhbW91cy9tYXRoL1ZlY3RvcicpO1xuZnVuY3Rpb24gRGlzdGFuY2Uob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUodGhpcy5jb25zdHJ1Y3Rvci5ERUZBVUxUX09QVElPTlMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5pbXB1bHNlID0gbmV3IFZlY3RvcigpO1xuICAgIHRoaXMubm9ybWFsID0gbmV3IFZlY3RvcigpO1xuICAgIHRoaXMuZGlmZlAgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5kaWZmViA9IG5ldyBWZWN0b3IoKTtcbiAgICBDb25zdHJhaW50LmNhbGwodGhpcyk7XG59XG5EaXN0YW5jZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENvbnN0cmFpbnQucHJvdG90eXBlKTtcbkRpc3RhbmNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERpc3RhbmNlO1xuRGlzdGFuY2UuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIGFuY2hvcjogbnVsbCxcbiAgICBsZW5ndGg6IDAsXG4gICAgbWluTGVuZ3RoOiAwLFxuICAgIHBlcmlvZDogMCxcbiAgICBkYW1waW5nUmF0aW86IDBcbn07XG52YXIgcGkgPSBNYXRoLlBJO1xuRGlzdGFuY2UucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5hbmNob3IpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuYW5jaG9yLnBvc2l0aW9uIGluc3RhbmNlb2YgVmVjdG9yKVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFuY2hvciA9IG9wdGlvbnMuYW5jaG9yLnBvc2l0aW9uO1xuICAgICAgICBpZiAob3B0aW9ucy5hbmNob3IgaW5zdGFuY2VvZiBWZWN0b3IpXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYW5jaG9yID0gb3B0aW9ucy5hbmNob3I7XG4gICAgICAgIGlmIChvcHRpb25zLmFuY2hvciBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFuY2hvciA9IG5ldyBWZWN0b3Iob3B0aW9ucy5hbmNob3IpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5sZW5ndGggIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLmxlbmd0aCA9IG9wdGlvbnMubGVuZ3RoO1xuICAgIGlmIChvcHRpb25zLmRhbXBpbmdSYXRpbyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLm9wdGlvbnMuZGFtcGluZ1JhdGlvID0gb3B0aW9ucy5kYW1waW5nUmF0aW87XG4gICAgaWYgKG9wdGlvbnMucGVyaW9kICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMub3B0aW9ucy5wZXJpb2QgPSBvcHRpb25zLnBlcmlvZDtcbiAgICBpZiAob3B0aW9ucy5taW5MZW5ndGggIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLm1pbkxlbmd0aCA9IG9wdGlvbnMubWluTGVuZ3RoO1xufTtcbmZ1bmN0aW9uIF9jYWxjRXJyb3IoaW1wdWxzZSwgYm9keSkge1xuICAgIHJldHVybiBib2R5Lm1hc3MgKiBpbXB1bHNlLm5vcm0oKTtcbn1cbkRpc3RhbmNlLnByb3RvdHlwZS5zZXRBbmNob3IgPSBmdW5jdGlvbiBzZXRBbmNob3IoYW5jaG9yKSB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuYW5jaG9yKVxuICAgICAgICB0aGlzLm9wdGlvbnMuYW5jaG9yID0gbmV3IFZlY3RvcigpO1xuICAgIHRoaXMub3B0aW9ucy5hbmNob3Iuc2V0KGFuY2hvcik7XG59O1xuRGlzdGFuY2UucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludCA9IGZ1bmN0aW9uIGFwcGx5Q29uc3RyYWludCh0YXJnZXRzLCBzb3VyY2UsIGR0KSB7XG4gICAgdmFyIG4gPSB0aGlzLm5vcm1hbDtcbiAgICB2YXIgZGlmZlAgPSB0aGlzLmRpZmZQO1xuICAgIHZhciBkaWZmViA9IHRoaXMuZGlmZlY7XG4gICAgdmFyIGltcHVsc2UgPSB0aGlzLmltcHVsc2U7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgdmFyIGRhbXBpbmdSYXRpbyA9IG9wdGlvbnMuZGFtcGluZ1JhdGlvO1xuICAgIHZhciBwZXJpb2QgPSBvcHRpb25zLnBlcmlvZDtcbiAgICB2YXIgbWluTGVuZ3RoID0gb3B0aW9ucy5taW5MZW5ndGg7XG4gICAgdmFyIHAyO1xuICAgIHZhciB3MjtcbiAgICBpZiAoc291cmNlKSB7XG4gICAgICAgIHZhciB2MiA9IHNvdXJjZS52ZWxvY2l0eTtcbiAgICAgICAgcDIgPSBzb3VyY2UucG9zaXRpb247XG4gICAgICAgIHcyID0gc291cmNlLmludmVyc2VNYXNzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHAyID0gdGhpcy5vcHRpb25zLmFuY2hvcjtcbiAgICAgICAgdzIgPSAwO1xuICAgIH1cbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5vcHRpb25zLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGJvZHkgPSB0YXJnZXRzW2ldO1xuICAgICAgICB2YXIgdjEgPSBib2R5LnZlbG9jaXR5O1xuICAgICAgICB2YXIgcDEgPSBib2R5LnBvc2l0aW9uO1xuICAgICAgICB2YXIgdzEgPSBib2R5LmludmVyc2VNYXNzO1xuICAgICAgICBkaWZmUC5zZXQocDEuc3ViKHAyKSk7XG4gICAgICAgIG4uc2V0KGRpZmZQLm5vcm1hbGl6ZSgpKTtcbiAgICAgICAgdmFyIGRpc3QgPSBkaWZmUC5ub3JtKCkgLSBsZW5ndGg7XG4gICAgICAgIGlmIChNYXRoLmFicyhkaXN0KSA8IG1pbkxlbmd0aClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHNvdXJjZSlcbiAgICAgICAgICAgIGRpZmZWLnNldCh2MS5zdWIodjIpKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZGlmZlYuc2V0KHYxKTtcbiAgICAgICAgdmFyIGVmZk1hc3MgPSAxIC8gKHcxICsgdzIpO1xuICAgICAgICB2YXIgZ2FtbWE7XG4gICAgICAgIHZhciBiZXRhO1xuICAgICAgICBpZiAocGVyaW9kID09PSAwKSB7XG4gICAgICAgICAgICBnYW1tYSA9IDA7XG4gICAgICAgICAgICBiZXRhID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBjID0gNCAqIGVmZk1hc3MgKiBwaSAqIGRhbXBpbmdSYXRpbyAvIHBlcmlvZDtcbiAgICAgICAgICAgIHZhciBrID0gNCAqIGVmZk1hc3MgKiBwaSAqIHBpIC8gKHBlcmlvZCAqIHBlcmlvZCk7XG4gICAgICAgICAgICBnYW1tYSA9IDEgLyAoYyArIGR0ICogayk7XG4gICAgICAgICAgICBiZXRhID0gZHQgKiBrIC8gKGMgKyBkdCAqIGspO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbnRpRHJpZnQgPSBiZXRhIC8gZHQgKiBkaXN0O1xuICAgICAgICB2YXIgbGFtYmRhID0gLShuLmRvdChkaWZmVikgKyBhbnRpRHJpZnQpIC8gKGdhbW1hICsgZHQgLyBlZmZNYXNzKTtcbiAgICAgICAgaW1wdWxzZS5zZXQobi5tdWx0KGR0ICogbGFtYmRhKSk7XG4gICAgICAgIGJvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UpO1xuICAgICAgICBpZiAoc291cmNlKVxuICAgICAgICAgICAgc291cmNlLmFwcGx5SW1wdWxzZShpbXB1bHNlLm11bHQoLTEpKTtcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBEaXN0YW5jZTsiLCJ2YXIgQ29uc3RyYWludCA9IHJlcXVpcmUoJy4vQ29uc3RyYWludCcpO1xudmFyIFZlY3RvciA9IHJlcXVpcmUoJ2ZhbW91cy9tYXRoL1ZlY3RvcicpO1xuZnVuY3Rpb24gU25hcChvcHRpb25zKSB7XG4gICAgQ29uc3RyYWludC5jYWxsKHRoaXMpO1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUodGhpcy5jb25zdHJ1Y3Rvci5ERUZBVUxUX09QVElPTlMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5wRGlmZiA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLnZEaWZmID0gbmV3IFZlY3RvcigpO1xuICAgIHRoaXMuaW1wdWxzZTEgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5pbXB1bHNlMiA9IG5ldyBWZWN0b3IoKTtcbn1cblNuYXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDb25zdHJhaW50LnByb3RvdHlwZSk7XG5TbmFwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFNuYXA7XG5TbmFwLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBwZXJpb2Q6IDMwMCxcbiAgICBkYW1waW5nUmF0aW86IDAuMSxcbiAgICBsZW5ndGg6IDAsXG4gICAgYW5jaG9yOiB1bmRlZmluZWRcbn07XG52YXIgcGkgPSBNYXRoLlBJO1xuU25hcC5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmFuY2hvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmFuY2hvciBpbnN0YW5jZW9mIFZlY3RvcilcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5hbmNob3IgPSBvcHRpb25zLmFuY2hvcjtcbiAgICAgICAgaWYgKG9wdGlvbnMuYW5jaG9yLnBvc2l0aW9uIGluc3RhbmNlb2YgVmVjdG9yKVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFuY2hvciA9IG9wdGlvbnMuYW5jaG9yLnBvc2l0aW9uO1xuICAgICAgICBpZiAob3B0aW9ucy5hbmNob3IgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5hbmNob3IgPSBuZXcgVmVjdG9yKG9wdGlvbnMuYW5jaG9yKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubGVuZ3RoICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMub3B0aW9ucy5sZW5ndGggPSBvcHRpb25zLmxlbmd0aDtcbiAgICBpZiAob3B0aW9ucy5kYW1waW5nUmF0aW8gIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLmRhbXBpbmdSYXRpbyA9IG9wdGlvbnMuZGFtcGluZ1JhdGlvO1xuICAgIGlmIChvcHRpb25zLnBlcmlvZCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLm9wdGlvbnMucGVyaW9kID0gb3B0aW9ucy5wZXJpb2Q7XG4gICAgQ29uc3RyYWludC5wcm90b3R5cGUuc2V0T3B0aW9ucy5jYWxsKHRoaXMsIG9wdGlvbnMpO1xufTtcblNuYXAucHJvdG90eXBlLmdldEVuZXJneSA9IGZ1bmN0aW9uIGdldEVuZXJneSh0YXJnZXRzLCBzb3VyY2UpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICB2YXIgcmVzdExlbmd0aCA9IG9wdGlvbnMubGVuZ3RoO1xuICAgIHZhciBhbmNob3IgPSBvcHRpb25zLmFuY2hvciB8fCBzb3VyY2UucG9zaXRpb247XG4gICAgdmFyIHN0cmVuZ3RoID0gTWF0aC5wb3coMiAqIHBpIC8gb3B0aW9ucy5wZXJpb2QsIDIpO1xuICAgIHZhciBlbmVyZ3kgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGFyZ2V0c1tpXTtcbiAgICAgICAgdmFyIGRpc3QgPSBhbmNob3Iuc3ViKHRhcmdldC5wb3NpdGlvbikubm9ybSgpIC0gcmVzdExlbmd0aDtcbiAgICAgICAgZW5lcmd5ICs9IDAuNSAqIHN0cmVuZ3RoICogZGlzdCAqIGRpc3Q7XG4gICAgfVxuICAgIHJldHVybiBlbmVyZ3k7XG59O1xuU25hcC5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50ID0gZnVuY3Rpb24gYXBwbHlDb25zdHJhaW50KHRhcmdldHMsIHNvdXJjZSwgZHQpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICB2YXIgcERpZmYgPSB0aGlzLnBEaWZmO1xuICAgIHZhciB2RGlmZiA9IHRoaXMudkRpZmY7XG4gICAgdmFyIGltcHVsc2UxID0gdGhpcy5pbXB1bHNlMTtcbiAgICB2YXIgaW1wdWxzZTIgPSB0aGlzLmltcHVsc2UyO1xuICAgIHZhciBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDtcbiAgICB2YXIgYW5jaG9yID0gb3B0aW9ucy5hbmNob3IgfHwgc291cmNlLnBvc2l0aW9uO1xuICAgIHZhciBwZXJpb2QgPSBvcHRpb25zLnBlcmlvZDtcbiAgICB2YXIgZGFtcGluZ1JhdGlvID0gb3B0aW9ucy5kYW1waW5nUmF0aW87XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXRzW2ldO1xuICAgICAgICB2YXIgcDEgPSB0YXJnZXQucG9zaXRpb247XG4gICAgICAgIHZhciB2MSA9IHRhcmdldC52ZWxvY2l0eTtcbiAgICAgICAgdmFyIG0xID0gdGFyZ2V0Lm1hc3M7XG4gICAgICAgIHZhciB3MSA9IHRhcmdldC5pbnZlcnNlTWFzcztcbiAgICAgICAgcERpZmYuc2V0KHAxLnN1YihhbmNob3IpKTtcbiAgICAgICAgdmFyIGRpc3QgPSBwRGlmZi5ub3JtKCkgLSBsZW5ndGg7XG4gICAgICAgIHZhciBlZmZNYXNzO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICB2YXIgdzIgPSBzb3VyY2UuaW52ZXJzZU1hc3M7XG4gICAgICAgICAgICB2YXIgdjIgPSBzb3VyY2UudmVsb2NpdHk7XG4gICAgICAgICAgICB2RGlmZi5zZXQodjEuc3ViKHYyKSk7XG4gICAgICAgICAgICBlZmZNYXNzID0gMSAvICh3MSArIHcyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZEaWZmLnNldCh2MSk7XG4gICAgICAgICAgICBlZmZNYXNzID0gbTE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdhbW1hO1xuICAgICAgICB2YXIgYmV0YTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wZXJpb2QgPT09IDApIHtcbiAgICAgICAgICAgIGdhbW1hID0gMDtcbiAgICAgICAgICAgIGJldGEgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGsgPSA0ICogZWZmTWFzcyAqIHBpICogcGkgLyAocGVyaW9kICogcGVyaW9kKTtcbiAgICAgICAgICAgIHZhciBjID0gNCAqIGVmZk1hc3MgKiBwaSAqIGRhbXBpbmdSYXRpbyAvIHBlcmlvZDtcbiAgICAgICAgICAgIGJldGEgPSBkdCAqIGsgLyAoYyArIGR0ICogayk7XG4gICAgICAgICAgICBnYW1tYSA9IDEgLyAoYyArIGR0ICogayk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFudGlEcmlmdCA9IGJldGEgLyBkdCAqIGRpc3Q7XG4gICAgICAgIHBEaWZmLm5vcm1hbGl6ZSgtYW50aURyaWZ0KS5zdWIodkRpZmYpLm11bHQoZHQgLyAoZ2FtbWEgKyBkdCAvIGVmZk1hc3MpKS5wdXQoaW1wdWxzZTEpO1xuICAgICAgICB0YXJnZXQuYXBwbHlJbXB1bHNlKGltcHVsc2UxKTtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgaW1wdWxzZTEubXVsdCgtMSkucHV0KGltcHVsc2UyKTtcbiAgICAgICAgICAgIHNvdXJjZS5hcHBseUltcHVsc2UoaW1wdWxzZTIpO1xuICAgICAgICB9XG4gICAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gU25hcDsiLCJ2YXIgQ29uc3RyYWludCA9IHJlcXVpcmUoJy4vQ29uc3RyYWludCcpO1xudmFyIFZlY3RvciA9IHJlcXVpcmUoJ2ZhbW91cy9tYXRoL1ZlY3RvcicpO1xuZnVuY3Rpb24gU3VyZmFjZShvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZShTdXJmYWNlLkRFRkFVTFRfT1BUSU9OUyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLkogPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5pbXB1bHNlID0gbmV3IFZlY3RvcigpO1xuICAgIENvbnN0cmFpbnQuY2FsbCh0aGlzKTtcbn1cblN1cmZhY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDb25zdHJhaW50LnByb3RvdHlwZSk7XG5TdXJmYWNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1cmZhY2U7XG5TdXJmYWNlLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBlcXVhdGlvbjogdW5kZWZpbmVkLFxuICAgIHBlcmlvZDogMCxcbiAgICBkYW1waW5nUmF0aW86IDBcbn07XG52YXIgZXBzaWxvbiA9IDFlLTc7XG52YXIgcGkgPSBNYXRoLlBJO1xuU3VyZmFjZS5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKVxuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcbn07XG5TdXJmYWNlLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnQgPSBmdW5jdGlvbiBhcHBseUNvbnN0cmFpbnQodGFyZ2V0cywgc291cmNlLCBkdCkge1xuICAgIHZhciBpbXB1bHNlID0gdGhpcy5pbXB1bHNlO1xuICAgIHZhciBKID0gdGhpcy5KO1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIHZhciBmID0gb3B0aW9ucy5lcXVhdGlvbjtcbiAgICB2YXIgZGFtcGluZ1JhdGlvID0gb3B0aW9ucy5kYW1waW5nUmF0aW87XG4gICAgdmFyIHBlcmlvZCA9IG9wdGlvbnMucGVyaW9kO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcGFydGljbGUgPSB0YXJnZXRzW2ldO1xuICAgICAgICB2YXIgdiA9IHBhcnRpY2xlLnZlbG9jaXR5O1xuICAgICAgICB2YXIgcCA9IHBhcnRpY2xlLnBvc2l0aW9uO1xuICAgICAgICB2YXIgbSA9IHBhcnRpY2xlLm1hc3M7XG4gICAgICAgIHZhciBnYW1tYTtcbiAgICAgICAgdmFyIGJldGE7XG4gICAgICAgIGlmIChwZXJpb2QgPT09IDApIHtcbiAgICAgICAgICAgIGdhbW1hID0gMDtcbiAgICAgICAgICAgIGJldGEgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGMgPSA0ICogbSAqIHBpICogZGFtcGluZ1JhdGlvIC8gcGVyaW9kO1xuICAgICAgICAgICAgdmFyIGsgPSA0ICogbSAqIHBpICogcGkgLyAocGVyaW9kICogcGVyaW9kKTtcbiAgICAgICAgICAgIGdhbW1hID0gMSAvIChjICsgZHQgKiBrKTtcbiAgICAgICAgICAgIGJldGEgPSBkdCAqIGsgLyAoYyArIGR0ICogayk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHggPSBwLng7XG4gICAgICAgIHZhciB5ID0gcC55O1xuICAgICAgICB2YXIgeiA9IHAuejtcbiAgICAgICAgdmFyIGYwID0gZih4LCB5LCB6KTtcbiAgICAgICAgdmFyIGRmeCA9IChmKHggKyBlcHNpbG9uLCBwLCBwKSAtIGYwKSAvIGVwc2lsb247XG4gICAgICAgIHZhciBkZnkgPSAoZih4LCB5ICsgZXBzaWxvbiwgcCkgLSBmMCkgLyBlcHNpbG9uO1xuICAgICAgICB2YXIgZGZ6ID0gKGYoeCwgeSwgcCArIGVwc2lsb24pIC0gZjApIC8gZXBzaWxvbjtcbiAgICAgICAgSi5zZXRYWVooZGZ4LCBkZnksIGRmeik7XG4gICAgICAgIHZhciBhbnRpRHJpZnQgPSBiZXRhIC8gZHQgKiBmMDtcbiAgICAgICAgdmFyIGxhbWJkYSA9IC0oSi5kb3QodikgKyBhbnRpRHJpZnQpIC8gKGdhbW1hICsgZHQgKiBKLm5vcm1TcXVhcmVkKCkgLyBtKTtcbiAgICAgICAgaW1wdWxzZS5zZXQoSi5tdWx0KGR0ICogbGFtYmRhKSk7XG4gICAgICAgIHBhcnRpY2xlLmFwcGx5SW1wdWxzZShpbXB1bHNlKTtcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBTdXJmYWNlOyIsInZhciBDb25zdHJhaW50ID0gcmVxdWlyZSgnLi9Db25zdHJhaW50Jyk7XG52YXIgVmVjdG9yID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJyk7XG5mdW5jdGlvbiBXYWxsKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFdhbGwuREVGQVVMVF9PUFRJT05TKTtcbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIHRoaXMuZGlmZiA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLmltcHVsc2UgPSBuZXcgVmVjdG9yKCk7XG4gICAgQ29uc3RyYWludC5jYWxsKHRoaXMpO1xufVxuV2FsbC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENvbnN0cmFpbnQucHJvdG90eXBlKTtcbldhbGwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gV2FsbDtcbldhbGwuT05fQ09OVEFDVCA9IHtcbiAgICBSRUZMRUNUOiAwLFxuICAgIFNJTEVOVDogMVxufTtcbldhbGwuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIHJlc3RpdHV0aW9uOiAwLjUsXG4gICAgZHJpZnQ6IDAuNSxcbiAgICBzbG9wOiAwLFxuICAgIG5vcm1hbDogW1xuICAgICAgICAxLFxuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXSxcbiAgICBkaXN0YW5jZTogMCxcbiAgICBvbkNvbnRhY3Q6IFdhbGwuT05fQ09OVEFDVC5SRUZMRUNUXG59O1xuV2FsbC5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLm5vcm1hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvcHRpb25zLm5vcm1hbCBpbnN0YW5jZW9mIFZlY3RvcilcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5ub3JtYWwgPSBvcHRpb25zLm5vcm1hbC5jbG9uZSgpO1xuICAgICAgICBpZiAob3B0aW9ucy5ub3JtYWwgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5ub3JtYWwgPSBuZXcgVmVjdG9yKG9wdGlvbnMubm9ybWFsKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucmVzdGl0dXRpb24gIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjtcbiAgICBpZiAob3B0aW9ucy5kcmlmdCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLm9wdGlvbnMuZHJpZnQgPSBvcHRpb25zLmRyaWZ0O1xuICAgIGlmIChvcHRpb25zLnNsb3AgIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLnNsb3AgPSBvcHRpb25zLnNsb3A7XG4gICAgaWYgKG9wdGlvbnMuZGlzdGFuY2UgIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLmRpc3RhbmNlID0gb3B0aW9ucy5kaXN0YW5jZTtcbiAgICBpZiAob3B0aW9ucy5vbkNvbnRhY3QgIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLm9uQ29udGFjdCA9IG9wdGlvbnMub25Db250YWN0O1xufTtcbmZ1bmN0aW9uIF9nZXROb3JtYWxWZWxvY2l0eShuLCB2KSB7XG4gICAgcmV0dXJuIHYuZG90KG4pO1xufVxuZnVuY3Rpb24gX2dldERpc3RhbmNlRnJvbU9yaWdpbihwKSB7XG4gICAgdmFyIG4gPSB0aGlzLm9wdGlvbnMubm9ybWFsO1xuICAgIHZhciBkID0gdGhpcy5vcHRpb25zLmRpc3RhbmNlO1xuICAgIHJldHVybiBwLmRvdChuKSArIGQ7XG59XG5mdW5jdGlvbiBfb25FbnRlcihwYXJ0aWNsZSwgb3ZlcmxhcCwgZHQpIHtcbiAgICB2YXIgcCA9IHBhcnRpY2xlLnBvc2l0aW9uO1xuICAgIHZhciB2ID0gcGFydGljbGUudmVsb2NpdHk7XG4gICAgdmFyIG0gPSBwYXJ0aWNsZS5tYXNzO1xuICAgIHZhciBuID0gdGhpcy5vcHRpb25zLm5vcm1hbDtcbiAgICB2YXIgYWN0aW9uID0gdGhpcy5vcHRpb25zLm9uQ29udGFjdDtcbiAgICB2YXIgcmVzdGl0dXRpb24gPSB0aGlzLm9wdGlvbnMucmVzdGl0dXRpb247XG4gICAgdmFyIGltcHVsc2UgPSB0aGlzLmltcHVsc2U7XG4gICAgdmFyIGRyaWZ0ID0gdGhpcy5vcHRpb25zLmRyaWZ0O1xuICAgIHZhciBzbG9wID0gLXRoaXMub3B0aW9ucy5zbG9wO1xuICAgIHZhciBnYW1tYSA9IDA7XG4gICAgaWYgKHRoaXMuX2V2ZW50T3V0cHV0KSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgIHBhcnRpY2xlOiBwYXJ0aWNsZSxcbiAgICAgICAgICAgICAgICB3YWxsOiB0aGlzLFxuICAgICAgICAgICAgICAgIG92ZXJsYXA6IG92ZXJsYXAsXG4gICAgICAgICAgICAgICAgbm9ybWFsOiBuXG4gICAgICAgICAgICB9O1xuICAgICAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdwcmVDb2xsaXNpb24nLCBkYXRhKTtcbiAgICAgICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgnY29sbGlzaW9uJywgZGF0YSk7XG4gICAgfVxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgY2FzZSBXYWxsLk9OX0NPTlRBQ1QuUkVGTEVDVDpcbiAgICAgICAgdmFyIGxhbWJkYSA9IG92ZXJsYXAgPCBzbG9wID8gLSgoMSArIHJlc3RpdHV0aW9uKSAqIG4uZG90KHYpICsgZHJpZnQgLyBkdCAqIChvdmVybGFwIC0gc2xvcCkpIC8gKG0gKiBkdCArIGdhbW1hKSA6IC0oKDEgKyByZXN0aXR1dGlvbikgKiBuLmRvdCh2KSkgLyAobSAqIGR0ICsgZ2FtbWEpO1xuICAgICAgICBpbXB1bHNlLnNldChuLm11bHQoZHQgKiBsYW1iZGEpKTtcbiAgICAgICAgcGFydGljbGUuYXBwbHlJbXB1bHNlKGltcHVsc2UpO1xuICAgICAgICBwYXJ0aWNsZS5zZXRQb3NpdGlvbihwLmFkZChuLm11bHQoLW92ZXJsYXApKSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZXZlbnRPdXRwdXQpXG4gICAgICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ3Bvc3RDb2xsaXNpb24nLCBkYXRhKTtcbn1cbmZ1bmN0aW9uIF9vbkV4aXQocGFydGljbGUsIG92ZXJsYXAsIGR0KSB7XG4gICAgdmFyIGFjdGlvbiA9IHRoaXMub3B0aW9ucy5vbkNvbnRhY3Q7XG4gICAgdmFyIHAgPSBwYXJ0aWNsZS5wb3NpdGlvbjtcbiAgICB2YXIgbiA9IHRoaXMub3B0aW9ucy5ub3JtYWw7XG4gICAgaWYgKGFjdGlvbiA9PT0gV2FsbC5PTl9DT05UQUNULlJFRkxFQ1QpIHtcbiAgICAgICAgcGFydGljbGUuc2V0UG9zaXRpb24ocC5hZGQobi5tdWx0KC1vdmVybGFwKSkpO1xuICAgIH1cbn1cbldhbGwucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludCA9IGZ1bmN0aW9uIGFwcGx5Q29uc3RyYWludCh0YXJnZXRzLCBzb3VyY2UsIGR0KSB7XG4gICAgdmFyIG4gPSB0aGlzLm9wdGlvbnMubm9ybWFsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcGFydGljbGUgPSB0YXJnZXRzW2ldO1xuICAgICAgICB2YXIgcCA9IHBhcnRpY2xlLnBvc2l0aW9uO1xuICAgICAgICB2YXIgdiA9IHBhcnRpY2xlLnZlbG9jaXR5O1xuICAgICAgICB2YXIgciA9IHBhcnRpY2xlLnJhZGl1cyB8fCAwO1xuICAgICAgICB2YXIgb3ZlcmxhcCA9IF9nZXREaXN0YW5jZUZyb21PcmlnaW4uY2FsbCh0aGlzLCBwLmFkZChuLm11bHQoLXIpKSk7XG4gICAgICAgIHZhciBudiA9IF9nZXROb3JtYWxWZWxvY2l0eS5jYWxsKHRoaXMsIG4sIHYpO1xuICAgICAgICBpZiAob3ZlcmxhcCA8PSAwKSB7XG4gICAgICAgICAgICBpZiAobnYgPCAwKVxuICAgICAgICAgICAgICAgIF9vbkVudGVyLmNhbGwodGhpcywgcGFydGljbGUsIG92ZXJsYXAsIGR0KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBfb25FeGl0LmNhbGwodGhpcywgcGFydGljbGUsIG92ZXJsYXAsIGR0KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IFdhbGw7IiwidmFyIENvbnN0cmFpbnQgPSByZXF1aXJlKCcuL0NvbnN0cmFpbnQnKTtcbnZhciBXYWxsID0gcmVxdWlyZSgnLi9XYWxsJyk7XG52YXIgVmVjdG9yID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJyk7XG5mdW5jdGlvbiBXYWxscyhvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZShXYWxscy5ERUZBVUxUX09QVElPTlMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgX2NyZWF0ZUNvbXBvbmVudHMuY2FsbCh0aGlzLCBvcHRpb25zLnNpZGVzIHx8IHRoaXMub3B0aW9ucy5zaWRlcyk7XG4gICAgQ29uc3RyYWludC5jYWxsKHRoaXMpO1xufVxuV2FsbHMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDb25zdHJhaW50LnByb3RvdHlwZSk7XG5XYWxscy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBXYWxscztcbldhbGxzLk9OX0NPTlRBQ1QgPSBXYWxsLk9OX0NPTlRBQ1Q7XG5XYWxscy5TSURFUyA9IHtcbiAgICBMRUZUOiAwLFxuICAgIFJJR0hUOiAxLFxuICAgIFRPUDogMixcbiAgICBCT1RUT006IDMsXG4gICAgRlJPTlQ6IDQsXG4gICAgQkFDSzogNSxcbiAgICBUV09fRElNRU5TSU9OQUw6IFtcbiAgICAgICAgMCxcbiAgICAgICAgMSxcbiAgICAgICAgMixcbiAgICAgICAgM1xuICAgIF0sXG4gICAgVEhSRUVfRElNRU5TSU9OQUw6IFtcbiAgICAgICAgMCxcbiAgICAgICAgMSxcbiAgICAgICAgMixcbiAgICAgICAgMyxcbiAgICAgICAgNCxcbiAgICAgICAgNVxuICAgIF1cbn07XG5XYWxscy5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgc2lkZXM6IFdhbGxzLlNJREVTLlRXT19ESU1FTlNJT05BTCxcbiAgICBzaXplOiBbXG4gICAgICAgIHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAgIDBcbiAgICBdLFxuICAgIG9yaWdpbjogW1xuICAgICAgICAwLjUsXG4gICAgICAgIDAuNSxcbiAgICAgICAgMC41XG4gICAgXSxcbiAgICBkcmlmdDogMC41LFxuICAgIHNsb3A6IDAsXG4gICAgcmVzdGl0dXRpb246IDAuNSxcbiAgICBvbkNvbnRhY3Q6IFdhbGxzLk9OX0NPTlRBQ1QuUkVGTEVDVFxufTtcbnZhciBfU0lERV9OT1JNQUxTID0ge1xuICAgICAgICAwOiBuZXcgVmVjdG9yKDEsIDAsIDApLFxuICAgICAgICAxOiBuZXcgVmVjdG9yKC0xLCAwLCAwKSxcbiAgICAgICAgMjogbmV3IFZlY3RvcigwLCAxLCAwKSxcbiAgICAgICAgMzogbmV3IFZlY3RvcigwLCAtMSwgMCksXG4gICAgICAgIDQ6IG5ldyBWZWN0b3IoMCwgMCwgMSksXG4gICAgICAgIDU6IG5ldyBWZWN0b3IoMCwgMCwgLTEpXG4gICAgfTtcbmZ1bmN0aW9uIF9nZXREaXN0YW5jZShzaWRlLCBzaXplLCBvcmlnaW4pIHtcbiAgICB2YXIgZGlzdGFuY2U7XG4gICAgdmFyIFNJREVTID0gV2FsbHMuU0lERVM7XG4gICAgc3dpdGNoIChwYXJzZUludChzaWRlKSkge1xuICAgIGNhc2UgU0lERVMuTEVGVDpcbiAgICAgICAgZGlzdGFuY2UgPSBzaXplWzBdICogb3JpZ2luWzBdO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFNJREVTLlRPUDpcbiAgICAgICAgZGlzdGFuY2UgPSBzaXplWzFdICogb3JpZ2luWzFdO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIFNJREVTLkZST05UOlxuICAgICAgICBkaXN0YW5jZSA9IHNpemVbMl0gKiBvcmlnaW5bMl07XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgU0lERVMuUklHSFQ6XG4gICAgICAgIGRpc3RhbmNlID0gc2l6ZVswXSAqICgxIC0gb3JpZ2luWzBdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBTSURFUy5CT1RUT006XG4gICAgICAgIGRpc3RhbmNlID0gc2l6ZVsxXSAqICgxIC0gb3JpZ2luWzFdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBTSURFUy5CQUNLOlxuICAgICAgICBkaXN0YW5jZSA9IHNpemVbMl0gKiAoMSAtIG9yaWdpblsyXSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gZGlzdGFuY2U7XG59XG5XYWxscy5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHZhciByZXNpemVGbGFnID0gZmFsc2U7XG4gICAgaWYgKG9wdGlvbnMucmVzdGl0dXRpb24gIT09IHVuZGVmaW5lZClcbiAgICAgICAgX3NldE9wdGlvbnNGb3JFYWNoLmNhbGwodGhpcywgeyByZXN0aXR1dGlvbjogb3B0aW9ucy5yZXN0aXR1dGlvbiB9KTtcbiAgICBpZiAob3B0aW9ucy5kcmlmdCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBfc2V0T3B0aW9uc0ZvckVhY2guY2FsbCh0aGlzLCB7IGRyaWZ0OiBvcHRpb25zLmRyaWZ0IH0pO1xuICAgIGlmIChvcHRpb25zLnNsb3AgIT09IHVuZGVmaW5lZClcbiAgICAgICAgX3NldE9wdGlvbnNGb3JFYWNoLmNhbGwodGhpcywgeyBzbG9wOiBvcHRpb25zLnNsb3AgfSk7XG4gICAgaWYgKG9wdGlvbnMub25Db250YWN0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgIF9zZXRPcHRpb25zRm9yRWFjaC5jYWxsKHRoaXMsIHsgb25Db250YWN0OiBvcHRpb25zLm9uQ29udGFjdCB9KTtcbiAgICBpZiAob3B0aW9ucy5zaXplICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHJlc2l6ZUZsYWcgPSB0cnVlO1xuICAgIGlmIChvcHRpb25zLnNpZGVzICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMub3B0aW9ucy5zaWRlcyA9IG9wdGlvbnMuc2lkZXM7XG4gICAgaWYgKG9wdGlvbnMub3JpZ2luICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHJlc2l6ZUZsYWcgPSB0cnVlO1xuICAgIGlmIChyZXNpemVGbGFnKVxuICAgICAgICB0aGlzLnNldFNpemUob3B0aW9ucy5zaXplLCBvcHRpb25zLm9yaWdpbik7XG59O1xuZnVuY3Rpb24gX2NyZWF0ZUNvbXBvbmVudHMoc2lkZXMpIHtcbiAgICB0aGlzLmNvbXBvbmVudHMgPSB7fTtcbiAgICB2YXIgY29tcG9uZW50cyA9IHRoaXMuY29tcG9uZW50cztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzaWRlID0gc2lkZXNbaV07XG4gICAgICAgIGNvbXBvbmVudHNbaV0gPSBuZXcgV2FsbCh7XG4gICAgICAgICAgICBub3JtYWw6IF9TSURFX05PUk1BTFNbc2lkZV0uY2xvbmUoKSxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBfZ2V0RGlzdGFuY2Uoc2lkZSwgdGhpcy5vcHRpb25zLnNpemUsIHRoaXMub3B0aW9ucy5vcmlnaW4pXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbldhbGxzLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gc2V0U2l6ZShzaXplLCBvcmlnaW4pIHtcbiAgICBvcmlnaW4gPSBvcmlnaW4gfHwgdGhpcy5vcHRpb25zLm9yaWdpbjtcbiAgICBpZiAob3JpZ2luLmxlbmd0aCA8IDMpXG4gICAgICAgIG9yaWdpblsyXSA9IDAuNTtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHdhbGwsIHNpZGUpIHtcbiAgICAgICAgdmFyIGQgPSBfZ2V0RGlzdGFuY2Uoc2lkZSwgc2l6ZSwgb3JpZ2luKTtcbiAgICAgICAgd2FsbC5zZXRPcHRpb25zKHsgZGlzdGFuY2U6IGQgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5vcHRpb25zLnNpemUgPSBzaXplO1xuICAgIHRoaXMub3B0aW9ucy5vcmlnaW4gPSBvcmlnaW47XG59O1xuZnVuY3Rpb24gX3NldE9wdGlvbnNGb3JFYWNoKG9wdGlvbnMpIHtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHdhbGwpIHtcbiAgICAgICAgd2FsbC5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIH0pO1xuICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKVxuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcbn1cbldhbGxzLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnQgPSBmdW5jdGlvbiBhcHBseUNvbnN0cmFpbnQodGFyZ2V0cywgc291cmNlLCBkdCkge1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAod2FsbCkge1xuICAgICAgICB3YWxsLmFwcGx5Q29uc3RyYWludCh0YXJnZXRzLCBzb3VyY2UsIGR0KTtcbiAgICB9KTtcbn07XG5XYWxscy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZm4pIHtcbiAgICB2YXIgc2lkZXMgPSB0aGlzLm9wdGlvbnMuc2lkZXM7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuc2lkZXMpXG4gICAgICAgIGZuKHNpZGVzW2tleV0sIGtleSk7XG59O1xuV2FsbHMucHJvdG90eXBlLnJvdGF0ZVogPSBmdW5jdGlvbiByb3RhdGVaKGFuZ2xlKSB7XG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh3YWxsKSB7XG4gICAgICAgIHZhciBuID0gd2FsbC5vcHRpb25zLm5vcm1hbDtcbiAgICAgICAgbi5yb3RhdGVaKGFuZ2xlKS5wdXQobik7XG4gICAgfSk7XG59O1xuV2FsbHMucHJvdG90eXBlLnJvdGF0ZVggPSBmdW5jdGlvbiByb3RhdGVYKGFuZ2xlKSB7XG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh3YWxsKSB7XG4gICAgICAgIHZhciBuID0gd2FsbC5vcHRpb25zLm5vcm1hbDtcbiAgICAgICAgbi5yb3RhdGVYKGFuZ2xlKS5wdXQobik7XG4gICAgfSk7XG59O1xuV2FsbHMucHJvdG90eXBlLnJvdGF0ZVkgPSBmdW5jdGlvbiByb3RhdGVZKGFuZ2xlKSB7XG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh3YWxsKSB7XG4gICAgICAgIHZhciBuID0gd2FsbC5vcHRpb25zLm5vcm1hbDtcbiAgICAgICAgbi5yb3RhdGVZKGFuZ2xlKS5wdXQobik7XG4gICAgfSk7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBXYWxsczsiLCJ2YXIgRm9yY2UgPSByZXF1aXJlKCcuL0ZvcmNlJyk7XG5mdW5jdGlvbiBEcmFnKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKHRoaXMuY29uc3RydWN0b3IuREVGQVVMVF9PUFRJT05TKTtcbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIEZvcmNlLmNhbGwodGhpcyk7XG59XG5EcmFnLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRm9yY2UucHJvdG90eXBlKTtcbkRyYWcucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZztcbkRyYWcuRk9SQ0VfRlVOQ1RJT05TID0ge1xuICAgIExJTkVBUjogZnVuY3Rpb24gKHZlbG9jaXR5KSB7XG4gICAgICAgIHJldHVybiB2ZWxvY2l0eTtcbiAgICB9LFxuICAgIFFVQURSQVRJQzogZnVuY3Rpb24gKHZlbG9jaXR5KSB7XG4gICAgICAgIHJldHVybiB2ZWxvY2l0eS5tdWx0KHZlbG9jaXR5Lm5vcm0oKSk7XG4gICAgfVxufTtcbkRyYWcuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIHN0cmVuZ3RoOiAwLjAxLFxuICAgIGZvcmNlRnVuY3Rpb246IERyYWcuRk9SQ0VfRlVOQ1RJT05TLkxJTkVBUlxufTtcbkRyYWcucHJvdG90eXBlLmFwcGx5Rm9yY2UgPSBmdW5jdGlvbiBhcHBseUZvcmNlKHRhcmdldHMpIHtcbiAgICB2YXIgc3RyZW5ndGggPSB0aGlzLm9wdGlvbnMuc3RyZW5ndGg7XG4gICAgdmFyIGZvcmNlRnVuY3Rpb24gPSB0aGlzLm9wdGlvbnMuZm9yY2VGdW5jdGlvbjtcbiAgICB2YXIgZm9yY2UgPSB0aGlzLmZvcmNlO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgcGFydGljbGUgPSB0YXJnZXRzW2luZGV4XTtcbiAgICAgICAgZm9yY2VGdW5jdGlvbihwYXJ0aWNsZS52ZWxvY2l0eSkubXVsdCgtc3RyZW5ndGgpLnB1dChmb3JjZSk7XG4gICAgICAgIHBhcnRpY2xlLmFwcGx5Rm9yY2UoZm9yY2UpO1xuICAgIH1cbn07XG5EcmFnLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpXG4gICAgICAgIHRoaXMub3B0aW9uc1trZXldID0gb3B0aW9uc1trZXldO1xufTtcbm1vZHVsZS5leHBvcnRzID0gRHJhZzsiLCJ2YXIgVmVjdG9yID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJyk7XG52YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG5mdW5jdGlvbiBGb3JjZShmb3JjZSkge1xuICAgIHRoaXMuZm9yY2UgPSBuZXcgVmVjdG9yKGZvcmNlKTtcbiAgICB0aGlzLl9ldmVudE91dHB1dCA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgICBFdmVudEhhbmRsZXIuc2V0T3V0cHV0SGFuZGxlcih0aGlzLCB0aGlzLl9ldmVudE91dHB1dCk7XG59XG5Gb3JjZS5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ2NoYW5nZScsIG9wdGlvbnMpO1xufTtcbkZvcmNlLnByb3RvdHlwZS5hcHBseUZvcmNlID0gZnVuY3Rpb24gYXBwbHlGb3JjZShib2R5KSB7XG4gICAgYm9keS5hcHBseUZvcmNlKHRoaXMuZm9yY2UpO1xufTtcbkZvcmNlLnByb3RvdHlwZS5nZXRFbmVyZ3kgPSBmdW5jdGlvbiBnZXRFbmVyZ3koKSB7XG4gICAgcmV0dXJuIDA7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBGb3JjZTsiLCJ2YXIgRm9yY2UgPSByZXF1aXJlKCcuL0ZvcmNlJyk7XG52YXIgVmVjdG9yID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJyk7XG5mdW5jdGlvbiBSZXB1bHNpb24ob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoUmVwdWxzaW9uLkRFRkFVTFRfT1BUSU9OUyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLmRpc3AgPSBuZXcgVmVjdG9yKCk7XG4gICAgRm9yY2UuY2FsbCh0aGlzKTtcbn1cblJlcHVsc2lvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEZvcmNlLnByb3RvdHlwZSk7XG5SZXB1bHNpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVwdWxzaW9uO1xuUmVwdWxzaW9uLkRFQ0FZX0ZVTkNUSU9OUyA9IHtcbiAgICBMSU5FQVI6IGZ1bmN0aW9uIChyLCBjdXRvZmYpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDEgLSAxIC8gY3V0b2ZmICogciwgMCk7XG4gICAgfSxcbiAgICBNT1JTRTogZnVuY3Rpb24gKHIsIGN1dG9mZikge1xuICAgICAgICB2YXIgcjAgPSBjdXRvZmYgPT09IDAgPyAxMDAgOiBjdXRvZmY7XG4gICAgICAgIHZhciByU2hpZnRlZCA9IHIgKyByMCAqICgxIC0gTWF0aC5sb2coMikpO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMSAtIE1hdGgucG93KDEgLSBNYXRoLmV4cChyU2hpZnRlZCAvIHIwIC0gMSksIDIpLCAwKTtcbiAgICB9LFxuICAgIElOVkVSU0U6IGZ1bmN0aW9uIChyLCBjdXRvZmYpIHtcbiAgICAgICAgcmV0dXJuIDEgLyAoMSAtIGN1dG9mZiArIHIpO1xuICAgIH0sXG4gICAgR1JBVklUWTogZnVuY3Rpb24gKHIsIGN1dG9mZikge1xuICAgICAgICByZXR1cm4gMSAvICgxIC0gY3V0b2ZmICsgciAqIHIpO1xuICAgIH1cbn07XG5SZXB1bHNpb24uREVGQVVMVF9PUFRJT05TID0ge1xuICAgIHN0cmVuZ3RoOiAxLFxuICAgIGFuY2hvcjogdW5kZWZpbmVkLFxuICAgIHJhbmdlOiBbXG4gICAgICAgIDAsXG4gICAgICAgIEluZmluaXR5XG4gICAgXSxcbiAgICBjdXRvZmY6IDAsXG4gICAgY2FwOiBJbmZpbml0eSxcbiAgICBkZWNheUZ1bmN0aW9uOiBSZXB1bHNpb24uREVDQVlfRlVOQ1RJT05TLkdSQVZJVFlcbn07XG5SZXB1bHNpb24ucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5hbmNob3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob3B0aW9ucy5hbmNob3IucG9zaXRpb24gaW5zdGFuY2VvZiBWZWN0b3IpXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYW5jaG9yID0gb3B0aW9ucy5hbmNob3IucG9zaXRpb247XG4gICAgICAgIGlmIChvcHRpb25zLmFuY2hvciBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFuY2hvciA9IG5ldyBWZWN0b3Iob3B0aW9ucy5hbmNob3IpO1xuICAgICAgICBkZWxldGUgb3B0aW9ucy5hbmNob3I7XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKVxuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IG9wdGlvbnNba2V5XTtcbn07XG5SZXB1bHNpb24ucHJvdG90eXBlLmFwcGx5Rm9yY2UgPSBmdW5jdGlvbiBhcHBseUZvcmNlKHRhcmdldHMsIHNvdXJjZSkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIHZhciBmb3JjZSA9IHRoaXMuZm9yY2U7XG4gICAgdmFyIGRpc3AgPSB0aGlzLmRpc3A7XG4gICAgdmFyIHN0cmVuZ3RoID0gb3B0aW9ucy5zdHJlbmd0aDtcbiAgICB2YXIgYW5jaG9yID0gb3B0aW9ucy5hbmNob3IgfHwgc291cmNlLnBvc2l0aW9uO1xuICAgIHZhciBjYXAgPSBvcHRpb25zLmNhcDtcbiAgICB2YXIgY3V0b2ZmID0gb3B0aW9ucy5jdXRvZmY7XG4gICAgdmFyIHJNaW4gPSBvcHRpb25zLnJhbmdlWzBdO1xuICAgIHZhciByTWF4ID0gb3B0aW9ucy5yYW5nZVsxXTtcbiAgICB2YXIgZGVjYXlGbiA9IG9wdGlvbnMuZGVjYXlGdW5jdGlvbjtcbiAgICBpZiAoc3RyZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybjtcbiAgICBmb3IgKHZhciBpbmRleCBpbiB0YXJnZXRzKSB7XG4gICAgICAgIHZhciBwYXJ0aWNsZSA9IHRhcmdldHNbaW5kZXhdO1xuICAgICAgICBpZiAocGFydGljbGUgPT09IHNvdXJjZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB2YXIgbTEgPSBwYXJ0aWNsZS5tYXNzO1xuICAgICAgICB2YXIgcDEgPSBwYXJ0aWNsZS5wb3NpdGlvbjtcbiAgICAgICAgZGlzcC5zZXQocDEuc3ViKGFuY2hvcikpO1xuICAgICAgICB2YXIgciA9IGRpc3Aubm9ybSgpO1xuICAgICAgICBpZiAociA8IHJNYXggJiYgciA+IHJNaW4pIHtcbiAgICAgICAgICAgIGZvcmNlLnNldChkaXNwLm5vcm1hbGl6ZShzdHJlbmd0aCAqIG0xICogZGVjYXlGbihyLCBjdXRvZmYpKS5jYXAoY2FwKSk7XG4gICAgICAgICAgICBwYXJ0aWNsZS5hcHBseUZvcmNlKGZvcmNlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IFJlcHVsc2lvbjsiLCJ2YXIgRHJhZyA9IHJlcXVpcmUoJy4vRHJhZycpO1xuZnVuY3Rpb24gUm90YXRpb25hbERyYWcob3B0aW9ucykge1xuICAgIERyYWcuY2FsbCh0aGlzLCBvcHRpb25zKTtcbn1cblJvdGF0aW9uYWxEcmFnLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRHJhZy5wcm90b3R5cGUpO1xuUm90YXRpb25hbERyYWcucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUm90YXRpb25hbERyYWc7XG5Sb3RhdGlvbmFsRHJhZy5ERUZBVUxUX09QVElPTlMgPSBEcmFnLkRFRkFVTFRfT1BUSU9OUztcblJvdGF0aW9uYWxEcmFnLkZPUkNFX0ZVTkNUSU9OUyA9IERyYWcuRk9SQ0VfRlVOQ1RJT05TO1xuUm90YXRpb25hbERyYWcuRk9SQ0VfRlVOQ1RJT05TID0ge1xuICAgIExJTkVBUjogZnVuY3Rpb24gKGFuZ3VsYXJWZWxvY2l0eSkge1xuICAgICAgICByZXR1cm4gYW5ndWxhclZlbG9jaXR5O1xuICAgIH0sXG4gICAgUVVBRFJBVElDOiBmdW5jdGlvbiAoYW5ndWxhclZlbG9jaXR5KSB7XG4gICAgICAgIHJldHVybiBhbmd1bGFyVmVsb2NpdHkubXVsdChhbmd1bGFyVmVsb2NpdHkubm9ybSgpKTtcbiAgICB9XG59O1xuUm90YXRpb25hbERyYWcucHJvdG90eXBlLmFwcGx5Rm9yY2UgPSBmdW5jdGlvbiBhcHBseUZvcmNlKHRhcmdldHMpIHtcbiAgICB2YXIgc3RyZW5ndGggPSB0aGlzLm9wdGlvbnMuc3RyZW5ndGg7XG4gICAgdmFyIGZvcmNlRnVuY3Rpb24gPSB0aGlzLm9wdGlvbnMuZm9yY2VGdW5jdGlvbjtcbiAgICB2YXIgZm9yY2UgPSB0aGlzLmZvcmNlO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgcGFydGljbGUgPSB0YXJnZXRzW2luZGV4XTtcbiAgICAgICAgZm9yY2VGdW5jdGlvbihwYXJ0aWNsZS5hbmd1bGFyVmVsb2NpdHkpLm11bHQoLTEwMCAqIHN0cmVuZ3RoKS5wdXQoZm9yY2UpO1xuICAgICAgICBwYXJ0aWNsZS5hcHBseVRvcnF1ZShmb3JjZSk7XG4gICAgfVxufTtcblJvdGF0aW9uYWxEcmFnLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpXG4gICAgICAgIHRoaXMub3B0aW9uc1trZXldID0gb3B0aW9uc1trZXldO1xufTtcbm1vZHVsZS5leHBvcnRzID0gUm90YXRpb25hbERyYWc7IiwidmFyIEZvcmNlID0gcmVxdWlyZSgnLi9Gb3JjZScpO1xudmFyIFNwcmluZyA9IHJlcXVpcmUoJy4vU3ByaW5nJyk7XG52YXIgUXVhdGVybmlvbiA9IHJlcXVpcmUoJ2ZhbW91cy9tYXRoL1F1YXRlcm5pb24nKTtcbmZ1bmN0aW9uIFJvdGF0aW9uYWxTcHJpbmcob3B0aW9ucykge1xuICAgIFNwcmluZy5jYWxsKHRoaXMsIG9wdGlvbnMpO1xufVxuUm90YXRpb25hbFNwcmluZy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNwcmluZy5wcm90b3R5cGUpO1xuUm90YXRpb25hbFNwcmluZy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSb3RhdGlvbmFsU3ByaW5nO1xuUm90YXRpb25hbFNwcmluZy5ERUZBVUxUX09QVElPTlMgPSBTcHJpbmcuREVGQVVMVF9PUFRJT05TO1xuUm90YXRpb25hbFNwcmluZy5GT1JDRV9GVU5DVElPTlMgPSBTcHJpbmcuRk9SQ0VfRlVOQ1RJT05TO1xudmFyIHBpID0gTWF0aC5QSTtcbmZ1bmN0aW9uIF9jYWxjU3RpZmZuZXNzKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIG9wdGlvbnMuc3RpZmZuZXNzID0gTWF0aC5wb3coMiAqIHBpIC8gb3B0aW9ucy5wZXJpb2QsIDIpO1xufVxuZnVuY3Rpb24gX2NhbGNEYW1waW5nKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIG9wdGlvbnMuZGFtcGluZyA9IDQgKiBwaSAqIG9wdGlvbnMuZGFtcGluZ1JhdGlvIC8gb3B0aW9ucy5wZXJpb2Q7XG59XG5mdW5jdGlvbiBfaW5pdCgpIHtcbiAgICBfY2FsY1N0aWZmbmVzcy5jYWxsKHRoaXMpO1xuICAgIF9jYWxjRGFtcGluZy5jYWxsKHRoaXMpO1xufVxuUm90YXRpb25hbFNwcmluZy5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmFuY2hvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmFuY2hvciBpbnN0YW5jZW9mIFF1YXRlcm5pb24pXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYW5jaG9yID0gb3B0aW9ucy5hbmNob3I7XG4gICAgICAgIGlmIChvcHRpb25zLmFuY2hvciBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFuY2hvciA9IG5ldyBRdWF0ZXJuaW9uKG9wdGlvbnMuYW5jaG9yKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucGVyaW9kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnBlcmlvZCA9IG9wdGlvbnMucGVyaW9kO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5kYW1waW5nUmF0aW8gIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLmRhbXBpbmdSYXRpbyA9IG9wdGlvbnMuZGFtcGluZ1JhdGlvO1xuICAgIGlmIChvcHRpb25zLmxlbmd0aCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLm9wdGlvbnMubGVuZ3RoID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgaWYgKG9wdGlvbnMuZm9yY2VGdW5jdGlvbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLm9wdGlvbnMuZm9yY2VGdW5jdGlvbiA9IG9wdGlvbnMuZm9yY2VGdW5jdGlvbjtcbiAgICBpZiAob3B0aW9ucy5tYXhMZW5ndGggIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLm1heExlbmd0aCA9IG9wdGlvbnMubWF4TGVuZ3RoO1xuICAgIF9pbml0LmNhbGwodGhpcyk7XG4gICAgRm9yY2UucHJvdG90eXBlLnNldE9wdGlvbnMuY2FsbCh0aGlzLCBvcHRpb25zKTtcbn07XG5Sb3RhdGlvbmFsU3ByaW5nLnByb3RvdHlwZS5hcHBseUZvcmNlID0gZnVuY3Rpb24gYXBwbHlGb3JjZSh0YXJnZXRzKSB7XG4gICAgdmFyIGZvcmNlID0gdGhpcy5mb3JjZTtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICB2YXIgZGlzcCA9IHRoaXMuZGlzcDtcbiAgICB2YXIgc3RpZmZuZXNzID0gb3B0aW9ucy5zdGlmZm5lc3M7XG4gICAgdmFyIGRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmc7XG4gICAgdmFyIHJlc3RMZW5ndGggPSBvcHRpb25zLmxlbmd0aDtcbiAgICB2YXIgYW5jaG9yID0gb3B0aW9ucy5hbmNob3I7XG4gICAgdmFyIGZvcmNlRnVuY3Rpb24gPSBvcHRpb25zLmZvcmNlRnVuY3Rpb247XG4gICAgdmFyIG1heExlbmd0aCA9IG9wdGlvbnMubWF4TGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGFyZ2V0c1tpXTtcbiAgICAgICAgZGlzcC5zZXQoYW5jaG9yLnN1Yih0YXJnZXQub3JpZW50YXRpb24pKTtcbiAgICAgICAgdmFyIGRpc3QgPSBkaXNwLm5vcm0oKSAtIHJlc3RMZW5ndGg7XG4gICAgICAgIGlmIChkaXN0ID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgbSA9IHRhcmdldC5tYXNzO1xuICAgICAgICBzdGlmZm5lc3MgKj0gbTtcbiAgICAgICAgZGFtcGluZyAqPSBtO1xuICAgICAgICBmb3JjZS5zZXQoZGlzcC5ub3JtYWxpemUoc3RpZmZuZXNzICogZm9yY2VGdW5jdGlvbihkaXN0LCBtYXhMZW5ndGgpKSk7XG4gICAgICAgIGlmIChkYW1waW5nKVxuICAgICAgICAgICAgZm9yY2UuYWRkKHRhcmdldC5hbmd1bGFyVmVsb2NpdHkubXVsdCgtZGFtcGluZykpLnB1dChmb3JjZSk7XG4gICAgICAgIHRhcmdldC5hcHBseVRvcnF1ZShmb3JjZSk7XG4gICAgfVxufTtcblJvdGF0aW9uYWxTcHJpbmcucHJvdG90eXBlLmdldEVuZXJneSA9IGZ1bmN0aW9uIGdldEVuZXJneSh0YXJnZXRzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgdmFyIHJlc3RMZW5ndGggPSBvcHRpb25zLmxlbmd0aDtcbiAgICB2YXIgYW5jaG9yID0gb3B0aW9ucy5hbmNob3I7XG4gICAgdmFyIHN0cmVuZ3RoID0gb3B0aW9ucy5zdGlmZm5lc3M7XG4gICAgdmFyIGVuZXJneSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXRzW2ldO1xuICAgICAgICB2YXIgZGlzdCA9IGFuY2hvci5zdWIodGFyZ2V0Lm9yaWVudGF0aW9uKS5ub3JtKCkgLSByZXN0TGVuZ3RoO1xuICAgICAgICBlbmVyZ3kgKz0gMC41ICogc3RyZW5ndGggKiBkaXN0ICogZGlzdDtcbiAgICB9XG4gICAgcmV0dXJuIGVuZXJneTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFJvdGF0aW9uYWxTcHJpbmc7IiwidmFyIEZvcmNlID0gcmVxdWlyZSgnLi9Gb3JjZScpO1xudmFyIFZlY3RvciA9IHJlcXVpcmUoJ2ZhbW91cy9tYXRoL1ZlY3RvcicpO1xuZnVuY3Rpb24gU3ByaW5nKG9wdGlvbnMpIHtcbiAgICBGb3JjZS5jYWxsKHRoaXMpO1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUodGhpcy5jb25zdHJ1Y3Rvci5ERUZBVUxUX09QVElPTlMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5kaXNwID0gbmV3IFZlY3RvcigwLCAwLCAwKTtcbiAgICBfaW5pdC5jYWxsKHRoaXMpO1xufVxuU3ByaW5nLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRm9yY2UucHJvdG90eXBlKTtcblNwcmluZy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTcHJpbmc7XG52YXIgcGkgPSBNYXRoLlBJO1xudmFyIE1JTl9QRVJJT0QgPSAxNTA7XG5TcHJpbmcuRk9SQ0VfRlVOQ1RJT05TID0ge1xuICAgIEZFTkU6IGZ1bmN0aW9uIChkaXN0LCByTWF4KSB7XG4gICAgICAgIHZhciByTWF4U21hbGwgPSByTWF4ICogMC45OTtcbiAgICAgICAgdmFyIHIgPSBNYXRoLm1heChNYXRoLm1pbihkaXN0LCByTWF4U21hbGwpLCAtck1heFNtYWxsKTtcbiAgICAgICAgcmV0dXJuIHIgLyAoMSAtIHIgKiByIC8gKHJNYXggKiByTWF4KSk7XG4gICAgfSxcbiAgICBIT09LOiBmdW5jdGlvbiAoZGlzdCkge1xuICAgICAgICByZXR1cm4gZGlzdDtcbiAgICB9XG59O1xuU3ByaW5nLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBwZXJpb2Q6IDMwMCxcbiAgICBkYW1waW5nUmF0aW86IDAuMSxcbiAgICBsZW5ndGg6IDAsXG4gICAgbWF4TGVuZ3RoOiBJbmZpbml0eSxcbiAgICBhbmNob3I6IHVuZGVmaW5lZCxcbiAgICBmb3JjZUZ1bmN0aW9uOiBTcHJpbmcuRk9SQ0VfRlVOQ1RJT05TLkhPT0tcbn07XG5mdW5jdGlvbiBfY2FsY1N0aWZmbmVzcygpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICBvcHRpb25zLnN0aWZmbmVzcyA9IE1hdGgucG93KDIgKiBwaSAvIG9wdGlvbnMucGVyaW9kLCAyKTtcbn1cbmZ1bmN0aW9uIF9jYWxjRGFtcGluZygpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICBvcHRpb25zLmRhbXBpbmcgPSA0ICogcGkgKiBvcHRpb25zLmRhbXBpbmdSYXRpbyAvIG9wdGlvbnMucGVyaW9kO1xufVxuZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgX2NhbGNTdGlmZm5lc3MuY2FsbCh0aGlzKTtcbiAgICBfY2FsY0RhbXBpbmcuY2FsbCh0aGlzKTtcbn1cblNwcmluZy5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmFuY2hvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmFuY2hvci5wb3NpdGlvbiBpbnN0YW5jZW9mIFZlY3RvcilcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5hbmNob3IgPSBvcHRpb25zLmFuY2hvci5wb3NpdGlvbjtcbiAgICAgICAgaWYgKG9wdGlvbnMuYW5jaG9yIGluc3RhbmNlb2YgVmVjdG9yKVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFuY2hvciA9IG9wdGlvbnMuYW5jaG9yO1xuICAgICAgICBpZiAob3B0aW9ucy5hbmNob3IgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5hbmNob3IgPSBuZXcgVmVjdG9yKG9wdGlvbnMuYW5jaG9yKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucGVyaW9kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMucGVyaW9kIDwgTUlOX1BFUklPRCkge1xuICAgICAgICAgICAgb3B0aW9ucy5wZXJpb2QgPSBNSU5fUEVSSU9EO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGUgcGVyaW9kIG9mIGEgU3ByaW5nVHJhbnNpdGlvbiBpcyBjYXBwZWQgYXQgJyArIE1JTl9QRVJJT0QgKyAnIG1zLiBVc2UgYSBTbmFwVHJhbnNpdGlvbiBmb3IgZmFzdGVyIHRyYW5zaXRpb25zJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcHRpb25zLnBlcmlvZCA9IG9wdGlvbnMucGVyaW9kO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5kYW1waW5nUmF0aW8gIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLmRhbXBpbmdSYXRpbyA9IG9wdGlvbnMuZGFtcGluZ1JhdGlvO1xuICAgIGlmIChvcHRpb25zLmxlbmd0aCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLm9wdGlvbnMubGVuZ3RoID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgaWYgKG9wdGlvbnMuZm9yY2VGdW5jdGlvbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLm9wdGlvbnMuZm9yY2VGdW5jdGlvbiA9IG9wdGlvbnMuZm9yY2VGdW5jdGlvbjtcbiAgICBpZiAob3B0aW9ucy5tYXhMZW5ndGggIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLm1heExlbmd0aCA9IG9wdGlvbnMubWF4TGVuZ3RoO1xuICAgIF9pbml0LmNhbGwodGhpcyk7XG4gICAgRm9yY2UucHJvdG90eXBlLnNldE9wdGlvbnMuY2FsbCh0aGlzLCBvcHRpb25zKTtcbn07XG5TcHJpbmcucHJvdG90eXBlLmFwcGx5Rm9yY2UgPSBmdW5jdGlvbiBhcHBseUZvcmNlKHRhcmdldHMsIHNvdXJjZSkge1xuICAgIHZhciBmb3JjZSA9IHRoaXMuZm9yY2U7XG4gICAgdmFyIGRpc3AgPSB0aGlzLmRpc3A7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgdmFyIHN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzO1xuICAgIHZhciBkYW1waW5nID0gb3B0aW9ucy5kYW1waW5nO1xuICAgIHZhciByZXN0TGVuZ3RoID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgdmFyIG1heExlbmd0aCA9IG9wdGlvbnMubWF4TGVuZ3RoO1xuICAgIHZhciBhbmNob3IgPSBvcHRpb25zLmFuY2hvciB8fCBzb3VyY2UucG9zaXRpb247XG4gICAgdmFyIGZvcmNlRnVuY3Rpb24gPSBvcHRpb25zLmZvcmNlRnVuY3Rpb247XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXRzW2ldO1xuICAgICAgICB2YXIgcDIgPSB0YXJnZXQucG9zaXRpb247XG4gICAgICAgIHZhciB2MiA9IHRhcmdldC52ZWxvY2l0eTtcbiAgICAgICAgYW5jaG9yLnN1YihwMikucHV0KGRpc3ApO1xuICAgICAgICB2YXIgZGlzdCA9IGRpc3Aubm9ybSgpIC0gcmVzdExlbmd0aDtcbiAgICAgICAgaWYgKGRpc3QgPT09IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBtID0gdGFyZ2V0Lm1hc3M7XG4gICAgICAgIHN0aWZmbmVzcyAqPSBtO1xuICAgICAgICBkYW1waW5nICo9IG07XG4gICAgICAgIGRpc3Aubm9ybWFsaXplKHN0aWZmbmVzcyAqIGZvcmNlRnVuY3Rpb24oZGlzdCwgbWF4TGVuZ3RoKSkucHV0KGZvcmNlKTtcbiAgICAgICAgaWYgKGRhbXBpbmcpXG4gICAgICAgICAgICBpZiAoc291cmNlKVxuICAgICAgICAgICAgICAgIGZvcmNlLmFkZCh2Mi5zdWIoc291cmNlLnZlbG9jaXR5KS5tdWx0KC1kYW1waW5nKSkucHV0KGZvcmNlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBmb3JjZS5hZGQodjIubXVsdCgtZGFtcGluZykpLnB1dChmb3JjZSk7XG4gICAgICAgIHRhcmdldC5hcHBseUZvcmNlKGZvcmNlKTtcbiAgICAgICAgaWYgKHNvdXJjZSlcbiAgICAgICAgICAgIHNvdXJjZS5hcHBseUZvcmNlKGZvcmNlLm11bHQoLTEpKTtcbiAgICB9XG59O1xuU3ByaW5nLnByb3RvdHlwZS5nZXRFbmVyZ3kgPSBmdW5jdGlvbiBnZXRFbmVyZ3kodGFyZ2V0cywgc291cmNlKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgdmFyIHJlc3RMZW5ndGggPSBvcHRpb25zLmxlbmd0aDtcbiAgICB2YXIgYW5jaG9yID0gc291cmNlID8gc291cmNlLnBvc2l0aW9uIDogb3B0aW9ucy5hbmNob3I7XG4gICAgdmFyIHN0cmVuZ3RoID0gb3B0aW9ucy5zdGlmZm5lc3M7XG4gICAgdmFyIGVuZXJneSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXRzW2ldO1xuICAgICAgICB2YXIgZGlzdCA9IGFuY2hvci5zdWIodGFyZ2V0LnBvc2l0aW9uKS5ub3JtKCkgLSByZXN0TGVuZ3RoO1xuICAgICAgICBlbmVyZ3kgKz0gMC41ICogc3RyZW5ndGggKiBkaXN0ICogZGlzdDtcbiAgICB9XG4gICAgcmV0dXJuIGVuZXJneTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFNwcmluZzsiLCJ2YXIgRm9yY2UgPSByZXF1aXJlKCcuL0ZvcmNlJyk7XG52YXIgVmVjdG9yID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJyk7XG5mdW5jdGlvbiBWZWN0b3JGaWVsZChvcHRpb25zKSB7XG4gICAgRm9yY2UuY2FsbCh0aGlzKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFZlY3RvckZpZWxkLkRFRkFVTFRfT1BUSU9OUyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLmV2YWx1YXRpb24gPSBuZXcgVmVjdG9yKCk7XG59XG5WZWN0b3JGaWVsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEZvcmNlLnByb3RvdHlwZSk7XG5WZWN0b3JGaWVsZC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBWZWN0b3JGaWVsZDtcblZlY3RvckZpZWxkLkZJRUxEUyA9IHtcbiAgICBDT05TVEFOVDogZnVuY3Rpb24gKHYsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5kaXJlY3Rpb24ucHV0KHRoaXMuZXZhbHVhdGlvbik7XG4gICAgfSxcbiAgICBMSU5FQVI6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHYucHV0KHRoaXMuZXZhbHVhdGlvbik7XG4gICAgfSxcbiAgICBSQURJQUw6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHYubXVsdCgtMSkucHV0KHRoaXMuZXZhbHVhdGlvbik7XG4gICAgfSxcbiAgICBQT0lOVF9BVFRSQUNUT1I6IGZ1bmN0aW9uICh2LCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMucG9zaXRpb24uc3ViKHYpLnB1dCh0aGlzLmV2YWx1YXRpb24pO1xuICAgIH1cbn07XG5WZWN0b3JGaWVsZC5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgc3RyZW5ndGg6IDAuMDEsXG4gICAgZmllbGQ6IFZlY3RvckZpZWxkLkZJRUxEUy5DT05TVEFOVFxufTtcblZlY3RvckZpZWxkLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuc3RyZW5ndGggIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLnN0cmVuZ3RoID0gb3B0aW9ucy5zdHJlbmd0aDtcbiAgICBpZiAob3B0aW9ucy5maWVsZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5maWVsZCA9IG9wdGlvbnMuZmllbGQ7XG4gICAgICAgIF9zZXRGaWVsZE9wdGlvbnMuY2FsbCh0aGlzLCB0aGlzLm9wdGlvbnMuZmllbGQpO1xuICAgIH1cbn07XG5mdW5jdGlvbiBfc2V0RmllbGRPcHRpb25zKGZpZWxkKSB7XG4gICAgdmFyIEZJRUxEUyA9IFZlY3RvckZpZWxkLkZJRUxEUztcbiAgICBzd2l0Y2ggKGZpZWxkKSB7XG4gICAgY2FzZSBGSUVMRFMuQ09OU1RBTlQ6XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRpcmVjdGlvbilcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gPSBuZXcgVmVjdG9yKDAsIDEsIDApO1xuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uID0gbmV3IFZlY3Rvcih0aGlzLm9wdGlvbnMuZGlyZWN0aW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBGSUVMRFMuUE9JTlRfQVRUUkFDVE9SOlxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5wb3NpdGlvbilcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9IG5ldyBWZWN0b3IoMCwgMCwgMCk7XG4gICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy5wb3NpdGlvbiBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnBvc2l0aW9uID0gbmV3IFZlY3Rvcih0aGlzLm9wdGlvbnMucG9zaXRpb24pO1xuICAgICAgICBicmVhaztcbiAgICB9XG59XG5WZWN0b3JGaWVsZC5wcm90b3R5cGUuYXBwbHlGb3JjZSA9IGZ1bmN0aW9uIGFwcGx5Rm9yY2UodGFyZ2V0cykge1xuICAgIHZhciBmb3JjZSA9IHRoaXMuZm9yY2U7XG4gICAgdmFyIHN0cmVuZ3RoID0gdGhpcy5vcHRpb25zLnN0cmVuZ3RoO1xuICAgIHZhciBmaWVsZCA9IHRoaXMub3B0aW9ucy5maWVsZDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldHNbaV07XG4gICAgICAgIGZpZWxkLmNhbGwodGhpcywgdGFyZ2V0LnBvc2l0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB0aGlzLmV2YWx1YXRpb24ubXVsdCh0YXJnZXQubWFzcyAqIHN0cmVuZ3RoKS5wdXQoZm9yY2UpO1xuICAgICAgICB0YXJnZXQuYXBwbHlGb3JjZShmb3JjZSk7XG4gICAgfVxufTtcblZlY3RvckZpZWxkLnByb3RvdHlwZS5nZXRFbmVyZ3kgPSBmdW5jdGlvbiBnZXRFbmVyZ3kodGFyZ2V0cykge1xuICAgIHZhciBmaWVsZCA9IHRoaXMub3B0aW9ucy5maWVsZDtcbiAgICB2YXIgRklFTERTID0gVmVjdG9yRmllbGQuRklFTERTO1xuICAgIHZhciBlbmVyZ3kgPSAwO1xuICAgIHZhciBpO1xuICAgIHZhciB0YXJnZXQ7XG4gICAgc3dpdGNoIChmaWVsZCkge1xuICAgIGNhc2UgRklFTERTLkNPTlNUQU5UOlxuICAgICAgICBlbmVyZ3kgPSB0YXJnZXRzLmxlbmd0aCAqIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24ubm9ybSgpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlIEZJRUxEUy5SQURJQUw6XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXRzW2ldO1xuICAgICAgICAgICAgZW5lcmd5ICs9IHRhcmdldC5wb3NpdGlvbi5ub3JtKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgY2FzZSBGSUVMRFMuUE9JTlRfQVRUUkFDVE9SOlxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0c1tpXTtcbiAgICAgICAgICAgIGVuZXJneSArPSB0YXJnZXQucG9zaXRpb24uc3ViKHRoaXMub3B0aW9ucy5wb3NpdGlvbikubm9ybSgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBlbmVyZ3kgKj0gdGhpcy5vcHRpb25zLnN0cmVuZ3RoO1xuICAgIHJldHVybiBlbmVyZ3k7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBWZWN0b3JGaWVsZDsiLCJ2YXIgU3ltcGxlY3RpY0V1bGVyID0ge307XG5TeW1wbGVjdGljRXVsZXIuaW50ZWdyYXRlVmVsb2NpdHkgPSBmdW5jdGlvbiBpbnRlZ3JhdGVWZWxvY2l0eShib2R5LCBkdCkge1xuICAgIHZhciB2ID0gYm9keS52ZWxvY2l0eTtcbiAgICB2YXIgdyA9IGJvZHkuaW52ZXJzZU1hc3M7XG4gICAgdmFyIGYgPSBib2R5LmZvcmNlO1xuICAgIGlmIChmLmlzWmVybygpKVxuICAgICAgICByZXR1cm47XG4gICAgdi5hZGQoZi5tdWx0KGR0ICogdykpLnB1dCh2KTtcbiAgICBmLmNsZWFyKCk7XG59O1xuU3ltcGxlY3RpY0V1bGVyLmludGVncmF0ZVBvc2l0aW9uID0gZnVuY3Rpb24gaW50ZWdyYXRlUG9zaXRpb24oYm9keSwgZHQpIHtcbiAgICB2YXIgcCA9IGJvZHkucG9zaXRpb247XG4gICAgdmFyIHYgPSBib2R5LnZlbG9jaXR5O1xuICAgIHAuYWRkKHYubXVsdChkdCkpLnB1dChwKTtcbn07XG5TeW1wbGVjdGljRXVsZXIuaW50ZWdyYXRlQW5ndWxhck1vbWVudHVtID0gZnVuY3Rpb24gaW50ZWdyYXRlQW5ndWxhck1vbWVudHVtKGJvZHksIGR0KSB7XG4gICAgdmFyIEwgPSBib2R5LmFuZ3VsYXJNb21lbnR1bTtcbiAgICB2YXIgdCA9IGJvZHkudG9ycXVlO1xuICAgIGlmICh0LmlzWmVybygpKVxuICAgICAgICByZXR1cm47XG4gICAgTC5hZGQodC5tdWx0KGR0KSkucHV0KEwpO1xuICAgIHQuY2xlYXIoKTtcbn07XG5TeW1wbGVjdGljRXVsZXIuaW50ZWdyYXRlT3JpZW50YXRpb24gPSBmdW5jdGlvbiBpbnRlZ3JhdGVPcmllbnRhdGlvbihib2R5LCBkdCkge1xuICAgIHZhciBxID0gYm9keS5vcmllbnRhdGlvbjtcbiAgICB2YXIgdyA9IGJvZHkuYW5ndWxhclZlbG9jaXR5O1xuICAgIGlmICh3LmlzWmVybygpKVxuICAgICAgICByZXR1cm47XG4gICAgcS5hZGQocS5tdWx0aXBseSh3KS5zY2FsYXJNdWx0aXBseSgwLjUgKiBkdCkpLnB1dChxKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFN5bXBsZWN0aWNFdWxlcjsiLCJ2YXIgU3VyZmFjZSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1N1cmZhY2UnKTtcbmZ1bmN0aW9uIENhbnZhc1N1cmZhY2Uob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuY2FudmFzU2l6ZSlcbiAgICAgICAgdGhpcy5fY2FudmFzU2l6ZSA9IG9wdGlvbnMuY2FudmFzU2l6ZTtcbiAgICBTdXJmYWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKCF0aGlzLl9jYW52YXNTaXplKVxuICAgICAgICB0aGlzLl9jYW52YXNTaXplID0gdGhpcy5nZXRTaXplKCk7XG4gICAgdGhpcy5fYmFja0J1ZmZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGlmICh0aGlzLl9jYW52YXNTaXplKSB7XG4gICAgICAgIHRoaXMuX2JhY2tCdWZmZXIud2lkdGggPSB0aGlzLl9jYW52YXNTaXplWzBdO1xuICAgICAgICB0aGlzLl9iYWNrQnVmZmVyLmhlaWdodCA9IHRoaXMuX2NhbnZhc1NpemVbMV07XG4gICAgfVxuICAgIHRoaXMuX2NvbnRleHRJZCA9IHVuZGVmaW5lZDtcbn1cbkNhbnZhc1N1cmZhY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXJmYWNlLnByb3RvdHlwZSk7XG5DYW52YXNTdXJmYWNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc1N1cmZhY2U7XG5DYW52YXNTdXJmYWNlLnByb3RvdHlwZS5lbGVtZW50VHlwZSA9ICdjYW52YXMnO1xuQ2FudmFzU3VyZmFjZS5wcm90b3R5cGUuZWxlbWVudENsYXNzID0gJ2ZhbW91cy1zdXJmYWNlJztcbkNhbnZhc1N1cmZhY2UucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiBzZXRDb250ZW50KCkge1xufTtcbkNhbnZhc1N1cmZhY2UucHJvdG90eXBlLmRlcGxveSA9IGZ1bmN0aW9uIGRlcGxveSh0YXJnZXQpIHtcbiAgICBpZiAodGhpcy5fY2FudmFzU2l6ZSkge1xuICAgICAgICB0YXJnZXQud2lkdGggPSB0aGlzLl9jYW52YXNTaXplWzBdO1xuICAgICAgICB0YXJnZXQuaGVpZ2h0ID0gdGhpcy5fY2FudmFzU2l6ZVsxXTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2NvbnRleHRJZCA9PT0gJzJkJykge1xuICAgICAgICB0YXJnZXQuZ2V0Q29udGV4dCh0aGlzLl9jb250ZXh0SWQpLmRyYXdJbWFnZSh0aGlzLl9iYWNrQnVmZmVyLCAwLCAwKTtcbiAgICAgICAgdGhpcy5fYmFja0J1ZmZlci53aWR0aCA9IDA7XG4gICAgICAgIHRoaXMuX2JhY2tCdWZmZXIuaGVpZ2h0ID0gMDtcbiAgICB9XG59O1xuQ2FudmFzU3VyZmFjZS5wcm90b3R5cGUucmVjYWxsID0gZnVuY3Rpb24gcmVjYWxsKHRhcmdldCkge1xuICAgIHZhciBzaXplID0gdGhpcy5nZXRTaXplKCk7XG4gICAgdGhpcy5fYmFja0J1ZmZlci53aWR0aCA9IHRhcmdldC53aWR0aDtcbiAgICB0aGlzLl9iYWNrQnVmZmVyLmhlaWdodCA9IHRhcmdldC5oZWlnaHQ7XG4gICAgaWYgKHRoaXMuX2NvbnRleHRJZCA9PT0gJzJkJykge1xuICAgICAgICB0aGlzLl9iYWNrQnVmZmVyLmdldENvbnRleHQodGhpcy5fY29udGV4dElkKS5kcmF3SW1hZ2UodGFyZ2V0LCAwLCAwKTtcbiAgICAgICAgdGFyZ2V0LndpZHRoID0gMDtcbiAgICAgICAgdGFyZ2V0LmhlaWdodCA9IDA7XG4gICAgfVxufTtcbkNhbnZhc1N1cmZhY2UucHJvdG90eXBlLmdldENvbnRleHQgPSBmdW5jdGlvbiBnZXRDb250ZXh0KGNvbnRleHRJZCkge1xuICAgIHRoaXMuX2NvbnRleHRJZCA9IGNvbnRleHRJZDtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFRhcmdldCA/IHRoaXMuX2N1cnJlbnRUYXJnZXQuZ2V0Q29udGV4dChjb250ZXh0SWQpIDogdGhpcy5fYmFja0J1ZmZlci5nZXRDb250ZXh0KGNvbnRleHRJZCk7XG59O1xuQ2FudmFzU3VyZmFjZS5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIHNldFNpemUoc2l6ZSwgY2FudmFzU2l6ZSkge1xuICAgIFN1cmZhY2UucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoY2FudmFzU2l6ZSlcbiAgICAgICAgdGhpcy5fY2FudmFzU2l6ZSA9IFtcbiAgICAgICAgICAgIGNhbnZhc1NpemVbMF0sXG4gICAgICAgICAgICBjYW52YXNTaXplWzFdXG4gICAgICAgIF07XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudFRhcmdldC53aWR0aCA9IHRoaXMuX2NhbnZhc1NpemVbMF07XG4gICAgICAgIHRoaXMuX2N1cnJlbnRUYXJnZXQuaGVpZ2h0ID0gdGhpcy5fY2FudmFzU2l6ZVsxXTtcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBDYW52YXNTdXJmYWNlOyIsInZhciBTdXJmYWNlID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvU3VyZmFjZScpO1xudmFyIENvbnRleHQgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9Db250ZXh0Jyk7XG5mdW5jdGlvbiBDb250YWluZXJTdXJmYWNlKG9wdGlvbnMpIHtcbiAgICBTdXJmYWNlLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2ZhbW91cy1ncm91cCcpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmYW1vdXMtY29udGFpbmVyLWdyb3VwJyk7XG4gICAgdGhpcy5fc2hvdWxkUmVjYWxjdWxhdGVTaXplID0gZmFsc2U7XG4gICAgdGhpcy5jb250ZXh0ID0gbmV3IENvbnRleHQodGhpcy5fY29udGFpbmVyKTtcbiAgICB0aGlzLnNldENvbnRlbnQodGhpcy5fY29udGFpbmVyKTtcbn1cbkNvbnRhaW5lclN1cmZhY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXJmYWNlLnByb3RvdHlwZSk7XG5Db250YWluZXJTdXJmYWNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENvbnRhaW5lclN1cmZhY2U7XG5Db250YWluZXJTdXJmYWNlLnByb3RvdHlwZS5lbGVtZW50VHlwZSA9ICdkaXYnO1xuQ29udGFpbmVyU3VyZmFjZS5wcm90b3R5cGUuZWxlbWVudENsYXNzID0gJ2ZhbW91cy1zdXJmYWNlJztcbkNvbnRhaW5lclN1cmZhY2UucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmFkZC5hcHBseSh0aGlzLmNvbnRleHQsIGFyZ3VtZW50cyk7XG59O1xuQ29udGFpbmVyU3VyZmFjZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLl9zaXplRGlydHkpXG4gICAgICAgIHRoaXMuX3Nob3VsZFJlY2FsY3VsYXRlU2l6ZSA9IHRydWU7XG4gICAgcmV0dXJuIFN1cmZhY2UucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbkNvbnRhaW5lclN1cmZhY2UucHJvdG90eXBlLmRlcGxveSA9IGZ1bmN0aW9uIGRlcGxveSgpIHtcbiAgICB0aGlzLl9zaG91bGRSZWNhbGN1bGF0ZVNpemUgPSB0cnVlO1xuICAgIHJldHVybiBTdXJmYWNlLnByb3RvdHlwZS5kZXBsb3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5Db250YWluZXJTdXJmYWNlLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiBjb21taXQoY29udGV4dCwgdHJhbnNmb3JtLCBvcGFjaXR5LCBvcmlnaW4sIHNpemUpIHtcbiAgICB2YXIgcHJldmlvdXNTaXplID0gdGhpcy5fc2l6ZSA/IFtcbiAgICAgICAgICAgIHRoaXMuX3NpemVbMF0sXG4gICAgICAgICAgICB0aGlzLl9zaXplWzFdXG4gICAgICAgIF0gOiBudWxsO1xuICAgIHZhciByZXN1bHQgPSBTdXJmYWNlLnByb3RvdHlwZS5jb21taXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodGhpcy5fc2hvdWxkUmVjYWxjdWxhdGVTaXplIHx8IHByZXZpb3VzU2l6ZSAmJiAodGhpcy5fc2l6ZVswXSAhPT0gcHJldmlvdXNTaXplWzBdIHx8IHRoaXMuX3NpemVbMV0gIT09IHByZXZpb3VzU2l6ZVsxXSkpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnNldFNpemUoKTtcbiAgICAgICAgdGhpcy5fc2hvdWxkUmVjYWxjdWxhdGVTaXplID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuY29udGV4dC51cGRhdGUoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbm1vZHVsZS5leHBvcnRzID0gQ29udGFpbmVyU3VyZmFjZTsiLCJ2YXIgQ29udGFpbmVyU3VyZmFjZSA9IHJlcXVpcmUoJy4vQ29udGFpbmVyU3VyZmFjZScpO1xuZnVuY3Rpb24gRm9ybUNvbnRhaW5lclN1cmZhY2Uob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLl9tZXRob2QgPSBvcHRpb25zLm1ldGhvZCB8fCAnJztcbiAgICBDb250YWluZXJTdXJmYWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5Gb3JtQ29udGFpbmVyU3VyZmFjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENvbnRhaW5lclN1cmZhY2UucHJvdG90eXBlKTtcbkZvcm1Db250YWluZXJTdXJmYWNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEZvcm1Db250YWluZXJTdXJmYWNlO1xuRm9ybUNvbnRhaW5lclN1cmZhY2UucHJvdG90eXBlLmVsZW1lbnRUeXBlID0gJ2Zvcm0nO1xuRm9ybUNvbnRhaW5lclN1cmZhY2UucHJvdG90eXBlLmRlcGxveSA9IGZ1bmN0aW9uIGRlcGxveSh0YXJnZXQpIHtcbiAgICBpZiAodGhpcy5fbWV0aG9kKVxuICAgICAgICB0YXJnZXQubWV0aG9kID0gdGhpcy5fbWV0aG9kO1xuICAgIHJldHVybiBDb250YWluZXJTdXJmYWNlLnByb3RvdHlwZS5kZXBsb3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEZvcm1Db250YWluZXJTdXJmYWNlOyIsInZhciBTdXJmYWNlID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvU3VyZmFjZScpO1xuZnVuY3Rpb24gSW1hZ2VTdXJmYWNlKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9pbWFnZVVybCA9IHVuZGVmaW5lZDtcbiAgICBTdXJmYWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG52YXIgdXJsQ2FjaGUgPSBbXTtcbnZhciBjb3VudENhY2hlID0gW107XG52YXIgbm9kZUNhY2hlID0gW107XG52YXIgY2FjaGVFbmFibGVkID0gdHJ1ZTtcbkltYWdlU3VyZmFjZS5lbmFibGVDYWNoZSA9IGZ1bmN0aW9uIGVuYWJsZUNhY2hlKCkge1xuICAgIGNhY2hlRW5hYmxlZCA9IHRydWU7XG59O1xuSW1hZ2VTdXJmYWNlLmRpc2FibGVDYWNoZSA9IGZ1bmN0aW9uIGRpc2FibGVDYWNoZSgpIHtcbiAgICBjYWNoZUVuYWJsZWQgPSBmYWxzZTtcbn07XG5JbWFnZVN1cmZhY2UuY2xlYXJDYWNoZSA9IGZ1bmN0aW9uIGNsZWFyQ2FjaGUoKSB7XG4gICAgdXJsQ2FjaGUgPSBbXTtcbiAgICBjb3VudENhY2hlID0gW107XG4gICAgbm9kZUNhY2hlID0gW107XG59O1xuSW1hZ2VTdXJmYWNlLmdldENhY2hlID0gZnVuY3Rpb24gZ2V0Q2FjaGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXJsQ2FjaGU6IHVybENhY2hlLFxuICAgICAgICBjb3VudENhY2hlOiBjb3VudENhY2hlLFxuICAgICAgICBub2RlQ2FjaGU6IGNvdW50Q2FjaGVcbiAgICB9O1xufTtcbkltYWdlU3VyZmFjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cmZhY2UucHJvdG90eXBlKTtcbkltYWdlU3VyZmFjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbWFnZVN1cmZhY2U7XG5JbWFnZVN1cmZhY2UucHJvdG90eXBlLmVsZW1lbnRUeXBlID0gJ2ltZyc7XG5JbWFnZVN1cmZhY2UucHJvdG90eXBlLmVsZW1lbnRDbGFzcyA9ICdmYW1vdXMtc3VyZmFjZSc7XG5JbWFnZVN1cmZhY2UucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiBzZXRDb250ZW50KGltYWdlVXJsKSB7XG4gICAgdmFyIHVybEluZGV4ID0gdXJsQ2FjaGUuaW5kZXhPZih0aGlzLl9pbWFnZVVybCk7XG4gICAgaWYgKHVybEluZGV4ICE9PSAtMSkge1xuICAgICAgICBpZiAoY291bnRDYWNoZVt1cmxJbmRleF0gPT09IDEpIHtcbiAgICAgICAgICAgIHVybENhY2hlLnNwbGljZSh1cmxJbmRleCwgMSk7XG4gICAgICAgICAgICBjb3VudENhY2hlLnNwbGljZSh1cmxJbmRleCwgMSk7XG4gICAgICAgICAgICBub2RlQ2FjaGUuc3BsaWNlKHVybEluZGV4LCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvdW50Q2FjaGVbdXJsSW5kZXhdLS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXJsSW5kZXggPSB1cmxDYWNoZS5pbmRleE9mKGltYWdlVXJsKTtcbiAgICBpZiAodXJsSW5kZXggPT09IC0xKSB7XG4gICAgICAgIHVybENhY2hlLnB1c2goaW1hZ2VVcmwpO1xuICAgICAgICBjb3VudENhY2hlLnB1c2goMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY291bnRDYWNoZVt1cmxJbmRleF0rKztcbiAgICB9XG4gICAgdGhpcy5faW1hZ2VVcmwgPSBpbWFnZVVybDtcbiAgICB0aGlzLl9jb250ZW50RGlydHkgPSB0cnVlO1xufTtcbkltYWdlU3VyZmFjZS5wcm90b3R5cGUuZGVwbG95ID0gZnVuY3Rpb24gZGVwbG95KHRhcmdldCkge1xuICAgIHZhciB1cmxJbmRleCA9IHVybENhY2hlLmluZGV4T2YodGhpcy5faW1hZ2VVcmwpO1xuICAgIGlmIChub2RlQ2FjaGVbdXJsSW5kZXhdID09PSB1bmRlZmluZWQgJiYgY2FjaGVFbmFibGVkKSB7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLnNyYyA9IHRoaXMuX2ltYWdlVXJsIHx8ICcnO1xuICAgICAgICBub2RlQ2FjaGVbdXJsSW5kZXhdID0gaW1nO1xuICAgIH1cbiAgICB0YXJnZXQuc3JjID0gdGhpcy5faW1hZ2VVcmwgfHwgJyc7XG59O1xuSW1hZ2VTdXJmYWNlLnByb3RvdHlwZS5yZWNhbGwgPSBmdW5jdGlvbiByZWNhbGwodGFyZ2V0KSB7XG4gICAgdGFyZ2V0LnNyYyA9ICcnO1xufTtcbm1vZHVsZS5leHBvcnRzID0gSW1hZ2VTdXJmYWNlOyIsInZhciBTdXJmYWNlID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvU3VyZmFjZScpO1xuZnVuY3Rpb24gSW5wdXRTdXJmYWNlKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9wbGFjZWhvbGRlciA9IG9wdGlvbnMucGxhY2Vob2xkZXIgfHwgJyc7XG4gICAgdGhpcy5fdmFsdWUgPSBvcHRpb25zLnZhbHVlIHx8ICcnO1xuICAgIHRoaXMuX3R5cGUgPSBvcHRpb25zLnR5cGUgfHwgJ3RleHQnO1xuICAgIHRoaXMuX25hbWUgPSBvcHRpb25zLm5hbWUgfHwgJyc7XG4gICAgU3VyZmFjZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMub24oJ2NsaWNrJywgdGhpcy5mb2N1cy5iaW5kKHRoaXMpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gdGhpcy5fY3VycmVudFRhcmdldClcbiAgICAgICAgICAgIHRoaXMuYmx1cigpO1xuICAgIH0uYmluZCh0aGlzKSk7XG59XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXJmYWNlLnByb3RvdHlwZSk7XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW5wdXRTdXJmYWNlO1xuSW5wdXRTdXJmYWNlLnByb3RvdHlwZS5lbGVtZW50VHlwZSA9ICdpbnB1dCc7XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLmVsZW1lbnRDbGFzcyA9ICdmYW1vdXMtc3VyZmFjZSc7XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLnNldFBsYWNlaG9sZGVyID0gZnVuY3Rpb24gc2V0UGxhY2Vob2xkZXIoc3RyKSB7XG4gICAgdGhpcy5fcGxhY2Vob2xkZXIgPSBzdHI7XG4gICAgdGhpcy5fY29udGVudERpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRUYXJnZXQpXG4gICAgICAgIHRoaXMuX2N1cnJlbnRUYXJnZXQuZm9jdXMoKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLmJsdXIgPSBmdW5jdGlvbiBibHVyKCkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50VGFyZ2V0KVxuICAgICAgICB0aGlzLl9jdXJyZW50VGFyZ2V0LmJsdXIoKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLnNldFZhbHVlID0gZnVuY3Rpb24gc2V0VmFsdWUoc3RyKSB7XG4gICAgdGhpcy5fdmFsdWUgPSBzdHI7XG4gICAgdGhpcy5fY29udGVudERpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLnNldFR5cGUgPSBmdW5jdGlvbiBzZXRUeXBlKHN0cikge1xuICAgIHRoaXMuX3R5cGUgPSBzdHI7XG4gICAgdGhpcy5fY29udGVudERpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRUYXJnZXQudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbn07XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLnNldE5hbWUgPSBmdW5jdGlvbiBzZXROYW1lKHN0cikge1xuICAgIHRoaXMuX25hbWUgPSBzdHI7XG4gICAgdGhpcy5fY29udGVudERpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5JbnB1dFN1cmZhY2UucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiBnZXROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xufTtcbklucHV0U3VyZmFjZS5wcm90b3R5cGUuZGVwbG95ID0gZnVuY3Rpb24gZGVwbG95KHRhcmdldCkge1xuICAgIGlmICh0aGlzLl9wbGFjZWhvbGRlciAhPT0gJycpXG4gICAgICAgIHRhcmdldC5wbGFjZWhvbGRlciA9IHRoaXMuX3BsYWNlaG9sZGVyO1xuICAgIHRhcmdldC52YWx1ZSA9IHRoaXMuX3ZhbHVlO1xuICAgIHRhcmdldC50eXBlID0gdGhpcy5fdHlwZTtcbiAgICB0YXJnZXQubmFtZSA9IHRoaXMuX25hbWU7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBJbnB1dFN1cmZhY2U7IiwidmFyIElucHV0U3VyZmFjZSA9IHJlcXVpcmUoJy4vSW5wdXRTdXJmYWNlJyk7XG5mdW5jdGlvbiBTdWJtaXRJbnB1dFN1cmZhY2Uob3B0aW9ucykge1xuICAgIElucHV0U3VyZmFjZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuX3R5cGUgPSAnc3VibWl0JztcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLm9uQ2xpY2spXG4gICAgICAgIHRoaXMuc2V0T25DbGljayhvcHRpb25zLm9uQ2xpY2spO1xufVxuU3VibWl0SW5wdXRTdXJmYWNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSW5wdXRTdXJmYWNlLnByb3RvdHlwZSk7XG5TdWJtaXRJbnB1dFN1cmZhY2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3VibWl0SW5wdXRTdXJmYWNlO1xuU3VibWl0SW5wdXRTdXJmYWNlLnByb3RvdHlwZS5zZXRPbkNsaWNrID0gZnVuY3Rpb24gKG9uQ2xpY2spIHtcbiAgICB0aGlzLm9uQ2xpY2sgPSBvbkNsaWNrO1xufTtcblN1Ym1pdElucHV0U3VyZmFjZS5wcm90b3R5cGUuZGVwbG95ID0gZnVuY3Rpb24gZGVwbG95KHRhcmdldCkge1xuICAgIGlmICh0aGlzLm9uY2xpY2spXG4gICAgICAgIHRhcmdldC5vbkNsaWNrID0gdGhpcy5vbkNsaWNrO1xuICAgIElucHV0U3VyZmFjZS5wcm90b3R5cGUuZGVwbG95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBTdWJtaXRJbnB1dFN1cmZhY2U7IiwidmFyIFN1cmZhY2UgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9TdXJmYWNlJyk7XG5mdW5jdGlvbiBUZXh0YXJlYVN1cmZhY2Uob3B0aW9ucykge1xuICAgIHRoaXMuX3BsYWNlaG9sZGVyID0gb3B0aW9ucy5wbGFjZWhvbGRlciB8fCAnJztcbiAgICB0aGlzLl92YWx1ZSA9IG9wdGlvbnMudmFsdWUgfHwgJyc7XG4gICAgdGhpcy5fbmFtZSA9IG9wdGlvbnMubmFtZSB8fCAnJztcbiAgICB0aGlzLl93cmFwID0gb3B0aW9ucy53cmFwIHx8ICcnO1xuICAgIHRoaXMuX2NvbHMgPSBvcHRpb25zLmNvbHMgfHwgJyc7XG4gICAgdGhpcy5fcm93cyA9IG9wdGlvbnMucm93cyB8fCAnJztcbiAgICBTdXJmYWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5vbignY2xpY2snLCB0aGlzLmZvY3VzLmJpbmQodGhpcykpO1xufVxuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VyZmFjZS5wcm90b3R5cGUpO1xuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRleHRhcmVhU3VyZmFjZTtcblRleHRhcmVhU3VyZmFjZS5wcm90b3R5cGUuZWxlbWVudFR5cGUgPSAndGV4dGFyZWEnO1xuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZS5lbGVtZW50Q2xhc3MgPSAnZmFtb3VzLXN1cmZhY2UnO1xuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZS5zZXRQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIHNldFBsYWNlaG9sZGVyKHN0cikge1xuICAgIHRoaXMuX3BsYWNlaG9sZGVyID0gc3RyO1xuICAgIHRoaXMuX2NvbnRlbnREaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZS5mb2N1cyA9IGZ1bmN0aW9uIGZvY3VzKCkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50VGFyZ2V0KVxuICAgICAgICB0aGlzLl9jdXJyZW50VGFyZ2V0LmZvY3VzKCk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZS5ibHVyID0gZnVuY3Rpb24gYmx1cigpIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFRhcmdldClcbiAgICAgICAgdGhpcy5fY3VycmVudFRhcmdldC5ibHVyKCk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uIHNldFZhbHVlKHN0cikge1xuICAgIHRoaXMuX3ZhbHVlID0gc3RyO1xuICAgIHRoaXMuX2NvbnRlbnREaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIGdldFZhbHVlKCkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50VGFyZ2V0LnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICB9XG59O1xuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZS5zZXROYW1lID0gZnVuY3Rpb24gc2V0TmFtZShzdHIpIHtcbiAgICB0aGlzLl9uYW1lID0gc3RyO1xuICAgIHRoaXMuX2NvbnRlbnREaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuVGV4dGFyZWFTdXJmYWNlLnByb3RvdHlwZS5nZXROYW1lID0gZnVuY3Rpb24gZ2V0TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbmFtZTtcbn07XG5UZXh0YXJlYVN1cmZhY2UucHJvdG90eXBlLnNldFdyYXAgPSBmdW5jdGlvbiBzZXRXcmFwKHN0cikge1xuICAgIHRoaXMuX3dyYXAgPSBzdHI7XG4gICAgdGhpcy5fY29udGVudERpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5UZXh0YXJlYVN1cmZhY2UucHJvdG90eXBlLnNldENvbHVtbnMgPSBmdW5jdGlvbiBzZXRDb2x1bW5zKG51bSkge1xuICAgIHRoaXMuX2NvbHMgPSBudW07XG4gICAgdGhpcy5fY29udGVudERpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5UZXh0YXJlYVN1cmZhY2UucHJvdG90eXBlLnNldFJvd3MgPSBmdW5jdGlvbiBzZXRSb3dzKG51bSkge1xuICAgIHRoaXMuX3Jvd3MgPSBudW07XG4gICAgdGhpcy5fY29udGVudERpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5UZXh0YXJlYVN1cmZhY2UucHJvdG90eXBlLmRlcGxveSA9IGZ1bmN0aW9uIGRlcGxveSh0YXJnZXQpIHtcbiAgICBpZiAodGhpcy5fcGxhY2Vob2xkZXIgIT09ICcnKVxuICAgICAgICB0YXJnZXQucGxhY2Vob2xkZXIgPSB0aGlzLl9wbGFjZWhvbGRlcjtcbiAgICBpZiAodGhpcy5fdmFsdWUgIT09ICcnKVxuICAgICAgICB0YXJnZXQudmFsdWUgPSB0aGlzLl92YWx1ZTtcbiAgICBpZiAodGhpcy5fbmFtZSAhPT0gJycpXG4gICAgICAgIHRhcmdldC5uYW1lID0gdGhpcy5fbmFtZTtcbiAgICBpZiAodGhpcy5fd3JhcCAhPT0gJycpXG4gICAgICAgIHRhcmdldC53cmFwID0gdGhpcy5fd3JhcDtcbiAgICBpZiAodGhpcy5fY29scyAhPT0gJycpXG4gICAgICAgIHRhcmdldC5jb2xzID0gdGhpcy5fY29scztcbiAgICBpZiAodGhpcy5fcm93cyAhPT0gJycpXG4gICAgICAgIHRhcmdldC5yb3dzID0gdGhpcy5fcm93cztcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFRleHRhcmVhU3VyZmFjZTsiLCJ2YXIgU3VyZmFjZSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1N1cmZhY2UnKTtcbmZ1bmN0aW9uIFZpZGVvU3VyZmFjZShvcHRpb25zKSB7XG4gICAgdGhpcy5fdmlkZW9VcmwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZShWaWRlb1N1cmZhY2UuREVGQVVMVF9PUFRJT05TKTtcbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIFN1cmZhY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblZpZGVvU3VyZmFjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cmZhY2UucHJvdG90eXBlKTtcblZpZGVvU3VyZmFjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBWaWRlb1N1cmZhY2U7XG5WaWRlb1N1cmZhY2UuREVGQVVMVF9PUFRJT05TID0geyBhdXRvcGxheTogZmFsc2UgfTtcblZpZGVvU3VyZmFjZS5wcm90b3R5cGUuZWxlbWVudFR5cGUgPSAndmlkZW8nO1xuVmlkZW9TdXJmYWNlLnByb3RvdHlwZS5lbGVtZW50Q2xhc3MgPSAnZmFtb3VzLXN1cmZhY2UnO1xuVmlkZW9TdXJmYWNlLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuc2l6ZSlcbiAgICAgICAgdGhpcy5zZXRTaXplKG9wdGlvbnMuc2l6ZSk7XG4gICAgaWYgKG9wdGlvbnMuY2xhc3NlcylcbiAgICAgICAgdGhpcy5zZXRDbGFzc2VzKG9wdGlvbnMuY2xhc3Nlcyk7XG4gICAgaWYgKG9wdGlvbnMucHJvcGVydGllcylcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKG9wdGlvbnMucHJvcGVydGllcyk7XG4gICAgaWYgKG9wdGlvbnMuYXV0b3BsYXkpXG4gICAgICAgIHRoaXMub3B0aW9ucy5hdXRvcGxheSA9IG9wdGlvbnMuYXV0b3BsYXk7XG4gICAgaWYgKG9wdGlvbnMuc3JjKSB7XG4gICAgICAgIHRoaXMuX3ZpZGVvVXJsID0gb3B0aW9ucy5zcmM7XG4gICAgICAgIHRoaXMuX2NvbnRlbnREaXJ0eSA9IHRydWU7XG4gICAgfVxufTtcblZpZGVvU3VyZmFjZS5wcm90b3R5cGUuc2V0Q29udGVudCA9IGZ1bmN0aW9uIHNldENvbnRlbnQodmlkZW9VcmwpIHtcbiAgICB0aGlzLl92aWRlb1VybCA9IHZpZGVvVXJsO1xuICAgIHRoaXMuX2NvbnRlbnREaXJ0eSA9IHRydWU7XG59O1xuVmlkZW9TdXJmYWNlLnByb3RvdHlwZS5kZXBsb3kgPSBmdW5jdGlvbiBkZXBsb3kodGFyZ2V0KSB7XG4gICAgdGFyZ2V0LnNyYyA9IHRoaXMuX3ZpZGVvVXJsO1xuICAgIHRhcmdldC5hdXRvcGxheSA9IHRoaXMub3B0aW9ucy5hdXRvcGxheTtcbn07XG5WaWRlb1N1cmZhY2UucHJvdG90eXBlLnJlY2FsbCA9IGZ1bmN0aW9uIHJlY2FsbCh0YXJnZXQpIHtcbiAgICB0YXJnZXQuc3JjID0gJyc7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBWaWRlb1N1cmZhY2U7IiwiZnVuY3Rpb24gQ2FjaGVkTWFwKG1hcHBpbmdGdW5jdGlvbikge1xuICAgIHRoaXMuX21hcCA9IG1hcHBpbmdGdW5jdGlvbiB8fCBudWxsO1xuICAgIHRoaXMuX2NhY2hlZE91dHB1dCA9IG51bGw7XG4gICAgdGhpcy5fY2FjaGVkSW5wdXQgPSBOdW1iZXIuTmFOO1xufVxuQ2FjaGVkTWFwLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShtYXBwaW5nRnVuY3Rpb24pIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ2FjaGVkTWFwKG1hcHBpbmdGdW5jdGlvbik7XG4gICAgcmV0dXJuIGluc3RhbmNlLmdldC5iaW5kKGluc3RhbmNlKTtcbn07XG5DYWNoZWRNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldChpbnB1dCkge1xuICAgIGlmIChpbnB1dCAhPT0gdGhpcy5fY2FjaGVkSW5wdXQpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVkSW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5fY2FjaGVkT3V0cHV0ID0gdGhpcy5fbWFwKGlucHV0KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlZE91dHB1dDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IENhY2hlZE1hcDsiLCJ2YXIgRWFzaW5nID0ge1xuICAgICAgICBpblF1YWQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdCAqIHQ7XG4gICAgICAgIH0sXG4gICAgICAgIG91dFF1YWQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gLSh0IC09IDEpICogdCArIDE7XG4gICAgICAgIH0sXG4gICAgICAgIGluT3V0UXVhZDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGlmICgodCAvPSAwLjUpIDwgMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMC41ICogdCAqIHQ7XG4gICAgICAgICAgICByZXR1cm4gLTAuNSAqICgtLXQgKiAodCAtIDIpIC0gMSk7XG4gICAgICAgIH0sXG4gICAgICAgIGluQ3ViaWM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdCAqIHQgKiB0O1xuICAgICAgICB9LFxuICAgICAgICBvdXRDdWJpYzogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAtLXQgKiB0ICogdCArIDE7XG4gICAgICAgIH0sXG4gICAgICAgIGluT3V0Q3ViaWM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBpZiAoKHQgLz0gMC41KSA8IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDAuNSAqIHQgKiB0ICogdDtcbiAgICAgICAgICAgIHJldHVybiAwLjUgKiAoKHQgLT0gMikgKiB0ICogdCArIDIpO1xuICAgICAgICB9LFxuICAgICAgICBpblF1YXJ0OiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIHQgKiB0ICogdCAqIHQ7XG4gICAgICAgIH0sXG4gICAgICAgIG91dFF1YXJ0OiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIC0oLS10ICogdCAqIHQgKiB0IC0gMSk7XG4gICAgICAgIH0sXG4gICAgICAgIGluT3V0UXVhcnQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBpZiAoKHQgLz0gMC41KSA8IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDAuNSAqIHQgKiB0ICogdCAqIHQ7XG4gICAgICAgICAgICByZXR1cm4gLTAuNSAqICgodCAtPSAyKSAqIHQgKiB0ICogdCAtIDIpO1xuICAgICAgICB9LFxuICAgICAgICBpblF1aW50OiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIHQgKiB0ICogdCAqIHQgKiB0O1xuICAgICAgICB9LFxuICAgICAgICBvdXRRdWludDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAtLXQgKiB0ICogdCAqIHQgKiB0ICsgMTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5PdXRRdWludDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGlmICgodCAvPSAwLjUpIDwgMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMC41ICogdCAqIHQgKiB0ICogdCAqIHQ7XG4gICAgICAgICAgICByZXR1cm4gMC41ICogKCh0IC09IDIpICogdCAqIHQgKiB0ICogdCArIDIpO1xuICAgICAgICB9LFxuICAgICAgICBpblNpbmU6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gLTEgKiBNYXRoLmNvcyh0ICogKE1hdGguUEkgLyAyKSkgKyAxO1xuICAgICAgICB9LFxuICAgICAgICBvdXRTaW5lOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguc2luKHQgKiAoTWF0aC5QSSAvIDIpKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5PdXRTaW5lOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIC0wLjUgKiAoTWF0aC5jb3MoTWF0aC5QSSAqIHQpIC0gMSk7XG4gICAgICAgIH0sXG4gICAgICAgIGluRXhwbzogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0ID09PSAwID8gMCA6IE1hdGgucG93KDIsIDEwICogKHQgLSAxKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG91dEV4cG86IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdCA9PT0gMSA/IDEgOiAtTWF0aC5wb3coMiwgLTEwICogdCkgKyAxO1xuICAgICAgICB9LFxuICAgICAgICBpbk91dEV4cG86IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBpZiAodCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGlmICh0ID09PSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgaWYgKCh0IC89IDAuNSkgPCAxKVxuICAgICAgICAgICAgICAgIHJldHVybiAwLjUgKiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpO1xuICAgICAgICAgICAgcmV0dXJuIDAuNSAqICgtTWF0aC5wb3coMiwgLTEwICogLS10KSArIDIpO1xuICAgICAgICB9LFxuICAgICAgICBpbkNpcmM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gLShNYXRoLnNxcnQoMSAtIHQgKiB0KSAtIDEpO1xuICAgICAgICB9LFxuICAgICAgICBvdXRDaXJjOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCgxIC0gLS10ICogdCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluT3V0Q2lyYzogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIGlmICgodCAvPSAwLjUpIDwgMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gLTAuNSAqIChNYXRoLnNxcnQoMSAtIHQgKiB0KSAtIDEpO1xuICAgICAgICAgICAgcmV0dXJuIDAuNSAqIChNYXRoLnNxcnQoMSAtICh0IC09IDIpICogdCkgKyAxKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5FbGFzdGljOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgICAgICAgdmFyIHAgPSAwO1xuICAgICAgICAgICAgdmFyIGEgPSAxO1xuICAgICAgICAgICAgaWYgKHQgPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAodCA9PT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmICghcClcbiAgICAgICAgICAgICAgICBwID0gMC4zO1xuICAgICAgICAgICAgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKDEgLyBhKTtcbiAgICAgICAgICAgIHJldHVybiAtKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0IC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkpO1xuICAgICAgICB9LFxuICAgICAgICBvdXRFbGFzdGljOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgICAgICAgdmFyIHAgPSAwO1xuICAgICAgICAgICAgdmFyIGEgPSAxO1xuICAgICAgICAgICAgaWYgKHQgPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAodCA9PT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmICghcClcbiAgICAgICAgICAgICAgICBwID0gMC4zO1xuICAgICAgICAgICAgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKDEgLyBhKTtcbiAgICAgICAgICAgIHJldHVybiBhICogTWF0aC5wb3coMiwgLTEwICogdCkgKiBNYXRoLnNpbigodCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICsgMTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5PdXRFbGFzdGljOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgICAgICAgdmFyIHAgPSAwO1xuICAgICAgICAgICAgdmFyIGEgPSAxO1xuICAgICAgICAgICAgaWYgKHQgPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAoKHQgLz0gMC41KSA9PT0gMilcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmICghcClcbiAgICAgICAgICAgICAgICBwID0gMC4zICogMS41O1xuICAgICAgICAgICAgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKDEgLyBhKTtcbiAgICAgICAgICAgIGlmICh0IDwgMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gLTAuNSAqIChhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKTtcbiAgICAgICAgICAgIHJldHVybiBhICogTWF0aC5wb3coMiwgLTEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSAqIDAuNSArIDE7XG4gICAgICAgIH0sXG4gICAgICAgIGluQmFjazogZnVuY3Rpb24gKHQsIHMpIHtcbiAgICAgICAgICAgIGlmIChzID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcyA9IDEuNzAxNTg7XG4gICAgICAgICAgICByZXR1cm4gdCAqIHQgKiAoKHMgKyAxKSAqIHQgLSBzKTtcbiAgICAgICAgfSxcbiAgICAgICAgb3V0QmFjazogZnVuY3Rpb24gKHQsIHMpIHtcbiAgICAgICAgICAgIGlmIChzID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcyA9IDEuNzAxNTg7XG4gICAgICAgICAgICByZXR1cm4gLS10ICogdCAqICgocyArIDEpICogdCArIHMpICsgMTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5PdXRCYWNrOiBmdW5jdGlvbiAodCwgcykge1xuICAgICAgICAgICAgaWYgKHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBzID0gMS43MDE1ODtcbiAgICAgICAgICAgIGlmICgodCAvPSAwLjUpIDwgMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMC41ICogKHQgKiB0ICogKCgocyAqPSAxLjUyNSkgKyAxKSAqIHQgLSBzKSk7XG4gICAgICAgICAgICByZXR1cm4gMC41ICogKCh0IC09IDIpICogdCAqICgoKHMgKj0gMS41MjUpICsgMSkgKiB0ICsgcykgKyAyKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5Cb3VuY2U6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gMSAtIEVhc2luZy5vdXRCb3VuY2UoMSAtIHQpO1xuICAgICAgICB9LFxuICAgICAgICBvdXRCb3VuY2U6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBpZiAodCA8IDEgLyAyLjc1KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqIHQgKiB0O1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0IDwgMiAvIDIuNzUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKHQgLT0gMS41IC8gMi43NSkgKiB0ICsgMC43NTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodCA8IDIuNSAvIDIuNzUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKHQgLT0gMi4yNSAvIDIuNzUpICogdCArIDAuOTM3NTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqICh0IC09IDIuNjI1IC8gMi43NSkgKiB0ICsgMC45ODQzNzU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGluT3V0Qm91bmNlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgaWYgKHQgPCAwLjUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVhc2luZy5pbkJvdW5jZSh0ICogMikgKiAwLjU7XG4gICAgICAgICAgICByZXR1cm4gRWFzaW5nLm91dEJvdW5jZSh0ICogMiAtIDEpICogMC41ICsgMC41O1xuICAgICAgICB9XG4gICAgfTtcbm1vZHVsZS5leHBvcnRzID0gRWFzaW5nOyIsInZhciBVdGlsaXR5ID0gcmVxdWlyZSgnZmFtb3VzL3V0aWxpdGllcy9VdGlsaXR5Jyk7XG5mdW5jdGlvbiBNdWx0aXBsZVRyYW5zaXRpb24obWV0aG9kKSB7XG4gICAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XG4gICAgdGhpcy5faW5zdGFuY2VzID0gW107XG4gICAgdGhpcy5zdGF0ZSA9IFtdO1xufVxuTXVsdGlwbGVUcmFuc2l0aW9uLlNVUFBPUlRTX01VTFRJUExFID0gdHJ1ZTtcbk11bHRpcGxlVHJhbnNpdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0KCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5faW5zdGFuY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuc3RhdGVbaV0gPSB0aGlzLl9pbnN0YW5jZXNbaV0uZ2V0KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xufTtcbk11bHRpcGxlVHJhbnNpdGlvbi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0KGVuZFN0YXRlLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIHZhciBfYWxsQ2FsbGJhY2sgPSBVdGlsaXR5LmFmdGVyKGVuZFN0YXRlLmxlbmd0aCwgY2FsbGJhY2spO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW5kU3RhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZXNbaV0pXG4gICAgICAgICAgICB0aGlzLl9pbnN0YW5jZXNbaV0gPSBuZXcgdGhpcy5tZXRob2QoKTtcbiAgICAgICAgdGhpcy5faW5zdGFuY2VzW2ldLnNldChlbmRTdGF0ZVtpXSwgdHJhbnNpdGlvbiwgX2FsbENhbGxiYWNrKTtcbiAgICB9XG59O1xuTXVsdGlwbGVUcmFuc2l0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KHN0YXJ0U3RhdGUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXJ0U3RhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZXNbaV0pXG4gICAgICAgICAgICB0aGlzLl9pbnN0YW5jZXNbaV0gPSBuZXcgdGhpcy5tZXRob2QoKTtcbiAgICAgICAgdGhpcy5faW5zdGFuY2VzW2ldLnJlc2V0KHN0YXJ0U3RhdGVbaV0pO1xuICAgIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IE11bHRpcGxlVHJhbnNpdGlvbjsiLCJ2YXIgUEUgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9QaHlzaWNzRW5naW5lJyk7XG52YXIgUGFydGljbGUgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9ib2RpZXMvUGFydGljbGUnKTtcbnZhciBTcHJpbmcgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9jb25zdHJhaW50cy9TbmFwJyk7XG52YXIgVmVjdG9yID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJyk7XG5mdW5jdGlvbiBTbmFwVHJhbnNpdGlvbihzdGF0ZSkge1xuICAgIHN0YXRlID0gc3RhdGUgfHwgMDtcbiAgICB0aGlzLmVuZFN0YXRlID0gbmV3IFZlY3RvcihzdGF0ZSk7XG4gICAgdGhpcy5pbml0U3RhdGUgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5fZGltZW5zaW9ucyA9IDE7XG4gICAgdGhpcy5fcmVzdFRvbGVyYW5jZSA9IDFlLTEwO1xuICAgIHRoaXMuX2Fic1Jlc3RUb2xlcmFuY2UgPSB0aGlzLl9yZXN0VG9sZXJhbmNlO1xuICAgIHRoaXMuX2NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuUEUgPSBuZXcgUEUoKTtcbiAgICB0aGlzLnBhcnRpY2xlID0gbmV3IFBhcnRpY2xlKCk7XG4gICAgdGhpcy5zcHJpbmcgPSBuZXcgU3ByaW5nKHsgYW5jaG9yOiB0aGlzLmVuZFN0YXRlIH0pO1xuICAgIHRoaXMuUEUuYWRkQm9keSh0aGlzLnBhcnRpY2xlKTtcbiAgICB0aGlzLlBFLmF0dGFjaCh0aGlzLnNwcmluZywgdGhpcy5wYXJ0aWNsZSk7XG59XG5TbmFwVHJhbnNpdGlvbi5TVVBQT1JUU19NVUxUSVBMRSA9IDM7XG5TbmFwVHJhbnNpdGlvbi5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgcGVyaW9kOiAxMDAsXG4gICAgZGFtcGluZ1JhdGlvOiAwLjIsXG4gICAgdmVsb2NpdHk6IDBcbn07XG5mdW5jdGlvbiBfZ2V0RW5lcmd5KCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2xlLmdldEVuZXJneSgpICsgdGhpcy5zcHJpbmcuZ2V0RW5lcmd5KFt0aGlzLnBhcnRpY2xlXSk7XG59XG5mdW5jdGlvbiBfc2V0QWJzb2x1dGVSZXN0VG9sZXJhbmNlKCkge1xuICAgIHZhciBkaXN0YW5jZSA9IHRoaXMuZW5kU3RhdGUuc3ViKHRoaXMuaW5pdFN0YXRlKS5ub3JtU3F1YXJlZCgpO1xuICAgIHRoaXMuX2Fic1Jlc3RUb2xlcmFuY2UgPSBkaXN0YW5jZSA9PT0gMCA/IHRoaXMuX3Jlc3RUb2xlcmFuY2UgOiB0aGlzLl9yZXN0VG9sZXJhbmNlICogZGlzdGFuY2U7XG59XG5mdW5jdGlvbiBfc2V0VGFyZ2V0KHRhcmdldCkge1xuICAgIHRoaXMuZW5kU3RhdGUuc2V0KHRhcmdldCk7XG4gICAgX3NldEFic29sdXRlUmVzdFRvbGVyYW5jZS5jYWxsKHRoaXMpO1xufVxuZnVuY3Rpb24gX3dha2UoKSB7XG4gICAgdGhpcy5QRS53YWtlKCk7XG59XG5mdW5jdGlvbiBfc2xlZXAoKSB7XG4gICAgdGhpcy5QRS5zbGVlcCgpO1xufVxuZnVuY3Rpb24gX3NldFBhcnRpY2xlUG9zaXRpb24ocCkge1xuICAgIHRoaXMucGFydGljbGUucG9zaXRpb24uc2V0KHApO1xufVxuZnVuY3Rpb24gX3NldFBhcnRpY2xlVmVsb2NpdHkodikge1xuICAgIHRoaXMucGFydGljbGUudmVsb2NpdHkuc2V0KHYpO1xufVxuZnVuY3Rpb24gX2dldFBhcnRpY2xlUG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RpbWVuc2lvbnMgPT09IDAgPyB0aGlzLnBhcnRpY2xlLmdldFBvc2l0aW9uMUQoKSA6IHRoaXMucGFydGljbGUuZ2V0UG9zaXRpb24oKTtcbn1cbmZ1bmN0aW9uIF9nZXRQYXJ0aWNsZVZlbG9jaXR5KCkge1xuICAgIHJldHVybiB0aGlzLl9kaW1lbnNpb25zID09PSAwID8gdGhpcy5wYXJ0aWNsZS5nZXRWZWxvY2l0eTFEKCkgOiB0aGlzLnBhcnRpY2xlLmdldFZlbG9jaXR5KCk7XG59XG5mdW5jdGlvbiBfc2V0Q2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xufVxuZnVuY3Rpb24gX3NldHVwRGVmaW5pdGlvbihkZWZpbml0aW9uKSB7XG4gICAgdmFyIGRlZmF1bHRzID0gU25hcFRyYW5zaXRpb24uREVGQVVMVF9PUFRJT05TO1xuICAgIGlmIChkZWZpbml0aW9uLnBlcmlvZCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBkZWZpbml0aW9uLnBlcmlvZCA9IGRlZmF1bHRzLnBlcmlvZDtcbiAgICBpZiAoZGVmaW5pdGlvbi5kYW1waW5nUmF0aW8gPT09IHVuZGVmaW5lZClcbiAgICAgICAgZGVmaW5pdGlvbi5kYW1waW5nUmF0aW8gPSBkZWZhdWx0cy5kYW1waW5nUmF0aW87XG4gICAgaWYgKGRlZmluaXRpb24udmVsb2NpdHkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgZGVmaW5pdGlvbi52ZWxvY2l0eSA9IGRlZmF1bHRzLnZlbG9jaXR5O1xuICAgIHRoaXMuc3ByaW5nLnNldE9wdGlvbnMoe1xuICAgICAgICBwZXJpb2Q6IGRlZmluaXRpb24ucGVyaW9kLFxuICAgICAgICBkYW1waW5nUmF0aW86IGRlZmluaXRpb24uZGFtcGluZ1JhdGlvXG4gICAgfSk7XG4gICAgX3NldFBhcnRpY2xlVmVsb2NpdHkuY2FsbCh0aGlzLCBkZWZpbml0aW9uLnZlbG9jaXR5KTtcbn1cbmZ1bmN0aW9uIF91cGRhdGUoKSB7XG4gICAgaWYgKHRoaXMuUEUuaXNTbGVlcGluZygpKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIGNiID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoX2dldEVuZXJneS5jYWxsKHRoaXMpIDwgdGhpcy5fYWJzUmVzdFRvbGVyYW5jZSkge1xuICAgICAgICBfc2V0UGFydGljbGVQb3NpdGlvbi5jYWxsKHRoaXMsIHRoaXMuZW5kU3RhdGUpO1xuICAgICAgICBfc2V0UGFydGljbGVWZWxvY2l0eS5jYWxsKHRoaXMsIFtcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMFxuICAgICAgICBdKTtcbiAgICAgICAgX3NsZWVwLmNhbGwodGhpcyk7XG4gICAgfVxufVxuU25hcFRyYW5zaXRpb24ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoc3RhdGUsIHZlbG9jaXR5KSB7XG4gICAgdGhpcy5fZGltZW5zaW9ucyA9IHN0YXRlIGluc3RhbmNlb2YgQXJyYXkgPyBzdGF0ZS5sZW5ndGggOiAwO1xuICAgIHRoaXMuaW5pdFN0YXRlLnNldChzdGF0ZSk7XG4gICAgX3NldFBhcnRpY2xlUG9zaXRpb24uY2FsbCh0aGlzLCBzdGF0ZSk7XG4gICAgX3NldFRhcmdldC5jYWxsKHRoaXMsIHN0YXRlKTtcbiAgICBpZiAodmVsb2NpdHkpXG4gICAgICAgIF9zZXRQYXJ0aWNsZVZlbG9jaXR5LmNhbGwodGhpcywgdmVsb2NpdHkpO1xuICAgIF9zZXRDYWxsYmFjay5jYWxsKHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuU25hcFRyYW5zaXRpb24ucHJvdG90eXBlLmdldFZlbG9jaXR5ID0gZnVuY3Rpb24gZ2V0VmVsb2NpdHkoKSB7XG4gICAgcmV0dXJuIF9nZXRQYXJ0aWNsZVZlbG9jaXR5LmNhbGwodGhpcyk7XG59O1xuU25hcFRyYW5zaXRpb24ucHJvdG90eXBlLnNldFZlbG9jaXR5ID0gZnVuY3Rpb24gc2V0VmVsb2NpdHkodmVsb2NpdHkpIHtcbiAgICB0aGlzLmNhbGwodGhpcywgX3NldFBhcnRpY2xlVmVsb2NpdHkodmVsb2NpdHkpKTtcbn07XG5TbmFwVHJhbnNpdGlvbi5wcm90b3R5cGUuaXNBY3RpdmUgPSBmdW5jdGlvbiBpc0FjdGl2ZSgpIHtcbiAgICByZXR1cm4gIXRoaXMuUEUuaXNTbGVlcGluZygpO1xufTtcblNuYXBUcmFuc2l0aW9uLnByb3RvdHlwZS5oYWx0ID0gZnVuY3Rpb24gaGFsdCgpIHtcbiAgICB0aGlzLnNldCh0aGlzLmdldCgpKTtcbn07XG5TbmFwVHJhbnNpdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0KCkge1xuICAgIF91cGRhdGUuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gX2dldFBhcnRpY2xlUG9zaXRpb24uY2FsbCh0aGlzKTtcbn07XG5TbmFwVHJhbnNpdGlvbi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0KHN0YXRlLCBkZWZpbml0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmICghZGVmaW5pdGlvbikge1xuICAgICAgICB0aGlzLnJlc2V0KHN0YXRlKTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9kaW1lbnNpb25zID0gc3RhdGUgaW5zdGFuY2VvZiBBcnJheSA/IHN0YXRlLmxlbmd0aCA6IDA7XG4gICAgX3dha2UuY2FsbCh0aGlzKTtcbiAgICBfc2V0dXBEZWZpbml0aW9uLmNhbGwodGhpcywgZGVmaW5pdGlvbik7XG4gICAgX3NldFRhcmdldC5jYWxsKHRoaXMsIHN0YXRlKTtcbiAgICBfc2V0Q2FsbGJhY2suY2FsbCh0aGlzLCBjYWxsYmFjayk7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBTbmFwVHJhbnNpdGlvbjsiLCJ2YXIgUEUgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9QaHlzaWNzRW5naW5lJyk7XG52YXIgUGFydGljbGUgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9ib2RpZXMvUGFydGljbGUnKTtcbnZhciBTcHJpbmcgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9mb3JjZXMvU3ByaW5nJyk7XG52YXIgVmVjdG9yID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJyk7XG5mdW5jdGlvbiBTcHJpbmdUcmFuc2l0aW9uKHN0YXRlKSB7XG4gICAgc3RhdGUgPSBzdGF0ZSB8fCAwO1xuICAgIHRoaXMuZW5kU3RhdGUgPSBuZXcgVmVjdG9yKHN0YXRlKTtcbiAgICB0aGlzLmluaXRTdGF0ZSA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLl9kaW1lbnNpb25zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Jlc3RUb2xlcmFuY2UgPSAxZS0xMDtcbiAgICB0aGlzLl9hYnNSZXN0VG9sZXJhbmNlID0gdGhpcy5fcmVzdFRvbGVyYW5jZTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLlBFID0gbmV3IFBFKCk7XG4gICAgdGhpcy5zcHJpbmcgPSBuZXcgU3ByaW5nKHsgYW5jaG9yOiB0aGlzLmVuZFN0YXRlIH0pO1xuICAgIHRoaXMucGFydGljbGUgPSBuZXcgUGFydGljbGUoKTtcbiAgICB0aGlzLlBFLmFkZEJvZHkodGhpcy5wYXJ0aWNsZSk7XG4gICAgdGhpcy5QRS5hdHRhY2godGhpcy5zcHJpbmcsIHRoaXMucGFydGljbGUpO1xufVxuU3ByaW5nVHJhbnNpdGlvbi5TVVBQT1JUU19NVUxUSVBMRSA9IDM7XG5TcHJpbmdUcmFuc2l0aW9uLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBwZXJpb2Q6IDMwMCxcbiAgICBkYW1waW5nUmF0aW86IDAuNSxcbiAgICB2ZWxvY2l0eTogMFxufTtcbmZ1bmN0aW9uIF9nZXRFbmVyZ3koKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljbGUuZ2V0RW5lcmd5KCkgKyB0aGlzLnNwcmluZy5nZXRFbmVyZ3koW3RoaXMucGFydGljbGVdKTtcbn1cbmZ1bmN0aW9uIF9zZXRQYXJ0aWNsZVBvc2l0aW9uKHApIHtcbiAgICB0aGlzLnBhcnRpY2xlLnNldFBvc2l0aW9uKHApO1xufVxuZnVuY3Rpb24gX3NldFBhcnRpY2xlVmVsb2NpdHkodikge1xuICAgIHRoaXMucGFydGljbGUuc2V0VmVsb2NpdHkodik7XG59XG5mdW5jdGlvbiBfZ2V0UGFydGljbGVQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZGltZW5zaW9ucyA9PT0gMCA/IHRoaXMucGFydGljbGUuZ2V0UG9zaXRpb24xRCgpIDogdGhpcy5wYXJ0aWNsZS5nZXRQb3NpdGlvbigpO1xufVxuZnVuY3Rpb24gX2dldFBhcnRpY2xlVmVsb2NpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RpbWVuc2lvbnMgPT09IDAgPyB0aGlzLnBhcnRpY2xlLmdldFZlbG9jaXR5MUQoKSA6IHRoaXMucGFydGljbGUuZ2V0VmVsb2NpdHkoKTtcbn1cbmZ1bmN0aW9uIF9zZXRDYWxsYmFjayhjYWxsYmFjaykge1xuICAgIHRoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2s7XG59XG5mdW5jdGlvbiBfd2FrZSgpIHtcbiAgICB0aGlzLlBFLndha2UoKTtcbn1cbmZ1bmN0aW9uIF9zbGVlcCgpIHtcbiAgICB0aGlzLlBFLnNsZWVwKCk7XG59XG5mdW5jdGlvbiBfdXBkYXRlKCkge1xuICAgIGlmICh0aGlzLlBFLmlzU2xlZXBpbmcoKSkge1xuICAgICAgICBpZiAodGhpcy5fY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBjYiA9IHRoaXMuX2NhbGxiYWNrO1xuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKF9nZXRFbmVyZ3kuY2FsbCh0aGlzKSA8IHRoaXMuX2Fic1Jlc3RUb2xlcmFuY2UpIHtcbiAgICAgICAgX3NldFBhcnRpY2xlUG9zaXRpb24uY2FsbCh0aGlzLCB0aGlzLmVuZFN0YXRlKTtcbiAgICAgICAgX3NldFBhcnRpY2xlVmVsb2NpdHkuY2FsbCh0aGlzLCBbXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXSk7XG4gICAgICAgIF9zbGVlcC5jYWxsKHRoaXMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9zZXR1cERlZmluaXRpb24oZGVmaW5pdGlvbikge1xuICAgIHZhciBkZWZhdWx0cyA9IFNwcmluZ1RyYW5zaXRpb24uREVGQVVMVF9PUFRJT05TO1xuICAgIGlmIChkZWZpbml0aW9uLnBlcmlvZCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBkZWZpbml0aW9uLnBlcmlvZCA9IGRlZmF1bHRzLnBlcmlvZDtcbiAgICBpZiAoZGVmaW5pdGlvbi5kYW1waW5nUmF0aW8gPT09IHVuZGVmaW5lZClcbiAgICAgICAgZGVmaW5pdGlvbi5kYW1waW5nUmF0aW8gPSBkZWZhdWx0cy5kYW1waW5nUmF0aW87XG4gICAgaWYgKGRlZmluaXRpb24udmVsb2NpdHkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgZGVmaW5pdGlvbi52ZWxvY2l0eSA9IGRlZmF1bHRzLnZlbG9jaXR5O1xuICAgIGlmIChkZWZpbml0aW9uLnBlcmlvZCA8IDE1MCkge1xuICAgICAgICBkZWZpbml0aW9uLnBlcmlvZCA9IDE1MDtcbiAgICAgICAgY29uc29sZS53YXJuKCdUaGUgcGVyaW9kIG9mIGEgU3ByaW5nVHJhbnNpdGlvbiBpcyBjYXBwZWQgYXQgMTUwIG1zLiBVc2UgYSBTbmFwVHJhbnNpdGlvbiBmb3IgZmFzdGVyIHRyYW5zaXRpb25zJyk7XG4gICAgfVxuICAgIHRoaXMuc3ByaW5nLnNldE9wdGlvbnMoe1xuICAgICAgICBwZXJpb2Q6IGRlZmluaXRpb24ucGVyaW9kLFxuICAgICAgICBkYW1waW5nUmF0aW86IGRlZmluaXRpb24uZGFtcGluZ1JhdGlvXG4gICAgfSk7XG4gICAgX3NldFBhcnRpY2xlVmVsb2NpdHkuY2FsbCh0aGlzLCBkZWZpbml0aW9uLnZlbG9jaXR5KTtcbn1cbmZ1bmN0aW9uIF9zZXRBYnNvbHV0ZVJlc3RUb2xlcmFuY2UoKSB7XG4gICAgdmFyIGRpc3RhbmNlID0gdGhpcy5lbmRTdGF0ZS5zdWIodGhpcy5pbml0U3RhdGUpLm5vcm1TcXVhcmVkKCk7XG4gICAgdGhpcy5fYWJzUmVzdFRvbGVyYW5jZSA9IGRpc3RhbmNlID09PSAwID8gdGhpcy5fcmVzdFRvbGVyYW5jZSA6IHRoaXMuX3Jlc3RUb2xlcmFuY2UgKiBkaXN0YW5jZTtcbn1cbmZ1bmN0aW9uIF9zZXRUYXJnZXQodGFyZ2V0KSB7XG4gICAgdGhpcy5lbmRTdGF0ZS5zZXQodGFyZ2V0KTtcbiAgICBfc2V0QWJzb2x1dGVSZXN0VG9sZXJhbmNlLmNhbGwodGhpcyk7XG59XG5TcHJpbmdUcmFuc2l0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KHBvcywgdmVsKSB7XG4gICAgdGhpcy5fZGltZW5zaW9ucyA9IHBvcyBpbnN0YW5jZW9mIEFycmF5ID8gcG9zLmxlbmd0aCA6IDA7XG4gICAgdGhpcy5pbml0U3RhdGUuc2V0KHBvcyk7XG4gICAgX3NldFBhcnRpY2xlUG9zaXRpb24uY2FsbCh0aGlzLCBwb3MpO1xuICAgIF9zZXRUYXJnZXQuY2FsbCh0aGlzLCBwb3MpO1xuICAgIGlmICh2ZWwpXG4gICAgICAgIF9zZXRQYXJ0aWNsZVZlbG9jaXR5LmNhbGwodGhpcywgdmVsKTtcbiAgICBfc2V0Q2FsbGJhY2suY2FsbCh0aGlzLCB1bmRlZmluZWQpO1xufTtcblNwcmluZ1RyYW5zaXRpb24ucHJvdG90eXBlLmdldFZlbG9jaXR5ID0gZnVuY3Rpb24gZ2V0VmVsb2NpdHkoKSB7XG4gICAgcmV0dXJuIF9nZXRQYXJ0aWNsZVZlbG9jaXR5LmNhbGwodGhpcyk7XG59O1xuU3ByaW5nVHJhbnNpdGlvbi5wcm90b3R5cGUuc2V0VmVsb2NpdHkgPSBmdW5jdGlvbiBzZXRWZWxvY2l0eSh2KSB7XG4gICAgdGhpcy5jYWxsKHRoaXMsIF9zZXRQYXJ0aWNsZVZlbG9jaXR5KHYpKTtcbn07XG5TcHJpbmdUcmFuc2l0aW9uLnByb3RvdHlwZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uIGlzQWN0aXZlKCkge1xuICAgIHJldHVybiAhdGhpcy5QRS5pc1NsZWVwaW5nKCk7XG59O1xuU3ByaW5nVHJhbnNpdGlvbi5wcm90b3R5cGUuaGFsdCA9IGZ1bmN0aW9uIGhhbHQoKSB7XG4gICAgdGhpcy5zZXQodGhpcy5nZXQoKSk7XG59O1xuU3ByaW5nVHJhbnNpdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0KCkge1xuICAgIF91cGRhdGUuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gX2dldFBhcnRpY2xlUG9zaXRpb24uY2FsbCh0aGlzKTtcbn07XG5TcHJpbmdUcmFuc2l0aW9uLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQoZW5kU3RhdGUsIGRlZmluaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFkZWZpbml0aW9uKSB7XG4gICAgICAgIHRoaXMucmVzZXQoZW5kU3RhdGUpO1xuICAgICAgICBpZiAoY2FsbGJhY2spXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2RpbWVuc2lvbnMgPSBlbmRTdGF0ZSBpbnN0YW5jZW9mIEFycmF5ID8gZW5kU3RhdGUubGVuZ3RoIDogMDtcbiAgICBfd2FrZS5jYWxsKHRoaXMpO1xuICAgIF9zZXR1cERlZmluaXRpb24uY2FsbCh0aGlzLCBkZWZpbml0aW9uKTtcbiAgICBfc2V0VGFyZ2V0LmNhbGwodGhpcywgZW5kU3RhdGUpO1xuICAgIF9zZXRDYWxsYmFjay5jYWxsKHRoaXMsIGNhbGxiYWNrKTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFNwcmluZ1RyYW5zaXRpb247IiwidmFyIE11bHRpcGxlVHJhbnNpdGlvbiA9IHJlcXVpcmUoJy4vTXVsdGlwbGVUcmFuc2l0aW9uJyk7XG52YXIgVHdlZW5UcmFuc2l0aW9uID0gcmVxdWlyZSgnLi9Ud2VlblRyYW5zaXRpb24nKTtcbmZ1bmN0aW9uIFRyYW5zaXRpb25hYmxlKHN0YXJ0KSB7XG4gICAgdGhpcy5jdXJyZW50QWN0aW9uID0gbnVsbDtcbiAgICB0aGlzLmFjdGlvblF1ZXVlID0gW107XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlID0gW107XG4gICAgdGhpcy5zdGF0ZSA9IDA7XG4gICAgdGhpcy52ZWxvY2l0eSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9jYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9lbmdpbmVJbnN0YW5jZSA9IG51bGw7XG4gICAgdGhpcy5fY3VycmVudE1ldGhvZCA9IG51bGw7XG4gICAgdGhpcy5zZXQoc3RhcnQpO1xufVxudmFyIHRyYW5zaXRpb25NZXRob2RzID0ge307XG5UcmFuc2l0aW9uYWJsZS5yZWdpc3Rlck1ldGhvZCA9IGZ1bmN0aW9uIHJlZ2lzdGVyTWV0aG9kKG5hbWUsIGVuZ2luZUNsYXNzKSB7XG4gICAgaWYgKCEobmFtZSBpbiB0cmFuc2l0aW9uTWV0aG9kcykpIHtcbiAgICAgICAgdHJhbnNpdGlvbk1ldGhvZHNbbmFtZV0gPSBlbmdpbmVDbGFzcztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbn07XG5UcmFuc2l0aW9uYWJsZS51bnJlZ2lzdGVyTWV0aG9kID0gZnVuY3Rpb24gdW5yZWdpc3Rlck1ldGhvZChuYW1lKSB7XG4gICAgaWYgKG5hbWUgaW4gdHJhbnNpdGlvbk1ldGhvZHMpIHtcbiAgICAgICAgZGVsZXRlIHRyYW5zaXRpb25NZXRob2RzW25hbWVdO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2VcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xufTtcbmZ1bmN0aW9uIF9sb2FkTmV4dCgpIHtcbiAgICBpZiAodGhpcy5fY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgICBpZiAodGhpcy5hY3Rpb25RdWV1ZS5sZW5ndGggPD0gMCkge1xuICAgICAgICB0aGlzLnNldCh0aGlzLmdldCgpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnRBY3Rpb24gPSB0aGlzLmFjdGlvblF1ZXVlLnNoaWZ0KCk7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSB0aGlzLmNhbGxiYWNrUXVldWUuc2hpZnQoKTtcbiAgICB2YXIgbWV0aG9kID0gbnVsbDtcbiAgICB2YXIgZW5kVmFsdWUgPSB0aGlzLmN1cnJlbnRBY3Rpb25bMF07XG4gICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzLmN1cnJlbnRBY3Rpb25bMV07XG4gICAgaWYgKHRyYW5zaXRpb24gaW5zdGFuY2VvZiBPYmplY3QgJiYgdHJhbnNpdGlvbi5tZXRob2QpIHtcbiAgICAgICAgbWV0aG9kID0gdHJhbnNpdGlvbi5tZXRob2Q7XG4gICAgICAgIGlmICh0eXBlb2YgbWV0aG9kID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgIG1ldGhvZCA9IHRyYW5zaXRpb25NZXRob2RzW21ldGhvZF07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbWV0aG9kID0gVHdlZW5UcmFuc2l0aW9uO1xuICAgIH1cbiAgICBpZiAodGhpcy5fY3VycmVudE1ldGhvZCAhPT0gbWV0aG9kKSB7XG4gICAgICAgIGlmICghKGVuZFZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB8fCBtZXRob2QuU1VQUE9SVFNfTVVMVElQTEUgPT09IHRydWUgfHwgZW5kVmFsdWUubGVuZ3RoIDw9IG1ldGhvZC5TVVBQT1JUU19NVUxUSVBMRSkge1xuICAgICAgICAgICAgdGhpcy5fZW5naW5lSW5zdGFuY2UgPSBuZXcgbWV0aG9kKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9lbmdpbmVJbnN0YW5jZSA9IG5ldyBNdWx0aXBsZVRyYW5zaXRpb24obWV0aG9kKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jdXJyZW50TWV0aG9kID0gbWV0aG9kO1xuICAgIH1cbiAgICB0aGlzLl9lbmdpbmVJbnN0YW5jZS5yZXNldCh0aGlzLnN0YXRlLCB0aGlzLnZlbG9jaXR5KTtcbiAgICBpZiAodGhpcy52ZWxvY2l0eSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0cmFuc2l0aW9uLnZlbG9jaXR5ID0gdGhpcy52ZWxvY2l0eTtcbiAgICB0aGlzLl9lbmdpbmVJbnN0YW5jZS5zZXQoZW5kVmFsdWUsIHRyYW5zaXRpb24sIF9sb2FkTmV4dC5iaW5kKHRoaXMpKTtcbn1cblRyYW5zaXRpb25hYmxlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQoZW5kU3RhdGUsIHRyYW5zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0cmFuc2l0aW9uKSB7XG4gICAgICAgIHRoaXMucmVzZXQoZW5kU3RhdGUpO1xuICAgICAgICBpZiAoY2FsbGJhY2spXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdmFyIGFjdGlvbiA9IFtcbiAgICAgICAgICAgIGVuZFN0YXRlLFxuICAgICAgICAgICAgdHJhbnNpdGlvblxuICAgICAgICBdO1xuICAgIHRoaXMuYWN0aW9uUXVldWUucHVzaChhY3Rpb24pO1xuICAgIHRoaXMuY2FsbGJhY2tRdWV1ZS5wdXNoKGNhbGxiYWNrKTtcbiAgICBpZiAoIXRoaXMuY3VycmVudEFjdGlvbilcbiAgICAgICAgX2xvYWROZXh0LmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuVHJhbnNpdGlvbmFibGUucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoc3RhcnRTdGF0ZSwgc3RhcnRWZWxvY2l0eSkge1xuICAgIHRoaXMuX2N1cnJlbnRNZXRob2QgPSBudWxsO1xuICAgIHRoaXMuX2VuZ2luZUluc3RhbmNlID0gbnVsbDtcbiAgICB0aGlzLl9jYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnN0YXRlID0gc3RhcnRTdGF0ZTtcbiAgICB0aGlzLnZlbG9jaXR5ID0gc3RhcnRWZWxvY2l0eTtcbiAgICB0aGlzLmN1cnJlbnRBY3Rpb24gPSBudWxsO1xuICAgIHRoaXMuYWN0aW9uUXVldWUgPSBbXTtcbiAgICB0aGlzLmNhbGxiYWNrUXVldWUgPSBbXTtcbn07XG5UcmFuc2l0aW9uYWJsZS5wcm90b3R5cGUuZGVsYXkgPSBmdW5jdGlvbiBkZWxheShkdXJhdGlvbiwgY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldCh0aGlzLmdldCgpLCB7XG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgY3VydmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgfSwgY2FsbGJhY2spO1xufTtcblRyYW5zaXRpb25hYmxlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQodGltZXN0YW1wKSB7XG4gICAgaWYgKHRoaXMuX2VuZ2luZUluc3RhbmNlKSB7XG4gICAgICAgIGlmICh0aGlzLl9lbmdpbmVJbnN0YW5jZS5nZXRWZWxvY2l0eSlcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHkgPSB0aGlzLl9lbmdpbmVJbnN0YW5jZS5nZXRWZWxvY2l0eSgpO1xuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5fZW5naW5lSW5zdGFuY2UuZ2V0KHRpbWVzdGFtcCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlO1xufTtcblRyYW5zaXRpb25hYmxlLnByb3RvdHlwZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uIGlzQWN0aXZlKCkge1xuICAgIHJldHVybiAhIXRoaXMuY3VycmVudEFjdGlvbjtcbn07XG5UcmFuc2l0aW9uYWJsZS5wcm90b3R5cGUuaGFsdCA9IGZ1bmN0aW9uIGhhbHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0KHRoaXMuZ2V0KCkpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gVHJhbnNpdGlvbmFibGU7IiwidmFyIFRyYW5zaXRpb25hYmxlID0gcmVxdWlyZSgnLi9UcmFuc2l0aW9uYWJsZScpO1xudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1RyYW5zZm9ybScpO1xudmFyIFV0aWxpdHkgPSByZXF1aXJlKCdmYW1vdXMvdXRpbGl0aWVzL1V0aWxpdHknKTtcbmZ1bmN0aW9uIFRyYW5zaXRpb25hYmxlVHJhbnNmb3JtKHRyYW5zZm9ybSkge1xuICAgIHRoaXMuX2ZpbmFsID0gVHJhbnNmb3JtLmlkZW50aXR5LnNsaWNlKCk7XG4gICAgdGhpcy5fZmluYWxUcmFuc2xhdGUgPSBbXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDBcbiAgICBdO1xuICAgIHRoaXMuX2ZpbmFsUm90YXRlID0gW1xuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXTtcbiAgICB0aGlzLl9maW5hbFNrZXcgPSBbXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIDBcbiAgICBdO1xuICAgIHRoaXMuX2ZpbmFsU2NhbGUgPSBbXG4gICAgICAgIDEsXG4gICAgICAgIDEsXG4gICAgICAgIDFcbiAgICBdO1xuICAgIHRoaXMudHJhbnNsYXRlID0gbmV3IFRyYW5zaXRpb25hYmxlKHRoaXMuX2ZpbmFsVHJhbnNsYXRlKTtcbiAgICB0aGlzLnJvdGF0ZSA9IG5ldyBUcmFuc2l0aW9uYWJsZSh0aGlzLl9maW5hbFJvdGF0ZSk7XG4gICAgdGhpcy5za2V3ID0gbmV3IFRyYW5zaXRpb25hYmxlKHRoaXMuX2ZpbmFsU2tldyk7XG4gICAgdGhpcy5zY2FsZSA9IG5ldyBUcmFuc2l0aW9uYWJsZSh0aGlzLl9maW5hbFNjYWxlKTtcbiAgICBpZiAodHJhbnNmb3JtKVxuICAgICAgICB0aGlzLnNldCh0cmFuc2Zvcm0pO1xufVxuZnVuY3Rpb24gX2J1aWxkKCkge1xuICAgIHJldHVybiBUcmFuc2Zvcm0uYnVpbGQoe1xuICAgICAgICB0cmFuc2xhdGU6IHRoaXMudHJhbnNsYXRlLmdldCgpLFxuICAgICAgICByb3RhdGU6IHRoaXMucm90YXRlLmdldCgpLFxuICAgICAgICBza2V3OiB0aGlzLnNrZXcuZ2V0KCksXG4gICAgICAgIHNjYWxlOiB0aGlzLnNjYWxlLmdldCgpXG4gICAgfSk7XG59XG5mdW5jdGlvbiBfYnVpbGRGaW5hbCgpIHtcbiAgICByZXR1cm4gVHJhbnNmb3JtLmJ1aWxkKHtcbiAgICAgICAgdHJhbnNsYXRlOiB0aGlzLl9maW5hbFRyYW5zbGF0ZSxcbiAgICAgICAgcm90YXRlOiB0aGlzLl9maW5hbFJvdGF0ZSxcbiAgICAgICAgc2tldzogdGhpcy5fZmluYWxTa2V3LFxuICAgICAgICBzY2FsZTogdGhpcy5fZmluYWxTY2FsZVxuICAgIH0pO1xufVxuVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0ucHJvdG90eXBlLnNldFRyYW5zbGF0ZSA9IGZ1bmN0aW9uIHNldFRyYW5zbGF0ZSh0cmFuc2xhdGUsIHRyYW5zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fZmluYWxUcmFuc2xhdGUgPSB0cmFuc2xhdGU7XG4gICAgdGhpcy5fZmluYWwgPSBfYnVpbGRGaW5hbC5jYWxsKHRoaXMpO1xuICAgIHRoaXMudHJhbnNsYXRlLnNldCh0cmFuc2xhdGUsIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybS5wcm90b3R5cGUuc2V0U2NhbGUgPSBmdW5jdGlvbiBzZXRTY2FsZShzY2FsZSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICB0aGlzLl9maW5hbFNjYWxlID0gc2NhbGU7XG4gICAgdGhpcy5fZmluYWwgPSBfYnVpbGRGaW5hbC5jYWxsKHRoaXMpO1xuICAgIHRoaXMuc2NhbGUuc2V0KHNjYWxlLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0ucHJvdG90eXBlLnNldFJvdGF0ZSA9IGZ1bmN0aW9uIHNldFJvdGF0ZShldWxlckFuZ2xlcywgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICB0aGlzLl9maW5hbFJvdGF0ZSA9IGV1bGVyQW5nbGVzO1xuICAgIHRoaXMuX2ZpbmFsID0gX2J1aWxkRmluYWwuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnJvdGF0ZS5zZXQoZXVsZXJBbmdsZXMsIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybS5wcm90b3R5cGUuc2V0U2tldyA9IGZ1bmN0aW9uIHNldFNrZXcoc2tld0FuZ2xlcywgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICB0aGlzLl9maW5hbFNrZXcgPSBza2V3QW5nbGVzO1xuICAgIHRoaXMuX2ZpbmFsID0gX2J1aWxkRmluYWwuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnNrZXcuc2V0KHNrZXdBbmdsZXMsIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0KHRyYW5zZm9ybSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgY29tcG9uZW50cyA9IFRyYW5zZm9ybS5pbnRlcnByZXQodHJhbnNmb3JtKTtcbiAgICB0aGlzLl9maW5hbFRyYW5zbGF0ZSA9IGNvbXBvbmVudHMudHJhbnNsYXRlO1xuICAgIHRoaXMuX2ZpbmFsUm90YXRlID0gY29tcG9uZW50cy5yb3RhdGU7XG4gICAgdGhpcy5fZmluYWxTa2V3ID0gY29tcG9uZW50cy5za2V3O1xuICAgIHRoaXMuX2ZpbmFsU2NhbGUgPSBjb21wb25lbnRzLnNjYWxlO1xuICAgIHRoaXMuX2ZpbmFsID0gdHJhbnNmb3JtO1xuICAgIHZhciBfY2FsbGJhY2sgPSBjYWxsYmFjayA/IFV0aWxpdHkuYWZ0ZXIoNCwgY2FsbGJhY2spIDogbnVsbDtcbiAgICB0aGlzLnRyYW5zbGF0ZS5zZXQoY29tcG9uZW50cy50cmFuc2xhdGUsIHRyYW5zaXRpb24sIF9jYWxsYmFjayk7XG4gICAgdGhpcy5yb3RhdGUuc2V0KGNvbXBvbmVudHMucm90YXRlLCB0cmFuc2l0aW9uLCBfY2FsbGJhY2spO1xuICAgIHRoaXMuc2tldy5zZXQoY29tcG9uZW50cy5za2V3LCB0cmFuc2l0aW9uLCBfY2FsbGJhY2spO1xuICAgIHRoaXMuc2NhbGUuc2V0KGNvbXBvbmVudHMuc2NhbGUsIHRyYW5zaXRpb24sIF9jYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0ucHJvdG90eXBlLnNldERlZmF1bHRUcmFuc2l0aW9uID0gZnVuY3Rpb24gc2V0RGVmYXVsdFRyYW5zaXRpb24odHJhbnNpdGlvbikge1xuICAgIHRoaXMudHJhbnNsYXRlLnNldERlZmF1bHQodHJhbnNpdGlvbik7XG4gICAgdGhpcy5yb3RhdGUuc2V0RGVmYXVsdCh0cmFuc2l0aW9uKTtcbiAgICB0aGlzLnNrZXcuc2V0RGVmYXVsdCh0cmFuc2l0aW9uKTtcbiAgICB0aGlzLnNjYWxlLnNldERlZmF1bHQodHJhbnNpdGlvbik7XG59O1xuVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCgpIHtcbiAgICBpZiAodGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgIHJldHVybiBfYnVpbGQuY2FsbCh0aGlzKTtcbiAgICB9IGVsc2VcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmFsO1xufTtcblRyYW5zaXRpb25hYmxlVHJhbnNmb3JtLnByb3RvdHlwZS5nZXRGaW5hbCA9IGZ1bmN0aW9uIGdldEZpbmFsKCkge1xuICAgIHJldHVybiB0aGlzLl9maW5hbDtcbn07XG5UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybS5wcm90b3R5cGUuaXNBY3RpdmUgPSBmdW5jdGlvbiBpc0FjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGUuaXNBY3RpdmUoKSB8fCB0aGlzLnJvdGF0ZS5pc0FjdGl2ZSgpIHx8IHRoaXMuc2NhbGUuaXNBY3RpdmUoKSB8fCB0aGlzLnNrZXcuaXNBY3RpdmUoKTtcbn07XG5UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybS5wcm90b3R5cGUuaGFsdCA9IGZ1bmN0aW9uIGhhbHQoKSB7XG4gICAgdGhpcy50cmFuc2xhdGUuaGFsdCgpO1xuICAgIHRoaXMucm90YXRlLmhhbHQoKTtcbiAgICB0aGlzLnNrZXcuaGFsdCgpO1xuICAgIHRoaXMuc2NhbGUuaGFsdCgpO1xuICAgIHRoaXMuX2ZpbmFsID0gdGhpcy5nZXQoKTtcbiAgICB0aGlzLl9maW5hbFRyYW5zbGF0ZSA9IHRoaXMudHJhbnNsYXRlLmdldCgpO1xuICAgIHRoaXMuX2ZpbmFsUm90YXRlID0gdGhpcy5yb3RhdGUuZ2V0KCk7XG4gICAgdGhpcy5fZmluYWxTa2V3ID0gdGhpcy5za2V3LmdldCgpO1xuICAgIHRoaXMuX2ZpbmFsU2NhbGUgPSB0aGlzLnNjYWxlLmdldCgpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm07IiwiZnVuY3Rpb24gVHdlZW5UcmFuc2l0aW9uKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFR3ZWVuVHJhbnNpdGlvbi5ERUZBVUxUX09QVElPTlMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5fc3RhcnRUaW1lID0gMDtcbiAgICB0aGlzLl9zdGFydFZhbHVlID0gMDtcbiAgICB0aGlzLl91cGRhdGVUaW1lID0gMDtcbiAgICB0aGlzLl9lbmRWYWx1ZSA9IDA7XG4gICAgdGhpcy5fY3VydmUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZHVyYXRpb24gPSAwO1xuICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuX2NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc3RhdGUgPSAwO1xuICAgIHRoaXMudmVsb2NpdHkgPSB1bmRlZmluZWQ7XG59XG5Ud2VlblRyYW5zaXRpb24uQ3VydmVzID0ge1xuICAgIGxpbmVhcjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfSxcbiAgICBlYXNlSW46IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB0ICogdDtcbiAgICB9LFxuICAgIGVhc2VPdXQ6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB0ICogKDIgLSB0KTtcbiAgICB9LFxuICAgIGVhc2VJbk91dDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgaWYgKHQgPD0gMC41KVxuICAgICAgICAgICAgcmV0dXJuIDIgKiB0ICogdDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIC0yICogdCAqIHQgKyA0ICogdCAtIDE7XG4gICAgfSxcbiAgICBlYXNlT3V0Qm91bmNlOiBmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4gdCAqICgzIC0gMiAqIHQpO1xuICAgIH0sXG4gICAgc3ByaW5nOiBmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4gKDEgLSB0KSAqIE1hdGguc2luKDYgKiBNYXRoLlBJICogdCkgKyB0O1xuICAgIH1cbn07XG5Ud2VlblRyYW5zaXRpb24uU1VQUE9SVFNfTVVMVElQTEUgPSB0cnVlO1xuVHdlZW5UcmFuc2l0aW9uLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBjdXJ2ZTogVHdlZW5UcmFuc2l0aW9uLkN1cnZlcy5saW5lYXIsXG4gICAgZHVyYXRpb246IDUwMCxcbiAgICBzcGVlZDogMFxufTtcbnZhciByZWdpc3RlcmVkQ3VydmVzID0ge307XG5Ud2VlblRyYW5zaXRpb24ucmVnaXN0ZXJDdXJ2ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVyQ3VydmUoY3VydmVOYW1lLCBjdXJ2ZSkge1xuICAgIGlmICghcmVnaXN0ZXJlZEN1cnZlc1tjdXJ2ZU5hbWVdKSB7XG4gICAgICAgIHJlZ2lzdGVyZWRDdXJ2ZXNbY3VydmVOYW1lXSA9IGN1cnZlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblR3ZWVuVHJhbnNpdGlvbi51bnJlZ2lzdGVyQ3VydmUgPSBmdW5jdGlvbiB1bnJlZ2lzdGVyQ3VydmUoY3VydmVOYW1lKSB7XG4gICAgaWYgKHJlZ2lzdGVyZWRDdXJ2ZXNbY3VydmVOYW1lXSkge1xuICAgICAgICBkZWxldGUgcmVnaXN0ZXJlZEN1cnZlc1tjdXJ2ZU5hbWVdO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblR3ZWVuVHJhbnNpdGlvbi5nZXRDdXJ2ZSA9IGZ1bmN0aW9uIGdldEN1cnZlKGN1cnZlTmFtZSkge1xuICAgIHZhciBjdXJ2ZSA9IHJlZ2lzdGVyZWRDdXJ2ZXNbY3VydmVOYW1lXTtcbiAgICBpZiAoY3VydmUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIGN1cnZlO1xuICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjdXJ2ZSBub3QgcmVnaXN0ZXJlZCcpO1xufTtcblR3ZWVuVHJhbnNpdGlvbi5nZXRDdXJ2ZXMgPSBmdW5jdGlvbiBnZXRDdXJ2ZXMoKSB7XG4gICAgcmV0dXJuIHJlZ2lzdGVyZWRDdXJ2ZXM7XG59O1xuZnVuY3Rpb24gX2ludGVycG9sYXRlKGEsIGIsIHQpIHtcbiAgICByZXR1cm4gKDEgLSB0KSAqIGEgKyB0ICogYjtcbn1cbmZ1bmN0aW9uIF9jbG9uZShvYmopIHtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgIHJldHVybiBvYmouc2xpY2UoMCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKG9iaik7XG4gICAgfSBlbHNlXG4gICAgICAgIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBfbm9ybWFsaXplKHRyYW5zaXRpb24sIGRlZmF1bHRUcmFuc2l0aW9uKSB7XG4gICAgdmFyIHJlc3VsdCA9IHsgY3VydmU6IGRlZmF1bHRUcmFuc2l0aW9uLmN1cnZlIH07XG4gICAgaWYgKGRlZmF1bHRUcmFuc2l0aW9uLmR1cmF0aW9uKVxuICAgICAgICByZXN1bHQuZHVyYXRpb24gPSBkZWZhdWx0VHJhbnNpdGlvbi5kdXJhdGlvbjtcbiAgICBpZiAoZGVmYXVsdFRyYW5zaXRpb24uc3BlZWQpXG4gICAgICAgIHJlc3VsdC5zcGVlZCA9IGRlZmF1bHRUcmFuc2l0aW9uLnNwZWVkO1xuICAgIGlmICh0cmFuc2l0aW9uIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uLmR1cmF0aW9uICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXN1bHQuZHVyYXRpb24gPSB0cmFuc2l0aW9uLmR1cmF0aW9uO1xuICAgICAgICBpZiAodHJhbnNpdGlvbi5jdXJ2ZSlcbiAgICAgICAgICAgIHJlc3VsdC5jdXJ2ZSA9IHRyYW5zaXRpb24uY3VydmU7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uLnNwZWVkKVxuICAgICAgICAgICAgcmVzdWx0LnNwZWVkID0gdHJhbnNpdGlvbi5zcGVlZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZXN1bHQuY3VydmUgPT09ICdzdHJpbmcnKVxuICAgICAgICByZXN1bHQuY3VydmUgPSBUd2VlblRyYW5zaXRpb24uZ2V0Q3VydmUocmVzdWx0LmN1cnZlKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuVHdlZW5UcmFuc2l0aW9uLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuY3VydmUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLmN1cnZlID0gb3B0aW9ucy5jdXJ2ZTtcbiAgICBpZiAob3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLm9wdGlvbnMuZHVyYXRpb24gPSBvcHRpb25zLmR1cmF0aW9uO1xuICAgIGlmIChvcHRpb25zLnNwZWVkICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMub3B0aW9ucy5zcGVlZCA9IG9wdGlvbnMuc3BlZWQ7XG59O1xuVHdlZW5UcmFuc2l0aW9uLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQoZW5kVmFsdWUsIHRyYW5zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0cmFuc2l0aW9uKSB7XG4gICAgICAgIHRoaXMucmVzZXQoZW5kVmFsdWUpO1xuICAgICAgICBpZiAoY2FsbGJhY2spXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N0YXJ0VmFsdWUgPSBfY2xvbmUodGhpcy5nZXQoKSk7XG4gICAgdHJhbnNpdGlvbiA9IF9ub3JtYWxpemUodHJhbnNpdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICBpZiAodHJhbnNpdGlvbi5zcGVlZCkge1xuICAgICAgICB2YXIgc3RhcnRWYWx1ZSA9IHRoaXMuX3N0YXJ0VmFsdWU7XG4gICAgICAgIGlmIChzdGFydFZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgdmFyaWFuY2UgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBzdGFydFZhbHVlKVxuICAgICAgICAgICAgICAgIHZhcmlhbmNlICs9IChlbmRWYWx1ZVtpXSAtIHN0YXJ0VmFsdWVbaV0pICogKGVuZFZhbHVlW2ldIC0gc3RhcnRWYWx1ZVtpXSk7XG4gICAgICAgICAgICB0cmFuc2l0aW9uLmR1cmF0aW9uID0gTWF0aC5zcXJ0KHZhcmlhbmNlKSAvIHRyYW5zaXRpb24uc3BlZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uLmR1cmF0aW9uID0gTWF0aC5hYnMoZW5kVmFsdWUgLSBzdGFydFZhbHVlKSAvIHRyYW5zaXRpb24uc3BlZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLl9lbmRWYWx1ZSA9IF9jbG9uZShlbmRWYWx1ZSk7XG4gICAgdGhpcy5fc3RhcnRWZWxvY2l0eSA9IF9jbG9uZSh0cmFuc2l0aW9uLnZlbG9jaXR5KTtcbiAgICB0aGlzLl9kdXJhdGlvbiA9IHRyYW5zaXRpb24uZHVyYXRpb247XG4gICAgdGhpcy5fY3VydmUgPSB0cmFuc2l0aW9uLmN1cnZlO1xuICAgIHRoaXMuX2FjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbn07XG5Ud2VlblRyYW5zaXRpb24ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoc3RhcnRWYWx1ZSwgc3RhcnRWZWxvY2l0eSkge1xuICAgIGlmICh0aGlzLl9jYWxsYmFjaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0aGlzLl9jYWxsYmFjaztcbiAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUgPSBfY2xvbmUoc3RhcnRWYWx1ZSk7XG4gICAgdGhpcy52ZWxvY2l0eSA9IF9jbG9uZShzdGFydFZlbG9jaXR5KTtcbiAgICB0aGlzLl9zdGFydFRpbWUgPSAwO1xuICAgIHRoaXMuX2R1cmF0aW9uID0gMDtcbiAgICB0aGlzLl91cGRhdGVUaW1lID0gMDtcbiAgICB0aGlzLl9zdGFydFZhbHVlID0gdGhpcy5zdGF0ZTtcbiAgICB0aGlzLl9zdGFydFZlbG9jaXR5ID0gdGhpcy52ZWxvY2l0eTtcbiAgICB0aGlzLl9lbmRWYWx1ZSA9IHRoaXMuc3RhdGU7XG4gICAgdGhpcy5fYWN0aXZlID0gZmFsc2U7XG59O1xuVHdlZW5UcmFuc2l0aW9uLnByb3RvdHlwZS5nZXRWZWxvY2l0eSA9IGZ1bmN0aW9uIGdldFZlbG9jaXR5KCkge1xuICAgIHJldHVybiB0aGlzLnZlbG9jaXR5O1xufTtcblR3ZWVuVHJhbnNpdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0KHRpbWVzdGFtcCkge1xuICAgIHRoaXMudXBkYXRlKHRpbWVzdGFtcCk7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG59O1xuZnVuY3Rpb24gX2NhbGN1bGF0ZVZlbG9jaXR5KGN1cnJlbnQsIHN0YXJ0LCBjdXJ2ZSwgZHVyYXRpb24sIHQpIHtcbiAgICB2YXIgdmVsb2NpdHk7XG4gICAgdmFyIGVwcyA9IDFlLTc7XG4gICAgdmFyIHNwZWVkID0gKGN1cnZlKHQpIC0gY3VydmUodCAtIGVwcykpIC8gZXBzO1xuICAgIGlmIChjdXJyZW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdmVsb2NpdHkgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRbaV0gPT09ICdudW1iZXInKVxuICAgICAgICAgICAgICAgIHZlbG9jaXR5W2ldID0gc3BlZWQgKiAoY3VycmVudFtpXSAtIHN0YXJ0W2ldKSAvIGR1cmF0aW9uO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHZlbG9jaXR5W2ldID0gMDtcbiAgICAgICAgfVxuICAgIH0gZWxzZVxuICAgICAgICB2ZWxvY2l0eSA9IHNwZWVkICogKGN1cnJlbnQgLSBzdGFydCkgLyBkdXJhdGlvbjtcbiAgICByZXR1cm4gdmVsb2NpdHk7XG59XG5mdW5jdGlvbiBfY2FsY3VsYXRlU3RhdGUoc3RhcnQsIGVuZCwgdCkge1xuICAgIHZhciBzdGF0ZTtcbiAgICBpZiAoc3RhcnQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICBzdGF0ZSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXJ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0YXJ0W2ldID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICBzdGF0ZVtpXSA9IF9pbnRlcnBvbGF0ZShzdGFydFtpXSwgZW5kW2ldLCB0KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBzdGF0ZVtpXSA9IHN0YXJ0W2ldO1xuICAgICAgICB9XG4gICAgfSBlbHNlXG4gICAgICAgIHN0YXRlID0gX2ludGVycG9sYXRlKHN0YXJ0LCBlbmQsIHQpO1xuICAgIHJldHVybiBzdGF0ZTtcbn1cblR3ZWVuVHJhbnNpdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKHRpbWVzdGFtcCkge1xuICAgIGlmICghdGhpcy5fYWN0aXZlKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRpbWVzdGFtcClcbiAgICAgICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5fdXBkYXRlVGltZSA+PSB0aW1lc3RhbXApXG4gICAgICAgIHJldHVybjtcbiAgICB0aGlzLl91cGRhdGVUaW1lID0gdGltZXN0YW1wO1xuICAgIHZhciB0aW1lU2luY2VTdGFydCA9IHRpbWVzdGFtcCAtIHRoaXMuX3N0YXJ0VGltZTtcbiAgICBpZiAodGltZVNpbmNlU3RhcnQgPj0gdGhpcy5fZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuX2VuZFZhbHVlO1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gX2NhbGN1bGF0ZVZlbG9jaXR5KHRoaXMuc3RhdGUsIHRoaXMuX3N0YXJ0VmFsdWUsIHRoaXMuX2N1cnZlLCB0aGlzLl9kdXJhdGlvbiwgMSk7XG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAodGltZVNpbmNlU3RhcnQgPCAwKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLl9zdGFydFZhbHVlO1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdGhpcy5fc3RhcnRWZWxvY2l0eTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdCA9IHRpbWVTaW5jZVN0YXJ0IC8gdGhpcy5fZHVyYXRpb247XG4gICAgICAgIHRoaXMuc3RhdGUgPSBfY2FsY3VsYXRlU3RhdGUodGhpcy5fc3RhcnRWYWx1ZSwgdGhpcy5fZW5kVmFsdWUsIHRoaXMuX2N1cnZlKHQpKTtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IF9jYWxjdWxhdGVWZWxvY2l0eSh0aGlzLnN0YXRlLCB0aGlzLl9zdGFydFZhbHVlLCB0aGlzLl9jdXJ2ZSwgdGhpcy5fZHVyYXRpb24sIHQpO1xuICAgIH1cbn07XG5Ud2VlblRyYW5zaXRpb24ucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24gaXNBY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGl2ZTtcbn07XG5Ud2VlblRyYW5zaXRpb24ucHJvdG90eXBlLmhhbHQgPSBmdW5jdGlvbiBoYWx0KCkge1xuICAgIHRoaXMucmVzZXQodGhpcy5nZXQoKSk7XG59O1xuVHdlZW5UcmFuc2l0aW9uLnJlZ2lzdGVyQ3VydmUoJ2xpbmVhcicsIFR3ZWVuVHJhbnNpdGlvbi5DdXJ2ZXMubGluZWFyKTtcblR3ZWVuVHJhbnNpdGlvbi5yZWdpc3RlckN1cnZlKCdlYXNlSW4nLCBUd2VlblRyYW5zaXRpb24uQ3VydmVzLmVhc2VJbik7XG5Ud2VlblRyYW5zaXRpb24ucmVnaXN0ZXJDdXJ2ZSgnZWFzZU91dCcsIFR3ZWVuVHJhbnNpdGlvbi5DdXJ2ZXMuZWFzZU91dCk7XG5Ud2VlblRyYW5zaXRpb24ucmVnaXN0ZXJDdXJ2ZSgnZWFzZUluT3V0JywgVHdlZW5UcmFuc2l0aW9uLkN1cnZlcy5lYXNlSW5PdXQpO1xuVHdlZW5UcmFuc2l0aW9uLnJlZ2lzdGVyQ3VydmUoJ2Vhc2VPdXRCb3VuY2UnLCBUd2VlblRyYW5zaXRpb24uQ3VydmVzLmVhc2VPdXRCb3VuY2UpO1xuVHdlZW5UcmFuc2l0aW9uLnJlZ2lzdGVyQ3VydmUoJ3NwcmluZycsIFR3ZWVuVHJhbnNpdGlvbi5DdXJ2ZXMuc3ByaW5nKTtcblR3ZWVuVHJhbnNpdGlvbi5jdXN0b21DdXJ2ZSA9IGZ1bmN0aW9uIGN1c3RvbUN1cnZlKHYxLCB2Mikge1xuICAgIHYxID0gdjEgfHwgMDtcbiAgICB2MiA9IHYyIHx8IDA7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB2MSAqIHQgKyAoLTIgKiB2MSAtIHYyICsgMykgKiB0ICogdCArICh2MSArIHYyIC0gMikgKiB0ICogdCAqIHQ7XG4gICAgfTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFR3ZWVuVHJhbnNpdGlvbjsiLCJ2YXIgUEUgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9QaHlzaWNzRW5naW5lJyk7XG52YXIgUGFydGljbGUgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9ib2RpZXMvUGFydGljbGUnKTtcbnZhciBTcHJpbmcgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9mb3JjZXMvU3ByaW5nJyk7XG52YXIgV2FsbCA9IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1dhbGwnKTtcbnZhciBWZWN0b3IgPSByZXF1aXJlKCdmYW1vdXMvbWF0aC9WZWN0b3InKTtcbmZ1bmN0aW9uIFdhbGxUcmFuc2l0aW9uKHN0YXRlKSB7XG4gICAgc3RhdGUgPSBzdGF0ZSB8fCAwO1xuICAgIHRoaXMuZW5kU3RhdGUgPSBuZXcgVmVjdG9yKHN0YXRlKTtcbiAgICB0aGlzLmluaXRTdGF0ZSA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLnNwcmluZyA9IG5ldyBTcHJpbmcoeyBhbmNob3I6IHRoaXMuZW5kU3RhdGUgfSk7XG4gICAgdGhpcy53YWxsID0gbmV3IFdhbGwoKTtcbiAgICB0aGlzLl9yZXN0VG9sZXJhbmNlID0gMWUtMTA7XG4gICAgdGhpcy5fZGltZW5zaW9ucyA9IDE7XG4gICAgdGhpcy5fYWJzUmVzdFRvbGVyYW5jZSA9IHRoaXMuX3Jlc3RUb2xlcmFuY2U7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5QRSA9IG5ldyBQRSgpO1xuICAgIHRoaXMucGFydGljbGUgPSBuZXcgUGFydGljbGUoKTtcbiAgICB0aGlzLlBFLmFkZEJvZHkodGhpcy5wYXJ0aWNsZSk7XG4gICAgdGhpcy5QRS5hdHRhY2goW1xuICAgICAgICB0aGlzLndhbGwsXG4gICAgICAgIHRoaXMuc3ByaW5nXG4gICAgXSwgdGhpcy5wYXJ0aWNsZSk7XG59XG5XYWxsVHJhbnNpdGlvbi5TVVBQT1JUU19NVUxUSVBMRSA9IDM7XG5XYWxsVHJhbnNpdGlvbi5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgcGVyaW9kOiAzMDAsXG4gICAgZGFtcGluZ1JhdGlvOiAwLjUsXG4gICAgdmVsb2NpdHk6IDAsXG4gICAgcmVzdGl0dXRpb246IDAuNVxufTtcbmZ1bmN0aW9uIF9nZXRFbmVyZ3koKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljbGUuZ2V0RW5lcmd5KCkgKyB0aGlzLnNwcmluZy5nZXRFbmVyZ3koW3RoaXMucGFydGljbGVdKTtcbn1cbmZ1bmN0aW9uIF9zZXRBYnNvbHV0ZVJlc3RUb2xlcmFuY2UoKSB7XG4gICAgdmFyIGRpc3RhbmNlID0gdGhpcy5lbmRTdGF0ZS5zdWIodGhpcy5pbml0U3RhdGUpLm5vcm1TcXVhcmVkKCk7XG4gICAgdGhpcy5fYWJzUmVzdFRvbGVyYW5jZSA9IGRpc3RhbmNlID09PSAwID8gdGhpcy5fcmVzdFRvbGVyYW5jZSA6IHRoaXMuX3Jlc3RUb2xlcmFuY2UgKiBkaXN0YW5jZTtcbn1cbmZ1bmN0aW9uIF93YWtlKCkge1xuICAgIHRoaXMuUEUud2FrZSgpO1xufVxuZnVuY3Rpb24gX3NsZWVwKCkge1xuICAgIHRoaXMuUEUuc2xlZXAoKTtcbn1cbmZ1bmN0aW9uIF9zZXRUYXJnZXQodGFyZ2V0KSB7XG4gICAgdGhpcy5lbmRTdGF0ZS5zZXQodGFyZ2V0KTtcbiAgICB2YXIgZGlzdCA9IHRoaXMuZW5kU3RhdGUuc3ViKHRoaXMuaW5pdFN0YXRlKS5ub3JtKCk7XG4gICAgdGhpcy53YWxsLnNldE9wdGlvbnMoe1xuICAgICAgICBkaXN0YW5jZTogdGhpcy5lbmRTdGF0ZS5ub3JtKCksXG4gICAgICAgIG5vcm1hbDogZGlzdCA9PT0gMCA/IHRoaXMucGFydGljbGUudmVsb2NpdHkubm9ybWFsaXplKC0xKSA6IHRoaXMuZW5kU3RhdGUuc3ViKHRoaXMuaW5pdFN0YXRlKS5ub3JtYWxpemUoLTEpXG4gICAgfSk7XG4gICAgX3NldEFic29sdXRlUmVzdFRvbGVyYW5jZS5jYWxsKHRoaXMpO1xufVxuZnVuY3Rpb24gX3NldFBhcnRpY2xlUG9zaXRpb24ocCkge1xuICAgIHRoaXMucGFydGljbGUucG9zaXRpb24uc2V0KHApO1xufVxuZnVuY3Rpb24gX3NldFBhcnRpY2xlVmVsb2NpdHkodikge1xuICAgIHRoaXMucGFydGljbGUudmVsb2NpdHkuc2V0KHYpO1xufVxuZnVuY3Rpb24gX2dldFBhcnRpY2xlUG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RpbWVuc2lvbnMgPT09IDAgPyB0aGlzLnBhcnRpY2xlLmdldFBvc2l0aW9uMUQoKSA6IHRoaXMucGFydGljbGUuZ2V0UG9zaXRpb24oKTtcbn1cbmZ1bmN0aW9uIF9nZXRQYXJ0aWNsZVZlbG9jaXR5KCkge1xuICAgIHJldHVybiB0aGlzLl9kaW1lbnNpb25zID09PSAwID8gdGhpcy5wYXJ0aWNsZS5nZXRWZWxvY2l0eTFEKCkgOiB0aGlzLnBhcnRpY2xlLmdldFZlbG9jaXR5KCk7XG59XG5mdW5jdGlvbiBfc2V0Q2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xufVxuZnVuY3Rpb24gX3VwZGF0ZSgpIHtcbiAgICBpZiAodGhpcy5QRS5pc1NsZWVwaW5nKCkpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgY2IgPSB0aGlzLl9jYWxsYmFjaztcbiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBlbmVyZ3kgPSBfZ2V0RW5lcmd5LmNhbGwodGhpcyk7XG4gICAgaWYgKGVuZXJneSA8IHRoaXMuX2Fic1Jlc3RUb2xlcmFuY2UpIHtcbiAgICAgICAgX3NsZWVwLmNhbGwodGhpcyk7XG4gICAgICAgIF9zZXRQYXJ0aWNsZVBvc2l0aW9uLmNhbGwodGhpcywgdGhpcy5lbmRTdGF0ZSk7XG4gICAgICAgIF9zZXRQYXJ0aWNsZVZlbG9jaXR5LmNhbGwodGhpcywgW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwXG4gICAgICAgIF0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9zZXR1cERlZmluaXRpb24oZGVmKSB7XG4gICAgdmFyIGRlZmF1bHRzID0gV2FsbFRyYW5zaXRpb24uREVGQVVMVF9PUFRJT05TO1xuICAgIGlmIChkZWYucGVyaW9kID09PSB1bmRlZmluZWQpXG4gICAgICAgIGRlZi5wZXJpb2QgPSBkZWZhdWx0cy5wZXJpb2Q7XG4gICAgaWYgKGRlZi5kYW1waW5nUmF0aW8gPT09IHVuZGVmaW5lZClcbiAgICAgICAgZGVmLmRhbXBpbmdSYXRpbyA9IGRlZmF1bHRzLmRhbXBpbmdSYXRpbztcbiAgICBpZiAoZGVmLnZlbG9jaXR5ID09PSB1bmRlZmluZWQpXG4gICAgICAgIGRlZi52ZWxvY2l0eSA9IGRlZmF1bHRzLnZlbG9jaXR5O1xuICAgIGlmIChkZWYucmVzdGl0dXRpb24gPT09IHVuZGVmaW5lZClcbiAgICAgICAgZGVmLnJlc3RpdHV0aW9uID0gZGVmYXVsdHMucmVzdGl0dXRpb247XG4gICAgdGhpcy5zcHJpbmcuc2V0T3B0aW9ucyh7XG4gICAgICAgIHBlcmlvZDogZGVmLnBlcmlvZCxcbiAgICAgICAgZGFtcGluZ1JhdGlvOiBkZWYuZGFtcGluZ1JhdGlvXG4gICAgfSk7XG4gICAgdGhpcy53YWxsLnNldE9wdGlvbnMoeyByZXN0aXR1dGlvbjogZGVmLnJlc3RpdHV0aW9uIH0pO1xuICAgIF9zZXRQYXJ0aWNsZVZlbG9jaXR5LmNhbGwodGhpcywgZGVmLnZlbG9jaXR5KTtcbn1cbldhbGxUcmFuc2l0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KHN0YXRlLCB2ZWxvY2l0eSkge1xuICAgIHRoaXMuX2RpbWVuc2lvbnMgPSBzdGF0ZSBpbnN0YW5jZW9mIEFycmF5ID8gc3RhdGUubGVuZ3RoIDogMDtcbiAgICB0aGlzLmluaXRTdGF0ZS5zZXQoc3RhdGUpO1xuICAgIF9zZXRQYXJ0aWNsZVBvc2l0aW9uLmNhbGwodGhpcywgc3RhdGUpO1xuICAgIGlmICh2ZWxvY2l0eSlcbiAgICAgICAgX3NldFBhcnRpY2xlVmVsb2NpdHkuY2FsbCh0aGlzLCB2ZWxvY2l0eSk7XG4gICAgX3NldFRhcmdldC5jYWxsKHRoaXMsIHN0YXRlKTtcbiAgICBfc2V0Q2FsbGJhY2suY2FsbCh0aGlzLCB1bmRlZmluZWQpO1xufTtcbldhbGxUcmFuc2l0aW9uLnByb3RvdHlwZS5nZXRWZWxvY2l0eSA9IGZ1bmN0aW9uIGdldFZlbG9jaXR5KCkge1xuICAgIHJldHVybiBfZ2V0UGFydGljbGVWZWxvY2l0eS5jYWxsKHRoaXMpO1xufTtcbldhbGxUcmFuc2l0aW9uLnByb3RvdHlwZS5zZXRWZWxvY2l0eSA9IGZ1bmN0aW9uIHNldFZlbG9jaXR5KHZlbG9jaXR5KSB7XG4gICAgdGhpcy5jYWxsKHRoaXMsIF9zZXRQYXJ0aWNsZVZlbG9jaXR5KHZlbG9jaXR5KSk7XG59O1xuV2FsbFRyYW5zaXRpb24ucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24gaXNBY3RpdmUoKSB7XG4gICAgcmV0dXJuICF0aGlzLlBFLmlzU2xlZXBpbmcoKTtcbn07XG5XYWxsVHJhbnNpdGlvbi5wcm90b3R5cGUuaGFsdCA9IGZ1bmN0aW9uIGhhbHQoKSB7XG4gICAgdGhpcy5zZXQodGhpcy5nZXQoKSk7XG59O1xuV2FsbFRyYW5zaXRpb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCgpIHtcbiAgICBfdXBkYXRlLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIF9nZXRQYXJ0aWNsZVBvc2l0aW9uLmNhbGwodGhpcyk7XG59O1xuV2FsbFRyYW5zaXRpb24ucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldChzdGF0ZSwgZGVmaW5pdGlvbiwgY2FsbGJhY2spIHtcbiAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgdGhpcy5yZXNldChzdGF0ZSk7XG4gICAgICAgIGlmIChjYWxsYmFjaylcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZGltZW5zaW9ucyA9IHN0YXRlIGluc3RhbmNlb2YgQXJyYXkgPyBzdGF0ZS5sZW5ndGggOiAwO1xuICAgIF93YWtlLmNhbGwodGhpcyk7XG4gICAgX3NldHVwRGVmaW5pdGlvbi5jYWxsKHRoaXMsIGRlZmluaXRpb24pO1xuICAgIF9zZXRUYXJnZXQuY2FsbCh0aGlzLCBzdGF0ZSk7XG4gICAgX3NldENhbGxiYWNrLmNhbGwodGhpcywgY2FsbGJhY2spO1xufTtcbm1vZHVsZS5leHBvcnRzID0gV2FsbFRyYW5zaXRpb247IiwidmFyIEtleUNvZGVzID0ge1xuICAgICAgICAwOiA0OCxcbiAgICAgICAgMTogNDksXG4gICAgICAgIDI6IDUwLFxuICAgICAgICAzOiA1MSxcbiAgICAgICAgNDogNTIsXG4gICAgICAgIDU6IDUzLFxuICAgICAgICA2OiA1NCxcbiAgICAgICAgNzogNTUsXG4gICAgICAgIDg6IDU2LFxuICAgICAgICA5OiA1NyxcbiAgICAgICAgYTogOTcsXG4gICAgICAgIGI6IDk4LFxuICAgICAgICBjOiA5OSxcbiAgICAgICAgZDogMTAwLFxuICAgICAgICBlOiAxMDEsXG4gICAgICAgIGY6IDEwMixcbiAgICAgICAgZzogMTAzLFxuICAgICAgICBoOiAxMDQsXG4gICAgICAgIGk6IDEwNSxcbiAgICAgICAgajogMTA2LFxuICAgICAgICBrOiAxMDcsXG4gICAgICAgIGw6IDEwOCxcbiAgICAgICAgbTogMTA5LFxuICAgICAgICBuOiAxMTAsXG4gICAgICAgIG86IDExMSxcbiAgICAgICAgcDogMTEyLFxuICAgICAgICBxOiAxMTMsXG4gICAgICAgIHI6IDExNCxcbiAgICAgICAgczogMTE1LFxuICAgICAgICB0OiAxMTYsXG4gICAgICAgIHU6IDExNyxcbiAgICAgICAgdjogMTE4LFxuICAgICAgICB3OiAxMTksXG4gICAgICAgIHg6IDEyMCxcbiAgICAgICAgeTogMTIxLFxuICAgICAgICB6OiAxMjIsXG4gICAgICAgIEE6IDY1LFxuICAgICAgICBCOiA2NixcbiAgICAgICAgQzogNjcsXG4gICAgICAgIEQ6IDY4LFxuICAgICAgICBFOiA2OSxcbiAgICAgICAgRjogNzAsXG4gICAgICAgIEc6IDcxLFxuICAgICAgICBIOiA3MixcbiAgICAgICAgSTogNzMsXG4gICAgICAgIEo6IDc0LFxuICAgICAgICBLOiA3NSxcbiAgICAgICAgTDogNzYsXG4gICAgICAgIE06IDc3LFxuICAgICAgICBOOiA3OCxcbiAgICAgICAgTzogNzksXG4gICAgICAgIFA6IDgwLFxuICAgICAgICBROiA4MSxcbiAgICAgICAgUjogODIsXG4gICAgICAgIFM6IDgzLFxuICAgICAgICBUOiA4NCxcbiAgICAgICAgVTogODUsXG4gICAgICAgIFY6IDg2LFxuICAgICAgICBXOiA4NyxcbiAgICAgICAgWDogODgsXG4gICAgICAgIFk6IDg5LFxuICAgICAgICBaOiA5MCxcbiAgICAgICAgRU5URVI6IDEzLFxuICAgICAgICBMRUZUX0FSUk9XOiAzNyxcbiAgICAgICAgUklHSFRfQVJST1c6IDM5LFxuICAgICAgICBVUF9BUlJPVzogMzgsXG4gICAgICAgIERPV05fQVJST1c6IDQwLFxuICAgICAgICBTUEFDRTogMzIsXG4gICAgICAgIFNISUZUOiAxNixcbiAgICAgICAgVEFCOiA5XG4gICAgfTtcbm1vZHVsZS5leHBvcnRzID0gS2V5Q29kZXM7IiwidmFyIEZhbW91c0VuZ2luZSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL0VuZ2luZScpO1xudmFyIF9ldmVudCA9ICdwcmVyZW5kZXInO1xudmFyIGdldFRpbWUgPSB3aW5kb3cucGVyZm9ybWFuY2UgJiYgd2luZG93LnBlcmZvcm1hbmNlLm5vdyA/IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9IDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgICB9O1xuZnVuY3Rpb24gYWRkVGltZXJGdW5jdGlvbihmbikge1xuICAgIEZhbW91c0VuZ2luZS5vbihfZXZlbnQsIGZuKTtcbiAgICByZXR1cm4gZm47XG59XG5mdW5jdGlvbiBzZXRUaW1lb3V0KGZuLCBkdXJhdGlvbikge1xuICAgIHZhciB0ID0gZ2V0VGltZSgpO1xuICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQyID0gZ2V0VGltZSgpO1xuICAgICAgICBpZiAodDIgLSB0ID49IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgRmFtb3VzRW5naW5lLnJlbW92ZUxpc3RlbmVyKF9ldmVudCwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gYWRkVGltZXJGdW5jdGlvbihjYWxsYmFjayk7XG59XG5mdW5jdGlvbiBzZXRJbnRlcnZhbChmbiwgZHVyYXRpb24pIHtcbiAgICB2YXIgdCA9IGdldFRpbWUoKTtcbiAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0MiA9IGdldFRpbWUoKTtcbiAgICAgICAgaWYgKHQyIC0gdCA+PSBkdXJhdGlvbikge1xuICAgICAgICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHQgPSBnZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBhZGRUaW1lckZ1bmN0aW9uKGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGFmdGVyKGZuLCBudW1UaWNrcykge1xuICAgIGlmIChudW1UaWNrcyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbnVtVGlja3MtLTtcbiAgICAgICAgaWYgKG51bVRpY2tzIDw9IDApIHtcbiAgICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBjbGVhcihjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBhZGRUaW1lckZ1bmN0aW9uKGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGV2ZXJ5KGZuLCBudW1UaWNrcykge1xuICAgIG51bVRpY2tzID0gbnVtVGlja3MgfHwgMTtcbiAgICB2YXIgaW5pdGlhbCA9IG51bVRpY2tzO1xuICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbnVtVGlja3MtLTtcbiAgICAgICAgaWYgKG51bVRpY2tzIDw9IDApIHtcbiAgICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBudW1UaWNrcyA9IGluaXRpYWw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBhZGRUaW1lckZ1bmN0aW9uKGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGNsZWFyKGZuKSB7XG4gICAgRmFtb3VzRW5naW5lLnJlbW92ZUxpc3RlbmVyKF9ldmVudCwgZm4pO1xufVxuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCkge1xuICAgIHZhciB0aW1lb3V0O1xuICAgIHZhciBjdHg7XG4gICAgdmFyIHRpbWVzdGFtcDtcbiAgICB2YXIgcmVzdWx0O1xuICAgIHZhciBhcmdzO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGN0eCA9IHRoaXM7XG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHRpbWVzdGFtcCA9IGdldFRpbWUoKTtcbiAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxhc3QgPSBnZXRUaW1lIC0gdGltZXN0YW1wO1xuICAgICAgICAgICAgaWYgKGxhc3QgPCB3YWl0KSB7XG4gICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZm4sIHdhaXQgLSBsYXN0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjdHgsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjbGVhcih0aW1lb3V0KTtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZm4sIHdhaXQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBzZXRUaW1lb3V0OiBzZXRUaW1lb3V0LFxuICAgIHNldEludGVydmFsOiBzZXRJbnRlcnZhbCxcbiAgICBkZWJvdW5jZTogZGVib3VuY2UsXG4gICAgYWZ0ZXI6IGFmdGVyLFxuICAgIGV2ZXJ5OiBldmVyeSxcbiAgICBjbGVhcjogY2xlYXJcbn07IiwidmFyIFV0aWxpdHkgPSB7fTtcblV0aWxpdHkuRGlyZWN0aW9uID0ge1xuICAgIFg6IDAsXG4gICAgWTogMSxcbiAgICBaOiAyXG59O1xuVXRpbGl0eS5hZnRlciA9IGZ1bmN0aW9uIGFmdGVyKGNvdW50LCBjYWxsYmFjaykge1xuICAgIHZhciBjb3VudGVyID0gY291bnQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY291bnRlci0tO1xuICAgICAgICBpZiAoY291bnRlciA9PT0gMClcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn07XG5VdGlsaXR5LmxvYWRVUkwgPSBmdW5jdGlvbiBsb2FkVVJMKHVybCwgY2FsbGJhY2spIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIG9ucmVhZHlzdGF0ZWNoYW5nZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgeGhyLnNlbmQoKTtcbn07XG5VdGlsaXR5LmNyZWF0ZURvY3VtZW50RnJhZ21lbnRGcm9tSFRNTCA9IGZ1bmN0aW9uIGNyZWF0ZURvY3VtZW50RnJhZ21lbnRGcm9tSFRNTChodG1sKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgdmFyIHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB3aGlsZSAoZWxlbWVudC5oYXNDaGlsZE5vZGVzKCkpXG4gICAgICAgIHJlc3VsdC5hcHBlbmRDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuVXRpbGl0eS5jbG9uZSA9IGZ1bmN0aW9uIGNsb25lKGIpIHtcbiAgICB2YXIgYTtcbiAgICBpZiAodHlwZW9mIGIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGEgPSBiIGluc3RhbmNlb2YgQXJyYXkgPyBbXSA6IHt9O1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBiW2tleV0gPT09ICdvYmplY3QnICYmIGJba2V5XSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChiW2tleV0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICBhW2tleV0gPSBuZXcgQXJyYXkoYltrZXldLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYltrZXldLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhW2tleV1baV0gPSBVdGlsaXR5LmNsb25lKGJba2V5XVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhW2tleV0gPSBVdGlsaXR5LmNsb25lKGJba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhW2tleV0gPSBiW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBhID0gYjtcbiAgICB9XG4gICAgcmV0dXJuIGE7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBVdGlsaXR5OyIsInZhciBFbnRpdHkgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FbnRpdHknKTtcbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdmYW1vdXMvY29yZS9UcmFuc2Zvcm0nKTtcbnZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FdmVudEhhbmRsZXInKTtcbnZhciBPcHRpb25zTWFuYWdlciA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL09wdGlvbnNNYW5hZ2VyJyk7XG5mdW5jdGlvbiBDb250ZXh0dWFsVmlldyhvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLkRFRkFVTFRfT1BUSU9OUyB8fCBDb250ZXh0dWFsVmlldy5ERUZBVUxUX09QVElPTlMpO1xuICAgIHRoaXMuX29wdGlvbnNNYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHRoaXMub3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLl9ldmVudElucHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRJbnB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRJbnB1dCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldE91dHB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRPdXRwdXQpO1xuICAgIHRoaXMuX2lkID0gRW50aXR5LnJlZ2lzdGVyKHRoaXMpO1xufVxuQ29udGV4dHVhbFZpZXcuREVGQVVMVF9PUFRJT05TID0ge307XG5Db250ZXh0dWFsVmlldy5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKG9wdGlvbnMpO1xufTtcbkNvbnRleHR1YWxWaWV3LnByb3RvdHlwZS5nZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucyhrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhrZXkpO1xufTtcbkNvbnRleHR1YWxWaWV3LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xufTtcbkNvbnRleHR1YWxWaWV3LnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiBjb21taXQoY29udGV4dCkge1xufTtcbm1vZHVsZS5leHBvcnRzID0gQ29udGV4dHVhbFZpZXc7IiwidmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1RyYW5zZm9ybScpO1xudmFyIE9wdGlvbnNNYW5hZ2VyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvT3B0aW9uc01hbmFnZXInKTtcbnZhciBUcmFuc2l0aW9uYWJsZSA9IHJlcXVpcmUoJ2ZhbW91cy90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZScpO1xudmFyIFV0aWxpdHkgPSByZXF1aXJlKCdmYW1vdXMvdXRpbGl0aWVzL1V0aWxpdHknKTtcbnZhciBTZXF1ZW50aWFsTGF5b3V0ID0gcmVxdWlyZSgnLi9TZXF1ZW50aWFsTGF5b3V0Jyk7XG5mdW5jdGlvbiBEZWNrKG9wdGlvbnMpIHtcbiAgICBTZXF1ZW50aWFsTGF5b3V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5zdGF0ZSA9IG5ldyBUcmFuc2l0aW9uYWJsZSgwKTtcbiAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcbiAgICB0aGlzLnNldE91dHB1dEZ1bmN0aW9uKGZ1bmN0aW9uIChpbnB1dCwgb2Zmc2V0LCBpbmRleCkge1xuICAgICAgICB2YXIgc3RhdGUgPSBfZ2V0U3RhdGUuY2FsbCh0aGlzKTtcbiAgICAgICAgdmFyIHBvc2l0aW9uTWF0cml4ID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gVXRpbGl0eS5EaXJlY3Rpb24uWCA/IFRyYW5zZm9ybS50cmFuc2xhdGUoc3RhdGUgKiBvZmZzZXQsIDAsIDAuMDAxICogKHN0YXRlIC0gMSkgKiBvZmZzZXQpIDogVHJhbnNmb3JtLnRyYW5zbGF0ZSgwLCBzdGF0ZSAqIG9mZnNldCwgMC4wMDEgKiAoc3RhdGUgLSAxKSAqIG9mZnNldCk7XG4gICAgICAgIHZhciBvdXRwdXQgPSBpbnB1dC5yZW5kZXIoKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zdGFja1JvdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgYW1vdW50ID0gdGhpcy5vcHRpb25zLnN0YWNrUm90YXRpb24gKiBpbmRleCAqICgxIC0gc3RhdGUpO1xuICAgICAgICAgICAgb3V0cHV0ID0ge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogVHJhbnNmb3JtLnJvdGF0ZVooYW1vdW50KSxcbiAgICAgICAgICAgICAgICBvcmlnaW46IFtcbiAgICAgICAgICAgICAgICAgICAgMC41LFxuICAgICAgICAgICAgICAgICAgICAwLjVcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHRhcmdldDogb3V0cHV0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHBvc2l0aW9uTWF0cml4LFxuICAgICAgICAgICAgc2l6ZTogaW5wdXQuZ2V0U2l6ZSgpLFxuICAgICAgICAgICAgdGFyZ2V0OiBvdXRwdXRcbiAgICAgICAgfTtcbiAgICB9KTtcbn1cbkRlY2sucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTZXF1ZW50aWFsTGF5b3V0LnByb3RvdHlwZSk7XG5EZWNrLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERlY2s7XG5EZWNrLkRFRkFVTFRfT1BUSU9OUyA9IE9wdGlvbnNNYW5hZ2VyLnBhdGNoKFNlcXVlbnRpYWxMYXlvdXQuREVGQVVMVF9PUFRJT05TLCB7XG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgICBjdXJ2ZTogJ2Vhc2VPdXRCb3VuY2UnLFxuICAgICAgICBkdXJhdGlvbjogNTAwXG4gICAgfSxcbiAgICBzdGFja1JvdGF0aW9uOiAwXG59KTtcbkRlY2sucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiBnZXRTaXplKCkge1xuICAgIHZhciBvcmlnaW5hbFNpemUgPSBTZXF1ZW50aWFsTGF5b3V0LnByb3RvdHlwZS5nZXRTaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdmFyIGZpcnN0U2l6ZSA9IHRoaXMuX2l0ZW1zID8gdGhpcy5faXRlbXMuZ2V0KCkuZ2V0U2l6ZSgpIDogW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXTtcbiAgICBpZiAoIWZpcnN0U2l6ZSlcbiAgICAgICAgZmlyc3RTaXplID0gW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXTtcbiAgICB2YXIgc3RhdGUgPSBfZ2V0U3RhdGUuY2FsbCh0aGlzKTtcbiAgICB2YXIgaW52U3RhdGUgPSAxIC0gc3RhdGU7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgZmlyc3RTaXplWzBdICogaW52U3RhdGUgKyBvcmlnaW5hbFNpemVbMF0gKiBzdGF0ZSxcbiAgICAgICAgZmlyc3RTaXplWzFdICogaW52U3RhdGUgKyBvcmlnaW5hbFNpemVbMV0gKiBzdGF0ZVxuICAgIF07XG59O1xuZnVuY3Rpb24gX2dldFN0YXRlKHJldHVybkZpbmFsKSB7XG4gICAgaWYgKHJldHVybkZpbmFsKVxuICAgICAgICByZXR1cm4gdGhpcy5faXNPcGVuID8gMSA6IDA7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5nZXQoKTtcbn1cbmZ1bmN0aW9uIF9zZXRTdGF0ZShwb3MsIHRyYW5zaXRpb24sIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zdGF0ZS5oYWx0KCk7XG4gICAgdGhpcy5zdGF0ZS5zZXQocG9zLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG59XG5EZWNrLnByb3RvdHlwZS5pc09wZW4gPSBmdW5jdGlvbiBpc09wZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzT3Blbjtcbn07XG5EZWNrLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gb3BlbihjYWxsYmFjaykge1xuICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XG4gICAgX3NldFN0YXRlLmNhbGwodGhpcywgMSwgdGhpcy5vcHRpb25zLnRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbn07XG5EZWNrLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5faXNPcGVuID0gZmFsc2U7XG4gICAgX3NldFN0YXRlLmNhbGwodGhpcywgMCwgdGhpcy5vcHRpb25zLnRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbn07XG5EZWNrLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5faXNPcGVuKVxuICAgICAgICB0aGlzLmNsb3NlKGNhbGxiYWNrKTtcbiAgICBlbHNlXG4gICAgICAgIHRoaXMub3BlbihjYWxsYmFjayk7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBEZWNrOyIsInZhciBDYWNoZWRNYXAgPSByZXF1aXJlKCdmYW1vdXMvdHJhbnNpdGlvbnMvQ2FjaGVkTWFwJyk7XG52YXIgRW50aXR5ID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRW50aXR5Jyk7XG52YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG52YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVHJhbnNmb3JtJyk7XG52YXIgUmVuZGVyQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vUmVuZGVyQ29udHJvbGxlcicpO1xuZnVuY3Rpb24gRWRnZVN3YXBwZXIob3B0aW9ucykge1xuICAgIHRoaXMuX2N1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgIHRoaXMuX3NpemUgPSBbXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkXG4gICAgXTtcbiAgICB0aGlzLl9jb250cm9sbGVyID0gbmV3IFJlbmRlckNvbnRyb2xsZXIob3B0aW9ucyk7XG4gICAgdGhpcy5fY29udHJvbGxlci5pblRyYW5zZm9ybUZyb20oQ2FjaGVkTWFwLmNyZWF0ZShfdHJhbnNmb3JtTWFwLmJpbmQodGhpcywgMC4wMDAxKSkpO1xuICAgIHRoaXMuX2NvbnRyb2xsZXIub3V0VHJhbnNmb3JtRnJvbShDYWNoZWRNYXAuY3JlYXRlKF90cmFuc2Zvcm1NYXAuYmluZCh0aGlzLCAtMC4wMDAxKSkpO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldElucHV0SGFuZGxlcih0aGlzLCB0aGlzLl9ldmVudElucHV0KTtcbiAgICB0aGlzLl9lbnRpdHlJZCA9IEVudGl0eS5yZWdpc3Rlcih0aGlzKTtcbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gX3RyYW5zZm9ybU1hcCh6TWF4LCBwcm9ncmVzcykge1xuICAgIHJldHVybiBUcmFuc2Zvcm0udHJhbnNsYXRlKHRoaXMuX3NpemVbMF0gKiAoMSAtIHByb2dyZXNzKSwgMCwgek1heCAqICgxIC0gcHJvZ3Jlc3MpKTtcbn1cbkVkZ2VTd2FwcGVyLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gc2hvdyhjb250ZW50KSB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRUYXJnZXQpXG4gICAgICAgIHRoaXMuX2V2ZW50SW5wdXQudW5waXBlKHRoaXMuX2N1cnJlbnRUYXJnZXQpO1xuICAgIHRoaXMuX2N1cnJlbnRUYXJnZXQgPSBjb250ZW50O1xuICAgIGlmICh0aGlzLl9jdXJyZW50VGFyZ2V0ICYmIHRoaXMuX2N1cnJlbnRUYXJnZXQudHJpZ2dlcilcbiAgICAgICAgdGhpcy5fZXZlbnRJbnB1dC5waXBlKHRoaXMuX2N1cnJlbnRUYXJnZXQpO1xuICAgIHRoaXMuX2NvbnRyb2xsZXIuc2hvdy5hcHBseSh0aGlzLl9jb250cm9sbGVyLCBhcmd1bWVudHMpO1xufTtcbkVkZ2VTd2FwcGVyLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgdGhpcy5fY29udHJvbGxlci5zZXRPcHRpb25zKG9wdGlvbnMpO1xufTtcbkVkZ2VTd2FwcGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0eUlkO1xufTtcbkVkZ2VTd2FwcGVyLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiBjb21taXQoY29udGV4dCkge1xuICAgIHRoaXMuX3NpemVbMF0gPSBjb250ZXh0LnNpemVbMF07XG4gICAgdGhpcy5fc2l6ZVsxXSA9IGNvbnRleHQuc2l6ZVsxXTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0cmFuc2Zvcm06IGNvbnRleHQudHJhbnNmb3JtLFxuICAgICAgICBvcGFjaXR5OiBjb250ZXh0Lm9wYWNpdHksXG4gICAgICAgIG9yaWdpbjogY29udGV4dC5vcmlnaW4sXG4gICAgICAgIHNpemU6IGNvbnRleHQuc2l6ZSxcbiAgICAgICAgdGFyZ2V0OiB0aGlzLl9jb250cm9sbGVyLnJlbmRlcigpXG4gICAgfTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEVkZ2VTd2FwcGVyOyIsInZhciBFbnRpdHkgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FbnRpdHknKTtcbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdmYW1vdXMvY29yZS9UcmFuc2Zvcm0nKTtcbnZhciBPcHRpb25zTWFuYWdlciA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL09wdGlvbnNNYW5hZ2VyJyk7XG52YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG52YXIgVHJhbnNpdGlvbmFibGUgPSByZXF1aXJlKCdmYW1vdXMvdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGUnKTtcbmZ1bmN0aW9uIEZsZXhpYmxlTGF5b3V0KG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKEZsZXhpYmxlTGF5b3V0LkRFRkFVTFRfT1BUSU9OUyk7XG4gICAgdGhpcy5vcHRpb25zTWFuYWdlciA9IG5ldyBPcHRpb25zTWFuYWdlcih0aGlzLm9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5pZCA9IEVudGl0eS5yZWdpc3Rlcih0aGlzKTtcbiAgICB0aGlzLl9yYXRpb3MgPSBuZXcgVHJhbnNpdGlvbmFibGUodGhpcy5vcHRpb25zLnJhdGlvcyk7XG4gICAgdGhpcy5fbm9kZXMgPSBbXTtcbiAgICB0aGlzLl9jYWNoZWREaXJlY3Rpb24gPSBudWxsO1xuICAgIHRoaXMuX2NhY2hlZFRvdGFsTGVuZ3RoID0gZmFsc2U7XG4gICAgdGhpcy5fY2FjaGVkTGVuZ3RocyA9IFtdO1xuICAgIHRoaXMuX2NhY2hlZFRyYW5zZm9ybXMgPSBudWxsO1xuICAgIHRoaXMuX3JhdGlvc0RpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldE91dHB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRPdXRwdXQpO1xufVxuRmxleGlibGVMYXlvdXQuRElSRUNUSU9OX1ggPSAwO1xuRmxleGlibGVMYXlvdXQuRElSRUNUSU9OX1kgPSAxO1xuRmxleGlibGVMYXlvdXQuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIGRpcmVjdGlvbjogRmxleGlibGVMYXlvdXQuRElSRUNUSU9OX1gsXG4gICAgdHJhbnNpdGlvbjogZmFsc2UsXG4gICAgcmF0aW9zOiBbXVxufTtcbmZ1bmN0aW9uIF9yZWZsb3cocmF0aW9zLCBsZW5ndGgsIGRpcmVjdGlvbikge1xuICAgIHZhciBjdXJyVHJhbnNmb3JtO1xuICAgIHZhciB0cmFuc2xhdGlvbiA9IDA7XG4gICAgdmFyIGZsZXhMZW5ndGggPSBsZW5ndGg7XG4gICAgdmFyIHJhdGlvU3VtID0gMDtcbiAgICB2YXIgcmF0aW87XG4gICAgdmFyIG5vZGU7XG4gICAgdmFyIGk7XG4gICAgdGhpcy5fY2FjaGVkTGVuZ3RocyA9IFtdO1xuICAgIHRoaXMuX2NhY2hlZFRyYW5zZm9ybXMgPSBbXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgcmF0aW9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJhdGlvID0gcmF0aW9zW2ldO1xuICAgICAgICBub2RlID0gdGhpcy5fbm9kZXNbaV07XG4gICAgICAgIGlmICh0eXBlb2YgcmF0aW8gIT09ICdudW1iZXInKVxuICAgICAgICAgICAgZmxleExlbmd0aCAtPSBub2RlLmdldFNpemUoKVtkaXJlY3Rpb25dIHx8IDA7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJhdGlvU3VtICs9IHJhdGlvO1xuICAgIH1cbiAgICBmb3IgKGkgPSAwOyBpIDwgcmF0aW9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG5vZGUgPSB0aGlzLl9ub2Rlc1tpXTtcbiAgICAgICAgcmF0aW8gPSByYXRpb3NbaV07XG4gICAgICAgIGxlbmd0aCA9IHR5cGVvZiByYXRpbyA9PT0gJ251bWJlcicgPyBmbGV4TGVuZ3RoICogcmF0aW8gLyByYXRpb1N1bSA6IG5vZGUuZ2V0U2l6ZSgpW2RpcmVjdGlvbl07XG4gICAgICAgIGN1cnJUcmFuc2Zvcm0gPSBkaXJlY3Rpb24gPT09IEZsZXhpYmxlTGF5b3V0LkRJUkVDVElPTl9YID8gVHJhbnNmb3JtLnRyYW5zbGF0ZSh0cmFuc2xhdGlvbiwgMCwgMCkgOiBUcmFuc2Zvcm0udHJhbnNsYXRlKDAsIHRyYW5zbGF0aW9uLCAwKTtcbiAgICAgICAgdGhpcy5fY2FjaGVkVHJhbnNmb3Jtcy5wdXNoKGN1cnJUcmFuc2Zvcm0pO1xuICAgICAgICB0aGlzLl9jYWNoZWRMZW5ndGhzLnB1c2gobGVuZ3RoKTtcbiAgICAgICAgdHJhbnNsYXRpb24gKz0gbGVuZ3RoO1xuICAgIH1cbn1cbkZsZXhpYmxlTGF5b3V0LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWQ7XG59O1xuRmxleGlibGVMYXlvdXQucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnMob3B0aW9ucyk7XG59O1xuRmxleGlibGVMYXlvdXQucHJvdG90eXBlLnNlcXVlbmNlRnJvbSA9IGZ1bmN0aW9uIHNlcXVlbmNlRnJvbShzZXF1ZW5jZSkge1xuICAgIHRoaXMuX25vZGVzID0gc2VxdWVuY2U7XG4gICAgaWYgKHRoaXMuX3JhdGlvcy5nZXQoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIHJhdGlvcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX25vZGVzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgcmF0aW9zLnB1c2goMSk7XG4gICAgICAgIHRoaXMuc2V0UmF0aW9zKHJhdGlvcyk7XG4gICAgfVxufTtcbkZsZXhpYmxlTGF5b3V0LnByb3RvdHlwZS5zZXRSYXRpb3MgPSBmdW5jdGlvbiBzZXRSYXRpb3MocmF0aW9zLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmICh0cmFuc2l0aW9uID09PSB1bmRlZmluZWQpXG4gICAgICAgIHRyYW5zaXRpb24gPSB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbjtcbiAgICB2YXIgY3VyclJhdGlvcyA9IHRoaXMuX3JhdGlvcztcbiAgICBpZiAoY3VyclJhdGlvcy5nZXQoKS5sZW5ndGggPT09IDApXG4gICAgICAgIHRyYW5zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgaWYgKGN1cnJSYXRpb3MuaXNBY3RpdmUoKSlcbiAgICAgICAgY3VyclJhdGlvcy5oYWx0KCk7XG4gICAgY3VyclJhdGlvcy5zZXQocmF0aW9zLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgdGhpcy5fcmF0aW9zRGlydHkgPSB0cnVlO1xufTtcbkZsZXhpYmxlTGF5b3V0LnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiBjb21taXQoY29udGV4dCkge1xuICAgIHZhciBwYXJlbnRTaXplID0gY29udGV4dC5zaXplO1xuICAgIHZhciBwYXJlbnRUcmFuc2Zvcm0gPSBjb250ZXh0LnRyYW5zZm9ybTtcbiAgICB2YXIgcGFyZW50T3JpZ2luID0gY29udGV4dC5vcmlnaW47XG4gICAgdmFyIHBhcmVudE9wYWNpdHkgPSBjb250ZXh0Lm9wYWNpdHk7XG4gICAgdmFyIHJhdGlvcyA9IHRoaXMuX3JhdGlvcy5nZXQoKTtcbiAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICB2YXIgbGVuZ3RoID0gcGFyZW50U2l6ZVtkaXJlY3Rpb25dO1xuICAgIHZhciBzaXplO1xuICAgIGlmIChsZW5ndGggIT09IHRoaXMuX2NhY2hlZFRvdGFsTGVuZ3RoIHx8IHRoaXMuX3JhdGlvc0RpcnR5IHx8IHRoaXMuX3JhdGlvcy5pc0FjdGl2ZSgpIHx8IGRpcmVjdGlvbiAhPT0gdGhpcy5fY2FjaGVkRGlyZWN0aW9uKSB7XG4gICAgICAgIF9yZWZsb3cuY2FsbCh0aGlzLCByYXRpb3MsIGxlbmd0aCwgZGlyZWN0aW9uKTtcbiAgICAgICAgaWYgKGxlbmd0aCAhPT0gdGhpcy5fY2FjaGVkVG90YWxMZW5ndGgpXG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb3RhbExlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiAhPT0gdGhpcy5fY2FjaGVkRGlyZWN0aW9uKVxuICAgICAgICAgICAgdGhpcy5fY2FjaGVkRGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICBpZiAodGhpcy5fcmF0aW9zRGlydHkpXG4gICAgICAgICAgICB0aGlzLl9yYXRpb3NEaXJ0eSA9IGZhbHNlO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXRpb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2l6ZSA9IFtcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZFxuICAgICAgICBdO1xuICAgICAgICBsZW5ndGggPSB0aGlzLl9jYWNoZWRMZW5ndGhzW2ldO1xuICAgICAgICBzaXplW2RpcmVjdGlvbl0gPSBsZW5ndGg7XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdGhpcy5fY2FjaGVkVHJhbnNmb3Jtc1tpXSxcbiAgICAgICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgICAgICB0YXJnZXQ6IHRoaXMuX25vZGVzW2ldLnJlbmRlcigpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocGFyZW50U2l6ZSAmJiAocGFyZW50T3JpZ2luWzBdICE9PSAwICYmIHBhcmVudE9yaWdpblsxXSAhPT0gMCkpXG4gICAgICAgIHBhcmVudFRyYW5zZm9ybSA9IFRyYW5zZm9ybS5tb3ZlVGhlbihbXG4gICAgICAgICAgICAtcGFyZW50U2l6ZVswXSAqIHBhcmVudE9yaWdpblswXSxcbiAgICAgICAgICAgIC1wYXJlbnRTaXplWzFdICogcGFyZW50T3JpZ2luWzFdLFxuICAgICAgICAgICAgMFxuICAgICAgICBdLCBwYXJlbnRUcmFuc2Zvcm0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHRyYW5zZm9ybTogcGFyZW50VHJhbnNmb3JtLFxuICAgICAgICBzaXplOiBwYXJlbnRTaXplLFxuICAgICAgICBvcGFjaXR5OiBwYXJlbnRPcGFjaXR5LFxuICAgICAgICB0YXJnZXQ6IHJlc3VsdFxuICAgIH07XG59O1xubW9kdWxlLmV4cG9ydHMgPSBGbGV4aWJsZUxheW91dDsiLCJ2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVHJhbnNmb3JtJyk7XG52YXIgVHJhbnNpdGlvbmFibGUgPSByZXF1aXJlKCdmYW1vdXMvdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGUnKTtcbnZhciBSZW5kZXJOb2RlID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvUmVuZGVyTm9kZScpO1xudmFyIE9wdGlvbnNNYW5hZ2VyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvT3B0aW9uc01hbmFnZXInKTtcbmZ1bmN0aW9uIEZsaXBwZXIob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoRmxpcHBlci5ERUZBVUxUX09QVElPTlMpO1xuICAgIHRoaXMuX29wdGlvbnNNYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHRoaXMub3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLmFuZ2xlID0gbmV3IFRyYW5zaXRpb25hYmxlKDApO1xuICAgIHRoaXMuZnJvbnROb2RlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuYmFja05vZGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5mbGlwcGVkID0gZmFsc2U7XG59XG5GbGlwcGVyLkRJUkVDVElPTl9YID0gMDtcbkZsaXBwZXIuRElSRUNUSU9OX1kgPSAxO1xudmFyIFNFUEVSQVRJT05fTEVOR1RIID0gMTtcbkZsaXBwZXIuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIHRyYW5zaXRpb246IHRydWUsXG4gICAgZGlyZWN0aW9uOiBGbGlwcGVyLkRJUkVDVElPTl9YXG59O1xuRmxpcHBlci5wcm90b3R5cGUuZmxpcCA9IGZ1bmN0aW9uIGZsaXAodHJhbnNpdGlvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgYW5nbGUgPSB0aGlzLmZsaXBwZWQgPyAwIDogTWF0aC5QSTtcbiAgICB0aGlzLnNldEFuZ2xlKGFuZ2xlLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7XG4gICAgdGhpcy5mbGlwcGVkID0gIXRoaXMuZmxpcHBlZDtcbn07XG5GbGlwcGVyLnByb3RvdHlwZS5zZXRBbmdsZSA9IGZ1bmN0aW9uIHNldEFuZ2xlKGFuZ2xlLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmICh0cmFuc2l0aW9uID09PSB1bmRlZmluZWQpXG4gICAgICAgIHRyYW5zaXRpb24gPSB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbjtcbiAgICBpZiAodGhpcy5hbmdsZS5pc0FjdGl2ZSgpKVxuICAgICAgICB0aGlzLmFuZ2xlLmhhbHQoKTtcbiAgICB0aGlzLmFuZ2xlLnNldChhbmdsZSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spO1xufTtcbkZsaXBwZXIucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn07XG5GbGlwcGVyLnByb3RvdHlwZS5zZXRGcm9udCA9IGZ1bmN0aW9uIHNldEZyb250KG5vZGUpIHtcbiAgICB0aGlzLmZyb250Tm9kZSA9IG5vZGU7XG59O1xuRmxpcHBlci5wcm90b3R5cGUuc2V0QmFjayA9IGZ1bmN0aW9uIHNldEJhY2sobm9kZSkge1xuICAgIHRoaXMuYmFja05vZGUgPSBub2RlO1xufTtcbkZsaXBwZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgYW5nbGUgPSB0aGlzLmFuZ2xlLmdldCgpO1xuICAgIHZhciBmcm9udFRyYW5zZm9ybTtcbiAgICB2YXIgYmFja1RyYW5zZm9ybTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gRmxpcHBlci5ESVJFQ1RJT05fWCkge1xuICAgICAgICBmcm9udFRyYW5zZm9ybSA9IFRyYW5zZm9ybS5yb3RhdGVZKGFuZ2xlKTtcbiAgICAgICAgYmFja1RyYW5zZm9ybSA9IFRyYW5zZm9ybS5yb3RhdGVZKGFuZ2xlICsgTWF0aC5QSSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZnJvbnRUcmFuc2Zvcm0gPSBUcmFuc2Zvcm0ucm90YXRlWChhbmdsZSk7XG4gICAgICAgIGJhY2tUcmFuc2Zvcm0gPSBUcmFuc2Zvcm0ucm90YXRlWChhbmdsZSArIE1hdGguUEkpO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgaWYgKHRoaXMuZnJvbnROb2RlKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogZnJvbnRUcmFuc2Zvcm0sXG4gICAgICAgICAgICB0YXJnZXQ6IHRoaXMuZnJvbnROb2RlLnJlbmRlcigpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5iYWNrTm9kZSkge1xuICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IFRyYW5zZm9ybS5tb3ZlVGhlbihbXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIFNFUEVSQVRJT05fTEVOR1RIXG4gICAgICAgICAgICBdLCBiYWNrVHJhbnNmb3JtKSxcbiAgICAgICAgICAgIHRhcmdldDogdGhpcy5iYWNrTm9kZS5yZW5kZXIoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEZsaXBwZXI7IiwidmFyIEVudGl0eSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL0VudGl0eScpO1xudmFyIFJlbmRlck5vZGUgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9SZW5kZXJOb2RlJyk7XG52YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVHJhbnNmb3JtJyk7XG52YXIgVmlld1NlcXVlbmNlID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVmlld1NlcXVlbmNlJyk7XG52YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG52YXIgTW9kaWZpZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9Nb2RpZmllcicpO1xudmFyIE9wdGlvbnNNYW5hZ2VyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvT3B0aW9uc01hbmFnZXInKTtcbnZhciBUcmFuc2l0aW9uYWJsZSA9IHJlcXVpcmUoJ2ZhbW91cy90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZScpO1xudmFyIFRyYW5zaXRpb25hYmxlVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtJyk7XG5mdW5jdGlvbiBHcmlkTGF5b3V0KG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKEdyaWRMYXlvdXQuREVGQVVMVF9PUFRJT05TKTtcbiAgICB0aGlzLm9wdGlvbnNNYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHRoaXMub3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLmlkID0gRW50aXR5LnJlZ2lzdGVyKHRoaXMpO1xuICAgIHRoaXMuX21vZGlmaWVycyA9IFtdO1xuICAgIHRoaXMuX3N0YXRlcyA9IFtdO1xuICAgIHRoaXMuX2NvbnRleHRTaXplQ2FjaGUgPSBbXG4gICAgICAgIDAsXG4gICAgICAgIDBcbiAgICBdO1xuICAgIHRoaXMuX2RpbWVuc2lvbnNDYWNoZSA9IFtcbiAgICAgICAgMCxcbiAgICAgICAgMFxuICAgIF07XG4gICAgdGhpcy5fYWN0aXZlQ291bnQgPSAwO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50T3V0cHV0KTtcbn1cbmZ1bmN0aW9uIF9yZWZsb3coc2l6ZSwgY29scywgcm93cykge1xuICAgIHZhciB1c2FibGVTaXplID0gW1xuICAgICAgICAgICAgc2l6ZVswXSxcbiAgICAgICAgICAgIHNpemVbMV1cbiAgICAgICAgXTtcbiAgICB1c2FibGVTaXplWzBdIC09IHRoaXMub3B0aW9ucy5ndXR0ZXJTaXplWzBdICogKGNvbHMgLSAxKTtcbiAgICB1c2FibGVTaXplWzFdIC09IHRoaXMub3B0aW9ucy5ndXR0ZXJTaXplWzFdICogKHJvd3MgLSAxKTtcbiAgICB2YXIgcm93U2l6ZSA9IE1hdGgucm91bmQodXNhYmxlU2l6ZVsxXSAvIHJvd3MpO1xuICAgIHZhciBjb2xTaXplID0gTWF0aC5yb3VuZCh1c2FibGVTaXplWzBdIC8gY29scyk7XG4gICAgdmFyIGN1cnJZID0gMDtcbiAgICB2YXIgY3Vyclg7XG4gICAgdmFyIGN1cnJJbmRleCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzOyBpKyspIHtcbiAgICAgICAgY3VyclggPSAwO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbHM7IGorKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX21vZGlmaWVyc1tjdXJySW5kZXhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBfY3JlYXRlTW9kaWZpZXIuY2FsbCh0aGlzLCBjdXJySW5kZXgsIFtcbiAgICAgICAgICAgICAgICAgICAgY29sU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgcm93U2l6ZVxuICAgICAgICAgICAgICAgIF0sIFtcbiAgICAgICAgICAgICAgICAgICAgY3VyclgsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJZLFxuICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgXSwgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9hbmltYXRlTW9kaWZpZXIuY2FsbCh0aGlzLCBjdXJySW5kZXgsIFtcbiAgICAgICAgICAgICAgICAgICAgY29sU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgcm93U2l6ZVxuICAgICAgICAgICAgICAgIF0sIFtcbiAgICAgICAgICAgICAgICAgICAgY3VyclgsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJZLFxuICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgXSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJySW5kZXgrKztcbiAgICAgICAgICAgIGN1cnJYICs9IGNvbFNpemUgKyB0aGlzLm9wdGlvbnMuZ3V0dGVyU2l6ZVswXTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyWSArPSByb3dTaXplICsgdGhpcy5vcHRpb25zLmd1dHRlclNpemVbMV07XG4gICAgfVxuICAgIHRoaXMuX2RpbWVuc2lvbnNDYWNoZSA9IFtcbiAgICAgICAgdGhpcy5vcHRpb25zLmRpbWVuc2lvbnNbMF0sXG4gICAgICAgIHRoaXMub3B0aW9ucy5kaW1lbnNpb25zWzFdXG4gICAgXTtcbiAgICB0aGlzLl9jb250ZXh0U2l6ZUNhY2hlID0gW1xuICAgICAgICBzaXplWzBdLFxuICAgICAgICBzaXplWzFdXG4gICAgXTtcbiAgICB0aGlzLl9hY3RpdmVDb3VudCA9IHJvd3MgKiBjb2xzO1xuICAgIGZvciAoaSA9IHRoaXMuX2FjdGl2ZUNvdW50OyBpIDwgdGhpcy5fbW9kaWZpZXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICBfYW5pbWF0ZU1vZGlmaWVyLmNhbGwodGhpcywgaSwgW1xuICAgICAgICAgICAgTWF0aC5yb3VuZChjb2xTaXplKSxcbiAgICAgICAgICAgIE1hdGgucm91bmQocm93U2l6ZSlcbiAgICAgICAgXSwgW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXSwgMCk7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgncmVmbG93Jyk7XG59XG5mdW5jdGlvbiBfY3JlYXRlTW9kaWZpZXIoaW5kZXgsIHNpemUsIHBvc2l0aW9uLCBvcGFjaXR5KSB7XG4gICAgdmFyIHRyYW5zaXRpb25JdGVtID0ge1xuICAgICAgICAgICAgdHJhbnNmb3JtOiBuZXcgVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0oVHJhbnNmb3JtLnRyYW5zbGF0ZS5hcHBseShudWxsLCBwb3NpdGlvbikpLFxuICAgICAgICAgICAgb3BhY2l0eTogbmV3IFRyYW5zaXRpb25hYmxlKG9wYWNpdHkpLFxuICAgICAgICAgICAgc2l6ZTogbmV3IFRyYW5zaXRpb25hYmxlKHNpemUpXG4gICAgICAgIH07XG4gICAgdmFyIG1vZGlmaWVyID0gbmV3IE1vZGlmaWVyKHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNpdGlvbkl0ZW0udHJhbnNmb3JtLFxuICAgICAgICAgICAgb3BhY2l0eTogdHJhbnNpdGlvbkl0ZW0ub3BhY2l0eSxcbiAgICAgICAgICAgIHNpemU6IHRyYW5zaXRpb25JdGVtLnNpemVcbiAgICAgICAgfSk7XG4gICAgdGhpcy5fc3RhdGVzW2luZGV4XSA9IHRyYW5zaXRpb25JdGVtO1xuICAgIHRoaXMuX21vZGlmaWVyc1tpbmRleF0gPSBtb2RpZmllcjtcbn1cbmZ1bmN0aW9uIF9hbmltYXRlTW9kaWZpZXIoaW5kZXgsIHNpemUsIHBvc2l0aW9uLCBvcGFjaXR5KSB7XG4gICAgdmFyIGN1cnJTdGF0ZSA9IHRoaXMuX3N0YXRlc1tpbmRleF07XG4gICAgdmFyIGN1cnJTaXplID0gY3VyclN0YXRlLnNpemU7XG4gICAgdmFyIGN1cnJPcGFjaXR5ID0gY3VyclN0YXRlLm9wYWNpdHk7XG4gICAgdmFyIGN1cnJUcmFuc2Zvcm0gPSBjdXJyU3RhdGUudHJhbnNmb3JtO1xuICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcy5vcHRpb25zLnRyYW5zaXRpb247XG4gICAgY3VyclRyYW5zZm9ybS5oYWx0KCk7XG4gICAgY3Vyck9wYWNpdHkuaGFsdCgpO1xuICAgIGN1cnJTaXplLmhhbHQoKTtcbiAgICBjdXJyVHJhbnNmb3JtLnNldFRyYW5zbGF0ZShwb3NpdGlvbiwgdHJhbnNpdGlvbik7XG4gICAgY3VyclNpemUuc2V0KHNpemUsIHRyYW5zaXRpb24pO1xuICAgIGN1cnJPcGFjaXR5LnNldChvcGFjaXR5LCB0cmFuc2l0aW9uKTtcbn1cbkdyaWRMYXlvdXQuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIGRpbWVuc2lvbnM6IFtcbiAgICAgICAgMSxcbiAgICAgICAgMVxuICAgIF0sXG4gICAgdHJhbnNpdGlvbjogZmFsc2UsXG4gICAgZ3V0dGVyU2l6ZTogW1xuICAgICAgICAwLFxuICAgICAgICAwXG4gICAgXVxufTtcbkdyaWRMYXlvdXQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5pZDtcbn07XG5HcmlkTGF5b3V0LnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn07XG5HcmlkTGF5b3V0LnByb3RvdHlwZS5zZXF1ZW5jZUZyb20gPSBmdW5jdGlvbiBzZXF1ZW5jZUZyb20oc2VxdWVuY2UpIHtcbiAgICBpZiAoc2VxdWVuY2UgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgc2VxdWVuY2UgPSBuZXcgVmlld1NlcXVlbmNlKHNlcXVlbmNlKTtcbiAgICB0aGlzLnNlcXVlbmNlID0gc2VxdWVuY2U7XG59O1xuR3JpZExheW91dC5wcm90b3R5cGUuY29tbWl0ID0gZnVuY3Rpb24gY29tbWl0KGNvbnRleHQpIHtcbiAgICB2YXIgdHJhbnNmb3JtID0gY29udGV4dC50cmFuc2Zvcm07XG4gICAgdmFyIG9wYWNpdHkgPSBjb250ZXh0Lm9wYWNpdHk7XG4gICAgdmFyIG9yaWdpbiA9IGNvbnRleHQub3JpZ2luO1xuICAgIHZhciBzaXplID0gY29udGV4dC5zaXplO1xuICAgIHZhciBjb2xzID0gdGhpcy5vcHRpb25zLmRpbWVuc2lvbnNbMF07XG4gICAgdmFyIHJvd3MgPSB0aGlzLm9wdGlvbnMuZGltZW5zaW9uc1sxXTtcbiAgICBpZiAoc2l6ZVswXSAhPT0gdGhpcy5fY29udGV4dFNpemVDYWNoZVswXSB8fCBzaXplWzFdICE9PSB0aGlzLl9jb250ZXh0U2l6ZUNhY2hlWzFdIHx8IGNvbHMgIT09IHRoaXMuX2RpbWVuc2lvbnNDYWNoZVswXSB8fCByb3dzICE9PSB0aGlzLl9kaW1lbnNpb25zQ2FjaGVbMV0pIHtcbiAgICAgICAgX3JlZmxvdy5jYWxsKHRoaXMsIHNpemUsIGNvbHMsIHJvd3MpO1xuICAgIH1cbiAgICB2YXIgc2VxdWVuY2UgPSB0aGlzLnNlcXVlbmNlO1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgY3VyckluZGV4ID0gMDtcbiAgICB3aGlsZSAoc2VxdWVuY2UgJiYgY3VyckluZGV4IDwgdGhpcy5fbW9kaWZpZXJzLmxlbmd0aCkge1xuICAgICAgICB2YXIgaXRlbSA9IHNlcXVlbmNlLmdldCgpO1xuICAgICAgICB2YXIgbW9kaWZpZXIgPSB0aGlzLl9tb2RpZmllcnNbY3VyckluZGV4XTtcbiAgICAgICAgaWYgKGN1cnJJbmRleCA+PSB0aGlzLl9hY3RpdmVDb3VudCAmJiB0aGlzLl9zdGF0ZXNbY3VyckluZGV4XS5vcGFjaXR5LmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX21vZGlmaWVycy5zcGxpY2UoY3VyckluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlcy5zcGxpY2UoY3VyckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobW9kaWZpZXIubW9kaWZ5KHtcbiAgICAgICAgICAgICAgICBvcmlnaW46IG9yaWdpbixcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGl0ZW0ucmVuZGVyKClcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBzZXF1ZW5jZSA9IHNlcXVlbmNlLmdldE5leHQoKTtcbiAgICAgICAgY3VyckluZGV4Kys7XG4gICAgfVxuICAgIGlmIChzaXplKVxuICAgICAgICB0cmFuc2Zvcm0gPSBUcmFuc2Zvcm0ubW92ZVRoZW4oW1xuICAgICAgICAgICAgLXNpemVbMF0gKiBvcmlnaW5bMF0sXG4gICAgICAgICAgICAtc2l6ZVsxXSAqIG9yaWdpblsxXSxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXSwgdHJhbnNmb3JtKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgICAgICAgb3BhY2l0eTogb3BhY2l0eSxcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgdGFyZ2V0OiByZXN1bHRcbiAgICB9O1xufTtcbm1vZHVsZS5leHBvcnRzID0gR3JpZExheW91dDsiLCJ2YXIgRW50aXR5ID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRW50aXR5Jyk7XG52YXIgUmVuZGVyTm9kZSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1JlbmRlck5vZGUnKTtcbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdmYW1vdXMvY29yZS9UcmFuc2Zvcm0nKTtcbnZhciBPcHRpb25zTWFuYWdlciA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL09wdGlvbnNNYW5hZ2VyJyk7XG5mdW5jdGlvbiBIZWFkZXJGb290ZXJMYXlvdXQob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoSGVhZGVyRm9vdGVyTGF5b3V0LkRFRkFVTFRfT1BUSU9OUyk7XG4gICAgdGhpcy5fb3B0aW9uc01hbmFnZXIgPSBuZXcgT3B0aW9uc01hbmFnZXIodGhpcy5vcHRpb25zKTtcbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIHRoaXMuX2VudGl0eUlkID0gRW50aXR5LnJlZ2lzdGVyKHRoaXMpO1xuICAgIHRoaXMuaGVhZGVyID0gbmV3IFJlbmRlck5vZGUoKTtcbiAgICB0aGlzLmZvb3RlciA9IG5ldyBSZW5kZXJOb2RlKCk7XG4gICAgdGhpcy5jb250ZW50ID0gbmV3IFJlbmRlck5vZGUoKTtcbn1cbkhlYWRlckZvb3RlckxheW91dC5ESVJFQ1RJT05fWCA9IDA7XG5IZWFkZXJGb290ZXJMYXlvdXQuRElSRUNUSU9OX1kgPSAxO1xuSGVhZGVyRm9vdGVyTGF5b3V0LkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBkaXJlY3Rpb246IEhlYWRlckZvb3RlckxheW91dC5ESVJFQ1RJT05fWSxcbiAgICBoZWFkZXJTaXplOiB1bmRlZmluZWQsXG4gICAgZm9vdGVyU2l6ZTogdW5kZWZpbmVkLFxuICAgIGRlZmF1bHRIZWFkZXJTaXplOiAwLFxuICAgIGRlZmF1bHRGb290ZXJTaXplOiAwXG59O1xuSGVhZGVyRm9vdGVyTGF5b3V0LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0eUlkO1xufTtcbkhlYWRlckZvb3RlckxheW91dC5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKG9wdGlvbnMpO1xufTtcbmZ1bmN0aW9uIF9yZXNvbHZlTm9kZVNpemUobm9kZSwgZGVmYXVsdFNpemUpIHtcbiAgICB2YXIgbm9kZVNpemUgPSBub2RlLmdldFNpemUoKTtcbiAgICByZXR1cm4gbm9kZVNpemUgPyBub2RlU2l6ZVt0aGlzLm9wdGlvbnMuZGlyZWN0aW9uXSA6IGRlZmF1bHRTaXplO1xufVxuZnVuY3Rpb24gX291dHB1dFRyYW5zZm9ybShvZmZzZXQpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gSGVhZGVyRm9vdGVyTGF5b3V0LkRJUkVDVElPTl9YKVxuICAgICAgICByZXR1cm4gVHJhbnNmb3JtLnRyYW5zbGF0ZShvZmZzZXQsIDAsIDApO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIFRyYW5zZm9ybS50cmFuc2xhdGUoMCwgb2Zmc2V0LCAwKTtcbn1cbmZ1bmN0aW9uIF9maW5hbFNpemUoZGlyZWN0aW9uU2l6ZSwgc2l6ZSkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uID09PSBIZWFkZXJGb290ZXJMYXlvdXQuRElSRUNUSU9OX1gpXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBkaXJlY3Rpb25TaXplLFxuICAgICAgICAgICAgc2l6ZVsxXVxuICAgICAgICBdO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHNpemVbMF0sXG4gICAgICAgICAgICBkaXJlY3Rpb25TaXplXG4gICAgICAgIF07XG59XG5IZWFkZXJGb290ZXJMYXlvdXQucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uIGNvbW1pdChjb250ZXh0KSB7XG4gICAgdmFyIHRyYW5zZm9ybSA9IGNvbnRleHQudHJhbnNmb3JtO1xuICAgIHZhciBvcmlnaW4gPSBjb250ZXh0Lm9yaWdpbjtcbiAgICB2YXIgc2l6ZSA9IGNvbnRleHQuc2l6ZTtcbiAgICB2YXIgb3BhY2l0eSA9IGNvbnRleHQub3BhY2l0eTtcbiAgICB2YXIgaGVhZGVyU2l6ZSA9IHRoaXMub3B0aW9ucy5oZWFkZXJTaXplICE9PSB1bmRlZmluZWQgPyB0aGlzLm9wdGlvbnMuaGVhZGVyU2l6ZSA6IF9yZXNvbHZlTm9kZVNpemUuY2FsbCh0aGlzLCB0aGlzLmhlYWRlciwgdGhpcy5vcHRpb25zLmRlZmF1bHRIZWFkZXJTaXplKTtcbiAgICB2YXIgZm9vdGVyU2l6ZSA9IHRoaXMub3B0aW9ucy5mb290ZXJTaXplICE9PSB1bmRlZmluZWQgPyB0aGlzLm9wdGlvbnMuZm9vdGVyU2l6ZSA6IF9yZXNvbHZlTm9kZVNpemUuY2FsbCh0aGlzLCB0aGlzLmZvb3RlciwgdGhpcy5vcHRpb25zLmRlZmF1bHRGb290ZXJTaXplKTtcbiAgICB2YXIgY29udGVudFNpemUgPSBzaXplW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dIC0gaGVhZGVyU2l6ZSAtIGZvb3RlclNpemU7XG4gICAgaWYgKHNpemUpXG4gICAgICAgIHRyYW5zZm9ybSA9IFRyYW5zZm9ybS5tb3ZlVGhlbihbXG4gICAgICAgICAgICAtc2l6ZVswXSAqIG9yaWdpblswXSxcbiAgICAgICAgICAgIC1zaXplWzFdICogb3JpZ2luWzFdLFxuICAgICAgICAgICAgMFxuICAgICAgICBdLCB0cmFuc2Zvcm0pO1xuICAgIHZhciByZXN1bHQgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2l6ZTogX2ZpbmFsU2l6ZS5jYWxsKHRoaXMsIGhlYWRlclNpemUsIHNpemUpLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5oZWFkZXIucmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBfb3V0cHV0VHJhbnNmb3JtLmNhbGwodGhpcywgaGVhZGVyU2l6ZSksXG4gICAgICAgICAgICAgICAgc2l6ZTogX2ZpbmFsU2l6ZS5jYWxsKHRoaXMsIGNvbnRlbnRTaXplLCBzaXplKSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMuY29udGVudC5yZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IF9vdXRwdXRUcmFuc2Zvcm0uY2FsbCh0aGlzLCBoZWFkZXJTaXplICsgY29udGVudFNpemUpLFxuICAgICAgICAgICAgICAgIHNpemU6IF9maW5hbFNpemUuY2FsbCh0aGlzLCBmb290ZXJTaXplLCBzaXplKSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMuZm9vdGVyLnJlbmRlcigpXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sXG4gICAgICAgIG9wYWNpdHk6IG9wYWNpdHksXG4gICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgIHRhcmdldDogcmVzdWx0XG4gICAgfTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEhlYWRlckZvb3RlckxheW91dDsiLCJ2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVHJhbnNmb3JtJyk7XG52YXIgTW9kaWZpZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9Nb2RpZmllcicpO1xudmFyIFJlbmRlck5vZGUgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9SZW5kZXJOb2RlJyk7XG52YXIgVXRpbGl0eSA9IHJlcXVpcmUoJ2ZhbW91cy91dGlsaXRpZXMvVXRpbGl0eScpO1xudmFyIE9wdGlvbnNNYW5hZ2VyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvT3B0aW9uc01hbmFnZXInKTtcbnZhciBUcmFuc2l0aW9uYWJsZSA9IHJlcXVpcmUoJ2ZhbW91cy90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZScpO1xudmFyIFRyYW5zaXRpb25hYmxlVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtJyk7XG5mdW5jdGlvbiBMaWdodGJveChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZShMaWdodGJveC5ERUZBVUxUX09QVElPTlMpO1xuICAgIHRoaXMuX29wdGlvbnNNYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHRoaXMub3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICB0aGlzLl9zaG93aW5nID0gZmFsc2U7XG4gICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgIHRoaXMudHJhbnNmb3JtcyA9IFtdO1xuICAgIHRoaXMuc3RhdGVzID0gW107XG59XG5MaWdodGJveC5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgaW5UcmFuc2Zvcm06IFRyYW5zZm9ybS5zY2FsZSgwLjAwMSwgMC4wMDEsIDAuMDAxKSxcbiAgICBpbk9wYWNpdHk6IDAsXG4gICAgaW5PcmlnaW46IFtcbiAgICAgICAgMC41LFxuICAgICAgICAwLjVcbiAgICBdLFxuICAgIG91dFRyYW5zZm9ybTogVHJhbnNmb3JtLnNjYWxlKDAuMDAxLCAwLjAwMSwgMC4wMDEpLFxuICAgIG91dE9wYWNpdHk6IDAsXG4gICAgb3V0T3JpZ2luOiBbXG4gICAgICAgIDAuNSxcbiAgICAgICAgMC41XG4gICAgXSxcbiAgICBzaG93VHJhbnNmb3JtOiBUcmFuc2Zvcm0uaWRlbnRpdHksXG4gICAgc2hvd09wYWNpdHk6IDEsXG4gICAgc2hvd09yaWdpbjogW1xuICAgICAgICAwLjUsXG4gICAgICAgIDAuNVxuICAgIF0sXG4gICAgaW5UcmFuc2l0aW9uOiB0cnVlLFxuICAgIG91dFRyYW5zaXRpb246IHRydWUsXG4gICAgb3ZlcmxhcDogZmFsc2Vcbn07XG5MaWdodGJveC5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKG9wdGlvbnMpO1xufTtcbkxpZ2h0Ym94LnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gc2hvdyhyZW5kZXJhYmxlLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmICghcmVuZGVyYWJsZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWRlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgaWYgKHRyYW5zaXRpb24gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICBjYWxsYmFjayA9IHRyYW5zaXRpb247XG4gICAgICAgIHRyYW5zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9zaG93aW5nKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMub3ZlcmxhcClcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpZGUodGhpcy5zaG93LmJpbmQodGhpcywgcmVuZGVyYWJsZSwgdHJhbnNpdGlvbiwgY2FsbGJhY2spKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9zaG93aW5nID0gdHJ1ZTtcbiAgICB2YXIgc3RhdGVJdGVtID0ge1xuICAgICAgICAgICAgdHJhbnNmb3JtOiBuZXcgVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm0odGhpcy5vcHRpb25zLmluVHJhbnNmb3JtKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IFRyYW5zaXRpb25hYmxlKHRoaXMub3B0aW9ucy5pbk9yaWdpbiksXG4gICAgICAgICAgICBvcGFjaXR5OiBuZXcgVHJhbnNpdGlvbmFibGUodGhpcy5vcHRpb25zLmluT3BhY2l0eSlcbiAgICAgICAgfTtcbiAgICB2YXIgdHJhbnNmb3JtID0gbmV3IE1vZGlmaWVyKHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogc3RhdGVJdGVtLnRyYW5zZm9ybSxcbiAgICAgICAgICAgIG9wYWNpdHk6IHN0YXRlSXRlbS5vcGFjaXR5LFxuICAgICAgICAgICAgb3JpZ2luOiBzdGF0ZUl0ZW0ub3JpZ2luXG4gICAgICAgIH0pO1xuICAgIHZhciBub2RlID0gbmV3IFJlbmRlck5vZGUoKTtcbiAgICBub2RlLmFkZCh0cmFuc2Zvcm0pLmFkZChyZW5kZXJhYmxlKTtcbiAgICB0aGlzLm5vZGVzLnB1c2gobm9kZSk7XG4gICAgdGhpcy5zdGF0ZXMucHVzaChzdGF0ZUl0ZW0pO1xuICAgIHRoaXMudHJhbnNmb3Jtcy5wdXNoKHRyYW5zZm9ybSk7XG4gICAgdmFyIF9jYiA9IGNhbGxiYWNrID8gVXRpbGl0eS5hZnRlcigzLCBjYWxsYmFjaykgOiB1bmRlZmluZWQ7XG4gICAgaWYgKCF0cmFuc2l0aW9uKVxuICAgICAgICB0cmFuc2l0aW9uID0gdGhpcy5vcHRpb25zLmluVHJhbnNpdGlvbjtcbiAgICBzdGF0ZUl0ZW0udHJhbnNmb3JtLnNldCh0aGlzLm9wdGlvbnMuc2hvd1RyYW5zZm9ybSwgdHJhbnNpdGlvbiwgX2NiKTtcbiAgICBzdGF0ZUl0ZW0ub3BhY2l0eS5zZXQodGhpcy5vcHRpb25zLnNob3dPcGFjaXR5LCB0cmFuc2l0aW9uLCBfY2IpO1xuICAgIHN0YXRlSXRlbS5vcmlnaW4uc2V0KHRoaXMub3B0aW9ucy5zaG93T3JpZ2luLCB0cmFuc2l0aW9uLCBfY2IpO1xufTtcbkxpZ2h0Ym94LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gaGlkZSh0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5fc2hvd2luZylcbiAgICAgICAgcmV0dXJuO1xuICAgIHRoaXMuX3Nob3dpbmcgPSBmYWxzZTtcbiAgICBpZiAodHJhbnNpdGlvbiBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgIGNhbGxiYWNrID0gdHJhbnNpdGlvbjtcbiAgICAgICAgdHJhbnNpdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdmFyIG5vZGUgPSB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV07XG4gICAgdmFyIHRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3Jtc1t0aGlzLnRyYW5zZm9ybXMubGVuZ3RoIC0gMV07XG4gICAgdmFyIHN0YXRlSXRlbSA9IHRoaXMuc3RhdGVzW3RoaXMuc3RhdGVzLmxlbmd0aCAtIDFdO1xuICAgIHZhciBfY2IgPSBVdGlsaXR5LmFmdGVyKDMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubm9kZXMuc3BsaWNlKHRoaXMubm9kZXMuaW5kZXhPZihub2RlKSwgMSk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlcy5zcGxpY2UodGhpcy5zdGF0ZXMuaW5kZXhPZihzdGF0ZUl0ZW0pLCAxKTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3Jtcy5zcGxpY2UodGhpcy50cmFuc2Zvcm1zLmluZGV4T2YodHJhbnNmb3JtKSwgMSk7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICBpZiAoIXRyYW5zaXRpb24pXG4gICAgICAgIHRyYW5zaXRpb24gPSB0aGlzLm9wdGlvbnMub3V0VHJhbnNpdGlvbjtcbiAgICBzdGF0ZUl0ZW0udHJhbnNmb3JtLnNldCh0aGlzLm9wdGlvbnMub3V0VHJhbnNmb3JtLCB0cmFuc2l0aW9uLCBfY2IpO1xuICAgIHN0YXRlSXRlbS5vcGFjaXR5LnNldCh0aGlzLm9wdGlvbnMub3V0T3BhY2l0eSwgdHJhbnNpdGlvbiwgX2NiKTtcbiAgICBzdGF0ZUl0ZW0ub3JpZ2luLnNldCh0aGlzLm9wdGlvbnMub3V0T3JpZ2luLCB0cmFuc2l0aW9uLCBfY2IpO1xufTtcbkxpZ2h0Ym94LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHQucHVzaCh0aGlzLm5vZGVzW2ldLnJlbmRlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IExpZ2h0Ym94OyIsInZhciBNb2RpZmllciA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL01vZGlmaWVyJyk7XG52YXIgUmVuZGVyTm9kZSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1JlbmRlck5vZGUnKTtcbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdmYW1vdXMvY29yZS9UcmFuc2Zvcm0nKTtcbnZhciBUcmFuc2l0aW9uYWJsZSA9IHJlcXVpcmUoJ2ZhbW91cy90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZScpO1xudmFyIFZpZXcgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9WaWV3Jyk7XG5mdW5jdGlvbiBSZW5kZXJDb250cm9sbGVyKG9wdGlvbnMpIHtcbiAgICBWaWV3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5fc2hvd2luZyA9IC0xO1xuICAgIHRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMgPSBbXTtcbiAgICB0aGlzLl9uZXh0UmVuZGVyYWJsZSA9IG51bGw7XG4gICAgdGhpcy5fcmVuZGVyYWJsZXMgPSBbXTtcbiAgICB0aGlzLl9ub2RlcyA9IFtdO1xuICAgIHRoaXMuX21vZGlmaWVycyA9IFtdO1xuICAgIHRoaXMuX3N0YXRlcyA9IFtdO1xuICAgIHRoaXMuaW5UcmFuc2Zvcm1NYXAgPSBSZW5kZXJDb250cm9sbGVyLkRlZmF1bHRNYXAudHJhbnNmb3JtO1xuICAgIHRoaXMuaW5PcGFjaXR5TWFwID0gUmVuZGVyQ29udHJvbGxlci5EZWZhdWx0TWFwLm9wYWNpdHk7XG4gICAgdGhpcy5pbk9yaWdpbk1hcCA9IFJlbmRlckNvbnRyb2xsZXIuRGVmYXVsdE1hcC5vcmlnaW47XG4gICAgdGhpcy5vdXRUcmFuc2Zvcm1NYXAgPSBSZW5kZXJDb250cm9sbGVyLkRlZmF1bHRNYXAudHJhbnNmb3JtO1xuICAgIHRoaXMub3V0T3BhY2l0eU1hcCA9IFJlbmRlckNvbnRyb2xsZXIuRGVmYXVsdE1hcC5vcGFjaXR5O1xuICAgIHRoaXMub3V0T3JpZ2luTWFwID0gUmVuZGVyQ29udHJvbGxlci5EZWZhdWx0TWFwLm9yaWdpbjtcbiAgICB0aGlzLl9vdXRwdXQgPSBbXTtcbn1cblJlbmRlckNvbnRyb2xsZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShWaWV3LnByb3RvdHlwZSk7XG5SZW5kZXJDb250cm9sbGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlbmRlckNvbnRyb2xsZXI7XG5SZW5kZXJDb250cm9sbGVyLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBpblRyYW5zaXRpb246IHRydWUsXG4gICAgb3V0VHJhbnNpdGlvbjogdHJ1ZSxcbiAgICBvdmVybGFwOiB0cnVlXG59O1xuUmVuZGVyQ29udHJvbGxlci5EZWZhdWx0TWFwID0ge1xuICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gVHJhbnNmb3JtLmlkZW50aXR5O1xuICAgIH0sXG4gICAgb3BhY2l0eTogZnVuY3Rpb24gKHByb2dyZXNzKSB7XG4gICAgICAgIHJldHVybiBwcm9ncmVzcztcbiAgICB9LFxuICAgIG9yaWdpbjogbnVsbFxufTtcbmZ1bmN0aW9uIF9tYXBwZWRTdGF0ZShtYXAsIHN0YXRlKSB7XG4gICAgcmV0dXJuIG1hcChzdGF0ZS5nZXQoKSk7XG59XG5SZW5kZXJDb250cm9sbGVyLnByb3RvdHlwZS5pblRyYW5zZm9ybUZyb20gPSBmdW5jdGlvbiBpblRyYW5zZm9ybUZyb20odHJhbnNmb3JtKSB7XG4gICAgaWYgKHRyYW5zZm9ybSBpbnN0YW5jZW9mIEZ1bmN0aW9uKVxuICAgICAgICB0aGlzLmluVHJhbnNmb3JtTWFwID0gdHJhbnNmb3JtO1xuICAgIGVsc2UgaWYgKHRyYW5zZm9ybSAmJiB0cmFuc2Zvcm0uZ2V0KVxuICAgICAgICB0aGlzLmluVHJhbnNmb3JtTWFwID0gdHJhbnNmb3JtLmdldC5iaW5kKHRyYW5zZm9ybSk7XG4gICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2luVHJhbnNmb3JtRnJvbSB0YWtlcyBvbmx5IGZ1bmN0aW9uIG9yIGdldHRlciBvYmplY3QnKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5SZW5kZXJDb250cm9sbGVyLnByb3RvdHlwZS5pbk9wYWNpdHlGcm9tID0gZnVuY3Rpb24gaW5PcGFjaXR5RnJvbShvcGFjaXR5KSB7XG4gICAgaWYgKG9wYWNpdHkgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgdGhpcy5pbk9wYWNpdHlNYXAgPSBvcGFjaXR5O1xuICAgIGVsc2UgaWYgKG9wYWNpdHkgJiYgb3BhY2l0eS5nZXQpXG4gICAgICAgIHRoaXMuaW5PcGFjaXR5TWFwID0gb3BhY2l0eS5nZXQuYmluZChvcGFjaXR5KTtcbiAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignaW5PcGFjaXR5RnJvbSB0YWtlcyBvbmx5IGZ1bmN0aW9uIG9yIGdldHRlciBvYmplY3QnKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5SZW5kZXJDb250cm9sbGVyLnByb3RvdHlwZS5pbk9yaWdpbkZyb20gPSBmdW5jdGlvbiBpbk9yaWdpbkZyb20ob3JpZ2luKSB7XG4gICAgaWYgKG9yaWdpbiBpbnN0YW5jZW9mIEZ1bmN0aW9uKVxuICAgICAgICB0aGlzLmluT3JpZ2luTWFwID0gb3JpZ2luO1xuICAgIGVsc2UgaWYgKG9yaWdpbiAmJiBvcmlnaW4uZ2V0KVxuICAgICAgICB0aGlzLmluT3JpZ2luTWFwID0gb3JpZ2luLmdldC5iaW5kKG9yaWdpbik7XG4gICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2luT3JpZ2luRnJvbSB0YWtlcyBvbmx5IGZ1bmN0aW9uIG9yIGdldHRlciBvYmplY3QnKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5SZW5kZXJDb250cm9sbGVyLnByb3RvdHlwZS5vdXRUcmFuc2Zvcm1Gcm9tID0gZnVuY3Rpb24gb3V0VHJhbnNmb3JtRnJvbSh0cmFuc2Zvcm0pIHtcbiAgICBpZiAodHJhbnNmb3JtIGluc3RhbmNlb2YgRnVuY3Rpb24pXG4gICAgICAgIHRoaXMub3V0VHJhbnNmb3JtTWFwID0gdHJhbnNmb3JtO1xuICAgIGVsc2UgaWYgKHRyYW5zZm9ybSAmJiB0cmFuc2Zvcm0uZ2V0KVxuICAgICAgICB0aGlzLm91dFRyYW5zZm9ybU1hcCA9IHRyYW5zZm9ybS5nZXQuYmluZCh0cmFuc2Zvcm0pO1xuICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvdXRUcmFuc2Zvcm1Gcm9tIHRha2VzIG9ubHkgZnVuY3Rpb24gb3IgZ2V0dGVyIG9iamVjdCcpO1xuICAgIHJldHVybiB0aGlzO1xufTtcblJlbmRlckNvbnRyb2xsZXIucHJvdG90eXBlLm91dE9wYWNpdHlGcm9tID0gZnVuY3Rpb24gb3V0T3BhY2l0eUZyb20ob3BhY2l0eSkge1xuICAgIGlmIChvcGFjaXR5IGluc3RhbmNlb2YgRnVuY3Rpb24pXG4gICAgICAgIHRoaXMub3V0T3BhY2l0eU1hcCA9IG9wYWNpdHk7XG4gICAgZWxzZSBpZiAob3BhY2l0eSAmJiBvcGFjaXR5LmdldClcbiAgICAgICAgdGhpcy5vdXRPcGFjaXR5TWFwID0gb3BhY2l0eS5nZXQuYmluZChvcGFjaXR5KTtcbiAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignb3V0T3BhY2l0eUZyb20gdGFrZXMgb25seSBmdW5jdGlvbiBvciBnZXR0ZXIgb2JqZWN0Jyk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuUmVuZGVyQ29udHJvbGxlci5wcm90b3R5cGUub3V0T3JpZ2luRnJvbSA9IGZ1bmN0aW9uIG91dE9yaWdpbkZyb20ob3JpZ2luKSB7XG4gICAgaWYgKG9yaWdpbiBpbnN0YW5jZW9mIEZ1bmN0aW9uKVxuICAgICAgICB0aGlzLm91dE9yaWdpbk1hcCA9IG9yaWdpbjtcbiAgICBlbHNlIGlmIChvcmlnaW4gJiYgb3JpZ2luLmdldClcbiAgICAgICAgdGhpcy5vdXRPcmlnaW5NYXAgPSBvcmlnaW4uZ2V0LmJpbmQob3JpZ2luKTtcbiAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignb3V0T3JpZ2luRnJvbSB0YWtlcyBvbmx5IGZ1bmN0aW9uIG9yIGdldHRlciBvYmplY3QnKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5SZW5kZXJDb250cm9sbGVyLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gc2hvdyhyZW5kZXJhYmxlLCB0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmICghcmVuZGVyYWJsZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWRlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgaWYgKHRyYW5zaXRpb24gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICBjYWxsYmFjayA9IHRyYW5zaXRpb247XG4gICAgICAgIHRyYW5zaXRpb24gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc2hvd2luZyA+PSAwKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMub3ZlcmxhcClcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9uZXh0UmVuZGVyYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX25leHRSZW5kZXJhYmxlID0gcmVuZGVyYWJsZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbmV4dFJlbmRlcmFibGUgPSByZW5kZXJhYmxlO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9uZXh0UmVuZGVyYWJsZSA9PT0gcmVuZGVyYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdyh0aGlzLl9uZXh0UmVuZGVyYWJsZSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9uZXh0UmVuZGVyYWJsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBzdGF0ZSA9IG51bGw7XG4gICAgdmFyIHJlbmRlcmFibGVJbmRleCA9IHRoaXMuX3JlbmRlcmFibGVzLmluZGV4T2YocmVuZGVyYWJsZSk7XG4gICAgaWYgKHJlbmRlcmFibGVJbmRleCA+PSAwKSB7XG4gICAgICAgIHRoaXMuX3Nob3dpbmcgPSByZW5kZXJhYmxlSW5kZXg7XG4gICAgICAgIHN0YXRlID0gdGhpcy5fc3RhdGVzW3JlbmRlcmFibGVJbmRleF07XG4gICAgICAgIHN0YXRlLmhhbHQoKTtcbiAgICAgICAgdmFyIG91dGdvaW5nSW5kZXggPSB0aGlzLl9vdXRnb2luZ1JlbmRlcmFibGVzLmluZGV4T2YocmVuZGVyYWJsZSk7XG4gICAgICAgIGlmIChvdXRnb2luZ0luZGV4ID49IDApXG4gICAgICAgICAgICB0aGlzLl9vdXRnb2luZ1JlbmRlcmFibGVzLnNwbGljZShvdXRnb2luZ0luZGV4LCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZSA9IG5ldyBUcmFuc2l0aW9uYWJsZSgwKTtcbiAgICAgICAgdmFyIG1vZGlmaWVyID0gbmV3IE1vZGlmaWVyKHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRoaXMuaW5UcmFuc2Zvcm1NYXAgPyBfbWFwcGVkU3RhdGUuYmluZCh0aGlzLCB0aGlzLmluVHJhbnNmb3JtTWFwLCBzdGF0ZSkgOiBudWxsLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IHRoaXMuaW5PcGFjaXR5TWFwID8gX21hcHBlZFN0YXRlLmJpbmQodGhpcywgdGhpcy5pbk9wYWNpdHlNYXAsIHN0YXRlKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgb3JpZ2luOiB0aGlzLmluT3JpZ2luTWFwID8gX21hcHBlZFN0YXRlLmJpbmQodGhpcywgdGhpcy5pbk9yaWdpbk1hcCwgc3RhdGUpIDogbnVsbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHZhciBub2RlID0gbmV3IFJlbmRlck5vZGUoKTtcbiAgICAgICAgbm9kZS5hZGQobW9kaWZpZXIpLmFkZChyZW5kZXJhYmxlKTtcbiAgICAgICAgdGhpcy5fc2hvd2luZyA9IHRoaXMuX25vZGVzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgdGhpcy5fbW9kaWZpZXJzLnB1c2gobW9kaWZpZXIpO1xuICAgICAgICB0aGlzLl9zdGF0ZXMucHVzaChzdGF0ZSk7XG4gICAgICAgIHRoaXMuX3JlbmRlcmFibGVzLnB1c2gocmVuZGVyYWJsZSk7XG4gICAgfVxuICAgIGlmICghdHJhbnNpdGlvbilcbiAgICAgICAgdHJhbnNpdGlvbiA9IHRoaXMub3B0aW9ucy5pblRyYW5zaXRpb247XG4gICAgc3RhdGUuc2V0KDEsIHRyYW5zaXRpb24sIGNhbGxiYWNrKTtcbn07XG5SZW5kZXJDb250cm9sbGVyLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gaGlkZSh0cmFuc2l0aW9uLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLl9zaG93aW5nIDwgMClcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBpbmRleCA9IHRoaXMuX3Nob3dpbmc7XG4gICAgdGhpcy5fc2hvd2luZyA9IC0xO1xuICAgIGlmICh0cmFuc2l0aW9uIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgY2FsbGJhY2sgPSB0cmFuc2l0aW9uO1xuICAgICAgICB0cmFuc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB2YXIgbm9kZSA9IHRoaXMuX25vZGVzW2luZGV4XTtcbiAgICB2YXIgbW9kaWZpZXIgPSB0aGlzLl9tb2RpZmllcnNbaW5kZXhdO1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuX3N0YXRlc1tpbmRleF07XG4gICAgdmFyIHJlbmRlcmFibGUgPSB0aGlzLl9yZW5kZXJhYmxlc1tpbmRleF07XG4gICAgbW9kaWZpZXIudHJhbnNmb3JtRnJvbSh0aGlzLm91dFRyYW5zZm9ybU1hcCA/IF9tYXBwZWRTdGF0ZS5iaW5kKHRoaXMsIHRoaXMub3V0VHJhbnNmb3JtTWFwLCBzdGF0ZSkgOiBudWxsKTtcbiAgICBtb2RpZmllci5vcGFjaXR5RnJvbSh0aGlzLm91dE9wYWNpdHlNYXAgPyBfbWFwcGVkU3RhdGUuYmluZCh0aGlzLCB0aGlzLm91dE9wYWNpdHlNYXAsIHN0YXRlKSA6IG51bGwpO1xuICAgIG1vZGlmaWVyLm9yaWdpbkZyb20odGhpcy5vdXRPcmlnaW5NYXAgPyBfbWFwcGVkU3RhdGUuYmluZCh0aGlzLCB0aGlzLm91dE9yaWdpbk1hcCwgc3RhdGUpIDogbnVsbCk7XG4gICAgaWYgKHRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMuaW5kZXhPZihyZW5kZXJhYmxlKSA8IDApXG4gICAgICAgIHRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMucHVzaChyZW5kZXJhYmxlKTtcbiAgICBpZiAoIXRyYW5zaXRpb24pXG4gICAgICAgIHRyYW5zaXRpb24gPSB0aGlzLm9wdGlvbnMub3V0VHJhbnNpdGlvbjtcbiAgICBzdGF0ZS5oYWx0KCk7XG4gICAgc3RhdGUuc2V0KDAsIHRyYW5zaXRpb24sIGZ1bmN0aW9uIChub2RlLCBtb2RpZmllciwgc3RhdGUsIHJlbmRlcmFibGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMuaW5kZXhPZihyZW5kZXJhYmxlKSA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9ub2Rlcy5pbmRleE9mKG5vZGUpO1xuICAgICAgICAgICAgdGhpcy5fbm9kZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMuX21vZGlmaWVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgdGhpcy5fc3RhdGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJhYmxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgdGhpcy5fb3V0Z29pbmdSZW5kZXJhYmxlcy5zcGxpY2UodGhpcy5fb3V0Z29pbmdSZW5kZXJhYmxlcy5pbmRleE9mKHJlbmRlcmFibGUpLCAxKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zaG93aW5nID49IGluZGV4KVxuICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dpbmctLTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbGJhY2spXG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgIH0uYmluZCh0aGlzLCBub2RlLCBtb2RpZmllciwgc3RhdGUsIHJlbmRlcmFibGUpKTtcbn07XG5SZW5kZXJDb250cm9sbGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuX291dHB1dDtcbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IHRoaXMuX25vZGVzLmxlbmd0aClcbiAgICAgICAgcmVzdWx0LnNwbGljZSh0aGlzLl9ub2Rlcy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0W2ldID0gdGhpcy5fbm9kZXNbaV0ucmVuZGVyKCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBSZW5kZXJDb250cm9sbGVyOyIsInZhciBDb250YWluZXJTdXJmYWNlID0gcmVxdWlyZSgnZmFtb3VzL3N1cmZhY2VzL0NvbnRhaW5lclN1cmZhY2UnKTtcbnZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FdmVudEhhbmRsZXInKTtcbnZhciBTY3JvbGx2aWV3ID0gcmVxdWlyZSgnLi9TY3JvbGx2aWV3Jyk7XG52YXIgVXRpbGl0eSA9IHJlcXVpcmUoJ2ZhbW91cy91dGlsaXRpZXMvVXRpbGl0eScpO1xudmFyIE9wdGlvbnNNYW5hZ2VyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvT3B0aW9uc01hbmFnZXInKTtcbmZ1bmN0aW9uIFNjcm9sbENvbnRhaW5lcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZShTY3JvbGxDb250YWluZXIuREVGQVVMVF9PUFRJT05TKTtcbiAgICB0aGlzLl9vcHRpb25zTWFuYWdlciA9IG5ldyBPcHRpb25zTWFuYWdlcih0aGlzLm9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5jb250YWluZXIgPSBuZXcgQ29udGFpbmVyU3VyZmFjZSh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTtcbiAgICB0aGlzLnNjcm9sbHZpZXcgPSBuZXcgU2Nyb2xsdmlldyh0aGlzLm9wdGlvbnMuc2Nyb2xsdmlldyk7XG4gICAgdGhpcy5jb250YWluZXIuYWRkKHRoaXMuc2Nyb2xsdmlldyk7XG4gICAgdGhpcy5fZXZlbnRJbnB1dCA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgICBFdmVudEhhbmRsZXIuc2V0SW5wdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50SW5wdXQpO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQucGlwZSh0aGlzLnNjcm9sbHZpZXcpO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50T3V0cHV0KTtcbiAgICB0aGlzLmNvbnRhaW5lci5waXBlKHRoaXMuX2V2ZW50T3V0cHV0KTtcbiAgICB0aGlzLnNjcm9sbHZpZXcucGlwZSh0aGlzLl9ldmVudE91dHB1dCk7XG59XG5TY3JvbGxDb250YWluZXIuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIGNvbnRhaW5lcjogeyBwcm9wZXJ0aWVzOiB7IG92ZXJmbG93OiAnaGlkZGVuJyB9IH0sXG4gICAgc2Nyb2xsdmlldzoge31cbn07XG5TY3JvbGxDb250YWluZXIucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn07XG5TY3JvbGxDb250YWluZXIucHJvdG90eXBlLnNlcXVlbmNlRnJvbSA9IGZ1bmN0aW9uIHNlcXVlbmNlRnJvbSgpIHtcbiAgICByZXR1cm4gdGhpcy5zY3JvbGx2aWV3LnNlcXVlbmNlRnJvbS5hcHBseSh0aGlzLnNjcm9sbHZpZXcsIGFyZ3VtZW50cyk7XG59O1xuU2Nyb2xsQ29udGFpbmVyLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIuZ2V0U2l6ZS5hcHBseSh0aGlzLmNvbnRhaW5lciwgYXJndW1lbnRzKTtcbn07XG5TY3JvbGxDb250YWluZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIucmVuZGVyKCk7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBTY3JvbGxDb250YWluZXI7IiwidmFyIEVudGl0eSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL0VudGl0eScpO1xudmFyIEdyb3VwID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvR3JvdXAnKTtcbnZhciBPcHRpb25zTWFuYWdlciA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL09wdGlvbnNNYW5hZ2VyJyk7XG52YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVHJhbnNmb3JtJyk7XG52YXIgVXRpbGl0eSA9IHJlcXVpcmUoJ2ZhbW91cy91dGlsaXRpZXMvVXRpbGl0eScpO1xudmFyIFZpZXdTZXF1ZW5jZSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1ZpZXdTZXF1ZW5jZScpO1xudmFyIEV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL0V2ZW50SGFuZGxlcicpO1xuZnVuY3Rpb24gU2Nyb2xsZXIob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5jcmVhdGUodGhpcy5jb25zdHJ1Y3Rvci5ERUZBVUxUX09QVElPTlMpO1xuICAgIHRoaXMuX29wdGlvbnNNYW5hZ2VyID0gbmV3IE9wdGlvbnNNYW5hZ2VyKHRoaXMub3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5fbm9kZSA9IG51bGw7XG4gICAgdGhpcy5fcG9zaXRpb24gPSAwO1xuICAgIHRoaXMuX3Bvc2l0aW9uT2Zmc2V0ID0gMDtcbiAgICB0aGlzLl9wb3NpdGlvbkdldHRlciA9IG51bGw7XG4gICAgdGhpcy5fb3V0cHV0RnVuY3Rpb24gPSBudWxsO1xuICAgIHRoaXMuX21hc3Rlck91dHB1dEZ1bmN0aW9uID0gbnVsbDtcbiAgICB0aGlzLm91dHB1dEZyb20oKTtcbiAgICB0aGlzLl9vbkVkZ2UgPSAwO1xuICAgIHRoaXMuZ3JvdXAgPSBuZXcgR3JvdXAoKTtcbiAgICB0aGlzLmdyb3VwLmFkZCh7IHJlbmRlcjogX2lubmVyUmVuZGVyLmJpbmQodGhpcykgfSk7XG4gICAgdGhpcy5fZW50aXR5SWQgPSBFbnRpdHkucmVnaXN0ZXIodGhpcyk7XG4gICAgdGhpcy5fc2l6ZSA9IFtcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1bmRlZmluZWRcbiAgICBdO1xuICAgIHRoaXMuX2NvbnRleHRTaXplID0gW1xuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZFxuICAgIF07XG4gICAgdGhpcy5fZXZlbnRJbnB1dCA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgICB0aGlzLl9ldmVudE91dHB1dCA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgICBFdmVudEhhbmRsZXIuc2V0SW5wdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50SW5wdXQpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsIHRoaXMuX2V2ZW50T3V0cHV0KTtcbn1cblNjcm9sbGVyLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBkaXJlY3Rpb246IFV0aWxpdHkuRGlyZWN0aW9uLlksXG4gICAgbWFyZ2luOiAwLFxuICAgIGNsaXBTaXplOiB1bmRlZmluZWQsXG4gICAgZ3JvdXBTY3JvbGw6IGZhbHNlXG59O1xudmFyIEVER0VfVE9MRVJBTkNFID0gMDtcbmZ1bmN0aW9uIF9zaXplRm9yRGlyKHNpemUpIHtcbiAgICBpZiAoIXNpemUpXG4gICAgICAgIHNpemUgPSB0aGlzLl9jb250ZXh0U2l6ZTtcbiAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICByZXR1cm4gc2l6ZVtkaW1lbnNpb25dID09PSB1bmRlZmluZWQgPyB0aGlzLl9jb250ZXh0U2l6ZVtkaW1lbnNpb25dIDogc2l6ZVtkaW1lbnNpb25dO1xufVxuZnVuY3Rpb24gX291dHB1dChub2RlLCBvZmZzZXQsIHRhcmdldCkge1xuICAgIHZhciBzaXplID0gbm9kZS5nZXRTaXplID8gbm9kZS5nZXRTaXplKCkgOiB0aGlzLl9jb250ZXh0U2l6ZTtcbiAgICB2YXIgdHJhbnNmb3JtID0gdGhpcy5fb3V0cHV0RnVuY3Rpb24ob2Zmc2V0KTtcbiAgICB0YXJnZXQucHVzaCh7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNmb3JtLFxuICAgICAgICB0YXJnZXQ6IG5vZGUucmVuZGVyKClcbiAgICB9KTtcbiAgICByZXR1cm4gX3NpemVGb3JEaXIuY2FsbCh0aGlzLCBzaXplKTtcbn1cbmZ1bmN0aW9uIF9nZXRDbGlwU2l6ZSgpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmNsaXBTaXplICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xpcFNpemU7XG4gICAgaWYgKHRoaXMuX2NvbnRleHRTaXplW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dID4gdGhpcy5nZXRDdW11bGF0aXZlU2l6ZSgpW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dKSB7XG4gICAgICAgIHJldHVybiBfc2l6ZUZvckRpci5jYWxsKHRoaXMsIHRoaXMuZ2V0Q3VtdWxhdGl2ZVNpemUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIF9zaXplRm9yRGlyLmNhbGwodGhpcywgdGhpcy5fY29udGV4dFNpemUpO1xuICAgIH1cbn1cblNjcm9sbGVyLnByb3RvdHlwZS5nZXRDdW11bGF0aXZlU2l6ZSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBpbmRleCA9IHRoaXMuX25vZGUuXy5jdW11bGF0aXZlU2l6ZXMubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gdGhpcy5fbm9kZS5fLmdldFNpemUoaW5kZXgpO1xufTtcblNjcm9sbGVyLnByb3RvdHlwZS5zZXRPcHRpb25zID0gZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuZ3JvdXBTY3JvbGwgIT09IHRoaXMub3B0aW9ucy5ncm91cFNjcm9sbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5ncm91cFNjcm9sbClcbiAgICAgICAgICAgIHRoaXMuZ3JvdXAucGlwZSh0aGlzLl9ldmVudE91dHB1dCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuZ3JvdXAudW5waXBlKHRoaXMuX2V2ZW50T3V0cHV0KTtcbiAgICB9XG4gICAgdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn07XG5TY3JvbGxlci5wcm90b3R5cGUub25FZGdlID0gZnVuY3Rpb24gb25FZGdlKCkge1xuICAgIHJldHVybiB0aGlzLl9vbkVkZ2U7XG59O1xuU2Nyb2xsZXIucHJvdG90eXBlLm91dHB1dEZyb20gPSBmdW5jdGlvbiBvdXRwdXRGcm9tKGZuLCBtYXN0ZXJGbikge1xuICAgIGlmICghZm4pIHtcbiAgICAgICAgZm4gPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gVXRpbGl0eS5EaXJlY3Rpb24uWCA/IFRyYW5zZm9ybS50cmFuc2xhdGUob2Zmc2V0LCAwKSA6IFRyYW5zZm9ybS50cmFuc2xhdGUoMCwgb2Zmc2V0KTtcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuICAgICAgICBpZiAoIW1hc3RlckZuKVxuICAgICAgICAgICAgbWFzdGVyRm4gPSBmbjtcbiAgICB9XG4gICAgdGhpcy5fb3V0cHV0RnVuY3Rpb24gPSBmbjtcbiAgICB0aGlzLl9tYXN0ZXJPdXRwdXRGdW5jdGlvbiA9IG1hc3RlckZuID8gbWFzdGVyRm4gOiBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiBUcmFuc2Zvcm0uaW52ZXJzZShmbigtb2Zmc2V0KSk7XG4gICAgfTtcbn07XG5TY3JvbGxlci5wcm90b3R5cGUucG9zaXRpb25Gcm9tID0gZnVuY3Rpb24gcG9zaXRpb25Gcm9tKHBvc2l0aW9uKSB7XG4gICAgaWYgKHBvc2l0aW9uIGluc3RhbmNlb2YgRnVuY3Rpb24pXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uR2V0dGVyID0gcG9zaXRpb247XG4gICAgZWxzZSBpZiAocG9zaXRpb24gJiYgcG9zaXRpb24uZ2V0KVxuICAgICAgICB0aGlzLl9wb3NpdGlvbkdldHRlciA9IHBvc2l0aW9uLmdldC5iaW5kKHBvc2l0aW9uKTtcbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fcG9zaXRpb25HZXR0ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcG9zaXRpb25HZXR0ZXIpXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fcG9zaXRpb25HZXR0ZXIuY2FsbCh0aGlzKTtcbn07XG5TY3JvbGxlci5wcm90b3R5cGUuc2VxdWVuY2VGcm9tID0gZnVuY3Rpb24gc2VxdWVuY2VGcm9tKG5vZGUpIHtcbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICBub2RlID0gbmV3IFZpZXdTZXF1ZW5jZSh7IGFycmF5OiBub2RlIH0pO1xuICAgIHRoaXMuX25vZGUgPSBub2RlO1xuICAgIHRoaXMuX3Bvc2l0aW9uT2Zmc2V0ID0gMDtcbn07XG5TY3JvbGxlci5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uIGdldFNpemUoYWN0dWFsKSB7XG4gICAgcmV0dXJuIGFjdHVhbCA/IHRoaXMuX2NvbnRleHRTaXplIDogdGhpcy5fc2l6ZTtcbn07XG5TY3JvbGxlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5fbm9kZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKHRoaXMuX3Bvc2l0aW9uR2V0dGVyKVxuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uR2V0dGVyLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0eUlkO1xufTtcblNjcm9sbGVyLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiBjb21taXQoY29udGV4dCkge1xuICAgIHZhciB0cmFuc2Zvcm0gPSBjb250ZXh0LnRyYW5zZm9ybTtcbiAgICB2YXIgb3BhY2l0eSA9IGNvbnRleHQub3BhY2l0eTtcbiAgICB2YXIgb3JpZ2luID0gY29udGV4dC5vcmlnaW47XG4gICAgdmFyIHNpemUgPSBjb250ZXh0LnNpemU7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuY2xpcFNpemUgJiYgKHNpemVbMF0gIT09IHRoaXMuX2NvbnRleHRTaXplWzBdIHx8IHNpemVbMV0gIT09IHRoaXMuX2NvbnRleHRTaXplWzFdKSkge1xuICAgICAgICB0aGlzLl9vbkVkZ2UgPSAwO1xuICAgICAgICB0aGlzLl9jb250ZXh0U2l6ZVswXSA9IHNpemVbMF07XG4gICAgICAgIHRoaXMuX2NvbnRleHRTaXplWzFdID0gc2l6ZVsxXTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gPT09IFV0aWxpdHkuRGlyZWN0aW9uLlgpIHtcbiAgICAgICAgICAgIHRoaXMuX3NpemVbMF0gPSBfZ2V0Q2xpcFNpemUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX3NpemVbMV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zaXplWzBdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5fc2l6ZVsxXSA9IF9nZXRDbGlwU2l6ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBzY3JvbGxUcmFuc2Zvcm0gPSB0aGlzLl9tYXN0ZXJPdXRwdXRGdW5jdGlvbigtdGhpcy5fcG9zaXRpb24pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHRyYW5zZm9ybTogVHJhbnNmb3JtLm11bHRpcGx5KHRyYW5zZm9ybSwgc2Nyb2xsVHJhbnNmb3JtKSxcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgb3BhY2l0eTogb3BhY2l0eSxcbiAgICAgICAgb3JpZ2luOiBvcmlnaW4sXG4gICAgICAgIHRhcmdldDogdGhpcy5ncm91cC5yZW5kZXIoKVxuICAgIH07XG59O1xuZnVuY3Rpb24gX2lubmVyUmVuZGVyKCkge1xuICAgIHZhciBzaXplID0gbnVsbDtcbiAgICB2YXIgcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbjtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIG9mZnNldCA9IC10aGlzLl9wb3NpdGlvbk9mZnNldDtcbiAgICB2YXIgY2xpcFNpemUgPSBfZ2V0Q2xpcFNpemUuY2FsbCh0aGlzKTtcbiAgICB2YXIgY3Vyck5vZGUgPSB0aGlzLl9ub2RlO1xuICAgIHdoaWxlIChjdXJyTm9kZSAmJiBvZmZzZXQgLSBwb3NpdGlvbiA8IGNsaXBTaXplICsgdGhpcy5vcHRpb25zLm1hcmdpbikge1xuICAgICAgICBvZmZzZXQgKz0gX291dHB1dC5jYWxsKHRoaXMsIGN1cnJOb2RlLCBvZmZzZXQsIHJlc3VsdCk7XG4gICAgICAgIGN1cnJOb2RlID0gY3Vyck5vZGUuZ2V0TmV4dCA/IGN1cnJOb2RlLmdldE5leHQoKSA6IG51bGw7XG4gICAgfVxuICAgIHZhciBzaXplTm9kZSA9IHRoaXMuX25vZGU7XG4gICAgdmFyIG5vZGVzU2l6ZSA9IF9zaXplRm9yRGlyLmNhbGwodGhpcywgc2l6ZU5vZGUuZ2V0U2l6ZSgpKTtcbiAgICBpZiAob2Zmc2V0IDwgY2xpcFNpemUpIHtcbiAgICAgICAgd2hpbGUgKHNpemVOb2RlICYmIG5vZGVzU2l6ZSA8IGNsaXBTaXplKSB7XG4gICAgICAgICAgICBzaXplTm9kZSA9IHNpemVOb2RlLmdldFByZXZpb3VzKCk7XG4gICAgICAgICAgICBpZiAoc2l6ZU5vZGUpXG4gICAgICAgICAgICAgICAgbm9kZXNTaXplICs9IF9zaXplRm9yRGlyLmNhbGwodGhpcywgc2l6ZU5vZGUuZ2V0U2l6ZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBzaXplTm9kZSA9IHRoaXMuX25vZGU7XG4gICAgICAgIHdoaWxlIChzaXplTm9kZSAmJiBub2Rlc1NpemUgPCBjbGlwU2l6ZSkge1xuICAgICAgICAgICAgc2l6ZU5vZGUgPSBzaXplTm9kZS5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAoc2l6ZU5vZGUpXG4gICAgICAgICAgICAgICAgbm9kZXNTaXplICs9IF9zaXplRm9yRGlyLmNhbGwodGhpcywgc2l6ZU5vZGUuZ2V0U2l6ZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWN1cnJOb2RlICYmIG9mZnNldCAtIHBvc2l0aW9uIDwgY2xpcFNpemUgLSBFREdFX1RPTEVSQU5DRSkge1xuICAgICAgICBpZiAodGhpcy5fb25FZGdlICE9PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9vbkVkZ2UgPSAxO1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgnb25FZGdlJywgeyBwb3NpdGlvbjogb2Zmc2V0IC0gY2xpcFNpemUgfSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCF0aGlzLl9ub2RlLmdldFByZXZpb3VzKCkgJiYgcG9zaXRpb24gPCAtRURHRV9UT0xFUkFOQ0UpIHtcbiAgICAgICAgaWYgKHRoaXMuX29uRWRnZSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX29uRWRnZSA9IC0xO1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgnb25FZGdlJywgeyBwb3NpdGlvbjogMCB9KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLl9vbkVkZ2UgIT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuX29uRWRnZSA9IDA7XG4gICAgICAgICAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdvZmZFZGdlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3Vyck5vZGUgPSB0aGlzLl9ub2RlICYmIHRoaXMuX25vZGUuZ2V0UHJldmlvdXMgPyB0aGlzLl9ub2RlLmdldFByZXZpb3VzKCkgOiBudWxsO1xuICAgIG9mZnNldCA9IC10aGlzLl9wb3NpdGlvbk9mZnNldDtcbiAgICBpZiAoY3Vyck5vZGUpIHtcbiAgICAgICAgc2l6ZSA9IGN1cnJOb2RlLmdldFNpemUgPyBjdXJyTm9kZS5nZXRTaXplKCkgOiB0aGlzLl9jb250ZXh0U2l6ZTtcbiAgICAgICAgb2Zmc2V0IC09IF9zaXplRm9yRGlyLmNhbGwodGhpcywgc2l6ZSk7XG4gICAgfVxuICAgIHdoaWxlIChjdXJyTm9kZSAmJiBvZmZzZXQgLSBwb3NpdGlvbiA+IC0oY2xpcFNpemUgKyB0aGlzLm9wdGlvbnMubWFyZ2luKSkge1xuICAgICAgICBfb3V0cHV0LmNhbGwodGhpcywgY3Vyck5vZGUsIG9mZnNldCwgcmVzdWx0KTtcbiAgICAgICAgY3Vyck5vZGUgPSBjdXJyTm9kZS5nZXRQcmV2aW91cyA/IGN1cnJOb2RlLmdldFByZXZpb3VzKCkgOiBudWxsO1xuICAgICAgICBpZiAoY3Vyck5vZGUpIHtcbiAgICAgICAgICAgIHNpemUgPSBjdXJyTm9kZS5nZXRTaXplID8gY3Vyck5vZGUuZ2V0U2l6ZSgpIDogdGhpcy5fY29udGV4dFNpemU7XG4gICAgICAgICAgICBvZmZzZXQgLT0gX3NpemVGb3JEaXIuY2FsbCh0aGlzLCBzaXplKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxubW9kdWxlLmV4cG9ydHMgPSBTY3JvbGxlcjsiLCJ2YXIgUGh5c2ljc0VuZ2luZSA9IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL1BoeXNpY3NFbmdpbmUnKTtcbnZhciBQYXJ0aWNsZSA9IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZScpO1xudmFyIERyYWcgPSByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9mb3JjZXMvRHJhZycpO1xudmFyIFNwcmluZyA9IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2ZvcmNlcy9TcHJpbmcnKTtcbnZhciBFdmVudEhhbmRsZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9FdmVudEhhbmRsZXInKTtcbnZhciBPcHRpb25zTWFuYWdlciA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL09wdGlvbnNNYW5hZ2VyJyk7XG52YXIgVmlld1NlcXVlbmNlID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVmlld1NlcXVlbmNlJyk7XG52YXIgU2Nyb2xsZXIgPSByZXF1aXJlKCdmYW1vdXMvdmlld3MvU2Nyb2xsZXInKTtcbnZhciBVdGlsaXR5ID0gcmVxdWlyZSgnZmFtb3VzL3V0aWxpdGllcy9VdGlsaXR5Jyk7XG52YXIgR2VuZXJpY1N5bmMgPSByZXF1aXJlKCdmYW1vdXMvaW5wdXRzL0dlbmVyaWNTeW5jJyk7XG52YXIgU2Nyb2xsU3luYyA9IHJlcXVpcmUoJ2ZhbW91cy9pbnB1dHMvU2Nyb2xsU3luYycpO1xudmFyIFRvdWNoU3luYyA9IHJlcXVpcmUoJ2ZhbW91cy9pbnB1dHMvVG91Y2hTeW5jJyk7XG5HZW5lcmljU3luYy5yZWdpc3Rlcih7XG4gICAgc2Nyb2xsOiBTY3JvbGxTeW5jLFxuICAgIHRvdWNoOiBUb3VjaFN5bmNcbn0pO1xudmFyIFRPTEVSQU5DRSA9IDAuNTtcbnZhciBTcHJpbmdTdGF0ZXMgPSB7XG4gICAgICAgIE5PTkU6IDAsXG4gICAgICAgIEVER0U6IDEsXG4gICAgICAgIFBBR0U6IDJcbiAgICB9O1xudmFyIEVkZ2VTdGF0ZXMgPSB7XG4gICAgICAgIFRPUDogLTEsXG4gICAgICAgIE5PTkU6IDAsXG4gICAgICAgIEJPVFRPTTogMVxuICAgIH07XG5mdW5jdGlvbiBTY3JvbGx2aWV3KG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFNjcm9sbHZpZXcuREVGQVVMVF9PUFRJT05TKTtcbiAgICB0aGlzLl9vcHRpb25zTWFuYWdlciA9IG5ldyBPcHRpb25zTWFuYWdlcih0aGlzLm9wdGlvbnMpO1xuICAgIHRoaXMuX3Njcm9sbGVyID0gbmV3IFNjcm9sbGVyKHRoaXMub3B0aW9ucyk7XG4gICAgdGhpcy5zeW5jID0gbmV3IEdlbmVyaWNTeW5jKFtcbiAgICAgICAgJ3Njcm9sbCcsXG4gICAgICAgICd0b3VjaCdcbiAgICBdLCB7XG4gICAgICAgIGRpcmVjdGlvbjogdGhpcy5vcHRpb25zLmRpcmVjdGlvbixcbiAgICAgICAgc2NhbGU6IHRoaXMub3B0aW9ucy5zeW5jU2NhbGUsXG4gICAgICAgIHJhaWxzOiB0aGlzLm9wdGlvbnMucmFpbHMsXG4gICAgICAgIHByZXZlbnREZWZhdWx0OiB0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHRcbiAgICB9KTtcbiAgICB0aGlzLl9waHlzaWNzRW5naW5lID0gbmV3IFBoeXNpY3NFbmdpbmUoKTtcbiAgICB0aGlzLl9wYXJ0aWNsZSA9IG5ldyBQYXJ0aWNsZSgpO1xuICAgIHRoaXMuX3BoeXNpY3NFbmdpbmUuYWRkQm9keSh0aGlzLl9wYXJ0aWNsZSk7XG4gICAgdGhpcy5zcHJpbmcgPSBuZXcgU3ByaW5nKHtcbiAgICAgICAgYW5jaG9yOiBbXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDBcbiAgICAgICAgXSxcbiAgICAgICAgcGVyaW9kOiB0aGlzLm9wdGlvbnMuZWRnZVBlcmlvZCxcbiAgICAgICAgZGFtcGluZ1JhdGlvOiB0aGlzLm9wdGlvbnMuZWRnZURhbXBcbiAgICB9KTtcbiAgICB0aGlzLmRyYWcgPSBuZXcgRHJhZyh7XG4gICAgICAgIGZvcmNlRnVuY3Rpb246IERyYWcuRk9SQ0VfRlVOQ1RJT05TLlFVQURSQVRJQyxcbiAgICAgICAgc3RyZW5ndGg6IHRoaXMub3B0aW9ucy5kcmFnXG4gICAgfSk7XG4gICAgdGhpcy5mcmljdGlvbiA9IG5ldyBEcmFnKHtcbiAgICAgICAgZm9yY2VGdW5jdGlvbjogRHJhZy5GT1JDRV9GVU5DVElPTlMuTElORUFSLFxuICAgICAgICBzdHJlbmd0aDogdGhpcy5vcHRpb25zLmZyaWN0aW9uXG4gICAgfSk7XG4gICAgdGhpcy5fbm9kZSA9IG51bGw7XG4gICAgdGhpcy5fdG91Y2hDb3VudCA9IDA7XG4gICAgdGhpcy5fc3ByaW5nU3RhdGUgPSBTcHJpbmdTdGF0ZXMuTk9ORTtcbiAgICB0aGlzLl9vbkVkZ2UgPSBFZGdlU3RhdGVzLk5PTkU7XG4gICAgdGhpcy5fcGFnZVNwcmluZ1Bvc2l0aW9uID0gMDtcbiAgICB0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb24gPSAwO1xuICAgIHRoaXMuX3RvdWNoVmVsb2NpdHkgPSAwO1xuICAgIHRoaXMuX2Vhcmx5RW5kID0gZmFsc2U7XG4gICAgdGhpcy5fbmVlZHNQYWdpbmF0aW9uQ2hlY2sgPSBmYWxzZTtcbiAgICB0aGlzLl9kaXNwbGFjZW1lbnQgPSAwO1xuICAgIHRoaXMuX3RvdGFsU2hpZnQgPSAwO1xuICAgIHRoaXMuX2NhY2hlZEluZGV4ID0gMDtcbiAgICB0aGlzLl9zY3JvbGxlci5wb3NpdGlvbkZyb20odGhpcy5nZXRQb3NpdGlvbi5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9ldmVudElucHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQucGlwZSh0aGlzLnN5bmMpO1xuICAgIHRoaXMuc3luYy5waXBlKHRoaXMuX2V2ZW50SW5wdXQpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRJbnB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRJbnB1dCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldE91dHB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRPdXRwdXQpO1xuICAgIF9iaW5kRXZlbnRzLmNhbGwodGhpcyk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn1cblNjcm9sbHZpZXcuREVGQVVMVF9PUFRJT05TID0ge1xuICAgIGRpcmVjdGlvbjogVXRpbGl0eS5EaXJlY3Rpb24uWSxcbiAgICByYWlsczogdHJ1ZSxcbiAgICBmcmljdGlvbjogMC4wMDUsXG4gICAgZHJhZzogMC4wMDAxLFxuICAgIGVkZ2VHcmlwOiAwLjIsXG4gICAgZWRnZVBlcmlvZDogMzAwLFxuICAgIGVkZ2VEYW1wOiAxLFxuICAgIG1hcmdpbjogMTAwMCxcbiAgICBwYWdpbmF0ZWQ6IGZhbHNlLFxuICAgIHBhZ2VQZXJpb2Q6IDUwMCxcbiAgICBwYWdlRGFtcDogMC44LFxuICAgIHBhZ2VTdG9wU3BlZWQ6IDEwLFxuICAgIHBhZ2VTd2l0Y2hTcGVlZDogMC41LFxuICAgIHNwZWVkTGltaXQ6IDUsXG4gICAgZ3JvdXBTY3JvbGw6IGZhbHNlLFxuICAgIHN5bmNTY2FsZTogMVxufTtcbmZ1bmN0aW9uIF9oYW5kbGVTdGFydChldmVudCkge1xuICAgIHRoaXMuX3RvdWNoQ291bnQgPSBldmVudC5jb3VudDtcbiAgICBpZiAoZXZlbnQuY291bnQgPT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5fdG91Y2hDb3VudCA9IDE7XG4gICAgX2RldGFjaEFnZW50cy5jYWxsKHRoaXMpO1xuICAgIHRoaXMuc2V0VmVsb2NpdHkoMCk7XG4gICAgdGhpcy5fdG91Y2hWZWxvY2l0eSA9IDA7XG4gICAgdGhpcy5fZWFybHlFbmQgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIF9oYW5kbGVNb3ZlKGV2ZW50KSB7XG4gICAgdmFyIHZlbG9jaXR5ID0gLWV2ZW50LnZlbG9jaXR5O1xuICAgIHZhciBkZWx0YSA9IC1ldmVudC5kZWx0YTtcbiAgICBpZiAodGhpcy5fb25FZGdlICE9PSBFZGdlU3RhdGVzLk5PTkUgJiYgZXZlbnQuc2xpcCkge1xuICAgICAgICBpZiAodmVsb2NpdHkgPCAwICYmIHRoaXMuX29uRWRnZSA9PT0gRWRnZVN0YXRlcy5UT1AgfHwgdmVsb2NpdHkgPiAwICYmIHRoaXMuX29uRWRnZSA9PT0gRWRnZVN0YXRlcy5CT1RUT00pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fZWFybHlFbmQpIHtcbiAgICAgICAgICAgICAgICBfaGFuZGxlRW5kLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vhcmx5RW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9lYXJseUVuZCAmJiBNYXRoLmFicyh2ZWxvY2l0eSkgPiBNYXRoLmFicyh0aGlzLmdldFZlbG9jaXR5KCkpKSB7XG4gICAgICAgICAgICBfaGFuZGxlU3RhcnQuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuX2Vhcmx5RW5kKVxuICAgICAgICByZXR1cm47XG4gICAgdGhpcy5fdG91Y2hWZWxvY2l0eSA9IHZlbG9jaXR5O1xuICAgIGlmIChldmVudC5zbGlwKSB7XG4gICAgICAgIHZhciBzcGVlZExpbWl0ID0gdGhpcy5vcHRpb25zLnNwZWVkTGltaXQ7XG4gICAgICAgIGlmICh2ZWxvY2l0eSA8IC1zcGVlZExpbWl0KVxuICAgICAgICAgICAgdmVsb2NpdHkgPSAtc3BlZWRMaW1pdDtcbiAgICAgICAgZWxzZSBpZiAodmVsb2NpdHkgPiBzcGVlZExpbWl0KVxuICAgICAgICAgICAgdmVsb2NpdHkgPSBzcGVlZExpbWl0O1xuICAgICAgICB0aGlzLnNldFZlbG9jaXR5KHZlbG9jaXR5KTtcbiAgICAgICAgdmFyIGRlbHRhTGltaXQgPSBzcGVlZExpbWl0ICogMTY7XG4gICAgICAgIGlmIChkZWx0YSA+IGRlbHRhTGltaXQpXG4gICAgICAgICAgICBkZWx0YSA9IGRlbHRhTGltaXQ7XG4gICAgICAgIGVsc2UgaWYgKGRlbHRhIDwgLWRlbHRhTGltaXQpXG4gICAgICAgICAgICBkZWx0YSA9IC1kZWx0YUxpbWl0O1xuICAgIH1cbiAgICB0aGlzLnNldFBvc2l0aW9uKHRoaXMuZ2V0UG9zaXRpb24oKSArIGRlbHRhKTtcbiAgICB0aGlzLl9kaXNwbGFjZW1lbnQgKz0gZGVsdGE7XG4gICAgaWYgKHRoaXMuX3NwcmluZ1N0YXRlID09PSBTcHJpbmdTdGF0ZXMuTk9ORSlcbiAgICAgICAgX25vcm1hbGl6ZVN0YXRlLmNhbGwodGhpcyk7XG59XG5mdW5jdGlvbiBfaGFuZGxlRW5kKGV2ZW50KSB7XG4gICAgdGhpcy5fdG91Y2hDb3VudCA9IGV2ZW50LmNvdW50IHx8IDA7XG4gICAgaWYgKCF0aGlzLl90b3VjaENvdW50KSB7XG4gICAgICAgIF9kZXRhY2hBZ2VudHMuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuX29uRWRnZSAhPT0gRWRnZVN0YXRlcy5OT05FKVxuICAgICAgICAgICAgX3NldFNwcmluZy5jYWxsKHRoaXMsIHRoaXMuX2VkZ2VTcHJpbmdQb3NpdGlvbiwgU3ByaW5nU3RhdGVzLkVER0UpO1xuICAgICAgICBfYXR0YWNoQWdlbnRzLmNhbGwodGhpcyk7XG4gICAgICAgIHZhciB2ZWxvY2l0eSA9IC1ldmVudC52ZWxvY2l0eTtcbiAgICAgICAgdmFyIHNwZWVkTGltaXQgPSB0aGlzLm9wdGlvbnMuc3BlZWRMaW1pdDtcbiAgICAgICAgaWYgKGV2ZW50LnNsaXApXG4gICAgICAgICAgICBzcGVlZExpbWl0ICo9IHRoaXMub3B0aW9ucy5lZGdlR3JpcDtcbiAgICAgICAgaWYgKHZlbG9jaXR5IDwgLXNwZWVkTGltaXQpXG4gICAgICAgICAgICB2ZWxvY2l0eSA9IC1zcGVlZExpbWl0O1xuICAgICAgICBlbHNlIGlmICh2ZWxvY2l0eSA+IHNwZWVkTGltaXQpXG4gICAgICAgICAgICB2ZWxvY2l0eSA9IHNwZWVkTGltaXQ7XG4gICAgICAgIHRoaXMuc2V0VmVsb2NpdHkodmVsb2NpdHkpO1xuICAgICAgICB0aGlzLl90b3VjaFZlbG9jaXR5ID0gMDtcbiAgICAgICAgdGhpcy5fbmVlZHNQYWdpbmF0aW9uQ2hlY2sgPSB0cnVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9iaW5kRXZlbnRzKCkge1xuICAgIHRoaXMuX2V2ZW50SW5wdXQuYmluZFRoaXModGhpcyk7XG4gICAgdGhpcy5fZXZlbnRJbnB1dC5vbignc3RhcnQnLCBfaGFuZGxlU3RhcnQpO1xuICAgIHRoaXMuX2V2ZW50SW5wdXQub24oJ3VwZGF0ZScsIF9oYW5kbGVNb3ZlKTtcbiAgICB0aGlzLl9ldmVudElucHV0Lm9uKCdlbmQnLCBfaGFuZGxlRW5kKTtcbiAgICB0aGlzLl9ldmVudElucHV0Lm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX25vZGUuXy5jYWxjdWxhdGVTaXplKCk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9zY3JvbGxlci5vbignb25FZGdlJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fZWRnZVNwcmluZ1Bvc2l0aW9uID0gZGF0YS5wb3NpdGlvbjtcbiAgICAgICAgX2hhbmRsZUVkZ2UuY2FsbCh0aGlzLCB0aGlzLl9zY3JvbGxlci5vbkVkZ2UoKSk7XG4gICAgICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ29uRWRnZScpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fc2Nyb2xsZXIub24oJ29mZkVkZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3luYy5zZXRPcHRpb25zKHsgc2NhbGU6IHRoaXMub3B0aW9ucy5zeW5jU2NhbGUgfSk7XG4gICAgICAgIHRoaXMuX29uRWRnZSA9IHRoaXMuX3Njcm9sbGVyLm9uRWRnZSgpO1xuICAgICAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdvZmZFZGdlJyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9wYXJ0aWNsZS5vbigndXBkYXRlJywgZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIGlmICh0aGlzLl9zcHJpbmdTdGF0ZSA9PT0gU3ByaW5nU3RhdGVzLk5PTkUpXG4gICAgICAgICAgICBfbm9ybWFsaXplU3RhdGUuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5fZGlzcGxhY2VtZW50ID0gcGFydGljbGUucG9zaXRpb24ueCAtIHRoaXMuX3RvdGFsU2hpZnQ7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9wYXJ0aWNsZS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5wYWdpbmF0ZWQgfHwgdGhpcy5vcHRpb25zLnBhZ2luYXRlZCAmJiB0aGlzLl9zcHJpbmdTdGF0ZSAhPT0gU3ByaW5nU3RhdGVzLk5PTkUpXG4gICAgICAgICAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdzZXR0bGUnKTtcbiAgICB9LmJpbmQodGhpcykpO1xufVxuZnVuY3Rpb24gX2F0dGFjaEFnZW50cygpIHtcbiAgICBpZiAodGhpcy5fc3ByaW5nU3RhdGUpXG4gICAgICAgIHRoaXMuX3BoeXNpY3NFbmdpbmUuYXR0YWNoKFt0aGlzLnNwcmluZ10sIHRoaXMuX3BhcnRpY2xlKTtcbiAgICBlbHNlXG4gICAgICAgIHRoaXMuX3BoeXNpY3NFbmdpbmUuYXR0YWNoKFtcbiAgICAgICAgICAgIHRoaXMuZHJhZyxcbiAgICAgICAgICAgIHRoaXMuZnJpY3Rpb25cbiAgICAgICAgXSwgdGhpcy5fcGFydGljbGUpO1xufVxuZnVuY3Rpb24gX2RldGFjaEFnZW50cygpIHtcbiAgICB0aGlzLl9zcHJpbmdTdGF0ZSA9IFNwcmluZ1N0YXRlcy5OT05FO1xuICAgIHRoaXMuX3BoeXNpY3NFbmdpbmUuZGV0YWNoQWxsKCk7XG59XG5mdW5jdGlvbiBfbm9kZVNpemVGb3JEaXJlY3Rpb24obm9kZSkge1xuICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuICAgIHZhciBub2RlU2l6ZSA9IG5vZGUuZ2V0U2l6ZSgpO1xuICAgIHJldHVybiAhbm9kZVNpemUgPyB0aGlzLl9zY3JvbGxlci5nZXRTaXplKClbZGlyZWN0aW9uXSA6IG5vZGVTaXplW2RpcmVjdGlvbl07XG59XG5mdW5jdGlvbiBfaGFuZGxlRWRnZShlZGdlKSB7XG4gICAgdGhpcy5zeW5jLnNldE9wdGlvbnMoeyBzY2FsZTogdGhpcy5vcHRpb25zLmVkZ2VHcmlwIH0pO1xuICAgIHRoaXMuX29uRWRnZSA9IGVkZ2U7XG4gICAgaWYgKCF0aGlzLl90b3VjaENvdW50ICYmIHRoaXMuX3NwcmluZ1N0YXRlICE9PSBTcHJpbmdTdGF0ZXMuRURHRSkge1xuICAgICAgICBfc2V0U3ByaW5nLmNhbGwodGhpcywgdGhpcy5fZWRnZVNwcmluZ1Bvc2l0aW9uLCBTcHJpbmdTdGF0ZXMuRURHRSk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9zcHJpbmdTdGF0ZSAmJiBNYXRoLmFicyh0aGlzLmdldFZlbG9jaXR5KCkpIDwgMC4wMDEpIHtcbiAgICAgICAgX2RldGFjaEFnZW50cy5jYWxsKHRoaXMpO1xuICAgICAgICBfYXR0YWNoQWdlbnRzLmNhbGwodGhpcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gX2hhbmRsZVBhZ2luYXRpb24oKSB7XG4gICAgaWYgKHRoaXMuX3RvdWNoQ291bnQpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAodGhpcy5fc3ByaW5nU3RhdGUgPT09IFNwcmluZ1N0YXRlcy5FREdFKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIHZlbG9jaXR5ID0gdGhpcy5nZXRWZWxvY2l0eSgpO1xuICAgIGlmIChNYXRoLmFicyh2ZWxvY2l0eSkgPj0gdGhpcy5vcHRpb25zLnBhZ2VTdG9wU3BlZWQpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgcG9zaXRpb24gPSB0aGlzLmdldFBvc2l0aW9uKCk7XG4gICAgdmFyIHZlbG9jaXR5U3dpdGNoID0gTWF0aC5hYnModmVsb2NpdHkpID4gdGhpcy5vcHRpb25zLnBhZ2VTd2l0Y2hTcGVlZDtcbiAgICB2YXIgbm9kZVNpemUgPSBfbm9kZVNpemVGb3JEaXJlY3Rpb24uY2FsbCh0aGlzLCB0aGlzLl9ub2RlKTtcbiAgICB2YXIgcG9zaXRpb25OZXh0ID0gcG9zaXRpb24gPiAwLjUgKiBub2RlU2l6ZTtcbiAgICB2YXIgcG9zaXRpb25QcmV2ID0gcG9zaXRpb24gPCAwLjUgKiBub2RlU2l6ZTtcbiAgICB2YXIgdmVsb2NpdHlOZXh0ID0gdmVsb2NpdHkgPiAwO1xuICAgIHZhciB2ZWxvY2l0eVByZXYgPSB2ZWxvY2l0eSA8IDA7XG4gICAgdGhpcy5fbmVlZHNQYWdpbmF0aW9uQ2hlY2sgPSBmYWxzZTtcbiAgICBpZiAocG9zaXRpb25OZXh0ICYmICF2ZWxvY2l0eVN3aXRjaCB8fCB2ZWxvY2l0eVN3aXRjaCAmJiB2ZWxvY2l0eU5leHQpIHtcbiAgICAgICAgdGhpcy5nb1RvTmV4dFBhZ2UoKTtcbiAgICB9IGVsc2UgaWYgKHZlbG9jaXR5U3dpdGNoICYmIHZlbG9jaXR5UHJldikge1xuICAgICAgICB0aGlzLmdvVG9QcmV2aW91c1BhZ2UoKTtcbiAgICB9IGVsc2VcbiAgICAgICAgX3NldFNwcmluZy5jYWxsKHRoaXMsIDAsIFNwcmluZ1N0YXRlcy5QQUdFKTtcbn1cbmZ1bmN0aW9uIF9zZXRTcHJpbmcocG9zaXRpb24sIHNwcmluZ1N0YXRlKSB7XG4gICAgdmFyIHNwcmluZ09wdGlvbnM7XG4gICAgaWYgKHNwcmluZ1N0YXRlID09PSBTcHJpbmdTdGF0ZXMuRURHRSkge1xuICAgICAgICB0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgc3ByaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFuY2hvcjogW1xuICAgICAgICAgICAgICAgIHRoaXMuX2VkZ2VTcHJpbmdQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBwZXJpb2Q6IHRoaXMub3B0aW9ucy5lZGdlUGVyaW9kLFxuICAgICAgICAgICAgZGFtcGluZ1JhdGlvOiB0aGlzLm9wdGlvbnMuZWRnZURhbXBcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHNwcmluZ1N0YXRlID09PSBTcHJpbmdTdGF0ZXMuUEFHRSkge1xuICAgICAgICB0aGlzLl9wYWdlU3ByaW5nUG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgc3ByaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFuY2hvcjogW1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VTcHJpbmdQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBwZXJpb2Q6IHRoaXMub3B0aW9ucy5wYWdlUGVyaW9kLFxuICAgICAgICAgICAgZGFtcGluZ1JhdGlvOiB0aGlzLm9wdGlvbnMucGFnZURhbXBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhpcy5zcHJpbmcuc2V0T3B0aW9ucyhzcHJpbmdPcHRpb25zKTtcbiAgICBpZiAoc3ByaW5nU3RhdGUgJiYgIXRoaXMuX3NwcmluZ1N0YXRlKSB7XG4gICAgICAgIF9kZXRhY2hBZ2VudHMuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5fc3ByaW5nU3RhdGUgPSBzcHJpbmdTdGF0ZTtcbiAgICAgICAgX2F0dGFjaEFnZW50cy5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLl9zcHJpbmdTdGF0ZSA9IHNwcmluZ1N0YXRlO1xufVxuZnVuY3Rpb24gX25vcm1hbGl6ZVN0YXRlKCkge1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcbiAgICBwb3NpdGlvbiArPSAocG9zaXRpb24gPCAwID8gLTAuNSA6IDAuNSkgPj4gMDtcbiAgICB2YXIgbm9kZVNpemUgPSBfbm9kZVNpemVGb3JEaXJlY3Rpb24uY2FsbCh0aGlzLCB0aGlzLl9ub2RlKTtcbiAgICB2YXIgbmV4dE5vZGUgPSB0aGlzLl9ub2RlLmdldE5leHQoKTtcbiAgICB3aGlsZSAob2Zmc2V0ICsgcG9zaXRpb24gPj0gbm9kZVNpemUgJiYgbmV4dE5vZGUpIHtcbiAgICAgICAgb2Zmc2V0IC09IG5vZGVTaXplO1xuICAgICAgICB0aGlzLl9zY3JvbGxlci5zZXF1ZW5jZUZyb20obmV4dE5vZGUpO1xuICAgICAgICB0aGlzLl9ub2RlID0gbmV4dE5vZGU7XG4gICAgICAgIG5leHROb2RlID0gdGhpcy5fbm9kZS5nZXROZXh0KCk7XG4gICAgICAgIG5vZGVTaXplID0gX25vZGVTaXplRm9yRGlyZWN0aW9uLmNhbGwodGhpcywgdGhpcy5fbm9kZSk7XG4gICAgfVxuICAgIHZhciBwcmV2aW91c05vZGUgPSB0aGlzLl9ub2RlLmdldFByZXZpb3VzKCk7XG4gICAgdmFyIHByZXZpb3VzTm9kZVNpemU7XG4gICAgd2hpbGUgKG9mZnNldCArIHBvc2l0aW9uIDw9IDAgJiYgcHJldmlvdXNOb2RlKSB7XG4gICAgICAgIHByZXZpb3VzTm9kZVNpemUgPSBfbm9kZVNpemVGb3JEaXJlY3Rpb24uY2FsbCh0aGlzLCBwcmV2aW91c05vZGUpO1xuICAgICAgICB0aGlzLl9zY3JvbGxlci5zZXF1ZW5jZUZyb20ocHJldmlvdXNOb2RlKTtcbiAgICAgICAgdGhpcy5fbm9kZSA9IHByZXZpb3VzTm9kZTtcbiAgICAgICAgb2Zmc2V0ICs9IHByZXZpb3VzTm9kZVNpemU7XG4gICAgICAgIHByZXZpb3VzTm9kZSA9IHRoaXMuX25vZGUuZ2V0UHJldmlvdXMoKTtcbiAgICB9XG4gICAgaWYgKG9mZnNldClcbiAgICAgICAgX3NoaWZ0T3JpZ2luLmNhbGwodGhpcywgb2Zmc2V0KTtcbiAgICBpZiAodGhpcy5fbm9kZSkge1xuICAgICAgICBpZiAodGhpcy5fbm9kZS5pbmRleCAhPT0gdGhpcy5fY2FjaGVkSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFBvc2l0aW9uKCkgPCAwLjUgKiBub2RlU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZEluZGV4ID0gdGhpcy5fbm9kZS5pbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdwYWdlQ2hhbmdlJywge1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IC0xLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5fY2FjaGVkSW5kZXhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFBvc2l0aW9uKCkgPiAwLjUgKiBub2RlU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZEluZGV4ID0gdGhpcy5fbm9kZS5pbmRleCArIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgncGFnZUNoYW5nZScsIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiAxLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5fY2FjaGVkSW5kZXhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIF9zaGlmdE9yaWdpbihhbW91bnQpIHtcbiAgICB0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb24gKz0gYW1vdW50O1xuICAgIHRoaXMuX3BhZ2VTcHJpbmdQb3NpdGlvbiArPSBhbW91bnQ7XG4gICAgdGhpcy5zZXRQb3NpdGlvbih0aGlzLmdldFBvc2l0aW9uKCkgKyBhbW91bnQpO1xuICAgIHRoaXMuX3RvdGFsU2hpZnQgKz0gYW1vdW50O1xuICAgIGlmICh0aGlzLl9zcHJpbmdTdGF0ZSA9PT0gU3ByaW5nU3RhdGVzLkVER0UpIHtcbiAgICAgICAgdGhpcy5zcHJpbmcuc2V0T3B0aW9ucyh7XG4gICAgICAgICAgICBhbmNob3I6IFtcbiAgICAgICAgICAgICAgICB0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fc3ByaW5nU3RhdGUgPT09IFNwcmluZ1N0YXRlcy5QQUdFKSB7XG4gICAgICAgIHRoaXMuc3ByaW5nLnNldE9wdGlvbnMoe1xuICAgICAgICAgICAgYW5jaG9yOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFnZVNwcmluZ1Bvc2l0aW9uLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgXVxuICAgICAgICB9KTtcbiAgICB9XG59XG5TY3JvbGx2aWV3LnByb3RvdHlwZS5nZXRDdXJyZW50SW5kZXggPSBmdW5jdGlvbiBnZXRDdXJyZW50SW5kZXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25vZGUuaW5kZXg7XG59O1xuU2Nyb2xsdmlldy5wcm90b3R5cGUuZ29Ub1ByZXZpb3VzUGFnZSA9IGZ1bmN0aW9uIGdvVG9QcmV2aW91c1BhZ2UoKSB7XG4gICAgaWYgKCF0aGlzLl9ub2RlIHx8IHRoaXMuX29uRWRnZSA9PT0gRWRnZVN0YXRlcy5UT1ApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmICh0aGlzLmdldFBvc2l0aW9uKCkgPiAxICYmIHRoaXMuX3NwcmluZ1N0YXRlID09PSBTcHJpbmdTdGF0ZXMuTk9ORSkge1xuICAgICAgICBfc2V0U3ByaW5nLmNhbGwodGhpcywgMCwgU3ByaW5nU3RhdGVzLlBBR0UpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbm9kZTtcbiAgICB9XG4gICAgdmFyIHByZXZpb3VzTm9kZSA9IHRoaXMuX25vZGUuZ2V0UHJldmlvdXMoKTtcbiAgICBpZiAocHJldmlvdXNOb2RlKSB7XG4gICAgICAgIHZhciBwcmV2aW91c05vZGVTaXplID0gX25vZGVTaXplRm9yRGlyZWN0aW9uLmNhbGwodGhpcywgcHJldmlvdXNOb2RlKTtcbiAgICAgICAgdGhpcy5fc2Nyb2xsZXIuc2VxdWVuY2VGcm9tKHByZXZpb3VzTm9kZSk7XG4gICAgICAgIHRoaXMuX25vZGUgPSBwcmV2aW91c05vZGU7XG4gICAgICAgIF9zaGlmdE9yaWdpbi5jYWxsKHRoaXMsIHByZXZpb3VzTm9kZVNpemUpO1xuICAgICAgICBfc2V0U3ByaW5nLmNhbGwodGhpcywgMCwgU3ByaW5nU3RhdGVzLlBBR0UpO1xuICAgIH1cbiAgICByZXR1cm4gcHJldmlvdXNOb2RlO1xufTtcblNjcm9sbHZpZXcucHJvdG90eXBlLmdvVG9OZXh0UGFnZSA9IGZ1bmN0aW9uIGdvVG9OZXh0UGFnZSgpIHtcbiAgICBpZiAoIXRoaXMuX25vZGUgfHwgdGhpcy5fb25FZGdlID09PSBFZGdlU3RhdGVzLkJPVFRPTSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgdmFyIG5leHROb2RlID0gdGhpcy5fbm9kZS5nZXROZXh0KCk7XG4gICAgaWYgKG5leHROb2RlKSB7XG4gICAgICAgIHZhciBjdXJyZW50Tm9kZVNpemUgPSBfbm9kZVNpemVGb3JEaXJlY3Rpb24uY2FsbCh0aGlzLCB0aGlzLl9ub2RlKTtcbiAgICAgICAgdGhpcy5fc2Nyb2xsZXIuc2VxdWVuY2VGcm9tKG5leHROb2RlKTtcbiAgICAgICAgdGhpcy5fbm9kZSA9IG5leHROb2RlO1xuICAgICAgICBfc2hpZnRPcmlnaW4uY2FsbCh0aGlzLCAtY3VycmVudE5vZGVTaXplKTtcbiAgICAgICAgX3NldFNwcmluZy5jYWxsKHRoaXMsIDAsIFNwcmluZ1N0YXRlcy5QQUdFKTtcbiAgICB9XG4gICAgcmV0dXJuIG5leHROb2RlO1xufTtcblNjcm9sbHZpZXcucHJvdG90eXBlLmdvVG9QYWdlID0gZnVuY3Rpb24gZ29Ub1BhZ2UoaW5kZXgpIHtcbiAgICB2YXIgY3VycmVudEluZGV4ID0gdGhpcy5nZXRDdXJyZW50SW5kZXgoKTtcbiAgICB2YXIgaTtcbiAgICBpZiAoY3VycmVudEluZGV4ID4gaW5kZXgpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGN1cnJlbnRJbmRleCAtIGluZGV4OyBpKyspXG4gICAgICAgICAgICB0aGlzLmdvVG9QcmV2aW91c1BhZ2UoKTtcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRJbmRleCA8IGluZGV4KSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBpbmRleCAtIGN1cnJlbnRJbmRleDsgaSsrKVxuICAgICAgICAgICAgdGhpcy5nb1RvTmV4dFBhZ2UoKTtcbiAgICB9XG59O1xuU2Nyb2xsdmlldy5wcm90b3R5cGUub3V0cHV0RnJvbSA9IGZ1bmN0aW9uIG91dHB1dEZyb20oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Njcm9sbGVyLm91dHB1dEZyb20uYXBwbHkodGhpcy5fc2Nyb2xsZXIsIGFyZ3VtZW50cyk7XG59O1xuU2Nyb2xsdmlldy5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiBnZXRQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFydGljbGUuZ2V0UG9zaXRpb24xRCgpO1xufTtcblNjcm9sbHZpZXcucHJvdG90eXBlLmdldEFic29sdXRlUG9zaXRpb24gPSBmdW5jdGlvbiBnZXRBYnNvbHV0ZVBvc2l0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zY3JvbGxlci5nZXRDdW11bGF0aXZlU2l6ZSh0aGlzLmdldEN1cnJlbnRJbmRleCgpKVt0aGlzLm9wdGlvbnMuZGlyZWN0aW9uXSArIHRoaXMuZ2V0UG9zaXRpb24oKTtcbn07XG5TY3JvbGx2aWV3LnByb3RvdHlwZS5nZXRPZmZzZXQgPSBTY3JvbGx2aWV3LnByb3RvdHlwZS5nZXRQb3NpdGlvbjtcblNjcm9sbHZpZXcucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24gc2V0UG9zaXRpb24oeCkge1xuICAgIHRoaXMuX3BhcnRpY2xlLnNldFBvc2l0aW9uMUQoeCk7XG59O1xuU2Nyb2xsdmlldy5wcm90b3R5cGUuc2V0T2Zmc2V0ID0gU2Nyb2xsdmlldy5wcm90b3R5cGUuc2V0UG9zaXRpb247XG5TY3JvbGx2aWV3LnByb3RvdHlwZS5nZXRWZWxvY2l0eSA9IGZ1bmN0aW9uIGdldFZlbG9jaXR5KCkge1xuICAgIHJldHVybiB0aGlzLl90b3VjaENvdW50ID8gdGhpcy5fdG91Y2hWZWxvY2l0eSA6IHRoaXMuX3BhcnRpY2xlLmdldFZlbG9jaXR5MUQoKTtcbn07XG5TY3JvbGx2aWV3LnByb3RvdHlwZS5zZXRWZWxvY2l0eSA9IGZ1bmN0aW9uIHNldFZlbG9jaXR5KHYpIHtcbiAgICB0aGlzLl9wYXJ0aWNsZS5zZXRWZWxvY2l0eTFEKHYpO1xufTtcblNjcm9sbHZpZXcucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5kaXJlY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob3B0aW9ucy5kaXJlY3Rpb24gPT09ICd4JylcbiAgICAgICAgICAgIG9wdGlvbnMuZGlyZWN0aW9uID0gVXRpbGl0eS5EaXJlY3Rpb24uWDtcbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5kaXJlY3Rpb24gPT09ICd5JylcbiAgICAgICAgICAgIG9wdGlvbnMuZGlyZWN0aW9uID0gVXRpbGl0eS5EaXJlY3Rpb24uWTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZ3JvdXBTY3JvbGwgIT09IHRoaXMub3B0aW9ucy5ncm91cFNjcm9sbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5ncm91cFNjcm9sbClcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlKHRoaXMuX3Njcm9sbGVyKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSh0aGlzLl9zY3JvbGxlcik7XG4gICAgfVxuICAgIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5fc2Nyb2xsZXIuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICBpZiAob3B0aW9ucy5kcmFnICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMuZHJhZy5zZXRPcHRpb25zKHsgc3RyZW5ndGg6IHRoaXMub3B0aW9ucy5kcmFnIH0pO1xuICAgIGlmIChvcHRpb25zLmZyaWN0aW9uICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMuZnJpY3Rpb24uc2V0T3B0aW9ucyh7IHN0cmVuZ3RoOiB0aGlzLm9wdGlvbnMuZnJpY3Rpb24gfSk7XG4gICAgaWYgKG9wdGlvbnMuZWRnZVBlcmlvZCAhPT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMuZWRnZURhbXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnNwcmluZy5zZXRPcHRpb25zKHtcbiAgICAgICAgICAgIHBlcmlvZDogdGhpcy5vcHRpb25zLmVkZ2VQZXJpb2QsXG4gICAgICAgICAgICBkYW1waW5nUmF0aW86IHRoaXMub3B0aW9ucy5lZGdlRGFtcFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucmFpbHMgfHwgb3B0aW9ucy5kaXJlY3Rpb24gIT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnN5bmNTY2FsZSAhPT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgdGhpcy5zeW5jLnNldE9wdGlvbnMoe1xuICAgICAgICAgICAgcmFpbHM6IHRoaXMub3B0aW9ucy5yYWlscyxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gVXRpbGl0eS5EaXJlY3Rpb24uWCA/IEdlbmVyaWNTeW5jLkRJUkVDVElPTl9YIDogR2VuZXJpY1N5bmMuRElSRUNUSU9OX1ksXG4gICAgICAgICAgICBzY2FsZTogdGhpcy5vcHRpb25zLnN5bmNTY2FsZSxcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiB0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHRcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblNjcm9sbHZpZXcucHJvdG90eXBlLnNlcXVlbmNlRnJvbSA9IGZ1bmN0aW9uIHNlcXVlbmNlRnJvbShub2RlKSB7XG4gICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgbm9kZSA9IG5ldyBWaWV3U2VxdWVuY2Uoe1xuICAgICAgICAgICAgYXJyYXk6IG5vZGUsXG4gICAgICAgICAgICB0cmFja1NpemU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgdGhpcy5fbm9kZSA9IG5vZGU7XG4gICAgcmV0dXJuIHRoaXMuX3Njcm9sbGVyLnNlcXVlbmNlRnJvbShub2RlKTtcbn07XG5TY3JvbGx2aWV3LnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2Nyb2xsZXIuZ2V0U2l6ZS5hcHBseSh0aGlzLl9zY3JvbGxlciwgYXJndW1lbnRzKTtcbn07XG5TY3JvbGx2aWV3LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5wYWdpbmF0ZWQgJiYgdGhpcy5fbmVlZHNQYWdpbmF0aW9uQ2hlY2spXG4gICAgICAgIF9oYW5kbGVQYWdpbmF0aW9uLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMuX3Njcm9sbGVyLnJlbmRlcigpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gU2Nyb2xsdmlldzsiLCJ2YXIgT3B0aW9uc01hbmFnZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9PcHRpb25zTWFuYWdlcicpO1xudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1RyYW5zZm9ybScpO1xudmFyIFZpZXdTZXF1ZW5jZSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1ZpZXdTZXF1ZW5jZScpO1xudmFyIFV0aWxpdHkgPSByZXF1aXJlKCdmYW1vdXMvdXRpbGl0aWVzL1V0aWxpdHknKTtcbmZ1bmN0aW9uIFNlcXVlbnRpYWxMYXlvdXQob3B0aW9ucykge1xuICAgIHRoaXMuX2l0ZW1zID0gbnVsbDtcbiAgICB0aGlzLl9zaXplID0gbnVsbDtcbiAgICB0aGlzLl9vdXRwdXRGdW5jdGlvbiA9IFNlcXVlbnRpYWxMYXlvdXQuREVGQVVMVF9PVVRQVVRfRlVOQ1RJT047XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLkRFRkFVTFRfT1BUSU9OUyk7XG4gICAgdGhpcy5vcHRpb25zTWFuYWdlciA9IG5ldyBPcHRpb25zTWFuYWdlcih0aGlzLm9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zKVxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XG59XG5TZXF1ZW50aWFsTGF5b3V0LkRFRkFVTFRfT1BUSU9OUyA9IHsgZGlyZWN0aW9uOiBVdGlsaXR5LkRpcmVjdGlvbi5ZIH07XG5TZXF1ZW50aWFsTGF5b3V0LkRFRkFVTFRfT1VUUFVUX0ZVTkNUSU9OID0gZnVuY3Rpb24gREVGQVVMVF9PVVRQVVRfRlVOQ1RJT04oaW5wdXQsIG9mZnNldCwgaW5kZXgpIHtcbiAgICB2YXIgdHJhbnNmb3JtID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gVXRpbGl0eS5EaXJlY3Rpb24uWCA/IFRyYW5zZm9ybS50cmFuc2xhdGUob2Zmc2V0LCAwKSA6IFRyYW5zZm9ybS50cmFuc2xhdGUoMCwgb2Zmc2V0KTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgICAgICAgdGFyZ2V0OiBpbnB1dC5yZW5kZXIoKVxuICAgIH07XG59O1xuU2VxdWVudGlhbExheW91dC5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uIGdldFNpemUoKSB7XG4gICAgaWYgKCF0aGlzLl9zaXplKVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIHJldHVybiB0aGlzLl9zaXplO1xufTtcblNlcXVlbnRpYWxMYXlvdXQucHJvdG90eXBlLnNlcXVlbmNlRnJvbSA9IGZ1bmN0aW9uIHNlcXVlbmNlRnJvbShpdGVtcykge1xuICAgIGlmIChpdGVtcyBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICBpdGVtcyA9IG5ldyBWaWV3U2VxdWVuY2UoaXRlbXMpO1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuU2VxdWVudGlhbExheW91dC5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucy5hcHBseSh0aGlzLm9wdGlvbnNNYW5hZ2VyLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiB0aGlzO1xufTtcblNlcXVlbnRpYWxMYXlvdXQucHJvdG90eXBlLnNldE91dHB1dEZ1bmN0aW9uID0gZnVuY3Rpb24gc2V0T3V0cHV0RnVuY3Rpb24ob3V0cHV0RnVuY3Rpb24pIHtcbiAgICB0aGlzLl9vdXRwdXRGdW5jdGlvbiA9IG91dHB1dEZ1bmN0aW9uO1xuICAgIHJldHVybiB0aGlzO1xufTtcblNlcXVlbnRpYWxMYXlvdXQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgbGVuZ3RoID0gMDtcbiAgICB2YXIgc2Vjb25kYXJ5RGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbiBeIDE7XG4gICAgdmFyIGN1cnJlbnROb2RlID0gdGhpcy5faXRlbXM7XG4gICAgdmFyIGl0ZW0gPSBudWxsO1xuICAgIHZhciBpdGVtU2l6ZSA9IFtdO1xuICAgIHZhciBvdXRwdXQgPSB7fTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIGkgPSAwO1xuICAgIHRoaXMuX3NpemUgPSBbXG4gICAgICAgIDAsXG4gICAgICAgIDBcbiAgICBdO1xuICAgIHdoaWxlIChjdXJyZW50Tm9kZSkge1xuICAgICAgICBpdGVtID0gY3VycmVudE5vZGUuZ2V0KCk7XG4gICAgICAgIGlmICghaXRlbSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAoaXRlbS5nZXRTaXplKVxuICAgICAgICAgICAgaXRlbVNpemUgPSBpdGVtLmdldFNpemUoKTtcbiAgICAgICAgb3V0cHV0ID0gdGhpcy5fb3V0cHV0RnVuY3Rpb24uY2FsbCh0aGlzLCBpdGVtLCBsZW5ndGgsIGkrKyk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG91dHB1dCk7XG4gICAgICAgIGlmIChpdGVtU2l6ZSkge1xuICAgICAgICAgICAgaWYgKGl0ZW1TaXplW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dKVxuICAgICAgICAgICAgICAgIGxlbmd0aCArPSBpdGVtU2l6ZVt0aGlzLm9wdGlvbnMuZGlyZWN0aW9uXTtcbiAgICAgICAgICAgIGlmIChpdGVtU2l6ZVtzZWNvbmRhcnlEaXJlY3Rpb25dID4gdGhpcy5fc2l6ZVtzZWNvbmRhcnlEaXJlY3Rpb25dKVxuICAgICAgICAgICAgICAgIHRoaXMuX3NpemVbc2Vjb25kYXJ5RGlyZWN0aW9uXSA9IGl0ZW1TaXplW3NlY29uZGFyeURpcmVjdGlvbl07XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5nZXROZXh0KCk7XG4gICAgfVxuICAgIHRoaXMuX3NpemVbdGhpcy5vcHRpb25zLmRpcmVjdGlvbl0gPSBsZW5ndGg7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFNlcXVlbnRpYWxMYXlvdXQ7IiwidmFyIFNjZW5lID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvU2NlbmUnKTtcbnZhciBTdXJmYWNlID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvU3VyZmFjZScpO1xudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1RyYW5zZm9ybScpO1xudmFyIFZpZXcgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9WaWV3Jyk7XG5mdW5jdGlvbiBOYXZpZ2F0aW9uQmFyKG9wdGlvbnMpIHtcbiAgICBWaWV3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy50aXRsZSA9IG5ldyBTdXJmYWNlKHtcbiAgICAgICAgY2xhc3NlczogdGhpcy5vcHRpb25zLmNsYXNzZXMsXG4gICAgICAgIGNvbnRlbnQ6IHRoaXMub3B0aW9ucy5jb250ZW50XG4gICAgfSk7XG4gICAgdGhpcy5iYWNrID0gbmV3IFN1cmZhY2Uoe1xuICAgICAgICBzaXplOiBbXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc2l6ZVsxXSxcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zaXplWzFdXG4gICAgICAgIF0sXG4gICAgICAgIGNsYXNzZXM6IHRoaXMub3B0aW9ucy5jbGFzc2VzLFxuICAgICAgICBjb250ZW50OiB0aGlzLm9wdGlvbnMuYmFja0NvbnRlbnRcbiAgICB9KTtcbiAgICB0aGlzLmJhY2sub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdiYWNrJywge30pO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5tb3JlID0gbmV3IFN1cmZhY2Uoe1xuICAgICAgICBzaXplOiBbXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc2l6ZVsxXSxcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zaXplWzFdXG4gICAgICAgIF0sXG4gICAgICAgIGNsYXNzZXM6IHRoaXMub3B0aW9ucy5jbGFzc2VzLFxuICAgICAgICBjb250ZW50OiB0aGlzLm9wdGlvbnMubW9yZUNvbnRlbnRcbiAgICB9KTtcbiAgICB0aGlzLm1vcmUub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9ldmVudE91dHB1dC5lbWl0KCdtb3JlJywge30pO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5sYXlvdXQgPSBuZXcgU2NlbmUoe1xuICAgICAgICBpZDogJ21hc3RlcicsXG4gICAgICAgIHNpemU6IHRoaXMub3B0aW9ucy5zaXplLFxuICAgICAgICB0YXJnZXQ6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFRyYW5zZm9ybS5pbkZyb250LFxuICAgICAgICAgICAgICAgIG9yaWdpbjogW1xuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAwLjVcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5iYWNrXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9yaWdpbjogW1xuICAgICAgICAgICAgICAgICAgICAwLjUsXG4gICAgICAgICAgICAgICAgICAgIDAuNVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLnRpdGxlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogVHJhbnNmb3JtLmluRnJvbnQsXG4gICAgICAgICAgICAgICAgb3JpZ2luOiBbXG4gICAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICAgIDAuNVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLm1vcmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH0pO1xuICAgIHRoaXMuX2FkZCh0aGlzLmxheW91dCk7XG4gICAgdGhpcy5fb3B0aW9uc01hbmFnZXIub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIga2V5ID0gZXZlbnQuaWQ7XG4gICAgICAgIHZhciBkYXRhID0gZXZlbnQudmFsdWU7XG4gICAgICAgIGlmIChrZXkgPT09ICdzaXplJykge1xuICAgICAgICAgICAgdGhpcy5sYXlvdXQuaWQubWFzdGVyLnNldFNpemUoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnRpdGxlLnNldFNpemUoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLmJhY2suc2V0U2l6ZShbXG4gICAgICAgICAgICAgICAgZGF0YVsxXSxcbiAgICAgICAgICAgICAgICBkYXRhWzFdXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIHRoaXMubW9yZS5zZXRTaXplKFtcbiAgICAgICAgICAgICAgICBkYXRhWzFdLFxuICAgICAgICAgICAgICAgIGRhdGFbMV1cbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2JhY2tDbGFzc2VzJykge1xuICAgICAgICAgICAgdGhpcy5iYWNrLnNldE9wdGlvbnMoeyBjbGFzc2VzOiB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5jb25jYXQodGhpcy5vcHRpb25zLmJhY2tDbGFzc2VzKSB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdiYWNrQ29udGVudCcpIHtcbiAgICAgICAgICAgIHRoaXMuYmFjay5zZXRDb250ZW50KHRoaXMub3B0aW9ucy5iYWNrQ29udGVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnY2xhc3NlcycpIHtcbiAgICAgICAgICAgIHRoaXMudGl0bGUuc2V0T3B0aW9ucyh7IGNsYXNzZXM6IHRoaXMub3B0aW9ucy5jbGFzc2VzIH0pO1xuICAgICAgICAgICAgdGhpcy5iYWNrLnNldE9wdGlvbnMoeyBjbGFzc2VzOiB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5jb25jYXQodGhpcy5vcHRpb25zLmJhY2tDbGFzc2VzKSB9KTtcbiAgICAgICAgICAgIHRoaXMubW9yZS5zZXRPcHRpb25zKHsgY2xhc3NlczogdGhpcy5vcHRpb25zLmNsYXNzZXMuY29uY2F0KHRoaXMub3B0aW9ucy5tb3JlQ2xhc3NlcykgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnY29udGVudCcpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudCh0aGlzLm9wdGlvbnMuY29udGVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnbW9yZUNsYXNzZXMnKSB7XG4gICAgICAgICAgICB0aGlzLm1vcmUuc2V0T3B0aW9ucyh7IGNsYXNzZXM6IHRoaXMub3B0aW9ucy5jbGFzc2VzLmNvbmNhdCh0aGlzLm9wdGlvbnMubW9yZUNsYXNzZXMpIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ21vcmVDb250ZW50Jykge1xuICAgICAgICAgICAgdGhpcy5tb3JlLnNldENvbnRlbnQodGhpcy5vcHRpb25zLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgfS5iaW5kKHRoaXMpKTtcbn1cbk5hdmlnYXRpb25CYXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShWaWV3LnByb3RvdHlwZSk7XG5OYXZpZ2F0aW9uQmFyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE5hdmlnYXRpb25CYXI7XG5OYXZpZ2F0aW9uQmFyLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBzaXplOiBbXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgNTBcbiAgICBdLFxuICAgIGJhY2tDbGFzc2VzOiBbJ2JhY2snXSxcbiAgICBiYWNrQ29udGVudDogJyYjeDI1YzA7JyxcbiAgICBjbGFzc2VzOiBbJ25hdmlnYXRpb24nXSxcbiAgICBjb250ZW50OiAnJyxcbiAgICBtb3JlQ2xhc3NlczogWydtb3JlJ10sXG4gICAgbW9yZUNvbnRlbnQ6ICcmI3gyNzFhOydcbn07XG5OYXZpZ2F0aW9uQmFyLnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gc2V0Q29udGVudChjb250ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMudGl0bGUuc2V0Q29udGVudChjb250ZW50KTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IE5hdmlnYXRpb25CYXI7IiwidmFyIFN1cmZhY2UgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9TdXJmYWNlJyk7XG52YXIgQ2FudmFzU3VyZmFjZSA9IHJlcXVpcmUoJ2ZhbW91cy9zdXJmYWNlcy9DYW52YXNTdXJmYWNlJyk7XG52YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVHJhbnNmb3JtJyk7XG52YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG52YXIgVXRpbGl0aWVzID0gcmVxdWlyZSgnZmFtb3VzL21hdGgvVXRpbGl0aWVzJyk7XG52YXIgT3B0aW9uc01hbmFnZXIgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9PcHRpb25zTWFuYWdlcicpO1xudmFyIE1vdXNlU3luYyA9IHJlcXVpcmUoJ2ZhbW91cy9pbnB1dHMvTW91c2VTeW5jJyk7XG52YXIgVG91Y2hTeW5jID0gcmVxdWlyZSgnZmFtb3VzL2lucHV0cy9Ub3VjaFN5bmMnKTtcbnZhciBHZW5lcmljU3luYyA9IHJlcXVpcmUoJ2ZhbW91cy9pbnB1dHMvR2VuZXJpY1N5bmMnKTtcbkdlbmVyaWNTeW5jLnJlZ2lzdGVyKHtcbiAgICBtb3VzZTogTW91c2VTeW5jLFxuICAgIHRvdWNoOiBUb3VjaFN5bmNcbn0pO1xuZnVuY3Rpb24gU2xpZGVyKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFNsaWRlci5ERUZBVUxUX09QVElPTlMpO1xuICAgIHRoaXMub3B0aW9uc01hbmFnZXIgPSBuZXcgT3B0aW9uc01hbmFnZXIodGhpcy5vcHRpb25zKTtcbiAgICBpZiAob3B0aW9ucylcbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIHRoaXMuaW5kaWNhdG9yID0gbmV3IENhbnZhc1N1cmZhY2Uoe1xuICAgICAgICBzaXplOiB0aGlzLm9wdGlvbnMuaW5kaWNhdG9yU2l6ZSxcbiAgICAgICAgY2xhc3NlczogWydzbGlkZXItYmFjayddXG4gICAgfSk7XG4gICAgdGhpcy5sYWJlbCA9IG5ldyBTdXJmYWNlKHtcbiAgICAgICAgc2l6ZTogdGhpcy5vcHRpb25zLmxhYmVsU2l6ZSxcbiAgICAgICAgY29udGVudDogdGhpcy5vcHRpb25zLmxhYmVsLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7IHBvaW50ZXJFdmVudHM6ICdub25lJyB9LFxuICAgICAgICBjbGFzc2VzOiBbJ3NsaWRlci1sYWJlbCddXG4gICAgfSk7XG4gICAgdGhpcy5ldmVudE91dHB1dCA9IG5ldyBFdmVudEhhbmRsZXIoKTtcbiAgICB0aGlzLmV2ZW50SW5wdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldElucHV0SGFuZGxlcih0aGlzLCB0aGlzLmV2ZW50SW5wdXQpO1xuICAgIEV2ZW50SGFuZGxlci5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsIHRoaXMuZXZlbnRPdXRwdXQpO1xuICAgIHZhciBzY2FsZSA9ICh0aGlzLm9wdGlvbnMucmFuZ2VbMV0gLSB0aGlzLm9wdGlvbnMucmFuZ2VbMF0pIC8gdGhpcy5vcHRpb25zLmluZGljYXRvclNpemVbMF07XG4gICAgdGhpcy5zeW5jID0gbmV3IEdlbmVyaWNTeW5jKFtcbiAgICAgICAgJ21vdXNlJyxcbiAgICAgICAgJ3RvdWNoJ1xuICAgIF0sIHtcbiAgICAgICAgc2NhbGU6IHNjYWxlLFxuICAgICAgICBkaXJlY3Rpb246IEdlbmVyaWNTeW5jLkRJUkVDVElPTl9YXG4gICAgfSk7XG4gICAgdGhpcy5pbmRpY2F0b3IucGlwZSh0aGlzLnN5bmMpO1xuICAgIHRoaXMuc3luYy5waXBlKHRoaXMpO1xuICAgIHRoaXMuZXZlbnRJbnB1dC5vbigndXBkYXRlJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5zZXQoZGF0YS5wb3NpdGlvbik7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9kcmF3UG9zID0gMDtcbiAgICBfdXBkYXRlTGFiZWwuY2FsbCh0aGlzKTtcbn1cblNsaWRlci5ERUZBVUxUX09QVElPTlMgPSB7XG4gICAgc2l6ZTogW1xuICAgICAgICAyMDAsXG4gICAgICAgIDYwXG4gICAgXSxcbiAgICBpbmRpY2F0b3JTaXplOiBbXG4gICAgICAgIDIwMCxcbiAgICAgICAgMzBcbiAgICBdLFxuICAgIGxhYmVsU2l6ZTogW1xuICAgICAgICAyMDAsXG4gICAgICAgIDMwXG4gICAgXSxcbiAgICByYW5nZTogW1xuICAgICAgICAwLFxuICAgICAgICAxXG4gICAgXSxcbiAgICBwcmVjaXNpb246IDIsXG4gICAgdmFsdWU6IDAsXG4gICAgbGFiZWw6ICcnLFxuICAgIGZpbGxDb2xvcjogJ3JnYmEoMTcwLCAxNzAsIDE3MCwgMSknXG59O1xuZnVuY3Rpb24gX3VwZGF0ZUxhYmVsKCkge1xuICAgIHRoaXMubGFiZWwuc2V0Q29udGVudCh0aGlzLm9wdGlvbnMubGFiZWwgKyAnPHNwYW4gc3R5bGU9XCJmbG9hdDogcmlnaHRcIj4nICsgdGhpcy5nZXQoKS50b0ZpeGVkKHRoaXMub3B0aW9ucy5wcmVjaXNpb24pICsgJzwvc3Bhbj4nKTtcbn1cblNsaWRlci5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnMob3B0aW9ucyk7XG59O1xuU2xpZGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy52YWx1ZTtcbn07XG5TbGlkZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5vcHRpb25zLnZhbHVlKVxuICAgICAgICByZXR1cm47XG4gICAgdGhpcy5vcHRpb25zLnZhbHVlID0gVXRpbGl0aWVzLmNsYW1wKHZhbHVlLCB0aGlzLm9wdGlvbnMucmFuZ2UpO1xuICAgIF91cGRhdGVMYWJlbC5jYWxsKHRoaXMpO1xuICAgIHRoaXMuZXZlbnRPdXRwdXQuZW1pdCgnY2hhbmdlJywgeyB2YWx1ZTogdmFsdWUgfSk7XG59O1xuU2xpZGVyLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNpemU7XG59O1xuU2xpZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIHJhbmdlID0gdGhpcy5vcHRpb25zLnJhbmdlO1xuICAgIHZhciBmaWxsU2l6ZSA9IE1hdGguZmxvb3IoKHRoaXMuZ2V0KCkgLSByYW5nZVswXSkgLyAocmFuZ2VbMV0gLSByYW5nZVswXSkgKiB0aGlzLm9wdGlvbnMuaW5kaWNhdG9yU2l6ZVswXSk7XG4gICAgaWYgKGZpbGxTaXplIDwgdGhpcy5fZHJhd1Bvcykge1xuICAgICAgICB0aGlzLmluZGljYXRvci5nZXRDb250ZXh0KCcyZCcpLmNsZWFyUmVjdChmaWxsU2l6ZSwgMCwgdGhpcy5fZHJhd1BvcyAtIGZpbGxTaXplICsgMSwgdGhpcy5vcHRpb25zLmluZGljYXRvclNpemVbMV0pO1xuICAgIH0gZWxzZSBpZiAoZmlsbFNpemUgPiB0aGlzLl9kcmF3UG9zKSB7XG4gICAgICAgIHZhciBjdHggPSB0aGlzLmluZGljYXRvci5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5vcHRpb25zLmZpbGxDb2xvcjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KHRoaXMuX2RyYXdQb3MgLSAxLCAwLCBmaWxsU2l6ZSAtIHRoaXMuX2RyYXdQb3MgKyAxLCB0aGlzLm9wdGlvbnMuaW5kaWNhdG9yU2l6ZVsxXSk7XG4gICAgfVxuICAgIHRoaXMuX2RyYXdQb3MgPSBmaWxsU2l6ZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzaXplOiB0aGlzLm9wdGlvbnMuc2l6ZSxcbiAgICAgICAgdGFyZ2V0OiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb3JpZ2luOiBbXG4gICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5pbmRpY2F0b3IucmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBUcmFuc2Zvcm0udHJhbnNsYXRlKDAsIDAsIDEpLFxuICAgICAgICAgICAgICAgIG9yaWdpbjogW1xuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMubGFiZWwucmVuZGVyKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH07XG59O1xubW9kdWxlLmV4cG9ydHMgPSBTbGlkZXI7IiwidmFyIFV0aWxpdHkgPSByZXF1aXJlKCdmYW1vdXMvdXRpbGl0aWVzL1V0aWxpdHknKTtcbnZhciBWaWV3ID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvVmlldycpO1xudmFyIEdyaWRMYXlvdXQgPSByZXF1aXJlKCdmYW1vdXMvdmlld3MvR3JpZExheW91dCcpO1xudmFyIFRvZ2dsZUJ1dHRvbiA9IHJlcXVpcmUoJy4vVG9nZ2xlQnV0dG9uJyk7XG5mdW5jdGlvbiBUYWJCYXIob3B0aW9ucykge1xuICAgIFZpZXcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLmxheW91dCA9IG5ldyBHcmlkTGF5b3V0KCk7XG4gICAgdGhpcy5idXR0b25zID0gW107XG4gICAgdGhpcy5fYnV0dG9uSWRzID0ge307XG4gICAgdGhpcy5fYnV0dG9uQ2FsbGJhY2tzID0ge307XG4gICAgdGhpcy5sYXlvdXQuc2VxdWVuY2VGcm9tKHRoaXMuYnV0dG9ucyk7XG4gICAgdGhpcy5fYWRkKHRoaXMubGF5b3V0KTtcbiAgICB0aGlzLl9vcHRpb25zTWFuYWdlci5vbignY2hhbmdlJywgX3VwZGF0ZU9wdGlvbnMuYmluZCh0aGlzKSk7XG59XG5UYWJCYXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShWaWV3LnByb3RvdHlwZSk7XG5UYWJCYXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGFiQmFyO1xuVGFiQmFyLkRFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICBzZWN0aW9uczogW10sXG4gICAgd2lkZ2V0OiBUb2dnbGVCdXR0b24sXG4gICAgc2l6ZTogW1xuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIDUwXG4gICAgXSxcbiAgICBkaXJlY3Rpb246IFV0aWxpdHkuRGlyZWN0aW9uLlgsXG4gICAgYnV0dG9uczogeyB0b2dnbGVNb2RlOiBUb2dnbGVCdXR0b24uT04gfVxufTtcbmZ1bmN0aW9uIF91cGRhdGVPcHRpb25zKGRhdGEpIHtcbiAgICB2YXIgaWQgPSBkYXRhLmlkO1xuICAgIHZhciB2YWx1ZSA9IGRhdGEudmFsdWU7XG4gICAgaWYgKGlkID09PSAnZGlyZWN0aW9uJykge1xuICAgICAgICB0aGlzLmxheW91dC5zZXRPcHRpb25zKHsgZGltZW5zaW9uczogX3Jlc29sdmVHcmlkRGltZW5zaW9ucy5jYWxsKHRoaXMuYnV0dG9ucy5sZW5ndGgsIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24pIH0pO1xuICAgIH0gZWxzZSBpZiAoaWQgPT09ICdidXR0b25zJykge1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuYnV0dG9ucykge1xuICAgICAgICAgICAgdGhpcy5idXR0b25zW2ldLnNldE9wdGlvbnModmFsdWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChpZCA9PT0gJ3NlY3Rpb25zJykge1xuICAgICAgICBmb3IgKHZhciBzZWN0aW9uSWQgaW4gdGhpcy5vcHRpb25zLnNlY3Rpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmluZVNlY3Rpb24oc2VjdGlvbklkLCB0aGlzLm9wdGlvbnMuc2VjdGlvbnNbc2VjdGlvbklkXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBfcmVzb2x2ZUdyaWREaW1lbnNpb25zKGNvdW50LCBkaXJlY3Rpb24pIHtcbiAgICBpZiAoZGlyZWN0aW9uID09PSBVdGlsaXR5LkRpcmVjdGlvbi5YKVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgY291bnQsXG4gICAgICAgICAgICAxXG4gICAgICAgIF07XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIGNvdW50XG4gICAgICAgIF07XG59XG5UYWJCYXIucHJvdG90eXBlLmRlZmluZVNlY3Rpb24gPSBmdW5jdGlvbiBkZWZpbmVTZWN0aW9uKGlkLCBjb250ZW50KSB7XG4gICAgdmFyIGJ1dHRvbjtcbiAgICB2YXIgaSA9IHRoaXMuX2J1dHRvbklkc1tpZF07XG4gICAgaWYgKGkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpID0gdGhpcy5idXR0b25zLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fYnV0dG9uSWRzW2lkXSA9IGk7XG4gICAgICAgIHZhciB3aWRnZXQgPSB0aGlzLm9wdGlvbnMud2lkZ2V0O1xuICAgICAgICBidXR0b24gPSBuZXcgd2lkZ2V0KCk7XG4gICAgICAgIHRoaXMuYnV0dG9uc1tpXSA9IGJ1dHRvbjtcbiAgICAgICAgdGhpcy5sYXlvdXQuc2V0T3B0aW9ucyh7IGRpbWVuc2lvbnM6IF9yZXNvbHZlR3JpZERpbWVuc2lvbnModGhpcy5idXR0b25zLmxlbmd0aCwgdGhpcy5vcHRpb25zLmRpcmVjdGlvbikgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYnV0dG9uID0gdGhpcy5idXR0b25zW2ldO1xuICAgICAgICBidXR0b24udW5iaW5kKCdzZWxlY3QnLCB0aGlzLl9idXR0b25DYWxsYmFja3NbaWRdKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5idXR0b25zKVxuICAgICAgICBidXR0b24uc2V0T3B0aW9ucyh0aGlzLm9wdGlvbnMuYnV0dG9ucyk7XG4gICAgYnV0dG9uLnNldE9wdGlvbnMoY29udGVudCk7XG4gICAgdGhpcy5fYnV0dG9uQ2FsbGJhY2tzW2lkXSA9IHRoaXMuc2VsZWN0LmJpbmQodGhpcywgaWQpO1xuICAgIGJ1dHRvbi5vbignc2VsZWN0JywgdGhpcy5fYnV0dG9uQ2FsbGJhY2tzW2lkXSk7XG59O1xuVGFiQmFyLnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbiBzZWxlY3QoaWQpIHtcbiAgICB2YXIgYnRuID0gdGhpcy5fYnV0dG9uSWRzW2lkXTtcbiAgICBpZiAodGhpcy5idXR0b25zW2J0bl0gJiYgdGhpcy5idXR0b25zW2J0bl0uaXNTZWxlY3RlZCgpKSB7XG4gICAgICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ3NlbGVjdCcsIHsgaWQ6IGlkIH0pO1xuICAgIH0gZWxzZSBpZiAodGhpcy5idXR0b25zW2J0bl0pIHtcbiAgICAgICAgdGhpcy5idXR0b25zW2J0bl0uc2VsZWN0KCk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5idXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpICE9PSBidG4pXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbnNbaV0uZGVzZWxlY3QoKTtcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBUYWJCYXI7IiwidmFyIFN1cmZhY2UgPSByZXF1aXJlKCdmYW1vdXMvY29yZS9TdXJmYWNlJyk7XG52YXIgRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyJyk7XG52YXIgUmVuZGVyQ29udHJvbGxlciA9IHJlcXVpcmUoJ2ZhbW91cy92aWV3cy9SZW5kZXJDb250cm9sbGVyJyk7XG5mdW5jdGlvbiBUb2dnbGVCdXR0b24ob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgY29udGVudDogJycsXG4gICAgICAgIG9mZkNsYXNzZXM6IFsnb2ZmJ10sXG4gICAgICAgIG9uQ2xhc3NlczogWydvbiddLFxuICAgICAgICBzaXplOiB1bmRlZmluZWQsXG4gICAgICAgIG91dFRyYW5zaXRpb246IHtcbiAgICAgICAgICAgIGN1cnZlOiAnZWFzZUluT3V0JyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzMDBcbiAgICAgICAgfSxcbiAgICAgICAgaW5UcmFuc2l0aW9uOiB7XG4gICAgICAgICAgICBjdXJ2ZTogJ2Vhc2VJbk91dCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMzAwXG4gICAgICAgIH0sXG4gICAgICAgIHRvZ2dsZU1vZGU6IFRvZ2dsZUJ1dHRvbi5UT0dHTEUsXG4gICAgICAgIGNyb3NzZmFkZTogdHJ1ZVxuICAgIH07XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG4gICAgRXZlbnRIYW5kbGVyLnNldE91dHB1dEhhbmRsZXIodGhpcywgdGhpcy5fZXZlbnRPdXRwdXQpO1xuICAgIHRoaXMub2ZmU3VyZmFjZSA9IG5ldyBTdXJmYWNlKCk7XG4gICAgdGhpcy5vZmZTdXJmYWNlLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50b2dnbGVNb2RlICE9PSBUb2dnbGVCdXR0b24uT0ZGKVxuICAgICAgICAgICAgdGhpcy5zZWxlY3QoKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICAgIHRoaXMub2ZmU3VyZmFjZS5waXBlKHRoaXMuX2V2ZW50T3V0cHV0KTtcbiAgICB0aGlzLm9uU3VyZmFjZSA9IG5ldyBTdXJmYWNlKCk7XG4gICAgdGhpcy5vblN1cmZhY2Uub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRvZ2dsZU1vZGUgIT09IFRvZ2dsZUJ1dHRvbi5PTilcbiAgICAgICAgICAgIHRoaXMuZGVzZWxlY3QoKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICAgIHRoaXMub25TdXJmYWNlLnBpcGUodGhpcy5fZXZlbnRPdXRwdXQpO1xuICAgIHRoaXMuYXJiaXRlciA9IG5ldyBSZW5kZXJDb250cm9sbGVyKHsgb3ZlcmxhcDogdGhpcy5vcHRpb25zLmNyb3NzZmFkZSB9KTtcbiAgICB0aGlzLmRlc2VsZWN0KCk7XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbn1cblRvZ2dsZUJ1dHRvbi5PRkYgPSAwO1xuVG9nZ2xlQnV0dG9uLk9OID0gMTtcblRvZ2dsZUJ1dHRvbi5UT0dHTEUgPSAyO1xuVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbiBzZWxlY3QoKSB7XG4gICAgdGhpcy5zZWxlY3RlZCA9IHRydWU7XG4gICAgdGhpcy5hcmJpdGVyLnNob3codGhpcy5vblN1cmZhY2UsIHRoaXMub3B0aW9ucy5pblRyYW5zaXRpb24pO1xuICAgIHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoJ3NlbGVjdCcpO1xufTtcblRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuZGVzZWxlY3QgPSBmdW5jdGlvbiBkZXNlbGVjdCgpIHtcbiAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5hcmJpdGVyLnNob3codGhpcy5vZmZTdXJmYWNlLCB0aGlzLm9wdGlvbnMub3V0VHJhbnNpdGlvbik7XG4gICAgdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCgnZGVzZWxlY3QnKTtcbn07XG5Ub2dnbGVCdXR0b24ucHJvdG90eXBlLmlzU2VsZWN0ZWQgPSBmdW5jdGlvbiBpc1NlbGVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdGVkO1xufTtcblRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmNvbnRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMuY29udGVudCA9IG9wdGlvbnMuY29udGVudDtcbiAgICAgICAgdGhpcy5vZmZTdXJmYWNlLnNldENvbnRlbnQodGhpcy5vcHRpb25zLmNvbnRlbnQpO1xuICAgICAgICB0aGlzLm9uU3VyZmFjZS5zZXRDb250ZW50KHRoaXMub3B0aW9ucy5jb250ZW50KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMub2ZmQ2xhc3Nlcykge1xuICAgICAgICB0aGlzLm9wdGlvbnMub2ZmQ2xhc3NlcyA9IG9wdGlvbnMub2ZmQ2xhc3NlcztcbiAgICAgICAgdGhpcy5vZmZTdXJmYWNlLnNldENsYXNzZXModGhpcy5vcHRpb25zLm9mZkNsYXNzZXMpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5vbkNsYXNzZXMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xhc3NlcyA9IG9wdGlvbnMub25DbGFzc2VzO1xuICAgICAgICB0aGlzLm9uU3VyZmFjZS5zZXRDbGFzc2VzKHRoaXMub3B0aW9ucy5vbkNsYXNzZXMpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnNpemUgPSBvcHRpb25zLnNpemU7XG4gICAgICAgIHRoaXMub25TdXJmYWNlLnNldFNpemUodGhpcy5vcHRpb25zLnNpemUpO1xuICAgICAgICB0aGlzLm9mZlN1cmZhY2Uuc2V0U2l6ZSh0aGlzLm9wdGlvbnMuc2l6ZSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnRvZ2dsZU1vZGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLnRvZ2dsZU1vZGUgPSBvcHRpb25zLnRvZ2dsZU1vZGU7XG4gICAgaWYgKG9wdGlvbnMub3V0VHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLm9wdGlvbnMub3V0VHJhbnNpdGlvbiA9IG9wdGlvbnMub3V0VHJhbnNpdGlvbjtcbiAgICBpZiAob3B0aW9ucy5pblRyYW5zaXRpb24gIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5vcHRpb25zLmluVHJhbnNpdGlvbiA9IG9wdGlvbnMuaW5UcmFuc2l0aW9uO1xuICAgIGlmIChvcHRpb25zLmNyb3NzZmFkZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jcm9zc2ZhZGUgPSBvcHRpb25zLmNyb3NzZmFkZTtcbiAgICAgICAgdGhpcy5hcmJpdGVyLnNldE9wdGlvbnMoeyBvdmVybGFwOiB0aGlzLm9wdGlvbnMuY3Jvc3NmYWRlIH0pO1xuICAgIH1cbn07XG5Ub2dnbGVCdXR0b24ucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiBnZXRTaXplKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuc2l6ZTtcbn07XG5Ub2dnbGVCdXR0b24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5hcmJpdGVyLnJlbmRlcigpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gVG9nZ2xlQnV0dG9uOyIsIi8vIGxvYWQgY3NzXG5yZXF1aXJlKCcuL3N0eWxlcycpO1xuXG4vLyBMb2FkIHBvbHlmaWxsc1xucmVxdWlyZSgnZmFtb3VzLXBvbHlmaWxscycpO1xuXG5mYW1vdXMgPSB7XG4gIGNvcmU6IHtcbiAgICBDb250ZXh0OiByZXF1aXJlKCdmYW1vdXMvY29yZS9Db250ZXh0JyksXG4gICAgRWxlbWVudEFsbG9jYXRvcjogcmVxdWlyZSgnZmFtb3VzL2NvcmUvRWxlbWVudEFsbG9jYXRvcicpLFxuICAgIEVuZ2luZTogcmVxdWlyZSgnZmFtb3VzL2NvcmUvRW5naW5lJyksXG4gICAgRW50aXR5OiByZXF1aXJlKCdmYW1vdXMvY29yZS9FbnRpdHknKSxcbiAgICBFdmVudEVtaXR0ZXI6IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL0V2ZW50RW1pdHRlcicpLFxuICAgIEV2ZW50SGFuZGxlcjogcmVxdWlyZSgnZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyJyksXG4gICAgR3JvdXA6IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL0dyb3VwJyksXG4gICAgTW9kaWZpZXI6IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL01vZGlmaWVyJyksXG4gICAgT3B0aW9uc01hbmFnZXI6IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL09wdGlvbnNNYW5hZ2VyJyksXG4gICAgUmVuZGVyTm9kZTogcmVxdWlyZSgnZmFtb3VzL2NvcmUvUmVuZGVyTm9kZScpLFxuICAgIFNjZW5lOiByZXF1aXJlKCdmYW1vdXMvY29yZS9TY2VuZScpLFxuICAgIFNwZWNQYXJzZXI6IHJlcXVpcmUoJ2ZhbW91cy9jb3JlL1NwZWNQYXJzZXInKSxcbiAgICBTdXJmYWNlOiByZXF1aXJlKCdmYW1vdXMvY29yZS9TdXJmYWNlJyksXG4gICAgVHJhbnNmb3JtOiByZXF1aXJlKCdmYW1vdXMvY29yZS9UcmFuc2Zvcm0nKSxcbiAgICBWaWV3OiByZXF1aXJlKCdmYW1vdXMvY29yZS9WaWV3JyksXG4gICAgVmlld1NlcXVlbmNlOiByZXF1aXJlKCdmYW1vdXMvY29yZS9WaWV3U2VxdWVuY2UnKVxuICB9LFxuICBldmVudHM6IHtcbiAgICBFdmVudEFyYml0ZXI6IHJlcXVpcmUoJ2ZhbW91cy9ldmVudHMvRXZlbnRBcmJpdGVyJyksXG4gICAgRXZlbnRGaWx0ZXI6IHJlcXVpcmUoJ2ZhbW91cy9ldmVudHMvRXZlbnRGaWx0ZXInKSxcbiAgICBFdmVudE1hcHBlcjogcmVxdWlyZSgnZmFtb3VzL2V2ZW50cy9FdmVudE1hcHBlcicpXG4gIH0sXG4gIGlucHV0czoge1xuICAgIEFjY3VtdWxhdG9yOiByZXF1aXJlKCdmYW1vdXMvaW5wdXRzL0FjY3VtdWxhdG9yJyksXG4gICAgRmFzdENsaWNrOiByZXF1aXJlKCdmYW1vdXMvaW5wdXRzL0Zhc3RDbGljaycpLFxuICAgIEdlbmVyaWNTeW5jOiByZXF1aXJlKCdmYW1vdXMvaW5wdXRzL0dlbmVyaWNTeW5jJyksXG4gICAgTW91c2VTeW5jOiByZXF1aXJlKCdmYW1vdXMvaW5wdXRzL01vdXNlU3luYycpLFxuICAgIFBpbmNoU3luYzogcmVxdWlyZSgnZmFtb3VzL2lucHV0cy9QaW5jaFN5bmMnKSxcbiAgICBSb3RhdGVTeW5jOiByZXF1aXJlKCdmYW1vdXMvaW5wdXRzL1JvdGF0ZVN5bmMnKSxcbiAgICBTY2FsZVN5bmM6IHJlcXVpcmUoJ2ZhbW91cy9pbnB1dHMvU2NhbGVTeW5jJyksXG4gICAgU2Nyb2xsU3luYzogcmVxdWlyZSgnZmFtb3VzL2lucHV0cy9TY3JvbGxTeW5jJyksXG4gICAgVG91Y2hTeW5jOiByZXF1aXJlKCdmYW1vdXMvaW5wdXRzL1RvdWNoU3luYycpLFxuICAgIFRvdWNoVHJhY2tlcjogcmVxdWlyZSgnZmFtb3VzL2lucHV0cy9Ub3VjaFRyYWNrZXInKSxcbiAgICBUd29GaW5nZXJTeW5jOiByZXF1aXJlKCdmYW1vdXMvaW5wdXRzL1R3b0ZpbmdlclN5bmMnKVxuICB9LFxuICBtYXRoOiB7XG4gICAgTWF0cml4OiByZXF1aXJlKCdmYW1vdXMvbWF0aC9NYXRyaXgnKSxcbiAgICBRdWF0ZXJuaW9uOiByZXF1aXJlKCdmYW1vdXMvbWF0aC9RdWF0ZXJuaW9uJyksXG4gICAgUmFuZG9tOiByZXF1aXJlKCdmYW1vdXMvbWF0aC9SYW5kb20nKSxcbiAgICBVdGlsaXRpZXM6IHJlcXVpcmUoJ2ZhbW91cy9tYXRoL1V0aWxpdGllcycpLFxuICAgIFZlY3RvcjogcmVxdWlyZSgnZmFtb3VzL21hdGgvVmVjdG9yJylcbiAgfSxcbiAgbW9kaWZpZXJzOiB7XG4gICAgRHJhZ2dhYmxlOiByZXF1aXJlKCdmYW1vdXMvbW9kaWZpZXJzL0RyYWdnYWJsZScpLFxuICAgIEZhZGVyOiByZXF1aXJlKCdmYW1vdXMvbW9kaWZpZXJzL0ZhZGVyJyksXG4gICAgTW9kaWZpZXJDaGFpbjogcmVxdWlyZSgnZmFtb3VzL21vZGlmaWVycy9Nb2RpZmllckNoYWluJyksXG4gICAgU3RhdGVNb2RpZmllcjogcmVxdWlyZSgnZmFtb3VzL21vZGlmaWVycy9TdGF0ZU1vZGlmaWVyJylcbiAgfSxcbiAgcGh5c2ljczoge1xuICAgIGJvZGllczoge1xuICAgICAgQm9keTogcmVxdWlyZSgnZmFtb3VzL3BoeXNpY3MvYm9kaWVzL0JvZHknKSxcbiAgICAgIENpcmNsZTogcmVxdWlyZSgnZmFtb3VzL3BoeXNpY3MvYm9kaWVzL0NpcmNsZScpLFxuICAgICAgUGFydGljbGU6IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZScpLFxuICAgICAgUmVjdGFuZ2xlOiByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9ib2RpZXMvUmVjdGFuZ2xlJylcbiAgICB9LFxuICAgIGNvbnN0cmFpbnRzOiB7XG4gICAgICBDb2xsaXNpb246IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL0NvbGxpc2lvbicpLFxuICAgICAgQ29uc3RyYWludDogcmVxdWlyZSgnZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvQ29uc3RyYWludCcpLFxuICAgICAgQ3VydmU6IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL0N1cnZlJyksXG4gICAgICBEaXN0YW5jZTogcmVxdWlyZSgnZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvRGlzdGFuY2UnKSxcbiAgICAgIFNuYXA6IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1NuYXAnKSxcbiAgICAgIFN1cmZhY2U6IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1N1cmZhY2UnKSxcbiAgICAgIFdhbGw6IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1dhbGwnKSxcbiAgICAgIFdhbGxzOiByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9jb25zdHJhaW50cy9XYWxscycpXG4gICAgfSxcbiAgICBmb3JjZXM6IHtcbiAgICAgIERyYWc6IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2ZvcmNlcy9EcmFnJyksXG4gICAgICBGb3JjZTogcmVxdWlyZSgnZmFtb3VzL3BoeXNpY3MvZm9yY2VzL0ZvcmNlJyksXG4gICAgICBSZXB1bHNpb246IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2ZvcmNlcy9SZXB1bHNpb24nKSxcbiAgICAgIFJvdGF0aW9uYWxEcmFnOiByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9mb3JjZXMvUm90YXRpb25hbERyYWcnKSxcbiAgICAgIFJvdGF0aW9uYWxTcHJpbmc6IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2ZvcmNlcy9Sb3RhdGlvbmFsU3ByaW5nJyksXG4gICAgICBTcHJpbmc6IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL2ZvcmNlcy9TcHJpbmcnKSxcbiAgICAgIFZlY3RvckZpZWxkOiByZXF1aXJlKCdmYW1vdXMvcGh5c2ljcy9mb3JjZXMvVmVjdG9yRmllbGQnKVxuICAgIH0sXG4gICAgaW50ZWdyYXRvcnM6IHtcbiAgICAgIFN5bXBsZWN0aWNFdWxlcjogcmVxdWlyZSgnZmFtb3VzL3BoeXNpY3MvaW50ZWdyYXRvcnMvU3ltcGxlY3RpY0V1bGVyJylcbiAgICB9LFxuICAgIFBoeXNpY3NFbmdpbmU6IHJlcXVpcmUoJ2ZhbW91cy9waHlzaWNzL1BoeXNpY3NFbmdpbmUnKVxuICB9LFxuICBzdXJmYWNlczoge1xuICAgIENhbnZhc1N1cmZhY2U6IHJlcXVpcmUoJ2ZhbW91cy9zdXJmYWNlcy9DYW52YXNTdXJmYWNlJyksXG4gICAgQ29udGFpbmVyU3VyZmFjZTogcmVxdWlyZSgnZmFtb3VzL3N1cmZhY2VzL0NvbnRhaW5lclN1cmZhY2UnKSxcbiAgICBGb3JtQ29udGFpbmVyU3VyZmFjZTogcmVxdWlyZSgnZmFtb3VzL3N1cmZhY2VzL0Zvcm1Db250YWluZXJTdXJmYWNlJyksXG4gICAgSW1hZ2VTdXJmYWNlOiByZXF1aXJlKCdmYW1vdXMvc3VyZmFjZXMvSW1hZ2VTdXJmYWNlJyksXG4gICAgSW5wdXRTdXJmYWNlOiByZXF1aXJlKCdmYW1vdXMvc3VyZmFjZXMvSW5wdXRTdXJmYWNlJyksXG4gICAgU3VibWl0SW5wdXRTdXJmYWNlOiByZXF1aXJlKCdmYW1vdXMvc3VyZmFjZXMvU3VibWl0SW5wdXRTdXJmYWNlJyksXG4gICAgVGV4dGFyZWFTdXJmYWNlOiByZXF1aXJlKCdmYW1vdXMvc3VyZmFjZXMvVGV4dGFyZWFTdXJmYWNlJyksXG4gICAgVmlkZW9TdXJmYWNlOiByZXF1aXJlKCdmYW1vdXMvc3VyZmFjZXMvVmlkZW9TdXJmYWNlJylcbiAgfSxcbiAgdHJhbnNpdGlvbnM6IHtcbiAgICBDYWNoZWRNYXA6IHJlcXVpcmUoJ2ZhbW91cy90cmFuc2l0aW9ucy9DYWNoZWRNYXAnKSxcbiAgICBFYXNpbmc6IHJlcXVpcmUoJ2ZhbW91cy90cmFuc2l0aW9ucy9FYXNpbmcnKSxcbiAgICBNdWx0aXBsZVRyYW5zaXRpb246IHJlcXVpcmUoJ2ZhbW91cy90cmFuc2l0aW9ucy9NdWx0aXBsZVRyYW5zaXRpb24nKSxcbiAgICBTbmFwVHJhbnNpdGlvbjogcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1NuYXBUcmFuc2l0aW9uJyksXG4gICAgU3ByaW5nVHJhbnNpdGlvbjogcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1NwcmluZ1RyYW5zaXRpb24nKSxcbiAgICBUcmFuc2l0aW9uYWJsZTogcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlJyksXG4gICAgVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm06IHJlcXVpcmUoJ2ZhbW91cy90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybScpLFxuICAgIFR3ZWVuVHJhbnNpdGlvbjogcmVxdWlyZSgnZmFtb3VzL3RyYW5zaXRpb25zL1R3ZWVuVHJhbnNpdGlvbicpLFxuICAgIFdhbGxUcmFuc2l0aW9uOiByZXF1aXJlKCdmYW1vdXMvdHJhbnNpdGlvbnMvV2FsbFRyYW5zaXRpb24nKVxuICB9LFxuICB1dGlsaXRpZXM6IHtcbiAgICBLZXlDb2RlczogcmVxdWlyZSgnZmFtb3VzL3V0aWxpdGllcy9LZXlDb2RlcycpLFxuICAgIFRpbWVyOiByZXF1aXJlKCdmYW1vdXMvdXRpbGl0aWVzL1RpbWVyJyksXG4gICAgVXRpbGl0eTogcmVxdWlyZSgnZmFtb3VzL3V0aWxpdGllcy9VdGlsaXR5JylcbiAgfSxcbiAgdmlld3M6IHtcbiAgICBDb250ZXh0dWFsVmlldzogcmVxdWlyZSgnZmFtb3VzL3ZpZXdzL0NvbnRleHR1YWxWaWV3JyksXG4gICAgRGVjazogcmVxdWlyZSgnZmFtb3VzL3ZpZXdzL0RlY2snKSxcbiAgICBFZGdlU3dhcHBlcjogcmVxdWlyZSgnZmFtb3VzL3ZpZXdzL0VkZ2VTd2FwcGVyJyksXG4gICAgRmxleGlibGVMYXlvdXQ6IHJlcXVpcmUoJ2ZhbW91cy92aWV3cy9GbGV4aWJsZUxheW91dCcpLFxuICAgIEZsaXBwZXI6IHJlcXVpcmUoJ2ZhbW91cy92aWV3cy9GbGlwcGVyJyksXG4gICAgR3JpZExheW91dDogcmVxdWlyZSgnZmFtb3VzL3ZpZXdzL0dyaWRMYXlvdXQnKSxcbiAgICBIZWFkZXJGb290ZXJMYXlvdXQ6IHJlcXVpcmUoJ2ZhbW91cy92aWV3cy9IZWFkZXJGb290ZXJMYXlvdXQnKSxcbiAgICBMaWdodGJveDogcmVxdWlyZSgnZmFtb3VzL3ZpZXdzL0xpZ2h0Ym94JyksXG4gICAgUmVuZGVyQ29udHJvbGxlcjogcmVxdWlyZSgnZmFtb3VzL3ZpZXdzL1JlbmRlckNvbnRyb2xsZXInKSxcbiAgICBTY3JvbGxDb250YWluZXI6IHJlcXVpcmUoJ2ZhbW91cy92aWV3cy9TY3JvbGxDb250YWluZXInKSxcbiAgICBTY3JvbGxlcjogcmVxdWlyZSgnZmFtb3VzL3ZpZXdzL1Njcm9sbGVyJyksXG4gICAgU2Nyb2xsdmlldzogcmVxdWlyZSgnZmFtb3VzL3ZpZXdzL1Njcm9sbHZpZXcnKSxcbiAgICBTZXF1ZW50aWFsTGF5b3V0OiByZXF1aXJlKCdmYW1vdXMvdmlld3MvU2VxdWVudGlhbExheW91dCcpXG4gIH0sXG4gIHdpZGdldHM6IHtcbiAgICBOYXZpZ2F0aW9uQmFyOiByZXF1aXJlKCdmYW1vdXMvd2lkZ2V0cy9OYXZpZ2F0aW9uQmFyJyksXG4gICAgU2xpZGVyOiByZXF1aXJlKCdmYW1vdXMvd2lkZ2V0cy9TbGlkZXInKSxcbiAgICBUYWJCYXI6IHJlcXVpcmUoJ2ZhbW91cy93aWRnZXRzL1RhYkJhcicpLFxuICAgIFRvZ2dsZUJ1dHRvbjogcmVxdWlyZSgnZmFtb3VzL3dpZGdldHMvVG9nZ2xlQnV0dG9uJylcbiAgfVxufTtcbiIsInZhciBjc3MgPSBcImh0bWwge1xcbiAgYmFja2dyb3VuZDogI2ZmZjtcXG59XFxuXFxuLmJhY2tmYWNlVmlzaWJpbGl0eSB7XFxuICAtd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6IHZpc2libGU7XFxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiB2aXNpYmxlO1xcbn1cXG5cIjsgKHJlcXVpcmUoXCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2Nzc2lmeVwiKSkoY3NzKTsgbW9kdWxlLmV4cG9ydHMgPSBjc3M7IiwidmFyIGNzcyA9IFwiLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxcbiAqXFxuICogT3duZXI6IG1hcmtAZmFtby51c1xcbiAqIEBsaWNlbnNlIE1QTCAyLjBcXG4gKiBAY29weXJpZ2h0IEZhbW91cyBJbmR1c3RyaWVzLCBJbmMuIDIwMTRcXG4gKi9cXG5cXG5cXG5odG1sIHtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgbWFyZ2luOiAwcHg7XFxuICAgIHBhZGRpbmc6IDBweDtcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gICAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xcbiAgICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xcbn1cXG5cXG5ib2R5IHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB3aWR0aDogMTAwJTtcXG4gICAgaGVpZ2h0OiAxMDAlO1xcbiAgICBtYXJnaW46IDBweDtcXG4gICAgcGFkZGluZzogMHB4O1xcbiAgICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XFxuICAgIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XFxuICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xcbiAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50O1xcbiAgICAtd2Via2l0LXBlcnNwZWN0aXZlOiAwO1xcbiAgICBwZXJzcGVjdGl2ZTogbm9uZTtcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXG59XFxuXFxuLmZhbW91cy1jb250YWluZXIsIC5mYW1vdXMtZ3JvdXAge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHRvcDogMHB4O1xcbiAgICBsZWZ0OiAwcHg7XFxuICAgIGJvdHRvbTogMHB4O1xcbiAgICByaWdodDogMHB4O1xcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXG4gICAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xcbiAgICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xcbiAgICAtd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6IHZpc2libGU7XFxuICAgIGJhY2tmYWNlLXZpc2liaWxpdHk6IHZpc2libGU7XFxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG5cXG4uZmFtb3VzLWdyb3VwIHtcXG4gICAgd2lkdGg6IDBweDtcXG4gICAgaGVpZ2h0OiAwcHg7XFxuICAgIG1hcmdpbjogMHB4O1xcbiAgICBwYWRkaW5nOiAwcHg7XFxuICAgIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcXG4gICAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcXG59XFxuXFxuLmZhbW91cy1zdXJmYWNlIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IGNlbnRlciBjZW50ZXI7XFxuICAgIHRyYW5zZm9ybS1vcmlnaW46IGNlbnRlciBjZW50ZXI7XFxuICAgIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xcbiAgICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XFxuICAgIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBmbGF0O1xcbiAgICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkOyAvKiBwZXJmb3JtYW5jZSAqL1xcbiAgICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcXG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XFxufVxcblxcbi5mYW1vdXMtY29udGFpbmVyLWdyb3VwIHtcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICB3aWR0aDogMTAwJTtcXG4gICAgaGVpZ2h0OiAxMDAlO1xcbn1cXG5cIjsgKHJlcXVpcmUoXCIvaG9tZS9qZW5zL21qbi1mYW1vdXMvbm9kZV9tb2R1bGVzL2Nzc2lmeVwiKSkoY3NzKTsgbW9kdWxlLmV4cG9ydHMgPSBjc3M7IiwiLy8gbG9hZCBjc3NcbnJlcXVpcmUoJy4vZmFtb3VzLmNzcycpO1xucmVxdWlyZSgnLi9hcHAuY3NzJyk7XG4iXX0=
                                                                                                                     // 10597
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['mjn:famous'] = {
  famous: famous
};

})();
