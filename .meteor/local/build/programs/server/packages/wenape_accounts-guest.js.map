{"version":3,"file":"/packages/wenape:accounts-guest.js","sources":["wenape:accounts-guest/accounts-guest-client.js","wenape:accounts-guest/accounts-guest-server.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,qF;;AAEA,+B;AACA,Q;AACA,oC;AACA,mB;AACA,O;AACA,uB;AACA,kC;AACA,iD;;AAEA,oE;AACA,8C;AACA,iC;AACA,K;;AAEA,Q;AACA,wB;AACA,O;AACA,wC;AACA,6B;AACA,gI;AACA,yB;AACA,O;AACA,M;;AAEA,wD;AACA,+D;AACA,I;AACA,+B;AACA,mC;AACA,oB;AACA,oB;AACA,O;AACA,8C;AACA,+B;AACA,uC;AACA,+B;AACA,oB;AACA,O;AACA,kB;AACA,M;;AAEA,wC;AACA,8B;AACA,gB;AACA,iB;AACA,oB;AACA,uB;AACA,kB;AACA,M;AACA,uB;AACA,M;;;AAGA,kB;AACA,K;;AAEA,2B;;;;;;;;;;;;;;;;;;;;AC1DA,8C;AACA,sC;AACA,wB;AACA,2C;AACA,G;AACA,mF;AACA,a;AACA,E","sourcesContent":["// 'use strict'; reinstate when https://github.com/meteor/meteor/issues/2437 is fixed\n\nvar constructor = (function() {\n    /***\n     * Creates an instance of Guests\n     * @constructor\n     */\n    function Guests() {\n      /*settings = settings || {};\n      _.defaults(settings, this.defaultSettings);\n\n        this._notificationsCollection = new Meteor.Collection(null);\n        this._notificationTimeout = undefined;\n      this.settings = settings;*/\n    }\n\n    /***\n     * Adds a Guest User\n     */\n    Guests.prototype.add = function () {\n      if (!Meteor.userId()) {\n        res = Accounts.createUser({password: Meteor.uuid(), username: Meteor.uuid(), profile: {guest: \"guest\", name: 'Guest'}});\n        console.log(res);\n      }\n    };\n\n    /* make anonymous users kinda non-users -- just ids \n    * this allows the account-base \"Sign-in\" to still appear */\n    \n    Meteor.user = function () {\n      var userId = Meteor.userId();\n      if (!userId) {\n        return null;\n      }\n      var user = Meteor.users.findOne(userId);\n      if (user !== undefined &&\n          user.profile !== undefined &&\n          user.profile.guest) {\n        return null;\n      }\n      return user;\n    };\n\n  /*Guests.prototype.defaultSettings = {\n    hideAnimationProperties: {\n      height: 0,\n      opacity: 0,\n      paddingTop: 0,\n      paddingBottom: 0,\n      marginTop: 0\n    },\n    animationSpeed: 400\n  };*/\n\n\n    return Guests;\n})();\n\nGuests = new constructor();\n\n","Accounts.removeOldGuests = function (before) {\n  if (typeof before === 'undefined') {\n    before = new Date();\n    before.setHours(before.getHours() - 1);\n  }\n  res = Meteor.users.remove({createdAt: {$lte: before}, 'profile.guest': 'guest'});\n  return res;\n};"]}