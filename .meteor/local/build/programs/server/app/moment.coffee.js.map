{"version":3,"file":"/moment.coffee.js","sources":["moment.coffee"],"names":[],"mappings":"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","sourcesContent":["Router.configure\n\tlayoutTemplate: 'layout'\n\nRouter.map ->\n\t@route 'about',\n\t\tpath: '/'\n\n@Publisher = new Mongo.Collection 'publisher'\n@Questions = new Mongo.Collection 'questions'\n\n# API Keys\n@openTokApiKey = '45020262'\n\n@log = ->\n\tlog.history = log.history or [] # store logs to an array for reference\n\tlog.history.push arguments\n\tconsole.log Array::slice.call(arguments)  if @console\n\nif Meteor.isClient\n\tMeteor.startup ->\n\t\t# Create a guest user\n\t\tGuests.add()\n\t\tMeteor.call('createOpenTokSession', (err,result)->\n\t\t\tif err\n\t\t\t\tlog 'createOpenTokSession err',err\n\t\t\telse\n\t\t\t\t# Initialize the session\n\t\t\t\tlog 'createOpenTokSession result',result\n\t\t\t\t@session = OT.initSession result.apiKey, result.session\n\t\t\t\tlog 'session',session\n\n\t\t\t\tsession.on 'streamCreated', (event) ->\n\t\t\t\t\tlog 'streamCreated!',event\n\n\t\t\t\t\tsession.subscribe event.stream, 'video',\n\t\t\t\t\t\tinsertMode: 'append'\n\t\t\t\t\tlayout()\n\n\t\t\t\t# Connect to the session\n\t\t\t\tsession.connect result.token, (err) ->\n\t\t\t\t\tif err\n\t\t\t\t\t\tlog 'session connect err',err\n\t\t\t\t\telse\n\t\t\t\t\t\tlog 'Connected to session!'\n\t\t\t\t\t\tlayout()\n\t\t\t\t\t\tif session.capabilities.publish is 1\n\t\t\t\t\t\t\tlog 'User is capable of publishing!',session.capabilities\n\t\t\t\t\t\t\t#Session.set 'canSubscribeToStream', true\n\t\t\t\t\t\t\tSession.set 'userCanPublish', false\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tlog 'You are not able to publish a stream'\n\t\t)\n\n\t\t# Famous Globals\n\t\t@Transform = famous.core.Transform\n\n\t\t# Transitions\n\t\t@Transitionable = famous.transitions.Transitionable\n\t\t@SpringTransition = famous.transitions.SpringTransition\n\t\t@SnapTransition = famous.transitions.SnapTransition\n\n\t\t#Register Transitions\n\t\tTransitionable.registerMethod 'spring',SpringTransition\n\t\tTransitionable.registerMethod 'snap',SpringTransition\n\n\t\t#Default Session States\n\t\tSession.setDefault 'backgroundTranslation', 0\n\t\tSession.setDefault 'overlayTranslation', 0\n\t\tSession.setDefault 'introTranslation', 0\n\t\tSession.setDefault 'momentButtonTranslation', 0\n\t\tSession.setDefault 'ppLogoTranslation', -10\n\t\tSession.setDefault 'timerTranslation', 300\n\t\tSession.setDefault 'questionTranslation', -200\n\t\tSession.setDefault 'canSubscribeToStream', false\n\t\tSession.setDefault 'userCanPublish', false\n\t\tSession.setDefault 'userIsPublishing', false\n\t\tSession.setDefault 'timer', 60\n\n\t\tTemplate.about.helpers\n\t\t\tbackgroundStyles: ->\n\t\t\t\tstyles =\n\t\t\t\t\tbackgroundColor: '#f5f5f5'\n\t\t\t\t\tbackgroundImage: 'url(img/performers/01.jpg)'\n\t\t\t\t\tbackgroundRepeat: 'no-repeat'\n\t\t\t\t\tbackgroundPosition: '50% 50%'\n\t\t\t\t\tbackgroundSize: 'cover'\n\t\t\toverlayStyles: ->\n\t\t\t\tstyles =\n\t\t\t\t\tbackgroundColor: 'rgba(0,0,0,0.4)'\n\t\t\tintroStyles: ->\n\t\t\t\tstyles =\n\t\t\t\t\tbackgroundColor: '#e5e5e5'\n\t\t\t\t\ttextAlign: 'center'\n\t\t\tmomentButtonStyles: ->\n\t\t\t\tstyles =\n\t\t\t\t\tbackgroundColor: '#333333'\n\t\t\t\t\ttextAlign: 'center'\n\t\t\t\t\tcolor: '#ffffff'\n\t\t\tppLogoStyles: ->\n\t\t\t\tstyles = {}\n\t\t\ttimerStyles: ->\n\t\t\t\tbackgroundColor: '#dddddd'\n\t\t\tquestionStyles: ->\n\t\t\t\tbackgroundColor: '#666666'\n\t\t\t\tcolor: '#ffffff'\n\n\t\tTemplate.background.rendered = ->\n\t\t\tfview = FView.from(this)\n\n\t\t\tlog 'Set video layout!'\n\t\t\tvideo = this.find '#video'\n\t\t\tlog 'video',video\n\t\t\twindow.layout = TB.initLayoutContainer(video).layout\n\t\t\tlog 'layout',layout\n\n\t\t\ttarget = fview.surface || fview.view._eventInput\n\t\t\ttarget.on('click', () ->\n\t\t\t\tlog 'TARGET CLICKED',fview, target\n\n\t\t\t\tif Session.equals 'backgroundTranslation', 0 then Session.set 'backgroundTranslation', 300 else Session.set 'backgroundTranslation', 0\n\n\t\t\t\tfview.modifier.halt()\n\t\t\t\tfview.modifier.setTransform Transform.translate(0, Session.get 'backgroundTranslation'),\n\t\t\t\t\tmethod: 'spring'\n\t\t\t\t\tperiod: 1000\n\t\t\t\t\tdampingRatio: 0.3\n\t\t\t)\n\n\t\tTemplate.overlay.rendered = ->\n\t\t\tfview = FView.from(this)\n\n\t\t\ttarget = fview.surface || fview.view._eventInput\n\t\t\ttarget.on('click', () ->\n\t\t\t\tlog 'TARGET CLICKED',fview, target\n\n\t\t\t\tif Session.equals 'overlayTranslation', 0 then Session.set 'overlayTranslation', 500 else Session.set 'overlayTranslation', 0\n\n\t\t\t\tfview.modifier.halt()\n\t\t\t\tfview.modifier.setTransform Transform.translate(0, Session.get 'overlayTranslation'),\n\t\t\t\t\tmethod: 'spring'\n\t\t\t\t\tperiod: 1000\n\t\t\t\t\tdampingRatio: 0.3\n\t\t\t)\n\n\t\tTemplate.intro.rendered = ->\n\t\t\tfview = FView.from(this)\n\n\t\t\ttarget = fview.surface || fview.view._eventInput\n\t\t\ttarget.on('click', () ->\n\t\t\t\tlog 'TARGET CLICKED',fview, target\n\n\t\t\t\tif Session.equals 'introTranslation', 0 then Session.set 'introTranslation', 150 else Session.set 'introTranslation', 0\n\n\t\t\t\tfview.modifier.halt()\n\t\t\t\tfview.modifier.setTransform Transform.translate(0, Session.get 'introTranslation'),\n\t\t\t\t\tmethod: 'spring'\n\t\t\t\t\tperiod: 1000\n\t\t\t\t\tdampingRatio: 0.3\n\t\t\t)\n\n\t\tTemplate.momentButton.rendered = ->\n\t\t\tfview = FView.from(this)\n\n\t\t\ttarget = fview.surface || fview.view._eventInput\n\t\t\ttarget.on('click', () ->\n\t\t\t\tlog 'TARGET CLICKED',fview, target\n\n\t\t\t\t#Set up the session connection\n\t\t\t\tif Session.equals 'canSubscribeToStream', true and Session.equals 'userCanPublish', true and Session.equals 'userIsPublishing',false\n\t\t\t\t\tlog 'User can publish!'\n\t\t\t\t\tpublisher = OT.initPublisher('video',\n\t\t\t\t\t\tinsertMode: 'append'\n\t\t\t\t\t)\n\t\t\t\t\tlayout()\n\t\t\t\t\tpublisher.on\n\t\t\t\t\t\tstreamCreated: (e) ->\n\t\t\t\t\t\t\tlog 'publishStream created!',e\n\t\t\t\t\t\t\tSession.set 'userIsPublishing',true\n\n\t\t\t\t\t\t\t#Start the timer!\n\t\t\t\t\t\t\tclock = 60\n\t\t\t\t\t\t\ttimeLeft = ->\n\t\t\t\t\t\t\t  if clock > 0\n\t\t\t\t\t\t\t    clock--\n\t\t\t\t\t\t\t    Session.set 'timer', clock\n\t\t\t\t\t\t\t    console.log clock\n\t\t\t\t\t\t\t  else\n\t\t\t\t\t\t\t    console.log \"That's All Folks\"\n\t\t\t\t\t\t\t    #session.unpublish publisher\n\t\t\t\t\t\t\t    Meteor.clearInterval interval\n\n\t\t\t\t\t\t\tinterval = Meteor.setInterval(timeLeft, 1000)\n\t\t\t\t\t\tstreamDestroyed: (e) ->\n\t\t\t\t\t\t\tlog 'publishStream destroyed!',e\n\t\t\t\t\t\t\tSession.set 'userIsPublishing',false\n\t\t\t\t\t\t\tSession.set 'timer', 60\n\t\t\t\t\tsession.publish publisher\n\t\t\t\telse\n\t\t\t\t\tlog 'Nope!'\n\n\t\t\t\tif Session.equals 'momentButtonTranslation', 0 then Session.set 'momentButtonTranslation', 200 else Session.set 'momentButtonTranslation', 0\n\n\t\t\t\tfview.modifier.halt()\n\t\t\t\tfview.modifier.setTransform Transform.translate(0, Session.get 'momentButtonTranslation'),\n\t\t\t\t\tmethod: 'spring'\n\t\t\t\t\tperiod: 1000\n\t\t\t\t\tdampingRatio: 0.3\n\t\t\t)\n\n\t\tTemplate.ppLogo.rendered = ->\n\t\t\tfview = FView.from(this)\n\n\t\t\ttarget = fview.surface || fview.view._eventInput\n\t\t\ttarget.on('click', () ->\n\t\t\t\tlog 'TARGET CLICKED',fview, target\n\n\t\t\t\tif Session.equals 'ppLogoTranslation', -10 then Session.set 'ppLogoTranslation', -100 else Session.set 'ppLogoTranslation', -10\n\n\t\t\t\tfview.modifier.halt()\n\t\t\t\tfview.modifier.setTransform Transform.translate(Session.get('ppLogoTranslation'), -10),\n\t\t\t\t\tmethod: 'spring'\n\t\t\t\t\tperiod: 1000\n\t\t\t\t\tdampingRatio: 0.3\n\t\t\t)\n\n\t\tTemplate.timer.rendered = ->\n\t\t\tfview = FView.from(this)\n\n\t\t\ttarget = fview.surface || fview.view._eventInput\n\t\t\ttarget.on('click', () ->\n\t\t\t\tlog 'TARGET CLICKED',fview, target\n\n\t\t\t\tif Session.equals 'timerTranslation', 300 then Session.set 'timerTranslation', 100 else Session.set 'timerTranslation', 300\n\n\t\t\t\tfview.modifier.halt()\n\t\t\t\tfview.modifier.setTransform Transform.translate(Session.get('timerTranslation'), 300),\n\t\t\t\t\tmethod: 'spring'\n\t\t\t\t\tperiod: 1000\n\t\t\t\t\tdampingRatio: 0.3\n\t\t\t)\n\n\t\tTemplate.timer.helpers\n\t\t\ttimer: ->\n\t\t\t\tSession.get 'timer'\n\n\t\tTemplate.question.rendered = ->\n\t\t\tfview = FView.from(this)\n\n\t\t\ttarget = fview.surface || fview.view._eventInput\n\t\t\ttarget.on('click', () ->\n\t\t\t\tlog 'TARGET CLICKED',fview, target\n\n\t\t\t\tif Session.equals 'questionTranslation', -200 then Session.set 'questionTranslation', 0 else Session.set 'questionTranslation', -200\n\n\t\t\t\tfview.modifier.halt()\n\t\t\t\tfview.modifier.setTransform Transform.translate(0, Session.get('questionTranslation')),\n\t\t\t\t\tmethod: 'spring'\n\t\t\t\t\tperiod: 1000\n\t\t\t\t\tdampingRatio: 0.3\n\t\t\t)\n\nif Meteor.isServer\n\tMeteor.methods\n\t\tcreateOpenTokSession: () ->\n\t\t\tlog 'Meteor.userId()',Meteor.userId()\n\n\t\t\topenTokSessionOptions =\n\t\t\t\trole: 'publisher'\n\t\t\t\tdata: 'userId:' + Meteor.userId()\n\t\t\t\texpireTime: Math.round(new Date().getTime() / 1000) + 86400\n\n\t\t\ttoken = openTokClient.generateToken openTokSession, openTokSessionOptions\n\t\t\tlog 'token',token\n\t\t\tpayload =\n\t\t\t\tapiKey: openTokApiKey\n\t\t\t\tsession: openTokSession\n\t\t\t\ttoken: token\n\t\t\tpayload\n\n\tMeteor.startup ->\n\t\tlog 'Server!'\n\n\t\t# Wipe all guest accounts that are more than 24 hours old, this way people can say something once a day\n\t\tAccounts.removeOldGuests();\n\n\t\t# Change user tokens and active user every minute\n\t\tMeteor.setInterval ->\n\t\t\tlog 'Change User!'\n\t\t, 60000\n\n\t\t# Initialize OpenTokClient\n\t\t@openTokSecret = 'ce949e452e117eef38d2661e9e1824f8faddff40'\n\t\t@openTokClient = new OpenTokClient openTokApiKey, openTokSecret\n\t\tlog 'openTokClient',openTokClient\n\n\t\tlog 'createOpenTokSession!'\n\t\topenTokOptions =\n\t\t\tmediaMode: 'routed'\n\t\t\tlocation: '127.0.0.1'\n\n\t\t@openTokSession = openTokClient.createSession openTokOptions\n\t\tlog 'openTokSession',openTokSession\n"]}